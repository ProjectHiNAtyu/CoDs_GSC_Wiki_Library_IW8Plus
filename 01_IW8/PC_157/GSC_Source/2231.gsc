// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_ABFD089D57CD370DD21C", "_encstr_80C50550FA44C9" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_ABFD089D57CD370DD21C", "_encstr_80C50550FA44C9" ) ]]();

    level._effect["_encstr_BC50077EBC6F7B1102"] = loadfx( "_encstr_AA7C3084A623201B13572188EB3DD720AB448E7D2AFF51476DDBE028F146FF73BEA0AFF49987DBE7A662B0585A9A2D535380" );
    level._effect["_encstr_B7270F528B10E73478D91F2E8950FAE7C6"] = loadfx( "_encstr_8F092B489AE05F28D728B8A9588E509B4DA2E820B3FF7BA05E8E3C1B1FDF19F362CF1138EA16953977CE3C1C20" );
    level._effect["_encstr_B20C0F07A1E5908E3759CB90C35B4558FA"] = loadfx( "_encstr_B940304033B1465B83C271B88BEA3848B0FB72CC630A4B601A93F1336E95096FFE7AE8014099F9836C832B832A63F59BDBB8" );
    level._effect["_encstr_805111EB372817E2BB895B6320B95D9FC12B64"] = loadfx( "_encstr_BA6D31CDBBA3B0604738D6E8527738DBBA3B7F41739A6FA82783F942B1E1802FE732AFE39B812E388F1BA078A7C070E84BC379" );
    level.cosine = [];
    level.cosine["_encstr_B407030D9A"] = cos( 45 );
    level.cosine["_encstr_BD4C02AB"] = cos( 5 );
    level.physicssphereradius["_encstr_80F90E9B3B1ACA5737679B98FA5FA188"] = 60;
    level.physicssphereradius["_encstr_80710E6E59BA032F8849DAA7D3502298"] = 600;
    level.physicssphereradius["_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B"] = 1000;
    level.physicssphereforce["_encstr_80F90E9B3B1ACA5737679B98FA5FA188"] = 0;
    level.physicssphereforce["_encstr_80710E6E59BA032F8849DAA7D3502298"] = 3.0;
    level.physicssphereforce["_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B"] = 6.0;
    level.weaponreloadtime["_encstr_80F90E9B3B1ACA5737679B98FA5FA188"] = 2;
    level.weaponreloadtime["_encstr_80710E6E59BA032F8849DAA7D3502298"] = 4;
    level.weaponreloadtime["_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B"] = 6;
    level.gunship_speed["_encstr_B9A2058748FB5D"] = 250;
    level.gunship_speed["_encstr_A4F5078A47C398B16A"] = 120;
    scripts\engine\utility::flag_init( "_encstr_9D3A1F01B963BDB7C0198A62032543B3412FBD861F0B03977CF181CA880F6B2D28" );
    scripts\engine\utility::flag_set( "_encstr_9D3A1F01B963BDB7C0198A62032543B3412FBD861F0B03977CF181CA880F6B2D28" );
    var_0 = getentarray( "_encstr_A8BC0F5BD2E6B4B55807BE36B7E4E6ACC9", "_encstr_B8CE0BE43FC317DF690862BA48" );
    var_1 = level.mapcenter;

    if ( var_0.size )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_ABFD089D57CD370DD21C", "_encstr_98150E3EE398C3DE9780086258C94FC3" ) )
            var_1 = [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_ABFD089D57CD370DD21C", "_encstr_98150E3EE398C3DE9780086258C94FC3" ) ]]( var_0[0].origin, var_0[1].origin );
    }

    level.gunship = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_1 );
    level.gunship setmodel( "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    level.gunship.angles = ( 0, 115, 0 );
    level.gunship.owner = undefined;
    level.gunship.thermal_vision = "_encstr_9C25112CB19899817D8E342B39B52C36F55B83";
    level.gunship.enhanced_vision = "_encstr_A93E12BE568BDFC01ED0BBAB18D04B6289E00572";
    level.gunship.targetname = "_encstr_BEF216B0D8C49903E4B4ECAFDC8DE4D2381DBEDADB462B63";
    level.gunship hide();
    level.gunshipinuse = 0;
    level.gunship.deployweaponobj = getcompleteweaponname( "_encstr_A983156DB9EB4EAC5B7B47B2EBB35D9B9B0D2D0EFADA0E" );
    thread rotateplane( "_encstr_9707035F3B" );
    scripts\mp\playeractions::registeractionset( "_encstr_805D0D60058ED7DC2DBB3B484D9B6F", [ "_encstr_ADE40AEADCC2312D1B2DD12F", "_encstr_B6190C6DB4C68DB9A327CA0B6DDC", "_encstr_BEF407B95DC1B227E6", "_encstr_8B0508CE95DC1DEAC92B", "_encstr_807805775B15A2", "_encstr_A80F0EAFBBDF6B0710B68A93689853A2", "_encstr_BD840F4B0BA8CFC87975FFFBD910C79DCB", "_encstr_A9AF10E0F285CA19B35C28B0BD4FC89D8822", "_encstr_A2F40B7F9B329A401770EDA6BF" ] );
    scripts\mp\playeractions::registeractionset( "_encstr_AB010BB3AE73CD1AD2C1AA9BAC", [ "_encstr_ADE40AEADCC2312D1B2DD12F", "_encstr_B6190C6DB4C68DB9A327CA0B6DDC", "_encstr_BEF407B95DC1B227E6", "_encstr_8B0508CE95DC1DEAC92B", "_encstr_BD840F4B0BA8CFC87975FFFBD910C79DCB", "_encstr_A2F40B7F9B329A401770EDA6BF" ] );
    level.gunshipqueue = [];
    init_gunship_intro_anims();
    init_gunship_vo();
    scripts\cp_mp\utility\killstreak_utility::registervisibilityomnvarforkillstreak( "_encstr_ABFD089D57CD370DD21C", "_encstr_9707035F3B", 9 );
}

weapongivengunship( var_0 )
{
    return 1;
}

#using_animtree("_encstr_93DC0DCD1B272D3847AF5BED23B2C6");

#using_animtree("_encstr_A40101");

#using_animtree("_encstr_A40101");

#using_animtree("_encstr_A40101");

#using_animtree("_encstr_A40101");

init_gunship_intro_anims()
{
    level.scr_animtree["_encstr_ABFD089D57CD370DD21C"] = #animtree;
    level.scr_anim["_encstr_ABFD089D57CD370DD21C"]["_encstr_A86F0E69DBE610BB025B1F7B0BFBFEA8"] = %_encstr_81E315355171C1F710183A537947ABDEA72F094D03CA58;
    level.scr_animname["_encstr_ABFD089D57CD370DD21C"]["_encstr_A86F0E69DBE610BB025B1F7B0BFBFEA8"] = "_encstr_81E315355171C1F710183A537947ABDEA72F094D03CA58";
    level.scr_anim["_encstr_ABFD089D57CD370DD21C"]["_encstr_987C1257ED0D08BB2F8396588AB36E30E951F9F9"] = %_encstr_BA4119AD0EBEB0B11A859336A59598CC18F55AE64727EDEB58B1D1;
    level.scr_animname["_encstr_ABFD089D57CD370DD21C"]["_encstr_987C1257ED0D08BB2F8396588AB36E30E951F9F9"] = "_encstr_BA4119AD0EBEB0B11A859336A59598CC18F55AE64727EDEB58B1D1";
    level.scr_anim["_encstr_ABFD089D57CD370DD21C"]["_encstr_B71713A79520902B8C8849B7CD59C64DD1727820B7"] = %_encstr_8241198FD0512E5EC0BB6A30CC48F7A642370B5DCB465F200FBA01;
    level.scr_animname["_encstr_ABFD089D57CD370DD21C"]["_encstr_B71713A79520902B8C8849B7CD59C64DD1727820B7"] = "_encstr_8241198FD0512E5EC0BB6A30CC48F7A642370B5DCB465F200FBA01";
    level.scr_anim["_encstr_ABFD089D57CD370DD21C"]["_encstr_A6B10E0C0BFB7A18377B292B52F753F8"] = %_encstr_ADC315B8136FBF101C611D2981875A5E7A5911216ABB63;
    level.scr_animname["_encstr_ABFD089D57CD370DD21C"]["_encstr_A6B10E0C0BFB7A18377B292B52F753F8"] = "_encstr_ADC315B8136FBF101C611D2981875A5E7A5911216ABB63";
    level.gunship_crashanimlength = getanimlength( level.scr_anim["_encstr_ABFD089D57CD370DD21C"]["_encstr_A6B10E0C0BFB7A18377B292B52F753F8"] );
}

init_gunship_vo()
{
    game["_encstr_B8DA073D799798C7C7"]["_encstr_89110FFF2D585F945B83892218AF0ED791"] = "_encstr_89110FFF2D585F945B83892218AF0ED791";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A66F176FE378D2B3A313D11B1808D74D48CFF3E07F10DB4FDD"] = "_encstr_A4A41D3BABCDB9435AE0D7CDD237D9C6CAEB9573CADA2FD7CD07B7478E95C8";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A61316ECEACDDCA12D83AFB6ABD88E5ABE37E0F6A31DB2C8"] = "_encstr_B3D31CB775CD07DC1338417A084193279ED5362D810A6F2209A8FBE3A0B9";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9C361157354DA3F0B020D72FC028B42939431B"] = "_encstr_B6910C6AB0C5CAB3203F5F905B6B";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8A8B1076ABE6CD862DE0AFC4C291EB862D47"] = "_encstr_9F1D0D69D33BC6382C70D7BB3192D8";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A4951CECEA9BE61AD2E0F58E85B6A5CD9DAF1985ADB09DACAF8D967643A3"] = "_encstr_89801BA77B2B7E53F30BC7120F1DA7F215E73091E3FEB8106852AFCE8F";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B7E81DA7D3080BF2DB891F8B93F2AA5E18FE1FAE48D8A7FA385BFFC3EBA5D2"] = "_encstr_B6801BB70DEDE85BCF63B6D95AF78710474FE53B811618132F9A8E2B37";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B7271C528B10E73478D91F3C935B3CCBCC66DABA107F7FAFF1F15D318548"] = "_encstr_AF801BD865AEA332D048AFCD2FF5E377CD8073D3C9E808A9872A60BA02";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_97E815CEBAE6DC34A5E0D7ADA5E66E5AB12BEBC6F6D8DA"] = "_encstr_97E815CEBAE6DC34A5E0D7ADA5E66E5AB12BEBC6F6D8DA";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B7270F528B10E73478D91F2E8950FAE7C6"] = "_encstr_A82F16C0AB65E708AF60B82949E7F08F4C9140E0823A73A3";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A6BE17298B108F2B678AFF5337132392496A2AC0872B23F8F5"] = "_encstr_89C0154733E8EB123B69FFB3BB51AA3160DE6A1AA3988D";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_87A316D1632ED873DA93E709AAA2C971EAFF38288E8CD03D"] = "_encstr_A18D14765D73E6432D1CFA932B63ED0B917DA1C0B6B5";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_93121624CB727780E14381E2BE0DF8F71B7729B8A6AA1349"] = "_encstr_AD9C142F37025EA899EA164B5774589F7A373D03CF5A";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_87BE11F74DADA81B8F23F6792B874EA884BE0F"] = "_encstr_B7030EEA584EAFF8B0CB31F7452003B1";
}

tryusegunship()
{
    var_0 = scripts\cp_mp\utility\killstreak_utility::createstreakinfo( "_encstr_ABFD089D57CD370DD21C", self );
    return tryusegunshipfromstruct( var_0 );
}

tryusegunshipfromstruct( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );

    if ( isdefined( level.killstreaktriggeredfunc ) )
    {
        if ( !level [[ level.killstreaktriggeredfunc ]]( var_0 ) )
            return 0;
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_936006576AC048BA", "_encstr_BA8311EBBB38A3FA5B79675F0B8981C7304067" ) )
        level thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_936006576AC048BA", "_encstr_BA8311EBBB38A3FA5B79675F0B8981C7304067" ) ]]( self, "_encstr_ADB515631713A858F035017B10CBD9BEF8D83F462AA3D7" );

    var_1 = scripts\cp_mp\killstreaks\killstreakdeploy::streakdeploy_doweapontabletdeploy( var_0, ::weapongivengunship );

    if ( !istrue( var_1 ) )
        return 0;

    if ( isdefined( level.killstreakbeginusefunc ) )
    {
        if ( !level [[ level.killstreakbeginusefunc ]]( var_0 ) )
        {
            var_0 notify( "_encstr_8260276F8848A4FB39EE87BE5A476279D060F7EB70E1DFE37B85CC3935EB3B349858CF0FD83948AA5D" );
            return 0;
        }
    }

    if ( istrue( level.gunshipinuse ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) )
            self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) ]]( "_encstr_B29B22930315913F13256D2B09A35621C4364017428E7E99F82BE788978F99B74B8B2760" );

        var_0 notify( "_encstr_8260276F8848A4FB39EE87BE5A476279D060F7EB70E1DFE37B85CC3935EB3B349858CF0FD83948AA5D" );
        return 0;
    }

    if ( level.gameended )
    {
        var_0 notify( "_encstr_8260276F8848A4FB39EE87BE5A476279D060F7EB70E1DFE37B85CC3935EB3B349858CF0FD83948AA5D" );
        return 0;
    }

    var_2 = gunship_startuse( self, var_0 );

    if ( !istrue( var_2 ) )
        return 0;

    return var_2;
}

gunship_monitormanualplayerexit( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_94CC1EC21B1BDEEE25A53256B4A5D88D37D1275985D605B1C22F59C9A2C3A5A3" ) )
        self thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_94CC1EC21B1BDEEE25A53256B4A5D88D37D1275985D605B1C22F59C9A2C3A5A3" ) ]]();

    self waittill( "_encstr_8CDA0F40BF7498F74B9A4D4734B029E0B4" );
    thread gunship_leave( var_0 );
}

gunship_startuse( var_0, var_1 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    if ( isdefined( level.gunshipplayer ) )
        return 0;

    var_2 = randomint( 360 );
    var_3 = 9000;
    var_4 = cos( var_2 ) * var_3;
    var_5 = sin( var_2 ) * var_3;
    var_6 = 8000;
    var_7 = vectornormalize( ( var_4, var_5, var_6 ) );
    var_7 = var_7 * var_6;
    level.gunshipinuse = 1;

    if ( scripts\common\utility::iscp() )
        var_0.start_position = var_0.origin;

    var_8 = gunship_playintro( var_0, var_1, var_2, var_7 );

    if ( !isdefined( var_8 ) || var_8 == 0 )
    {
        level.gunshipinuse = 0;
        return 0;
    }

    var_9 = gunship_spawn( var_0, var_1, var_2, var_7 );

    if ( !isdefined( var_9 ) )
    {
        level.gunshipinuse = 0;
        return 0;
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) )
        thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) ]]( "_encstr_AA180D4B3A8DC840822FDDEFB38A1F", var_0 );

    if ( getdvarint( "_encstr_93570B93F4A9629272A825B426" ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_AAB0079B102F47FF38", "_encstr_BD07120271788C527B2D53FB7B9EABFFF0FDB5C7" ) )
            var_0 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_AAB0079B102F47FF38", "_encstr_BD07120271788C527B2D53FB7B9EABFFF0FDB5C7" ) ]]( 0 );
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_9F1B1AA9C213557B261381B32E1719839BDA6373CB4F77E88DE197B1" ) )
        var_9 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_9F1B1AA9C213557B261381B32E1719839BDA6373CB4F77E88DE197B1" ) ]]( var_9.streakinfo.streakname, "_encstr_B2860FEF13897ACB10E3FFC6F871C1E25E", var_0 );

    scripts\cp_mp\utility\weapon_utility::setlockedoncallback( var_9, ::gunship_lockedoncallback );
    scripts\cp_mp\utility\weapon_utility::setlockedonremovedcallback( var_9, ::gunship_lockedonremovedcallback );
    var_9 thread gunship_attachgunner( var_0 );
    var_9 thread gunship_watchchangeweapons( var_0 );
    var_9 thread gunship_watchweaponfired( var_0 );
    var_9 thread gunship_watchthermaltoggle( var_0 );
    var_9 thread gunship_watchdamage( var_0 );
    var_9 thread gunship_watchtimeout( var_0 );
    var_9 thread set_up_coop_push( var_0 );
    var_9 thread set_up_pilots( var_0, "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_9 thread set_up_pilots( var_0, "_encstr_B2170C4AD884CDC823B9DB9D9F42" );
    var_9 thread set_up_pilots( var_0, "_encstr_8CD0124A97D7F07BAD07C8C342FAA010C490DD5B" );
    var_9 thread set_up_pilots( var_0, "_encstr_825E117CC30B556FA230E2EADE079FCD2897E8" );
    var_9 thread gunship_watchendgame( var_0 );
    var_9 thread gunship_playpilotfx( var_0 );
    var_9 thread gunship_linklightfxent();
    var_9 thread gunship_linkwingfxents();
    var_9 thread gunship_monitormanualplayerexit( var_0 );
    var_9 thread gunship_trackvelocity( var_0 );
    var_9 thread gunship_watchtargets( var_0 );
    var_9 thread gunship_watchkills( var_0 );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B20E070DACE628057F", "_encstr_A8DE16A1C2DC8C63B292B936F6D696B9EC35474B9B9D2BE4" ) )
        var_9 thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B20E070DACE628057F", "_encstr_A8DE16A1C2DC8C63B292B936F6D696B9EC35474B9B9D2BE4" ) ]]( ::gunship_handlemissiledetection );

    var_9 playloopsound( "_encstr_BCD910D2EE1CEBB5DCF516D8C4CC03EBB138" );
    return 1;
}

gunship_lockedoncallback()
{
    scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_97E815CEBAE6DC34A5E0D7ADA5E66E5AB12BEBC6F6D8DA" );
    scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_showwarning( "_encstr_AFFA0F6BB437B9A5C62B62BD36B54B733B", self.owner, "_encstr_B6CE0B0BB00A031B7B88355740" );
}

gunship_lockedonremovedcallback()
{
    scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_hidewarning( "_encstr_AFFA0F6BB437B9A5C62B62BD36B54B733B", self.owner, "_encstr_B6CE0B0BB00A031B7B88355740" );
}

gunship_playintro( var_0, var_1, var_2, var_3 )
{
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0 disablephysicaldepthoffieldscripting();
    var_0 gunship_allowstances( 0 );
    var_4 = 0;

    if ( !var_4 )
    {
        var_0 scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
        var_0 scripts\mp\playeractions::allowactionset( "_encstr_805D0D60058ED7DC2DBB3B484D9B6F", 0 );
    }

    var_5 = "_encstr_A86F0E69DBE610BB025B1F7B0BFBFEA8";
    var_7 = level.scr_anim[var_1.streakname][var_5];
    var_8 = getanimlength( var_7 );

    if ( gunship_islargemap() )
    {
        if ( level.gametype == "_encstr_BD19047616EB" )
        {
            if ( isdefined( level.hqmidpoint ) )
                level.gunship.origin = level.hqmidpoint;
        }
        else if ( isdefined( level.set_up_blockade_gate_anims ) )
            level.gunship.origin = level.set_up_blockade_gate_anims;
        else
            level.gunship.origin = var_0.origin;
    }

    var_9 = "_encstr_940B1C438913CAF958EB2C179310FA0FCFE11ABAF3F947AF8247080FBF18";

    if ( scripts\cp_mp\utility\player_utility::getplayersuperfaction( var_0 ) )
        var_9 = "_encstr_9790213B591AC17DD69663BE58B4E47D0BD843C2C91B4BCA13CC037D6D6EAFB216E63A";

    level.gunship_intromodel = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", level.gunship.origin );
    level.gunship_intromodel setmodel( var_9 );
    level.gunship_intromodel.angles = level.gunship.angles;
    level.gunship_intromodel setotherent( var_0 );
    level.gunship_intromodel.animname = var_1.streakname;
    level.gunship_intromodel.owner = var_0;

    if ( !var_4 )
    {
        foreach ( var_11 in level.players )
        {
            if ( var_11 != var_0 )
                level.gunship_intromodel hidefromplayer( var_11 );
        }

        level.gunship_intromodel thread gunship_hideintromodelonplayerconnect();
    }

    var_13 = 2000;

    switch ( level.mapname )
    {
        case "_encstr_B7FF08B607EB1B853BCA":
        case "_encstr_94020B5F680693E2154DD156A1":
            var_13 = 500;
            break;
    }

    level.gunship_intromodel linkto( level.gunship, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", var_3 - ( 0, 0, var_13 ), ( 0, var_2 + 90, 0 ) );
    level.gunship_intromodel thread set_up_minigun( "_encstr_8A820B4696CDB1ED3737AC1B3A", var_1 );
    level.gunship_intromodel thread set_up_minigun( "_encstr_B2170C4AD884CDC823B9DB9D9F42", var_1 );
    level.gunship_intromodel thread set_up_minigun( "_encstr_8CD0124A97D7F07BAD07C8C342FAA010C490DD5B", var_1 );
    waitframe();

    if ( !isdefined( level.gunship_intromodel ) )
        return 0;

    level.gunship_intromodel scripts\common\anim::setanimtree();
    level.gunship_intromodel.scenenode = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", level.gunship_intromodel.origin );
    level.gunship_intromodel.scenenode.angles = level.gunship_intromodel.angles;
    level.gunship_intromodel.scenenode setmodel( "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    level.gunship_intromodel playsoundtoplayer( "_encstr_8BA41396DDE0FAD6E6F5856C13CCC0EBA5B98E93DB", var_0 );

    if ( !var_4 )
    {
        var_0 cameralinkto( level.gunship_intromodel, "_encstr_BA010BA012DFB703A379A39542", 0, 1 );
        var_0 painvisionoff();
        var_0 scripts\cp_mp\utility\killstreak_utility::killstreak_savenvgstate();
        level.gunship_intromodel setscriptablepartstate( "_encstr_A4660D6C1BDEBAC89BF52DB93A39BD", "_encstr_9707035F3B", 0 );
        level.gunship_intromodel setscriptablepartstate( "_encstr_B3310D7327C563B6290E844D4350D7", "_encstr_9707035F3B", 0 );
        level.gunship_intromodel thread gunship_startintroshake( var_5, var_8, var_0 );
        level.gunship_intromodel thread gunship_queuecamerazoom( var_8, var_0 );
        level.gunship_intromodel thread gunship_playdofintroeffects();
    }

    var_0 scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_9BE405709A9D69" + var_1.streakname, 1 );
    level.gunship_intromodel.scenenode scripts\common\anim::anim_single_solo( level.gunship_intromodel, var_5 );

    if ( !isdefined( level.gunship_intromodel ) )
        return 0;

    level.gunship_intromodel notify( "_encstr_BD3F1220CF767BC19A1A504575A267E0AE6330E8" );

    if ( !var_4 )
    {
        var_0 disablephysicaldepthoffieldscripting();
        scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
        var_0 scripts\mp\playeractions::allowactionset( "_encstr_805D0D60058ED7DC2DBB3B484D9B6F", 1 );
    }

    return 1;
}

set_up_minigun( var_0, var_1 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_BD3F1220CF767BC19A1A504575A267E0AE6330E8" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = level.gunship_intromodel.owner;
    var_2 waittill( var_0 );

    if ( var_0 == "_encstr_8A820B4696CDB1ED3737AC1B3A" )
        level.gunshipinuse = 0;

    set_ui_omnvar_for_relics( var_2, var_1 );
}

set_ui_omnvar_for_relics( var_0, var_1 )
{
    var_2 = 0;

    if ( isdefined( var_0 ) && !var_2 )
    {
        var_0 cameraunlink();
        var_0 scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
        var_0 disablephysicaldepthoffieldscripting();
        var_0 scripts\mp\playeractions::allowactionset( "_encstr_805D0D60058ED7DC2DBB3B484D9B6F", 1 );
        var_0 scripts\cp_mp\utility\killstreak_utility::_setvisibiilityomnvarforkillstreak( var_1.streakname, "_encstr_9819045FD029" );
        var_0 setclientomnvar( "_encstr_8AE30DEF70D621722BD65A89539B3A", 0 );
        var_0 painvisionon();
        var_0 scripts\cp_mp\utility\killstreak_utility::killstreak_restorenvgstate();
        var_0 visionsetkillstreakforplayer( "_encstr_A40101" );
        level thread scripts\cp_mp\utility\game_utility::fadetoblackforplayer( var_0, 0 );
    }

    var_1 notify( "_encstr_8260276F8848A4FB39EE87BE5A476279D060F7EB70E1DFE37B85CC3935EB3B349858CF0FD83948AA5D" );
    self setscriptablepartstate( "_encstr_A4660D6C1BDEBAC89BF52DB93A39BD", "_encstr_9819045FD029", 0 );
    self setscriptablepartstate( "_encstr_B3310D7327C563B6290E844D4350D7", "_encstr_9819045FD029", 0 );
    self delete();
}

gunship_hideintromodelonplayerconnect()
{
    self endon( "_encstr_A3750609A5E61883" );
    self.owner endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );

    for (;;)
    {
        level waittill( "_encstr_87940A7F075A88E8ABD37951", var_0 );
        self hidefromplayer( var_0 );
    }
}

gunship_playdofintroeffects()
{
    self endon( "_encstr_A3750609A5E61883" );
    self.owner endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self.owner enablephysicaldepthoffieldscripting();
    self.owner setphysicaldepthoffield( 1.4, 20, 10, 10 );
    wait 0.1;
    self.owner setphysicaldepthoffield( 0.125, 1500, 5, 10 );
    wait 3;
    self.owner setphysicaldepthoffield( 0.125, 1000, 5, 10 );
    wait 1.5;
    self.owner setphysicaldepthoffield( 5.6, 5000, 1, 1 );
}

gunship_startintroshake( var_0, var_1, var_2 )
{
    self endon( "_encstr_A3750609A5E61883" );
    var_3 = var_1;
    var_4 = 0.45;
    var_5 = 0.05;

    while ( var_3 > 0 )
    {
        earthquake( var_4, var_5, self.origin, 5000 );
        var_4 = var_4 - 0.01;

        if ( var_4 <= 0.12 )
            var_4 = 0.12;

        var_3 = var_3 - var_5;
        wait( var_5 );
    }
}

gunship_queuecamerazoom( var_0, var_1 )
{
    self endon( "_encstr_A3750609A5E61883" );
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_0 - 0.2 );
    var_1 visionsetkillstreakforplayer( "_encstr_A4C9198D39AB5AE62BD73893CA19C2A3DEC9AFDCD8B05B4FF6B7DA", 0.1 );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 0.1 );
    level thread scripts\cp_mp\utility\game_utility::fadetoblackforplayer( var_1, 1, 0.1 );
}

gunship_returnplayer( var_0 )
{
    if ( isdefined( level.killstreakfinishusefunc ) )
        level thread [[ level.killstreakfinishusefunc ]]( self.streakinfo );

    if ( isdefined( var_0 ) )
    {
        var_1 = 0;

        if ( !var_1 )
        {
            var_0 scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
            var_0 scripts\mp\playeractions::allowactionset( "_encstr_AB010BB3AE73CD1AD2C1AA9BAC", 1 );
            var_0 gunship_allowstances( 1 );
        }

        var_0 setclientomnvar( "_encstr_9CC71B7B604E07C15BA0322B05A368D8AE4413032B988ECB600288C737", 0 );
        var_0 visionsetthermalforplayer( "_encstr_A40101" );
        var_0 scripts\cp_mp\utility\player_utility::setthermalvision( 0 );
        var_0 scripts\cp_mp\utility\killstreak_utility::_setvisibiilityomnvarforkillstreak( self.streakinfo.streakname, "_encstr_9819045FD029" );
        var_0 setclientomnvar( "_encstr_8AE30DEF70D621722BD65A89539B3A", 0 );
        var_0 stoploopsound();
        var_0 visionsetkillstreakforplayer( "_encstr_A40101" );
        var_0 clearclienttriggeraudiozone( 0.5 );
        var_0 painvisionon();
        var_0 scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
        var_0 scripts\cp_mp\utility\killstreak_utility::killstreak_restorenvgstate();
        var_0.usinggunship = undefined;

        if ( getdvarint( "_encstr_93570B93F4A9629272A825B426" ) )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_AAB0079B102F47FF38", "_encstr_BD07120271788C527B2D53FB7B9EABFFF0FDB5C7" ) )
                var_0 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_AAB0079B102F47FF38", "_encstr_BD07120271788C527B2D53FB7B9EABFFF0FDB5C7" ) ]]( 1 );
        }

        if ( var_0 scripts\cp_mp\utility\player_utility::_isalive() )
        {
            var_0 scripts\cp_mp\utility\inventory_utility::_giveweapon( level.gunship.deployweaponobj );
            var_0 scripts\cp_mp\utility\inventory_utility::_switchtoweaponimmediate( level.gunship.deployweaponobj );
        }

        if ( !var_1 )
            var_0 thread gunship_restoreplayerweapon( self.streakinfo );

        var_0 unlink();

        if ( isdefined( var_0.gunship_cloudsfx ) )
            var_0.gunship_cloudsfx delete();
    }

    gunship_lockedonremovedcallback();

    if ( isdefined( self.enemytargetmarkergroup ) )
        scripts\cp_mp\targetmarkergroups::targetmarkergroup_off( self.enemytargetmarkergroup );

    if ( isdefined( self.friendlytargetmarkergroup ) )
        scripts\cp_mp\targetmarkergroups::targetmarkergroup_off( self.friendlytargetmarkergroup );

    if ( isdefined( level.gunship_intromodel ) )
        level.gunship_intromodel delete();

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_ABFD089D57CD370DD21C", "_encstr_B73E0B3D9399338DF38307DB88" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_ABFD089D57CD370DD21C", "_encstr_B73E0B3D9399338DF38307DB88" ) ]]( var_0 );

    level.gunshipinuse = 0;
}

gunship_restoreplayerweapon( var_0 )
{
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_0 notify( "_encstr_8260276F8848A4FB39EE87BE5A476279D060F7EB70E1DFE37B85CC3935EB3B349858CF0FD83948AA5D" );

    if ( scripts\cp_mp\utility\player_utility::_isalive() )
    {
        scripts\common\utility::allow_fire( 0 );
        wait 0.05;
        scripts\cp_mp\utility\inventory_utility::_switchtoweapon( self.lastdroppableweaponobj );
        wait 0.767;
        scripts\cp_mp\utility\inventory_utility::_takeweapon( "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B" );
        scripts\cp_mp\utility\inventory_utility::_takeweapon( "_encstr_80710E6E59BA032F8849DAA7D3502298" );
        scripts\cp_mp\utility\inventory_utility::_takeweapon( "_encstr_80F90E9B3B1ACA5737679B98FA5FA188" );
        scripts\cp_mp\utility\inventory_utility::_takeweapon( level.gunship.deployweaponobj );
        scripts\common\utility::allow_fire( 1 );
        scripts\common\utility::allow_weapon_switch( 1 );
    }
}

gunship_watchdamage( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self.damagetaken = 0;
    self.attractor = missile_createattractorent( self, 1000, 4096 );

    for (;;)
    {
        self waittill( "_encstr_B8BE07320B5B16ECAC", var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10 );
        var_11 = undefined;

        if ( isdefined( level.teambased ) && isplayer( var_2 ) && ( var_2.team == self.team && ( !isdefined( var_11 ) || !var_11 ) ) )
            continue;

        if ( var_5 == "_encstr_A88211C92CA36712F335C480B96EE5B4143049" || var_5 == "_encstr_9E0A12A801F1A13344CE341769AE337BB97150B1" || var_5 == "_encstr_9BE3150DAD1C47870999C0F8AF5C37E55EDEC7E1CD5543" )
            continue;

        if ( isdefined( self.owner ) && self.owner isusinggunship() )
        {
            var_12 = "_encstr_8BA90608F481F0DB";

            if ( isexplosivedamagemod( var_5 ) )
            {
                if ( ceil( var_1 / self.maxhealth ) >= 0.33 )
                {
                    self.owner earthquakeforplayer( 0.25, 0.2, self.camera.origin, 150 );
                    self.owner playrumbleonentity( "_encstr_A4BE0D23B06BC2D995BEA1B258CECB" );
                    var_12 = "_encstr_BD4606EBD8DE5619";
                }
                else
                {
                    self.owner earthquakeforplayer( 0.15, 0.15, self.camera.origin, 150 );
                    self.owner playrumbleonentity( "_encstr_9C4F0D87B1F0F9E23D3733DFBF531B" );
                }
            }

            thread gunship_screeninterference( 0.2, var_12 );
        }

        self.wasdamaged = 1;
        var_13 = undefined;

        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_A9F2200258993DD7E9EB3E39F5B137BDF140487AB8116A73C3C501230D394F860F88" ) )
            var_13 = self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_A9F2200258993DD7E9EB3E39F5B137BDF140487AB8116A73C3C501230D394F860F88" ) ]]( var_2, var_10, var_5, var_1, self.maxhealth, 4, 5, 25, 0, 350 );

        if ( isplayer( var_2 ) )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B8BE07320B5B16ECAC", "_encstr_BDBD15BFDFCF2FABBDEDBE3058921F78ADBA11AE9E413B" ) )
                var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B8BE07320B5B16ECAC", "_encstr_BDBD15BFDFCF2FABBDEDBE3058921F78ADBA11AE9E413B" ) ]]( "_encstr_8CFB0986B4E856B8EA960E" );
        }

        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_AA2D0E7B4FA16413DBB2BD9E585157B3" ) )
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_AA2D0E7B4FA16413DBB2BD9E585157B3" ) ]]( var_2, var_10, self, var_5, var_13 );

        if ( isdefined( var_2.owner ) && isplayer( var_2.owner ) )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B8BE07320B5B16ECAC", "_encstr_BDBD15BFDFCF2FABBDEDBE3058921F78ADBA11AE9E413B" ) )
                var_2.owner [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B8BE07320B5B16ECAC", "_encstr_BDBD15BFDFCF2FABBDEDBE3058921F78ADBA11AE9E413B" ) ]]( "_encstr_8CFB0986B4E856B8EA960E" );
        }

        self.damagetaken = self.damagetaken + var_13;
        self.currenthealth = self.maxhealth - self.damagetaken;

        if ( isdefined( self.owner ) && self.owner isusinggunship() )
            var_0 setclientomnvar( "_encstr_AA4F159574D9FF084CAB88A8CB9DC13721DC05178DC3A1", self.currenthealth / self.maxhealth );

        if ( self.currenthealth <= 500 && self.currentdamagestate == 0 )
        {
            self.currentdamagestate = 1;
            self setscriptablepartstate( "_encstr_B1291298F623F2EB460BD60BEC59FAD85A76343A", "_encstr_9707035F3B" );

            if ( isdefined( self.owner ) && self.owner isusinggunship() )
            {
                self.flashlight setscriptablepartstate( "_encstr_8B2E14E8779D410DF209E57F9DAA7F09C73B3050FB3C", "_encstr_9707035F3B" );
                self.owner scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_A4951CECEA9BE61AD2E0F58E85B6A5CD9DAF1985ADB09DACAF8D967643A3" );
            }
        }
        else if ( self.currenthealth <= 250 && self.currentdamagestate == 1 )
        {
            self.currentdamagestate = 2;
            self setscriptablepartstate( "_encstr_B1291298F623F2EB460BD60BEC59FAD85A76343A", "_encstr_9819045FD029" );
            self setscriptablepartstate( "_encstr_97BC13D218214F716990429AB8B3B9D7F975515DA1", "_encstr_9707035F3B" );

            if ( isdefined( self.owner ) && self.owner isusinggunship() )
            {
                self.flashlight setscriptablepartstate( "_encstr_B4B01536B0DA2B3958F52358D616ECB2BEB5AC32A55D6B", "_encstr_9707035F3B" );
                self.owner scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_B7E81DA7D3080BF2DB891F8B93F2AA5E18FE1FAE48D8A7FA385BFFC3EBA5D2" );
                self.owner playlocalsound( "_encstr_A35A18D883CF1FB0EA93F92FEC2618D7C71AD6C30AC3C0A855DF" );
            }
        }
        else if ( self.currenthealth <= 0 && self.currentdamagestate == 2 )
        {
            self.currentdamagestate = 3;
            self setscriptablepartstate( "_encstr_97BC13D218214F716990429AB8B3B9D7F975515DA1", "_encstr_9819045FD029" );
            self setscriptablepartstate( "_encstr_B77D0AC6F69B8EE40B5A3637", "_encstr_9819045FD029" );
            thread gunship_startengineblowoutfx();

            if ( isdefined( self.owner ) && self.owner isusinggunship() )
            {
                self.flashlight setscriptablepartstate( "_encstr_9C9C141B2CADB29C0BAF4685B60B762BFA432B0B3BF2", "_encstr_9707035F3B" );
                self.owner scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_B7271C528B10E73478D91F3C935B3CCBCC66DABA107F7FAFF1F15D318548" );
            }
        }

        if ( self.damagetaken >= self.maxhealth )
        {
            var_14 = self.streakinfo.streakname;
            var_15 = undefined;
            var_16 = "_encstr_B9B80B6A8196E3AA40B32D34E7" + var_14;
            var_17 = undefined;
            var_18 = "_encstr_9B6B130BD76C8DE7FB24BE657136F4CA8543935739" + var_14;
            var_19 = 1;

            if ( isplayer( var_2 ) )
            {
                if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) )
                    thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) ]]( var_18, var_2 );
            }

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B8BE07320B5B16ECAC", "_encstr_A2ED1317D8C4D9726106DB5265235AB3287093A760" ) )
                var_20 = self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B8BE07320B5B16ECAC", "_encstr_A2ED1317D8C4D9726106DB5265235AB3287093A760" ) ]]( var_14, var_2, var_10, var_15, var_1, var_16, var_17, var_18, var_19 );

            thread gunship_crash( 8, var_0 );
        }
    }
}

gunship_startengineblowoutfx()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self.leftwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9707035F3B" );
    self.leftwingfxent setscriptablepartstate( "_encstr_A34112C47B32BCEB32B06B58EC56EB43CA85CE5E", "_encstr_9707035F3B" );
    var_0 = randomfloatrange( 0.5, 1 );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_0 );
    self.rightwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9707035F3B" );
    self.rightwingfxent setscriptablepartstate( "_encstr_A34112C47B32BCEB32B06B58EC56EB43CA85CE5E", "_encstr_9707035F3B" );
}

gunship_watchtimeout( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( self.timeout );
    thread gunship_leave( var_0 );
}

set_up_coop_push( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    thread gunship_leave( var_0 );
}

gunship_leave( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self notify( "_encstr_982D088DCA2CD95ADCB3" );
    self unlink();
    self rotateroll( 30, 3 );
    var_1 = self.angles;
    var_2 = anglestoforward( var_1 );

    if ( isdefined( self.owner ) )
        self.owner scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_A4D1102B32172DE0CBE4374F0DF5F863EF3B", 1 );

    gunship_returnplayer( var_0 );
    self moveto( self.origin + var_2 * 50000, 10, 5 );
    gunship_waittilldestination( self.origin + var_2 * 50000 );
    gunship_removeplane( 0 );
}

gunship_waittilldestination( var_0 )
{
    while ( isdefined( self ) && self.origin != var_0 )
        waitframe();
}

set_up_pilots( var_0, var_1 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0 waittill( var_1 );
    thread gunship_crash( 8, var_0 );
}

gunship_watchendgame( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0 scripts\cp_mp\utility\killstreak_utility::_setvisibiilityomnvarforkillstreak( self.streakinfo.streakname, "_encstr_9819045FD029" );
    var_0 setclientomnvar( "_encstr_8AE30DEF70D621722BD65A89539B3A", 0 );
}

gunship_trackvelocity( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self.velocity = ( 0, 0, 0 );

    for (;;)
    {
        self.lastorigin = self.origin;
        wait( level.framedurationseconds );
        self.velocity = ( self.origin - self.lastorigin ) / level.framedurationseconds;
    }
}

gunship_spawn( var_0, var_1, var_2, var_3 )
{
    var_4 = "_encstr_8C631FECCAA11CBED64B8DF558A5E4F5586C1A0B271BB45613330CFAE6D60B3663";

    if ( scripts\cp_mp\utility\player_utility::getplayersuperfaction( var_0 ) )
        var_4 = "_encstr_A21724D5699C22EFA0C3B29837E988E94BBF04BF3B2857BDFF0B398777697784E1212979535D";

    var_5 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", level.gunship.origin );
    var_5 setmodel( var_4 );
    var_5 setcandamage( 1 );
    var_5.currenthealth = 1000;
    var_5.maxhealth = var_5.currenthealth;
    var_5.health = 99999;
    var_5.owner = var_0;
    var_5.team = var_0.team;
    var_5.timeout = 45;
    var_5.currentdamagestate = 0;
    var_5 scripts\mp\sentientpoolmanager::registersentient( "_encstr_B2860FEF13897ACB10E3FFC6F871C1E25E", var_0, undefined, undefined, 1, 0 );
    var_5.flaresreservecount = 2;
    var_5.streakinfo = var_1;
    var_5 scriptmoveroutline();
    var_5 scriptmoverthermal();
    var_5 setotherent( var_0 );
    var_8 = undefined;

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A47205E8C28D13", "_encstr_B1B0107EA86179137789A2249886F3E006E5" ) )
        var_8 = var_5 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A47205E8C28D13", "_encstr_B1B0107EA86179137789A2249886F3E006E5" ) ]]( "_encstr_8C6F165AD8F6DCD7DA969BD2D62C83AFC893DB8337D04B1C", var_5.team, 1, 1, 1 );

    var_5.minimapid = var_8;
    var_5 linkto( level.gunship, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", var_3, ( 0, var_2 + 90, -30 ) );
    level notify( "_encstr_943D15BA1F14672946051A5063872ADE5F39E220E1B8F3", var_5 );
    return var_5;
}

gunship_updateoverlaycoords( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    wait 0.05;
    thread gunship_updateplanemodelcoords( var_0 );
    thread gunship_updateplayerpositioncoords( var_0 );
    thread gunship_updateaimingcoords( var_0 );
}

gunship_updateplanemodelcoords( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    for (;;)
    {
        self setclientomnvar( "_encstr_A6E61553818E395F07C7A8295E108A1B188FD9D220EF40", int( var_0.origin[0] ) );
        self setclientomnvar( "_encstr_BCE615CF50F641124BB63AE9F68FAA1AF90AEF63C8ABA1", int( var_0.origin[1] ) );
        self setclientomnvar( "_encstr_A2E615B7624F997022D39AD1F77F129BB93A267988BB4D", int( var_0.origin[2] ) );
        wait 0.5;
    }
}

gunship_updateplayerpositioncoords( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    waitframe();
    self setclientomnvar( "_encstr_A12715AB5AF5B0B189CC18D7D8F6BD9332647DE0B79B3C", int( self.origin[0] ) );
    self setclientomnvar( "_encstr_B92715AEA5FAB08D13CCC0EB6C7BDB392391AF83B7DC97", int( self.origin[1] ) );
    self setclientomnvar( "_encstr_AF271585293F698F0267DA995AAD5FC30B9A18FFB727B2", int( self.origin[2] ) );
}

gunship_updateaimingcoords( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    for (;;)
    {
        var_1 = self getvieworigin();
        var_2 = var_1 + anglestoforward( self getplayerangles() ) * 15000;
        var_3 = physicstrace( var_1, var_2 );
        self setclientomnvar( "_encstr_9FFF1567F85ED98AA35EC2016E370272818257FB303308", int( var_3[0] ) );
        self setclientomnvar( "_encstr_BEFF1505A9BFE90F82E75A19DA2DDF438B1B987F37A752", int( var_3[1] ) );
        self setclientomnvar( "_encstr_B7FF15BA96EB0B8D9866817D1BEDB7C946CCD71CF69B4F", int( var_3[2] ) );
        wait 0.1;
    }
}

rotateplane( var_0 )
{
    level notify( "_encstr_9C5F1872956FB3E7F3B81B577849A03ACB207FE17D894BE5B988" );
    level endon( "_encstr_9C5F1872956FB3E7F3B81B577849A03ACB207FE17D894BE5B988" );

    if ( var_0 == "_encstr_9707035F3B" )
    {
        var_1 = 10;
        var_2 = level.gunship_speed["_encstr_A4F5078A47C398B16A"] / 360 * var_1;
        level.gunship rotateyaw( level.gunship.angles[2] + var_1, var_2, var_2, 0 );
        var_3 = 360 / level.gunship_speed["_encstr_A4F5078A47C398B16A"];
        var_4 = var_3 * 0.0174533;
        level.gunship_magnitude = var_4 * 9000;

        for (;;)
        {
            level.gunship rotateyaw( 360, level.gunship_speed["_encstr_A4F5078A47C398B16A"] );
            wait( level.gunship_speed["_encstr_A4F5078A47C398B16A"] );
        }
    }
    else if ( var_0 == "_encstr_9819045FD029" )
    {
        var_5 = 10;
        var_2 = level.gunship_speed["_encstr_A4F5078A47C398B16A"] / 360 * var_5;
        level.gunship rotateyaw( level.gunship.angles[2] + var_5, var_2, 0, var_2 );
    }
    else if ( var_0 == "_encstr_8B9E06135641A77C" )
    {
        var_1 = 50;
        var_2 = level.gunship_speed["_encstr_A4F5078A47C398B16A"] / 360 * var_1;
        level.gunship rotateyaw( level.gunship.angles[2] + var_1, var_2, var_2, 0 );
    }
}

gunship_attachgunner( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    var_0 visionsetkillstreakforplayer( "_encstr_A40101", level.framedurationseconds );
    level thread scripts\cp_mp\utility\game_utility::fadetoblackforplayer( var_0, 0, 0.1 );
    var_0 scripts\cp_mp\utility\inventory_utility::_giveweapon( "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B" );
    var_0 scripts\cp_mp\utility\inventory_utility::_giveweapon( "_encstr_80710E6E59BA032F8849DAA7D3502298" );
    var_0 scripts\cp_mp\utility\inventory_utility::_giveweapon( "_encstr_80F90E9B3B1ACA5737679B98FA5FA188" );
    var_0 scripts\cp_mp\utility\inventory_utility::_switchtoweaponimmediate( "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B" );
    self.currentvisionset = "_encstr_A6500C0B1B4C6660FAC6ED8DEDE4";
    waitframe();
    var_0 cameraunlink();

    if ( isdefined( level.gunship_intromodel ) )
    {
        if ( isdefined( level.gunship_intromodel.scenenode ) )
            level.gunship_intromodel.scenenode delete();

        level.gunship_intromodel setscriptablepartstate( "_encstr_A4660D6C1BDEBAC89BF52DB93A39BD", "_encstr_9819045FD029", 0 );
        level.gunship_intromodel setscriptablepartstate( "_encstr_B3310D7327C563B6290E844D4350D7", "_encstr_9819045FD029", 0 );
        level.gunship_intromodel hide();
    }

    self.camera = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin - ( 0, 0, 20 ) );
    self.camera setmodel( "_encstr_BA010BA012DFB703A379A39542" );
    self.camera.angles = vectortoangles( level.gunship.origin - self.camera.origin );
    self.camera linkto( self );

    if ( isbot( var_0 ) )
        var_0 cameralinkto( self.camera, "_encstr_BA010BA012DFB703A379A39542" );
    else
    {
        var_0 scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_89110FFF2D585F945B83892218AF0ED791" );
        var_0.usinggunship = 1;
        var_0 playerlinkweaponviewtodelta( self.camera, "_encstr_BA010BA012DFB703A379A39542", 1.0, 100, 100, 17, 90, 0 );
        var_0 playerlinkedsetviewznear( 0 );
        var_0 visionsetkillstreakforplayer( self.currentvisionset );
        var_0 setclienttriggeraudiozone( "_encstr_A97E112CB1266606D75B96368DB91D9C2B2C6D" );
        var_0 setplayerangles( self.camera.angles );
        var_0 scripts\cp_mp\utility\killstreak_utility::_setvisibiilityomnvarforkillstreak( self.streakinfo.streakname, "_encstr_9707035F3B" );
        var_0 setclientomnvar( "_encstr_8AE30DEF70D621722BD65A89539B3A", 1 );
        var_0 setclientomnvar( "_encstr_B6AC1CD351E1689B9BE2739B2B9747B009A70B73D05508C896C909A02267", var_0 getweaponammoclip( "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B" ) );
        var_0 setclientomnvar( "_encstr_80B61C9D6377071998489A74AA97DA8FBE7BCDD7D33712C9827F304DFDA7", var_0 getweaponammoclip( "_encstr_80710E6E59BA032F8849DAA7D3502298" ) );
        var_0 setclientomnvar( "_encstr_9F9F1CABD2F5B62D8D63DC8EE45685ADF5EEB28583EDDC7DCCBE2CADB5DE", var_0 getweaponammoclip( "_encstr_80F90E9B3B1ACA5737679B98FA5FA188" ) );
        var_0 setclientomnvar( "_encstr_A42D18CD082E5CE1F178A2E9364DE7A24FDF78C8B250272DC450", gettime() + int( self.timeout * 1000 ) );
        var_0 setclientomnvar( "_encstr_AA4F159574D9FF084CAB88A8CB9DC13721DC05178DC3A1", self.maxhealth );
        var_0 setclientomnvar( "_encstr_9CD1158D6CC1E72D449380B0C365D93F2957891F02DA9F", self.flaresreservecount );
        var_0 scripts\cp_mp\utility\shellshock_utility::_shellshock( "_encstr_AF7A1937B410B827CCC3DB6BA8792BC178C6B0D9A3C566B6BEAD9B", "_encstr_B91904EC4718", self.timeout, 0 );
        var_0 scripts\cp_mp\utility\shellshock_utility::_stopshellshock();
        var_0 scripts\mp\playeractions::allowactionset( "_encstr_AB010BB3AE73CD1AD2C1AA9BAC", 0 );

        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_ABFD089D57CD370DD21C", "_encstr_BC5414914B3A4B0F406D065238D014F8211882250B16" ) )
            self thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_ABFD089D57CD370DD21C", "_encstr_BC5414914B3A4B0F406D065238D014F8211882250B16" ) ]]( var_0 );

        var_0 thread gunship_updateoverlaycoords( self );
    }
}

gunship_watchchangeweapons( var_0 )
{
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = [ "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B", "_encstr_80710E6E59BA032F8849DAA7D3502298", "_encstr_80F90E9B3B1ACA5737679B98FA5FA188" ];
    var_0 scripts\common\utility::allow_weapon_switch( 0 );

    if ( !isai( var_0 ) )
    {
        var_0 notifyonplayercommand( "_encstr_8A6F16EC57DCE61A2D077D9BEEB48E6C43FADD59581C7B37", "_encstr_A8E60AFF77FA1F30D6E7CA43" );
        var_0 notifyonplayercommand( "_encstr_8A6F16EC57DCE61A2D077D9BEEB48E6C43FADD59581C7B37", "_encstr_B2E10A9A1FA59159B33215A4" );
        var_0 setclientomnvar( "_encstr_8763152DCC6147A0E433E0D0A305799FC9F3ADBFE21A05", 3 );
    }

    var_3 = 3;

    for (;;)
    {
        var_0 waittill( "_encstr_8A6F16EC57DCE61A2D077D9BEEB48E6C43FADD59581C7B37" );
        var_0 playlocalsound( "_encstr_B3C41A4B471F30F8DB7999D18AE35A488397D3C18FA2EED0E98BC1C8" );
        var_4 = var_0 getcurrentweapon();
        var_5 = var_4;

        foreach ( var_9, var_7 in var_2 )
        {
            if ( var_4.basename == var_7 )
            {
                var_8 = var_9 + 1;

                if ( var_8 > var_2.size - 1 )
                    var_8 = 0;

                var_5 = var_2[var_8];
                break;
            }
        }

        var_0 scripts\cp_mp\utility\inventory_utility::_switchtoweaponimmediate( var_5 );

        if ( self.currentvisionset == "_encstr_94661666D8D2E4BE81D7136385C66D7DD1F6EBBB1AA53AAC" )
        {
            var_10 = gunship_getdofinfobyweapon( var_5 );
            var_0 setphysicaldepthoffield( var_10.fstop, var_10.focusdistance, 20, 20 );
        }

        var_3--;

        if ( var_3 == 0 )
            var_3 = 3;

        var_0 setclientomnvar( "_encstr_8763152DCC6147A0E433E0D0A305799FC9F3ADBFE21A05", var_3 );
        playfxontagforclients( scripts\engine\utility::getfx( "_encstr_B20C0F07A1E5908E3759CB90C35B4558FA" ), var_0, "_encstr_A93008E0529FF7E1B73D", var_0 );
        scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 0.4 );
    }
}

gunship_watchweaponfired( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = self.streakinfo;

    for (;;)
    {
        var_0 waittill( "_encstr_B9A30D87785B4BAA99F599CFEB8D22", var_3 );
        var_0 thread gunship_watchweaponimpact( var_3 );
        var_3.streakinfo = var_2;
        var_2.shots_fired++;
        var_4 = var_0 getcurrentweapon();
        var_5 = var_0 getweaponammoclip( var_4 );

        switch ( var_4.basename )
        {
            case "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B":
                earthquake( 0.2, 1, self.origin, 1000 );
                var_0 setclientomnvar( "_encstr_B6AC1CD351E1689B9BE2739B2B9747B009A70B73D05508C896C909A02267", var_5 );
                var_3 thread gunship_watch105mmexplosion( self, var_0 );
                break;
            case "_encstr_80710E6E59BA032F8849DAA7D3502298":
                earthquake( 0.1, 0.5, self.origin, 1000 );
                var_0 setclientomnvar( "_encstr_80B61C9D6377071998489A74AA97DA8FBE7BCDD7D33712C9827F304DFDA7", var_5 );
                break;
            case "_encstr_80F90E9B3B1ACA5737679B98FA5FA188":
                var_0 setclientomnvar( "_encstr_9F9F1CABD2F5B62D8D63DC8EE45685ADF5EEB28583EDDC7DCCBE2CADB5DE", var_5 );
                break;
        }

        if ( var_5 == 0 )
            var_0 thread gunship_weaponreload( var_4, self );
    }
}

gunship_watchweaponimpact( var_0, var_1 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = self getcurrentweapon();
    var_0 waittill( "_encstr_8AE90E7D08B8538A21DB77CF1155D2B3", var_3, var_4, var_5, var_6, var_7, var_8 );
    var_9 = 0.5;
    var_10 = 100;

    if ( isdefined( var_2 ) && isdefined( var_2.basename ) )
    {
        switch ( var_2.basename )
        {
            case "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B":
                var_9 = 1.5;
                var_10 = 500;
                break;
            case "_encstr_80710E6E59BA032F8849DAA7D3502298":
                var_9 = 1;
                var_10 = 300;
                break;
        }
    }

    var_11 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_0.origin );
    var_11 setmodel( "_encstr_B1A913B637F5C26C4CCC0CF5A358C99D568EAFDA38" );
    var_11.angles = vectortoangles( var_8 );
    var_11 linkto( var_0, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_12 = "_encstr_9707035F3B";

    if ( istrue( var_1 ) )
        var_12 = "_encstr_B4221097F58EEB3F190FE5F7237BCDB7817A";

    var_11 setscriptablepartstate( var_0.weapon_name, var_12, 0 );

    if ( isdefined( self ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_BA8A06D740769010", "_encstr_AD3113526089EAFB19944664A7C09FAF0D093A5A80" ) )
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_BA8A06D740769010", "_encstr_AD3113526089EAFB19944664A7C09FAF0D093A5A80" ) ]]( var_0.origin, var_10, var_10, self.team, var_9, self, 1 );

        var_11 setotherent( self );
        var_0 detonate();
    }
    else
        var_0 delete();

    var_13 = var_11.origin;
    var_14 = getmissileexplscale( var_0.weapon_name );
    var_15 = 0.75;
    var_16 = getmissileexplradius( var_0.weapon_name );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A2F40B7F9B329A401770EDA6BF", "_encstr_974D1587908B61CAC9A5827880F35222D3283F5F90C0A5" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A2F40B7F9B329A401770EDA6BF", "_encstr_974D1587908B61CAC9A5827880F35222D3283F5F90C0A5" ) ]]( var_13, var_14, var_15, var_16 );

    var_11 thread deleteaftertime( 5 );
}

getmissileexplscale( var_0 )
{
    var_1 = 1.0;

    switch ( var_0 )
    {
        case "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B":
            var_1 = 0.75;
            break;
        case "_encstr_80710E6E59BA032F8849DAA7D3502298":
            var_1 = 0.5;
            break;
        case "_encstr_80F90E9B3B1ACA5737679B98FA5FA188":
            var_1 = 0.15;
            break;
    }

    return var_1;
}

getmissileexplradius( var_0 )
{
    var_1 = 1.0;

    switch ( var_0 )
    {
        case "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B":
            var_1 = 2000;
            break;
        case "_encstr_80710E6E59BA032F8849DAA7D3502298":
            var_1 = 1300;
            break;
        case "_encstr_80F90E9B3B1ACA5737679B98FA5FA188":
            var_1 = 700;
            break;
    }

    return var_1;
}

gunship_watch105mmexplosion( var_0, var_1 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_982D088DCA2CD95ADCB3" );
    var_0 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self waittill( "_encstr_A3750609A5E61883" );
    earthquake( 0.125, 0.5, var_0.origin, 1000 );
    var_2 = gunship_getvisionsetformat( var_0.currentvisionset );
    var_3 = gunship_getvisionset( var_2 );

    if ( var_2 == "_encstr_A97905574080BA" )
        var_1 visionsetthermalforplayer( var_3 );
    else
        var_1 visionsetkillstreakforplayer( var_3 );

    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 0.1 );

    if ( var_2 == "_encstr_A97905574080BA" )
        var_1 visionsetthermalforplayer( var_0.currentvisionset );
    else
        var_1 visionsetkillstreakforplayer( var_0.currentvisionset );
}

gunship_screeninterference( var_0, var_1 )
{
    var_2 = self.owner;
    var_2 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );

    if ( isdefined( var_2 ) )
    {
        var_3 = gunship_getvisionsetformat( self.currentvisionset );
        var_4 = gunship_getvisionset( var_3, var_1 );

        if ( var_3 == "_encstr_A97905574080BA" )
            var_2 visionsetthermalforplayer( var_4 );
        else
            var_2 visionsetkillstreakforplayer( var_4 );

        if ( isdefined( var_0 ) && isdefined( self.currentvisionset ) )
        {
            scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_0 );

            if ( var_3 == "_encstr_A97905574080BA" )
                var_2 visionsetthermalforplayer( self.currentvisionset );
            else
                var_2 visionsetkillstreakforplayer( self.currentvisionset );
        }
    }
}

gunship_getvisionsetformat( var_0 )
{
    return scripts\engine\utility::ter_op( issubstr( var_0, "_encstr_A97905574080BA" ), "_encstr_A97905574080BA", "_encstr_A98E061BDE63F69C" );
}

gunship_getvisionset( var_0, var_1 )
{
    var_2 = undefined;

    if ( isdefined( var_1 ) )
    {
        if ( var_0 == "_encstr_A97905574080BA" )
            var_2 = var_0 + "_encstr_B3D3138FD72643DD03A00259A347595F78D32C2D98" + var_1 + "_encstr_B26708D719166B58B359";
        else
            var_2 = "_encstr_9E7E0D889812AE0267C740A5470529" + var_1 + "_encstr_B26708D719166B58B359";
    }
    else
        var_2 = "_encstr_AF11077F16DFAFC39F" + var_0 + "_encstr_899108F5B31BA58E360D";

    return var_2;
}

gunship_watchthermaltoggle( var_0 )
{
    if ( !isai( var_0 ) )
        var_0 thread scripts\cp_mp\utility\player_utility::watchthermalinputchange();

    gunship_watchthermaltoggleinternal( var_0 );

    if ( isdefined( var_0 ) && !isai( var_0 ) )
        var_0 scripts\cp_mp\utility\player_utility::stopwatchingthermalinputchange();
}

gunship_watchthermaltoggleinternal( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self.flashlight = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin );
    self.flashlight setmodel( "_encstr_A37E0CDACDAF161B13CC60F5AD1C" );
    self.flashlight dontinterpolate();
    self.flashlight thread gunship_watchthermalflashlightpos( self, var_0 );

    if ( scripts\cp_mp\utility\game_utility::isnightmap() )
        self.flashlight thread gunship_showflashlight();

    var_1 = 0;
    var_2 = 1;
    var_4 = 12;
    var_5 = 1000;

    if ( scripts\cp_mp\utility\game_utility::isnightmap() && istrue( var_2 ) )
    {
        var_0 setclientomnvar( "_encstr_9CC71B7B604E07C15BA0322B05A368D8AE4413032B988ECB600288C737", 1 );
        var_0 visionsetthermalforplayer( "_encstr_94661666D8D2E4BE81D7136385C66D7DD1F6EBBB1AA53AAC" );
        var_0 scripts\cp_mp\utility\player_utility::setthermalvision( 1, var_4, var_5 );
        self.currentvisionset = "_encstr_94661666D8D2E4BE81D7136385C66D7DD1F6EBBB1AA53AAC";
        self.flashlight notify( "_encstr_B2BF0EEB591E876CB8FAF190AB29D840" );
        var_1 = 1;
        var_0 scripts\cp_mp\utility\shellshock_utility::_shellshock( "_encstr_BC4B1E87FB11E253B85B575E90099E8AFB7F3F274BCD4B39B9E10DA4AB31DD93", "_encstr_B91904EC4718", self.timeout, 0 );
    }

    for (;;)
    {
        var_0 waittill( "_encstr_82DC141B3B8B5C4270E95B4C8D38D086D93EAD6007A7" );
        var_6 = var_0 getcurrentweapon();
        var_7 = gunship_getdofinfobyweapon( var_6.basename );

        if ( !istrue( var_1 ) )
        {
            var_0 setclientomnvar( "_encstr_9CC71B7B604E07C15BA0322B05A368D8AE4413032B988ECB600288C737", 1 );
            var_0 visionsetthermalforplayer( "_encstr_94661666D8D2E4BE81D7136385C66D7DD1F6EBBB1AA53AAC" );
            var_0 scripts\cp_mp\utility\player_utility::setthermalvision( 1, var_7.fstop, var_7.focusdistance );
            self.currentvisionset = "_encstr_94661666D8D2E4BE81D7136385C66D7DD1F6EBBB1AA53AAC";
            var_1 = 1;
            var_0 scripts\cp_mp\utility\shellshock_utility::_shellshock( "_encstr_BC4B1E87FB11E253B85B575E90099E8AFB7F3F274BCD4B39B9E10DA4AB31DD93", "_encstr_B91904EC4718", self.timeout, 0 );
            continue;
        }

        var_0 setclientomnvar( "_encstr_9CC71B7B604E07C15BA0322B05A368D8AE4413032B988ECB600288C737", 0 );
        var_0 scripts\cp_mp\utility\player_utility::setthermalvision( 0 );
        var_0 visionsetkillstreakforplayer( "_encstr_A6500C0B1B4C6660FAC6ED8DEDE4" );
        self.currentvisionset = "_encstr_A6500C0B1B4C6660FAC6ED8DEDE4";
        var_1 = 0;
        var_0 scripts\cp_mp\utility\shellshock_utility::_shellshock( "_encstr_AF7A1937B410B827CCC3DB6BA8792BC178C6B0D9A3C566B6BEAD9B", "_encstr_B91904EC4718", self.timeout, 0 );
    }
}

gunship_getdofinfobyweapon( var_0 )
{
    var_1 = spawnstruct();

    switch ( var_0 )
    {
        case "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B":
            var_1.fstop = 8;
            var_1.focusdistance = 600;
            break;
        case "_encstr_80710E6E59BA032F8849DAA7D3502298":
            var_1.fstop = 8;
            var_1.focusdistance = 600;
            break;
        case "_encstr_80F90E9B3B1ACA5737679B98FA5FA188":
            var_1.fstop = 8;
            var_1.focusdistance = 3500;
            break;
    }

    return var_1;
}

gunship_watchthermalflashlightpos( var_0, var_1 )
{
    self endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = 1;

    while ( isdefined( var_0 ) && isdefined( var_1 ) )
    {
        self.origin = var_0.origin;

        if ( istrue( var_2 ) )
            self.angles = var_1 getplayerangles();

        wait 0.05;
    }

    if ( isdefined( self ) )
        self delete();
}

gunship_showflashlight()
{
    self endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    playfxontag( scripts\engine\utility::getfx( "_encstr_805111EB372817E2BB895B6320B95D9FC12B64" ), self, "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );

    for (;;)
    {
        level waittill( "_encstr_980814831BB0BC56C9D795738526D859C8EBCDCED96E" );
        stopfxontag( scripts\engine\utility::getfx( "_encstr_805111EB372817E2BB895B6320B95D9FC12B64" ), self, "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
        scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 0.1 );
        playfxontag( scripts\engine\utility::getfx( "_encstr_805111EB372817E2BB895B6320B95D9FC12B64" ), self, "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    }
}

gunship_weaponreload( var_0, var_1 )
{
    var_1 endon( "_encstr_A3750609A5E61883" );
    var_1 endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    var_1 endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_2 = getgunshipweaponrootname( var_0 );
    self playlocalsound( var_2 + "_encstr_9DC50B87D71BCFDB2B14885989" );
    gunship_waitforweaponreloadtime( var_0, var_2 );
    var_3 = var_2 + "_encstr_9CDC0A7092776837B6B2D020";

    if ( var_2 == "_encstr_94B50C4F0F5FF7F04193A2EB30F8" )
        var_3 = "_encstr_A6BE17298B108F2B678AFF5337132392496A2AC0872B23F8F5";
    else if ( var_2 == "_encstr_A6C90B27FB5EFBC171EF32D012" )
        var_3 = "_encstr_87A316D1632ED873DA93E709AAA2C971EAFF38288E8CD03D";
    else
        var_3 = "_encstr_93121624CB727780E14381E2BE0DF8F71B7729B8A6AA1349";

    scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( var_3 );
    var_4 = weaponmaxammo( var_0 );
    self setweaponammoclip( var_0, var_4 );
    var_5 = undefined;

    switch ( var_2 )
    {
        case "_encstr_94B50C4F0F5FF7F04193A2EB30F8":
            var_5 = "_encstr_B6AC1CD351E1689B9BE2739B2B9747B009A70B73D05508C896C909A02267";
            break;
        case "_encstr_A6C90B27FB5EFBC171EF32D012":
            var_5 = "_encstr_80B61C9D6377071998489A74AA97DA8FBE7BCDD7D33712C9827F304DFDA7";
            break;
        case "_encstr_A1B90B6F06CFBFD38F026AD007":
            var_5 = "_encstr_9F9F1CABD2F5B62D8D63DC8EE45685ADF5EEB28583EDDC7DCCBE2CADB5DE";
            break;
    }

    self setclientomnvar( var_5, var_4 );
}

gunship_waitforweaponreloadtime( var_0, var_1 )
{
    var_2 = level.weaponreloadtime[var_0.basename];
    var_3 = undefined;

    switch ( var_1 )
    {
        case "_encstr_94B50C4F0F5FF7F04193A2EB30F8":
            var_3 = "_encstr_890E21ED237E3FD451E04B5340A38C37D39D41604820A78A0F08D2AA28FB07D3C871CD";
            break;
        case "_encstr_A6C90B27FB5EFBC171EF32D012":
            var_3 = "_encstr_8B2C215857AF803B22C56EF69FAA674EEF1F70E8E726DE45F96A6DF17582B1D3299728";
            break;
        case "_encstr_A1B90B6F06CFBFD38F026AD007":
            var_3 = "_encstr_95D02163948F88631A530F156F12BAE15F6F695BBD16710641032B21AF3A75C0E9C511";
            break;
    }

    self setclientomnvar( var_3, gettime() + int( var_2 * 1000 ) );

    for (;;)
    {
        wait 0.05;
        var_2 = var_2 - 0.05;

        if ( var_2 <= 0 )
            break;
    }
}

getgunshipweaponrootname( var_0 )
{
    var_1 = 0;
    var_2 = var_0.basename;
    var_3 = strtok( var_2, "_encstr_984C028E" );
    return var_3[var_1] + "_encstr_984C028E" + var_3[var_1 + 1];
}

gunship_playpilotfx( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0.gunship_cloudsfx = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_0 geteye() );
    var_0.gunship_cloudsfx setmodel( "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    var_0.gunship_cloudsfx linkto( var_0, "_encstr_A93008E0529FF7E1B73D" );
    waitframe();
    playfxontagforclients( scripts\engine\utility::getfx( "_encstr_BC50077EBC6F7B1102" ), var_0.gunship_cloudsfx, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", var_0 );
}

deleteaftertime( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_0 );
    self delete();
}

gunship_crash( var_0, var_1 )
{
    self notify( "_encstr_ABBD09A7AB72DE2819ED91" );
    self.crashed = 1;
    gunship_returnplayer( var_1 );
    thread gunship_movetocrashpos( var_0 );
}

gunship_movetocrashpos( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self.leftwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9819045FD029" );
    self.rightwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9819045FD029" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 3 );
    self.leftwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9707035F3B" );
    self.rightwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9707035F3B" );
    self.owner scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_87BE11F74DADA81B8F23F6792B874EA884BE0F", 1 );
    self unlink();
    self.scenenode = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin );
    self.scenenode setmodel( "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    self.scenenode.angles = vectortoangles( anglestoforward( self.angles ) );
    self.leftwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9819045FD029" );
    self.rightwingfxent setscriptablepartstate( "_encstr_8AF80F27484F12E621691313D05BAF9B31", "_encstr_9819045FD029" );
    self.leftwingfxent setscriptablepartstate( "_encstr_A34112C47B32BCEB32B06B58EC56EB43CA85CE5E", "_encstr_9819045FD029" );
    self.rightwingfxent setscriptablepartstate( "_encstr_A34112C47B32BCEB32B06B58EC56EB43CA85CE5E", "_encstr_9819045FD029" );
    var_1 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin );
    var_1 setmodel( "_encstr_AD4811EF4BE1389EEE171BFEDAC3588087A311" );
    var_1.angles = self.angles;
    var_1.animname = self.streakinfo.streakname;
    var_1 scripts\common\anim::setanimtree();
    var_2 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin );
    var_2 setmodel( "_encstr_A37E0CDACDAF161B13CC60F5AD1C" );
    var_2.angles = self.angles;
    var_2 linkto( var_1, "_encstr_8B1E09E97A4FAFAD55C15A", ( 0, 0, -10 ), ( 0, 0, 0 ) );
    var_3 = "_encstr_A4740AC8F38E3FD09F895BCE";
    var_2 setscriptablepartstate( var_3, "_encstr_9707035F3B", 0 );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B60E07C9FD1C2055E3", "_encstr_AD560F67CD5992F125E04BB38038A58B13" ) )
    {
        var_2 thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B60E07C9FD1C2055E3", "_encstr_AD560F67CD5992F125E04BB38038A58B13" ) ]]( 10 );
        var_1 thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B60E07C9FD1C2055E3", "_encstr_AD560F67CD5992F125E04BB38038A58B13" ) ]]( 10 );
    }

    var_1 thread gunship_crash_audio();
    thread gunship_delayhide();
    thread gunship_crashexplosionscreenshake( level.gunship_crashanimlength );
    thread gunship_crashexplosionradiostatic( level.gunship_crashanimlength );
    self.scenenode scripts\common\anim::anim_single_solo( var_1, "_encstr_A6B10E0C0BFB7A18377B292B52F753F8", undefined );
    self.scenenode delete();
    gunship_removeplane( 1 );
}

gunship_delayhide()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    wait 0.05;
    self hide();
}

gunship_crashexplosionscreenshake( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_1 = var_0 - 2;
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_1 );

    foreach ( var_3 in level.players )
    {
        if ( var_3 scripts\cp_mp\utility\player_utility::_isalive() )
            var_3 earthquakeforplayer( 0.25, 2, self.origin, 30000 );
    }
}

gunship_crashexplosionradiostatic( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_1 = var_0 - 3;
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_1 );
    scripts\cp_mp\utility\dialog_utility::playoperatorstaticinterrupt();
}

gunship_crash_audio()
{
    waitframe();
    playsoundatpos( self.origin, "_encstr_81541896DD70BED6CDBE166C989918FA560F83D8EDF5DAC25ACD" );
    playsoundatpos( self.origin, "_encstr_8A241A24C4F171E3E3691F2F22D3F03913DBEA1DA097FA3F8B815262" );
    playsoundatpos( self.origin, "_encstr_8950198AA069C1BF63A8619B77831A1927F0B222A8CF07AB3B2967" );
    playsoundatpos( self.origin, "_encstr_82301396EE70EBADDC7DC2B162CC81AFEE0DB4CDCA" );
}

gunship_removeplane( var_0 )
{
    if ( isdefined( self.flashlight ) )
        self.flashlight delete();

    if ( isdefined( self.camera ) )
        self.camera delete();

    if ( isdefined( self.leftwingfxent ) )
        self.leftwingfxent delete();

    if ( isdefined( self.rightwingfxent ) )
        self.rightwingfxent delete();

    if ( isdefined( self.lightfxent ) )
        self.lightfxent delete();

    if ( isdefined( self.minimapid ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A47205E8C28D13", "_encstr_AB771293936D032238ACA6AC81386C9AC43BC7C3" ) )
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A47205E8C28D13", "_encstr_AB771293936D032238ACA6AC81386C9AC43BC7C3" ) ]]( self.minimapid );

        self.minimapid = undefined;
    }

    self.streakinfo.onspray = istrue( var_0 );

    if ( !scripts\common\utility::iscp() )
    {
        if ( isdefined( self.owner ) )
            self.owner scripts\cp_mp\utility\killstreak_utility::_id_12AA7( self.streakinfo );
    }

    self delete();
}

gunship_control_bot_aiming()
{
    var_0 = undefined;
    var_1 = undefined;
    var_2 = undefined;
    var_3 = 0;
    var_4 = 0;
    var_5 = undefined;
    var_6 = ( self botgetdifficultysetting( "_encstr_B31A0E7FEA6A3BF8612606EB82B1B160" ) + self botgetdifficultysetting( "_encstr_87770ED0AAA053084FB366659A7791FB" ) ) / 2;
    var_7 = 0;

    for (;;)
    {
        var_8 = 0;
        var_9 = 0;

        if ( isdefined( var_1 ) && var_1.health <= 0 && gettime() - var_1.deathtime < 2000 )
        {
            var_8 = 1;
            var_9 = 1;
        }
        else if ( isalive( self.enemy ) && ( self botcanseeentity( self.enemy ) || gettime() - self lastknowntime( self.enemy ) <= 300 ) )
        {
            var_8 = 1;
            var_1 = self.enemy;
            var_10 = var_1.origin;
            var_0 = self.enemy.origin;

            if ( self botcanseeentity( self.enemy ) )
            {
                var_7 = 0;
                var_9 = 1;
                var_11 = gettime();
            }
            else
            {
                var_7 = var_7 + 0.05;

                if ( var_7 > 5.0 )
                    var_8 = 0;
            }
        }

        if ( var_8 )
        {
            if ( isdefined( var_0 ) )
                var_2 = var_0;

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_AD9B0595EF13EE", "_encstr_ADFA1146AD33CF2107F390A9EF33DEE14A56CD" ) )
            {
                if ( var_9 && ( self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_AD9B0595EF13EE", "_encstr_ADFA1146AD33CF2107F390A9EF33DEE14A56CD" ) ]]() || distancesquared( var_2, level.gunship.origin ) > level.physicssphereradius["_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B"] * level.physicssphereradius["_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B"] ) )
                    self botpressbutton( "_encstr_949A07A9EDD3C7E25F" );
            }

            if ( gettime() > var_4 + 500 )
            {
                var_12 = randomfloatrange( -1 * var_6 / 2, var_6 / 2 );
                var_13 = randomfloatrange( -1 * var_6 / 2, var_6 / 2 );
                var_14 = randomfloatrange( -1 * var_6 / 2, var_6 / 2 );
                var_5 = ( 150 * var_12, 150 * var_13, 150 * var_14 );
                var_4 = gettime();
            }

            var_2 = var_2 + var_5;
        }
        else if ( gettime() > var_3 )
        {
            var_3 = gettime() + randomintrange( 1000, 2000 );
            var_2 = undefined;

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_AD9B0595EF13EE", "_encstr_9E4B1A8F389B473BE31037ED89F7A215E3E02F0B8056A4F21DBC7F23" ) )
                var_2 = [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_AD9B0595EF13EE", "_encstr_9E4B1A8F389B473BE31037ED89F7A215E3E02F0B8056A4F21DBC7F23" ) ]]();
        }

        self botlookatpoint( var_2, 0.2, "_encstr_9B300EFBD02D9C033318D6C7A6F91F67" );
        wait 0.05;
    }
}

gunship_handlemissiledetection( var_0, var_1, var_2, var_3 )
{
    self endon( "_encstr_A3750609A5E61883" );

    for (;;)
    {
        if ( !isdefined( var_2 ) )
            break;

        var_4 = var_2 getpointinbounds( 0, 0, 0 );
        var_5 = distance( self.origin, var_4 );

        if ( var_5 < 4000 && var_2.flaresreservecount > 0 )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B20E070DACE628057F", "_encstr_AA670F12AB403BE7DD3F2AB321AE7BF720" ) )
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B20E070DACE628057F", "_encstr_AA670F12AB403BE7DD3F2AB321AE7BF720" ) ]]( var_2 );

            var_2 thread gunship_playflaresfx( var_3 );
            var_2 scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_B7270F528B10E73478D91F2E8950FAE7C6", 1 );
            var_6 = undefined;

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B20E070DACE628057F", "_encstr_A38307199538C67B97" ) )
                var_6 = var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B20E070DACE628057F", "_encstr_A38307199538C67B97" ) ]]();

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_A92D21AE07462C47AC4D6C932CC1283737A59B8E88B0E8C2237BC9D8591A93CA8CA53A" ) )
                var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B6CE0B0BB00A031B7B88355740", "_encstr_A92D21AE07462C47AC4D6C932CC1283737A59B8E88B0E8C2237BC9D8591A93CA8CA53A" ) ]]( var_0 );

            self missile_settargetent( var_6 );
            self notify( "_encstr_9F201840B8DF9B42049717B3495B53E7B2F7D8EBE15F1C721A51" );
            return;
        }
        else if ( var_5 < 300 && var_2.flaresreservecount <= 0 )
        {
            var_2 thread gunship_playfakebodyexplosion();
            var_7 = weapongetdamagemax( self.weapon_name );

            if ( isdefined( self.owner ) )
                var_2 dodamage( var_7, self.owner.origin, self.owner, self, "_encstr_A45C0E4B9FDF3165A3B93C4491BFA4A9", self.weapon_name );

            self delete();
        }

        waitframe();
    }
}

gunship_playfakebodyexplosion()
{
    if ( !isdefined( self.missileexplcounter ) )
        self.missileexplcounter = 0;

    self.missileexplcounter++;

    if ( self.missileexplcounter > 4 )
        self.missileexplcounter = 0;

    self setscriptablepartstate( "_encstr_9F24133E53D43F49376B1B43C83BA716D86898BA41" + self.missileexplcounter, "_encstr_9707035F3B", 0 );
    self playsoundonmovingent( "_encstr_9D4B1C2DDD83AFADDCF52CC62699607DC8969B1DBE9CAD8E7DB2871CC67B" );
    wait 2;
    self setscriptablepartstate( "_encstr_9F24133E53D43F49376B1B43C83BA716D86898BA41" + self.missileexplcounter, "_encstr_9819045FD029", 0 );
}

gunship_playflaresfx( var_0 )
{
    var_1 = "_encstr_8CB40B4BB398B1C0A81FDF6BEA";

    if ( isdefined( var_0 ) )
        var_1 = var_0;

    playsoundatpos( self gettagorigin( var_1 ), "_encstr_B6C010BA63A097CE9247186FF5201693D51B" );
    playfxontag( scripts\engine\utility::getfx( "_encstr_B7270F528B10E73478D91F2E8950FAE7C6" ), self, var_1 );
    var_2 = self.flaresreservecount + 1;
    self setscriptablepartstate( "_encstr_AB9A0D990E3370F002DBB39D17BB38" + var_2, "_encstr_9707035F3B", 0 );
}

isusinggunship()
{
    return isdefined( self.usinggunship );
}

gunship_linklightfxent()
{
    self endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    wait 0.05;
    var_0 = anglestoforward( self.angles );
    self setscriptablepartstate( "_encstr_B38A07C696D9A13ACD", "_encstr_9707035F3B" );
}

gunship_linkwingfxents()
{
    self endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    wait 0.05;
    var_0 = self gettagorigin( "_encstr_B34C14BB6E5FC10912D3B9E7DF3B4DA8E249A3F31590" );
    self.leftwingfxent = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_0 );
    self.leftwingfxent setmodel( "_encstr_A37E0CDACDAF161B13CC60F5AD1C" );
    self.leftwingfxent.angles = self.angles;
    self.leftwingfxent setotherent( self.owner );
    self.leftwingfxent linkto( self, "_encstr_B34C14BB6E5FC10912D3B9E7DF3B4DA8E249A3F31590", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_1 = self gettagorigin( "_encstr_8A5D152BF7F7688203F468F48F9D38B138B2E78042106A" );
    self.rightwingfxent = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_1 );
    self.rightwingfxent setmodel( "_encstr_A37E0CDACDAF161B13CC60F5AD1C" );
    self.rightwingfxent.angles = self.angles;
    self.rightwingfxent setotherent( self.owner );
    self.rightwingfxent linkto( self, "_encstr_8A5D152BF7F7688203F468F48F9D38B138B2E78042106A", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    self setscriptablepartstate( "_encstr_B77D0AC6F69B8EE40B5A3637", "_encstr_9707035F3B" );
}

gunship_watchtargets( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 5 );

    for (;;)
    {
        var_1 = [];

        foreach ( var_3 in level.players )
        {
            if ( !isdefined( var_3 ) || !var_3 scripts\cp_mp\utility\player_utility::_isalive() )
                continue;

            if ( self.owner worldpointinreticle_circle( var_3.origin, 80, 100 ) )
            {
                if ( level.teambased && var_3.team == self.team )
                    continue;

                if ( var_3 == self.owner )
                    continue;

                if ( !scripts\cp_mp\utility\killstreak_utility::streakcanseetarget( self.origin, var_3 gettagorigin( "_encstr_B23B0D92F89BF1F805A258730F796E" ), self ) )
                    continue;

                if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B40D05E05627D6", "_encstr_80C90886B0370A95E4D6" ) )
                {
                    if ( var_3 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B40D05E05627D6", "_encstr_80C90886B0370A95E4D6" ) ]]( "_encstr_A636199B38CA8DA5851B47977D73F637C6BD8395BDEAA3639637CA" ) )
                        continue;
                }

                var_1 = gunship_getnearbytargets( var_3 );
                break;
            }

            wait 0.05;
        }

        if ( var_1.size > 0 && var_1.size < 2 )
            var_0 scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_A66F176FE378D2B3A313D11B1808D74D48CFF3E07F10DB4FDD" );
        else if ( var_1.size >= 2 )
            var_0 scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_A61316ECEACDDCA12D83AFB6ABD88E5ABE37E0F6A31DB2C8" );

        wait( randomintrange( 5, 15 ) );
    }
}

gunship_getnearbytargets( var_0 )
{
    var_1 = scripts\common\utility::playersinsphere( var_0.origin, 300 );
    var_2 = [];

    foreach ( var_4 in var_1 )
    {
        if ( level.teambased && var_4.team != var_0.team )
            continue;

        if ( !level.teambased && var_4 == self.owner )
            continue;

        var_2[var_2.size] = var_4;
    }

    return var_2;
}

gunship_watchkills( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_982D088DCA2CD95ADCB3" );
    self endon( "_encstr_ABBD09A7AB72DE2819ED91" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );

    for (;;)
    {
        self.owner waittill( "_encstr_9FFB1B65C29A1B5BB5B750B073C1112F322C51619112CBC19E7758980B", var_1, var_2 );
        scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 1 );

        if ( isdefined( self.owner.recentkillcount ) )
        {
            if ( self.owner.recentkillcount >= 1 && gunship_iskillstreakweapon( var_2 ) )
                scripts\cp_mp\utility\killstreak_utility::playkillstreakoperatordialog( "_encstr_9C361157354DA3F0B020D72FC028B42939431B" );
        }
    }
}

gunship_iskillstreakweapon( var_0 )
{
    return scripts\engine\utility::ter_op( isdefined( var_0 ) && ( var_0 == "_encstr_9BBC0FD39F078E9A7F6A2B936525A9E96B" || var_0 == "_encstr_80710E6E59BA032F8849DAA7D3502298" || var_0 == "_encstr_80F90E9B3B1ACA5737679B98FA5FA188" ), 1, 0 );
}

gunship_islargemap()
{
    var_0 = scripts\cp_mp\utility\game_utility::islargemap();
    return var_0;
}

gunship_allowstances( var_0 )
{
    if ( !istrue( var_0 ) )
    {
        self.gunship_disabledstances = [];
        var_1 = self getstance();

        switch ( var_1 )
        {
            case "_encstr_B1AD06374716DC8C":
                self.gunship_disabledstances = [ "_encstr_9C3D071B63023B26C3", "_encstr_9F24062875D5FD98" ];
                break;
            case "_encstr_9C3D071B63023B26C3":
                self.gunship_disabledstances = [ "_encstr_B1AD06374716DC8C", "_encstr_9F24062875D5FD98" ];
                break;
            case "_encstr_9F24062875D5FD98":
                self.gunship_disabledstances = [ "_encstr_B1AD06374716DC8C", "_encstr_9C3D071B63023B26C3" ];
                break;
        }

        scripts\mp\playeractions::registeractionset( "_encstr_A1EB0E8F0398325343F3314B3928A76F", self.gunship_disabledstances );
        scripts\mp\playeractions::allowactionset( "_encstr_A1EB0E8F0398325343F3314B3928A76F", 0 );
    }
    else
        scripts\mp\playeractions::allowactionset( "_encstr_A1EB0E8F0398325343F3314B3928A76F", 1 );
}
