// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    setup_callbacks();
    damage_data();
}

setup_callbacks()
{
    level.bot_funcs["_encstr_9B610FCEC26B2B3AF20756BE3A435ADC5B"] = ::damage_empty_vehicles_infrontofme;
    level.bot_funcs["_encstr_B3391C2BE81BF1FA5308F72D0D1343BFA180DBD7D1713FB2BD20FB626539"] = ::notify_enemy_team_bomb_used;
}

damage_data()
{
    setup_bot_dd();
}

setup_bot_dd()
{
    damage_multiplier();
    _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::bot_setup_objective_bottargets();
    scripts\mp\bots\bots_util::bot_waittill_bots_enabled();
    var_0 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::debug_consoles( [ "_encstr_B80703EB16", "_encstr_A40703FA31" ] );

    if ( var_0 )
    {
        foreach ( var_2 in level.objectives )
            var_2 thread _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::monitor_bombzone_control();

        thread cypher_vo_hack_progress();
        level.bot_gametype_precaching_done = 1;
    }
}

damage_empty_vehicles_infrontofme()
{
    self notify( "_encstr_A2530D72B86D274740D7041053F84C" );
    self endon( "_encstr_A2530D72B86D274740D7041053F84C" );
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    while ( !isdefined( level.bot_gametype_precaching_done ) )
        wait 0.05;

    self botsetflag( "_encstr_97F30B439D23AFBAE3B882FA70", 0 );
    self botsetflag( "_encstr_958D139D93ACE62C9156EBBD98A995C63AD29DACCD", 1 );
    self.current_bombzone = undefined;
    self.defuser_bad_path_counter = 0;

    for (;;)
    {
        wait 0.05;

        if ( isdefined( self.current_bombzone ) && !current_puddle_count( self.current_bombzone ) )
        {
            self.current_bombzone = undefined;
            cypher_vo_intro();
        }

        if ( scripts\mp\utility\game::inovertime() )
            var_0 = level.objectives["_encstr_B80703EB16"].ownerteam != self.team;
        else
            var_0 = self.team == game["_encstr_941C0A6AF345075ED05BEAD3"];

        if ( var_0 )
        {
            deafen_ai( "_encstr_949A07A9EDD3C7E25F" );

            if ( !isdefined( self.current_bombzone ) )
                continue;

            debug_calculatecashonground();
            custom_helicopter_firendly_dmg_func();

            if ( self.role == "_encstr_9D570B7BF0831F83D60A5F46AD" )
            {
                if ( !scripts\mp\bots\bots_util::bot_is_defending_point( self.current_bombzone.curorigin ) )
                {
                    var_1["_encstr_AF350E7FE0F661172F21FCC96C097392"] = 2;
                    var_1["_encstr_93E20EAD583CAF767B2C8DFAA3B4B595"] = 4;
                    var_1["_encstr_8A9715DBEC959C27D246ACEBEDE42D3BA5CDEB73DE91CA"] = scripts\engine\utility::random( self.current_bombzone.bottargets );
                    scripts\mp\bots\bots_strategy::bot_protect_point( self.current_bombzone.curorigin, level.protect_radius, var_1 );
                }
            }
            else if ( self.role == "_encstr_B4760C67CD4DD2E60169731FD819" )
            {
                if ( !scripts\mp\bots\bots_util::bot_is_defending_point( level.ddbombmodel[self.current_bombzone.objectivekey].origin ) )
                {
                    var_1["_encstr_A1F90C9B8DED3956D766D858CECD"] = "_encstr_B95616575588C0A81F093226494307B7B7B0EAA35D0B530B";
                    scripts\mp\bots\bots_strategy::bot_protect_point( level.ddbombmodel[self.current_bombzone.objectivekey].origin, level.protect_radius, var_1 );
                }
            }
            else if ( self.role == "_encstr_80201FE2336D1BD3FBCC4A6119AD67C695954DE7C65B0F33FB6B509FB925F71BF0" )
                trial_target_think();
            else if ( self.role == "_encstr_AB350B7E9DCAC17AF7C32A2F43" )
                plant_bomb();

            continue;
        }

        deafen_ai( "_encstr_8C0C07812DDF6808AB" );

        if ( !isdefined( self.current_bombzone ) )
            continue;

        custom_putongroundfunc();

        if ( self.role == "_encstr_B4760C67CD4DD2E60169731FD819" )
        {
            if ( !scripts\mp\bots\bots_util::bot_is_defending_point( self.current_bombzone.curorigin ) )
            {
                var_1["_encstr_A1F90C9B8DED3956D766D858CECD"] = "_encstr_B60A0B48934A0BB133B7D94073";
                var_1["_encstr_8A9715DBEC959C27D246ACEBEDE42D3BA5CDEB73DE91CA"] = scripts\engine\utility::random( self.current_bombzone.bottargets );
                scripts\mp\bots\bots_strategy::bot_protect_point( self.current_bombzone.curorigin, level.protect_radius, var_1 );
            }

            continue;
        }

        if ( self.role == "_encstr_80201FE2336D1BD3FBCC4A6119AD67C695954DE7C65B0F33FB6B509FB925F71BF0" )
        {
            trial_target_think();
            continue;
        }

        if ( self.role == "_encstr_807B08F75D3DA38B5190" )
            defuse_bomb();
    }
}

notify_enemy_team_bomb_used( var_0 )
{
    var_1 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::find_closest_bombzone_to_player( self );
    var_2 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::prematchinitx1blueprintloadouts( var_0 );

    foreach ( var_4 in var_2 )
    {
        if ( isdefined( var_4.current_bombzone ) && var_1 == var_4.current_bombzone )
            var_4 damage_area( "_encstr_80201FE2336D1BD3FBCC4A6119AD67C695954DE7C65B0F33FB6B509FB925F71BF0" );
    }
}

plant_bomb()
{
    self endon( "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );
    var_0 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::process_should_do_pain( self.current_bombzone, 0 );
    self botsetscriptgoal( var_0.origin, 0, "_encstr_94CC09C69C5AE82D368536" );
    var_1 = scripts\mp\bots\bots_util::bot_waittill_goal_or_fail( undefined, "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );

    if ( var_1 == "_encstr_AA7205F03A9609" )
    {
        var_2 = scripts\mp\gamelogic::gettimeremaining();
        var_3 = var_2 - level.planttime * 2 * 1000;
        var_4 = gettime() + var_3;

        if ( var_3 > 0 )
            scripts\mp\bots\bots_util::bot_waittill_out_of_combat_or_time( var_3 );

        var_5 = var_4 > 0 && gettime() >= var_4;
        var_6 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::current_respawn_point_override( level.planttime + 2, "_encstr_973D0D13EDAD13EBC1D8C29BA32B91", var_5 );
        self botclearscriptgoal();

        if ( var_6 )
            cypher_vo_intro();
    }
}

defuse_bomb()
{
    self endon( "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );
    self botsetpathingstyle( "_encstr_81DB0937D8394BC147AC46" );
    var_0 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::process_players_inside_subway_car( self.current_bombzone ).origin;
    self botsetscriptgoal( var_0, 20, "_encstr_94CC09C69C5AE82D368536" );
    var_1 = scripts\mp\bots\bots_util::bot_waittill_goal_or_fail( undefined, "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );

    if ( var_1 == "_encstr_ABE5097DD9AF49972FE390" )
    {
        self.defuser_bad_path_counter++;

        if ( self.defuser_bad_path_counter >= 4 )
        {
            for (;;)
            {
                var_2 = getnodesinradiussorted( var_0, 50, 0 );
                var_3 = self.defuser_bad_path_counter - 4;

                if ( var_2.size <= var_3 )
                {
                    var_4 = botgetclosestnavigablepoint( var_0, 50, self );

                    if ( isdefined( var_4 ) )
                        self botsetscriptgoal( var_4, 20, "_encstr_94CC09C69C5AE82D368536" );
                    else
                        break;
                }
                else
                    self botsetscriptgoal( var_2[var_3].origin, 20, "_encstr_94CC09C69C5AE82D368536" );

                var_1 = scripts\mp\bots\bots_util::bot_waittill_goal_or_fail( undefined, "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );

                if ( var_1 == "_encstr_ABE5097DD9AF49972FE390" )
                {
                    self.defuser_bad_path_counter++;
                    continue;
                }

                break;
            }
        }
    }

    if ( var_1 == "_encstr_AA7205F03A9609" )
    {
        var_5 = gettime() - self.current_bombzone.startbombtime;
        var_6 = level.bombtimer * 1000 - var_5;
        var_7 = var_6 - level.defusetime * 2 * 1000;
        var_8 = gettime() + var_7;

        if ( var_7 > 0 )
            scripts\mp\bots\bots_util::bot_waittill_out_of_combat_or_time( var_7 );

        var_9 = var_8 > 0 && gettime() >= var_8;
        var_10 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::current_respawn_point_override( level.defusetime + 2, "_encstr_B9A10DD145CDB008EA27752B0782ED", var_9 );

        if ( !var_10 && self.defuser_bad_path_counter >= 4 )
            self.defuser_bad_path_counter++;

        self botclearscriptgoal();

        if ( var_10 )
            cypher_vo_intro();
    }
}

trial_target_think()
{
    self endon( "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );

    if ( scripts\mp\bots\bots_util::bot_is_defending() )
        scripts\mp\bots\bots_strategy::bot_defend_stop();

    self botsetscriptgoalnode( scripts\engine\utility::random( self.current_bombzone.bottargets ), "_encstr_94CC09C69C5AE82D368536" );
    var_0 = scripts\mp\bots\bots_util::bot_waittill_goal_or_fail();

    if ( var_0 == "_encstr_AA7205F03A9609" )
    {
        wait 2;
        cypher_vo_intro();
    }
}

quickdropitem( var_0 )
{
    var_1 = race_calculate_stars( var_0, self.team );

    foreach ( var_3 in var_1 )
    {
        if ( !isai( var_3 ) )
        {
            if ( var_3.isdefusing )
                return var_3;
        }
    }

    foreach ( var_3 in var_1 )
    {
        if ( isai( var_3 ) )
        {
            if ( isdefined( var_3.role ) && var_3.role == "_encstr_807B08F75D3DA38B5190" )
                return var_3;
        }
    }

    return undefined;
}

quickdropremovefrominventory( var_0 )
{
    var_1 = race_calculate_stars( var_0, self.team );

    foreach ( var_3 in var_1 )
    {
        if ( !isai( var_3 ) )
        {
            if ( var_3.isplanting )
                return var_3;
        }
    }

    foreach ( var_3 in var_1 )
    {
        if ( isai( var_3 ) )
        {
            if ( isdefined( var_3.role ) && var_3.role == "_encstr_AB350B7E9DCAC17AF7C32A2F43" )
                return var_3;
        }
    }

    return undefined;
}

current_puddle_count( var_0 )
{
    if ( var_0.visibleteam == "_encstr_BC19047780DA" )
        return 1;

    return 0;
}

pregeneratespawnpoints()
{
    var_0 = [];

    foreach ( var_2 in level.objectives )
    {
        if ( current_puddle_count( var_2 ) )
            var_0[var_0.size] = var_2;
    }

    return var_0;
}

race_calculate_stars( var_0, var_1 )
{
    var_2 = [];
    var_3 = _encstr_94EB299B3693B438E8DC79B5C19726F6A39B5E89DB8E9B7D9D586BB2E8F2C1CABE1BDE6B6BDEB917ECB936::get_living_players_on_team( var_1 );

    foreach ( var_5 in var_3 )
    {
        if ( isai( var_5 ) )
        {
            if ( isdefined( var_5.current_bombzone ) && var_5.current_bombzone == var_0 )
                var_2 = scripts\engine\utility::array_add( var_2, var_5 );

            continue;
        }

        if ( distancesquared( var_5.origin, var_0.curorigin ) < level.protect_radius * level.protect_radius )
            var_2 = scripts\engine\utility::array_add( var_2, var_5 );
    }

    return var_2;
}

deadred( var_0, var_1 )
{
    var_2[0] = race_calculate_stars( var_0[0], game["_encstr_95A70AA81FEE295D3A2F56DE"] ).size;
    var_2[1] = race_calculate_stars( var_0[1], game["_encstr_95A70AA81FEE295D3A2F56DE"] ).size;

    if ( var_2[0] > var_2[1] + var_1 )
        return var_0[1];
    else if ( var_2[0] + var_1 < var_2[1] )
        return var_0[0];
}

deafen_ai( var_0 )
{
    var_1 = undefined;

    if ( var_0 == "_encstr_949A07A9EDD3C7E25F" )
        var_1 = custom_loadout_index();
    else if ( var_0 == "_encstr_8C0C07812DDF6808AB" )
        var_1 = custom_shouldtakedamage();

    if ( isdefined( var_1 ) && ( !isdefined( self.current_bombzone ) || self.current_bombzone != var_1 ) )
    {
        self.current_bombzone = var_1;
        cypher_vo_intro();
    }
}

custom_shouldtakedamage()
{
    var_0 = pregeneratespawnpoints();
    var_1 = undefined;

    if ( var_0.size == 1 )
        var_1 = var_0[0];
    else if ( var_0.size == 2 )
    {
        var_2[0] = race_calculate_stars( var_0[0], game["_encstr_95A70AA81FEE295D3A2F56DE"] ).size;
        var_2[1] = race_calculate_stars( var_0[1], game["_encstr_95A70AA81FEE295D3A2F56DE"] ).size;
        var_3[0] = is_bomb_planted_on( var_0[0] );
        var_3[1] = is_bomb_planted_on( var_0[1] );

        if ( var_3[0] && var_3[1] || !var_3[0] && !var_3[1] )
        {
            var_4 = 0;

            if ( isdefined( self.current_bombzone ) )
                var_4 = 1;

            var_1 = deadred( var_0, var_4 );

            if ( !isdefined( var_1 ) && !isdefined( self.current_bombzone ) )
                var_1 = scripts\engine\utility::random( var_0 );
        }
        else if ( var_3[0] || var_3[1] )
        {
            var_5 = scripts\engine\utility::ter_op( var_3[0], 0, 1 );
            var_6 = scripts\engine\utility::ter_op( !var_3[0], 0, 1 );

            if ( var_2[var_5] > var_2[var_6] + 2 )
                var_1 = var_0[var_6];
            else if ( var_2[var_5] <= var_2[var_6] )
                var_1 = var_0[var_5];
            else if ( !isdefined( self.current_bombzone ) )
            {
                if ( var_2[var_5] >= var_2[var_6] + 2 )
                    var_1 = var_0[var_6];
                else if ( var_2[var_5] < var_2[var_6] + 2 )
                    var_1 = var_0[var_5];
            }
        }
    }

    return var_1;
}

quickdropaddtocache( var_0 )
{
    var_1 = pregeneratespawnpoints();

    foreach ( var_3 in var_1 )
    {
        if ( var_3 != var_0 )
            return var_3;
    }
}

custom_loadout_index()
{
    if ( isdefined( self.current_bombzone ) )
        return;

    if ( !isdefined( level.current_zone_target ) || !current_puddle_count( level.current_zone_target ) || gettime() > level.next_target_switch_time )
    {
        level.next_target_switch_time = gettime() + 1000 * randomintrange( 30, 45 );
        level.current_zone_target = scripts\engine\utility::random( pregeneratespawnpoints() );
    }

    if ( !isdefined( level.current_zone_target ) )
        return;

    var_0 = level.current_zone_target;
    var_1 = quickdropaddtocache( var_0 );
    self.current_bombzone = undefined;

    if ( isdefined( var_1 ) )
    {
        if ( randomfloat( 1.0 ) < 0.25 )
            return var_1;
    }

    return var_0;
}

debug_calculatecashonground()
{
    var_0 = quickdropaddtocache( self.current_bombzone );

    if ( isdefined( var_0 ) )
    {
        var_1 = distance( self.origin, self.current_bombzone.curorigin );
        var_2 = distance( self.origin, var_0.curorigin );

        if ( var_2 < var_1 * 0.6 )
            self.current_bombzone = var_0;
    }
}

custom_helicopter_firendly_dmg_func()
{
    if ( isdefined( self.role ) )
    {
        if ( self.role == "_encstr_80201FE2336D1BD3FBCC4A6119AD67C695954DE7C65B0F33FB6B509FB925F71BF0" )
            return;
    }

    var_0 = undefined;

    if ( is_bomb_planted_on( self.current_bombzone ) )
        var_0 = "_encstr_B4760C67CD4DD2E60169731FD819";
    else
    {
        var_1 = quickdropremovefrominventory( self.current_bombzone );

        if ( !isdefined( var_1 ) || var_1 == self )
            var_0 = "_encstr_AB350B7E9DCAC17AF7C32A2F43";
        else if ( isai( var_1 ) )
        {
            var_2 = distance( self.origin, self.current_bombzone.curorigin );
            var_3 = distance( var_1.origin, self.current_bombzone.curorigin );

            if ( var_2 < var_3 * 0.9 )
            {
                var_0 = "_encstr_AB350B7E9DCAC17AF7C32A2F43";
                var_1 cypher_vo_intro();
            }
        }
    }

    if ( !isdefined( var_0 ) )
        var_0 = "_encstr_9D570B7BF0831F83D60A5F46AD";

    damage_area( var_0 );
}

custom_putongroundfunc()
{
    if ( isdefined( self.role ) )
    {
        if ( self.role == "_encstr_80201FE2336D1BD3FBCC4A6119AD67C695954DE7C65B0F33FB6B509FB925F71BF0" )
            return;
    }

    var_0 = undefined;

    if ( is_bomb_planted_on( self.current_bombzone ) )
    {
        var_1 = quickdropitem( self.current_bombzone );

        if ( !isdefined( var_1 ) || var_1 == self )
            var_0 = "_encstr_807B08F75D3DA38B5190";
        else if ( isai( var_1 ) )
        {
            var_2 = distance( self.origin, self.current_bombzone.curorigin );
            var_3 = distance( var_1.origin, self.current_bombzone.curorigin );

            if ( var_2 < var_3 * 0.9 )
            {
                var_0 = "_encstr_807B08F75D3DA38B5190";
                var_1 cypher_vo_intro();
            }
        }
    }

    if ( !isdefined( var_0 ) )
        var_0 = "_encstr_B4760C67CD4DD2E60169731FD819";

    damage_area( var_0 );
}

damage_area( var_0 )
{
    if ( !isdefined( self.role ) || self.role != var_0 )
    {
        cypher_vo_intro();
        self.role = var_0;
    }
}

cypher_vo_intro()
{
    self.role = undefined;
    self botclearscriptgoal();
    self botsetpathingstyle( undefined );
    scripts\mp\bots\bots_strategy::bot_defend_stop();
    self notify( "_encstr_B4400CAF4BD97D2827D1BDF8DA19" );
    self.defuser_bad_path_counter = 0;
}

cypher_vo_hack_progress()
{
    level notify( "_encstr_BDCA1A98DEE8EB9123D72CD2FA8C2DE42B6C47DEE4FA5D1C32C2E8B2" );
    level endon( "_encstr_BDCA1A98DEE8EB9123D72CD2FA8C2DE42B6C47DEE4FA5D1C32C2E8B2" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    level.protect_radius = 725;

    for (;;)
    {
        foreach ( var_1 in level.objectives )
        {
            foreach ( var_3 in level.players )
            {
                if ( isdefined( var_3.role ) && isdefined( var_3.current_bombzone ) && var_3.current_bombzone == var_1 )
                {
                    if ( !current_puddle_count( var_1 ) )
                    {
                        if ( var_3.role == "_encstr_AB350B7E9DCAC17AF7C32A2F43" || var_3.role == "_encstr_807B08F75D3DA38B5190" )
                            var_3 cypher_vo_intro();

                        continue;
                    }

                    if ( is_bomb_planted_on( var_1 ) )
                    {
                        if ( var_3.role == "_encstr_AB350B7E9DCAC17AF7C32A2F43" )
                            var_3 cypher_vo_intro();
                    }
                }
            }
        }

        wait 0.5;
    }
}

is_bomb_planted_on( var_0 )
{
    return istrue( var_0.bombplanted );
}

vehicle_compass_br_shouldbevisibletoplayer( var_0 )
{
    var_1 = spawncovernode( var_0, ( 0, randomint( 360 ), 0 ), "_encstr_A6FF0C9F778B38368A3173D90A73" );
}

damage_multiplier()
{
    switch ( level.mapname )
    {
        case "_encstr_B1110BDDD007984FF3EB671D71":
            var_0 = ( 67, 1916, 22 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( 7, 1877, 22 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( -35, 1925, 22 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( -28, 1878, 22 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( 69, 1879, 22 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            break;
        case "_encstr_95EE0AB5E0FA9CAB73DCAC93":
            var_0 = ( 196, -1338, 257 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( 920, 821, 260 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( 1005, 707, 260 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            var_0 = ( -53, -411, 262 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            break;
        case "_encstr_93670AB8D3011F93679BDBEE":
            var_0 = ( -226, -791, 100 );
            thread vehicle_compass_br_shouldbevisibletoplayer( var_0 );
            break;
        default:
            break;
    }
}
