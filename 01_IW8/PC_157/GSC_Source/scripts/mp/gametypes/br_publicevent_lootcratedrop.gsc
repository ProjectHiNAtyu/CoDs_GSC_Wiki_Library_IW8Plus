// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    var_0 = spawnstruct();
    var_0._id_11B78 = getdvarint( "_encstr_9D4A226E8D27AF899CF50ECAEB38D8D5DC462B9CBED8C92CD1B2F55B16C3EB8E2D6B95B9", 2 );
    var_0.isfeaturedisabled = ::deactivate;
    var_0._id_140CF = ::_id_140D1;
    var_0.attackerswaittime = ::atv_initdamage;
    var_0.weight = getdvarfloat( "_encstr_B4491F66832B0E2D72017828F90AF983832CE55E2707D373DB8A09B07264977843", 0 );
    var_0.guard_door_clip = _encstr_AABE29576EC6B050735F77CF1048B717235F431361220B27536397F30F76A840C21F1B3D9DAC0336276B5E::relic_squadlink_init_vfx( "_encstr_95560E0E1BAB739195C9FAD89C0BE856", 0 );
    _encstr_AABE29576EC6B050735F77CF1048B717235F431361220B27536397F30F76A840C21F1B3D9DAC0336276B5E::_id_12B35( 12, var_0 );
    var_0 = spawnstruct();
    var_0._id_11B78 = getdvarint( "_encstr_8CAF21FB4F18591BAE76A3FA5E045F8E602F6E4FE7A01E8BDD6E4AA2C248D34450930B", 2 );
    var_0.isfeaturedisabled = ::deactivate;
    var_0.attackerswaittime = ::aud_breached_exit_wind;
    var_0._id_140CF = ::_id_140D8;
    var_0.weight = getdvarfloat( "_encstr_8A0E1EB9B1E4BE134EF50756F5BB95161CBDCDEB1B9C85A356F5EECA2DD9D047", 0 );
    var_0.guard_door_clip = _encstr_AABE29576EC6B050735F77CF1048B717235F431361220B27536397F30F76A840C21F1B3D9DAC0336276B5E::relic_squadlink_init_vfx( "_encstr_8BCA0DBF03C0D26FE036D2CBD9C59F", 0 );
    _encstr_AABE29576EC6B050735F77CF1048B717235F431361220B27536397F30F76A840C21F1B3D9DAC0336276B5E::_id_12B35( 13, var_0 );
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8FDF0A909A52417E0BD21097"] = "_encstr_88D311D615C1FD8B718264C7FECF8EF55A4DD3";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_981F0C275FDAF7A8B60969A32D70"] = "_encstr_A8300E191B22EF2192BF835BE27870A3";
    level.conf_fx["_encstr_AAE007D90BB9A5E61A"] = loadfx( "_encstr_97531F35435B48F8877259185C7D98970293B73FBF5227C8AC0183C8C54F10DBCB" );
    level._encstr_97B31C435826A082676E7AB6CDCBF96D4B1893F708D9E7FB7BFE42AC3DE3 = getdvarfloat( "_encstr_AF93192E4EB32FC1FAFFF85817031B8B7B77B0B522BA674BD92FA8", 5 );

    if ( istrue( level._id_1406F ) )
    {
        level._id_11A1F = level.minigun_warning_time;
        level._id_1395A = [];
    }
}

_id_140D1()
{
    var_0 = _encstr_BA9929DB6F38F4738DD3361ADB4877AE68DB5449A178BAC6BEEB49C2A3B19FA290C7F3D10760C4FAD4E382::resetarenaomnvardata();
    return var_0 >= 1;
}

_id_140D8()
{
    return 1;
}

atv_initdamage()
{
    attackpressed( 0 );
}

aud_breached_exit_wind()
{
    attackpressed( 1 );
}

attackpressed( var_0 )
{
    var_1 = spawnstruct();

    if ( var_0 )
    {
        if ( !isdefined( level.shutdownattractionicontrigger ) )
            level thread _encstr_89CF2EEB5F08C4639DC3466ACB5847BE98CB6459D1688AD64EDB59427147CB70B187EDC92990954F653352CB30AC87AE::init();

        var_1.delayeddetachbreak = "_encstr_AB64133C97096BC980E7307001EFF0F98FB3A3DD7F";
        var_1.delaydropbags = "_encstr_A224140D5985CECB7DBB562C837BB9D71CD54CB1D26C";
        var_1.delayed_depositing = "_encstr_9B951101771156A89FEAF3A9924738162A9B93";
        var_1.delayedattach = "_encstr_AFBD0E39612F9F8C80710820DBEFEF78";
        var_1.delayeddetach = "_encstr_8261194B502EB89A6F6C87BED727E24F71B8BF9B7086F3D36B86CB";
        var_1.delaydestroyhudelem = "_encstr_981F0C275FDAF7A8B60969A32D70";
        level.delete_ai = 1;
    }
    else
    {
        level.delayed_explosion_things = getdvarint( "_encstr_BA121DE636E4FA26C9AF83B2F51BBD85917BAB8E46C97BE07D856BDBAB73D1", 15000 );
        level thread _encstr_8936284EF93A709710F81A5D08D76AE3218D9410E3F5160F5903B7E99AED0BD3B8DF43EAEB15C2C75B4E::init();
        level thread scripts\cp_mp\killstreaks\airdrop::teamplunderexfil();
        var_1.delayeddetachbreak = "_encstr_942A1B4C163AD1C6B27D39B7BC858D56D71B1AED830E594EEBC67BF6A3";
        var_1.delaydropbags = "_encstr_B30B07E216CBFFC4C2";
        var_1.delayed_depositing = "_encstr_AB85166C2C370D8C4EBDC1F51BB7D66BF6E6BEBB7BC9B132";
        var_1.delayedattach = "_encstr_9707035F3B";
        var_1.delayeddetach = "_encstr_827817BA3D21C2774881E2CB08A097BA38A9353F9720CE6385";
        var_1.delaydestroyhudelem = "_encstr_8FDF0A909A52417E0BD21097";
        level.delete_ai = 0;
    }

    var_2 = scripts\cp_mp\killstreaks\airdrop::getleveldata( var_1.delayeddetachbreak );
    var_2.capturestring = &"_encstr_A6491EA467579725FBF8FE9CEF563198881560516A258F6326CF7FDF0B3FDACF";
    var_2.minimapicon = undefined;

    if ( isdefined( var_2._encstr_B60C1688FE0240DE33DF6D4337AA10C0AF5371A362792385 ) )
        var_1.delaydropbags = var_2._encstr_B60C1688FE0240DE33DF6D4337AA10C0AF5371A362792385;

    if ( !istrue( var_2._encstr_B30D0E29326F2F888DF56F611436F863 ) )
        _encstr_AABE29576EC6B050735F77CF1048B717235F431361220B27536397F30F76A840C21F1B3D9DAC0336276B5E::_id_13371( var_1.delayeddetach );

    _encstr_9E81231898C28383CB8760E558BF27EB18E74BB010797A7D4A032187800594B088064FFB1B::brleaderdialog( var_1.delaydestroyhudelem, 1 );
    var_3 = scripts\mp\utility\teams::resetchallengetimer();
    var_4 = getdvarint( "_encstr_A97F286EB14EEB4C9CFA07B2EB36DB5823EDAE8E23E4EDC1BEB9D5B6A859C26B6EA02B9CA1932C4759DC", 3 );
    var_5 = getdvarint( "_encstr_970A20670FA32898E241930979D4B87F9A5713E18B0B88D03725B8601692F02D629F", 10 );
    var_6 = int( max( var_5, var_3 / var_4 ) );
    var_7 = [];
    var_8 = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::getdangercircleorigin();
    var_9 = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::getdangercircleradius();

    for ( var_10 = 0; var_10 < var_6; var_10++ )
    {
        if ( istrue( level._id_1406F ) )
        {
            var_7[var_7.size] = return_same_module_as_next_module( var_8, var_9 );
            continue;
        }

        var_7[var_7.size] = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::risk_flagspawnshiftingpercent( var_8, var_9, 0.1, 0.9, 1 );
    }

    level.delete_covernodes = [];

    foreach ( var_12 in var_7 )
    {
        if ( isdefined( var_12 ) )
        {
            var_13 = undefined;
            var_14 = undefined;
            var_15 = var_1.delayeddetachbreak;
            var_16 = ( var_12[0], var_12[1], var_12[2] + 10000 );
            var_17 = ( 0, randomfloat( 360 ), 0 );
            var_18 = var_12;
            var_19 = scripts\cp_mp\killstreaks\airdrop::dropcrate( var_13, var_14, var_15, var_16, var_17, var_18 );

            if ( !isdefined( var_19 ) )
                continue;

            if ( !istrue( var_2._encstr_9D8414BDF95FB95D85F2B020AADB1B5123973F2C4EDB ) )
            {
                var_19 setscriptablepartstate( "_encstr_89A606647398D382", "_encstr_B30B07E216CBFFC4C2", 0 );
                var_19._id_13428 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_16 + ( 0, 0, 58 ) );
                var_19._id_13428 setmodel( "_encstr_8CE6145BE6D7C2B4398CC97B0ED7B14EB01DB2EB269C" );
                var_19._id_13428 linkto( var_19 );
                var_19._id_13428 setscriptablepartstate( "_encstr_8C7B0CD3485047B709117269C378", "_encstr_9707035F3B" );
            }

            if ( isdefined( var_1.delaydropbags ) )
                var_19 setscriptablepartstate( "_encstr_BC2B0A075628F786B1182B12", var_1.delaydropbags );

            if ( isdefined( var_1.delayed_depositing ) )
                var_19 setscriptablepartstate( "_encstr_AB2B0EB7984DCA1BE8969D59AF6B1638", var_1.delayed_depositing );

            var_20 = scripts\cp_mp\killstreaks\airdrop::gettriggerobject( var_19 );
            var_20._id_140A0 = level._encstr_97B31C435826A082676E7AB6CDCBF96D4B1893F708D9E7FB7BFE42AC3DE3;
            level.delete_covernodes[level.delete_covernodes.size] = var_19;
        }
    }
}

deactivate()
{
    foreach ( var_1 in level.delete_covernodes )
    {
        if ( !isdefined( var_1 ) )
            continue;

        playfx( level.conf_fx["_encstr_AAE007D90BB9A5E61A"], var_1.origin );

        if ( isdefined( var_1._id_13428 ) )
        {
            var_1._id_13428 setscriptablepartstate( "_encstr_9DA80D78578FB0132112730C2DBA79", "_encstr_9819045FD029", 0 );
            var_1._id_13428 delete();
        }

        var_1 scripts\cp_mp\killstreaks\airdrop::lastactivateinstruct();
        level.delete_covernodes = scripts\engine\utility::array_remove( level.delete_covernodes, var_1 );
    }
}

return_same_module_as_next_module( var_0, var_1 )
{
    var_2 = undefined;
    var_3 = [];

    foreach ( var_5 in level._id_11A1F )
    {
        if ( _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::updateprestreamrespawn( var_5.origin ) )
            var_3 = scripts\engine\utility::array_add( var_3, var_5 );
    }

    level._id_11A1F = var_3;
    var_7 = freight_lift_dogtag_revive( level._id_11A1F );

    for ( var_8 = 5; var_8 >= 0; var_8-- )
    {
        var_9 = randomfloat( var_7 );
        var_10 = play_scramble_for_player_until_cleared( level._id_11A1F, var_9 );

        if ( isdefined( var_10 ) )
        {
            var_11 = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::risk_flagspawnshiftingpercent( var_10.origin, var_10.radius, 0.1, 0.85, 1, 1 );

            if ( !_encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::updateprestreamrespawn( var_11 ) )
                var_11 = riskspawn_flagcaptured( var_0, var_10.origin, var_10.radius );

            if ( !istrue( update_objective_mlgicon( var_11 ) ) )
                var_2 = var_11;

            if ( var_8 == 0 )
                var_2 = var_11;

            if ( isdefined( var_2 ) )
                break;
        }
    }

    if ( !isdefined( var_2 ) )
        var_2 = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::risk_flagspawnshiftingpercent( var_0, var_1, 0.1, 0.85, 1, 1 );

    level._id_1395A[level._id_1395A.size] = var_2;
    return var_2;
}

update_objective_mlgicon( var_0 )
{
    var_1 = getdvarint( "_encstr_AA011D37C6937D2639D7C1CAD7B1F6BD8EC64E0B1D2BEB6B2DCDD7235AE6D1", 2500 );
    var_2 = var_1 * var_1;

    foreach ( var_4 in level._id_1395A )
    {
        if ( distance2dsquared( var_0, var_4 ) < var_2 )
            return 1;
    }

    return 0;
}

freight_lift_dogtag_revive( var_0 )
{
    var_1 = 0.0;

    foreach ( var_3 in var_0 )
        var_1 = var_1 + var_3.radius;

    return var_1;
}

play_scramble_for_player_until_cleared( var_0, var_1 )
{
    var_2 = 0.0;

    foreach ( var_4 in var_0 )
    {
        var_2 = var_2 + var_4.radius;

        if ( var_1 <= var_2 )
            return var_4;
    }

    return undefined;
}

riskspawn_flagcaptured( var_0, var_1, var_2 )
{
    var_3 = init_silo_platforms( var_0, var_1, var_2 );
    var_4 = _encstr_8A18233F26D6B373C5535613B3D5AABF583020D08BFDCE86F68B4649324ABAB809C65856C7::risk_flagspawnshiftingpercent( var_3.origin, var_3.radius, 0, 0.85, 1, 1 );
    return var_4;
}

init_silo_platforms( var_0, var_1, var_2 )
{
    var_3 = distance2d( var_0, var_1 );
    var_4 = int( var_2 / 2 );

    if ( var_3 != 0.0 )
    {
        var_5 = int( var_1[0] - var_4 / var_3 * ( var_1[0] - var_0[0] ) );
        var_6 = int( var_1[1] - var_4 / var_3 * ( var_1[1] - var_0[1] ) );
    }
    else
    {
        var_5 = int( var_0[0] );
        var_6 = int( var_0[1] );
    }

    var_7 = 0;
    var_8 = spawnstruct();
    var_8.origin = ( var_5, var_6, var_7 );
    var_8.radius = var_4;
    return var_8;
}
