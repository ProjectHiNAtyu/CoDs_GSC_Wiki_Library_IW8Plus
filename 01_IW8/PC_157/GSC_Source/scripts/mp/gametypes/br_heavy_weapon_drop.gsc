// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level.shutdownattractionicontrigger = [];
    var_0 = scripts\cp_mp\killstreaks\airdrop::getleveldata( "_encstr_AB64133C97096BC980E7307001EFF0F98FB3A3DD7F" );
    var_0.capturestring = &"_encstr_A6491EA467579725FBF8FE9CEF563198881560516A258F6326CF7FDF0B3FDACF";
    var_0.dummymodel = "_encstr_B794256F0BE142A4C08BE061C1A8EADA47B3EFFF839C4A5772FB1136DB810C1294C3535B6BBEF3";
    var_0.friendlymodel = undefined;
    var_0.enemymodel = undefined;
    var_0.mountmantlemodel = undefined;
    var_0.supportsownercapture = 0;
    var_0.headicon = undefined;
    var_0.minimapicon = undefined;
    var_0.usepriority = -1;
    var_0.usefov = 180;
    var_0.timeout = undefined;
    var_0.friendlyuseonly = 0;
    var_0.ownerusetime = 0.5;
    var_0.otherusetime = 0.5;
    var_0.activatecallback = ::signal_nag;
    var_0.capturecallback = ::signal_strength;
    var_0.destroyoncapture = 1;
    level.delaystreamtomovingplane = getdvarint( "_encstr_B46E2493C99ED7362007B0AD6F60BF77C7E0FAD95176E76BA01FCDA323A905EB6E59504238CD", 0 ) == 1;
    level.shrink_poi_into_the_bank = spawnstruct();
    level.shrink_poi_into_the_bank.besttimestate = 1;
    level.shrink_poi_into_the_bank._id_13EFF = [ [ "_encstr_BAED1728F354D8EF6BF1AAA315C21F639247C8E8DFF1D3AB33", 0 ], [ "_encstr_81E81D133936F6DEA3AFB25C575AE0BE7616CDAD85DCD67D19EAC98598D82B", 0 ], [ "_encstr_98FB184A2359CFADD83FFBE053B8F43FF1F8D3B3EE2697A5F88F", 0 ], [ "_encstr_9EEF1DEDE3EA98484CE9ABE10E1010407123630F774252D023AAD6D837EF88", "_encstr_A389138D838AF8282C8949C02DEF71AE523F171B33" ] ];
    level.shrink_poi_into_the_bank.chopper_gunner = [ [ "_encstr_891922899CD8B77B1DBEBB95C238B79BAF37D07D1B16D7382CD81CA1C24319D7591C9636", "_encstr_A389138D838AF8282C8949C02DEF71AE523F171B33" ], [ "_encstr_B39E20E6465972E703694737A0BBAF2A675EFBD121EBC9204918530BC8369D13E3FE", "_encstr_A389138D838AF8282C8949C02DEF71AE523F171B33" ], [ "_encstr_A4DC2179138398503B7FF7DB69E288D0A7FB3B465A0FD808025AC5CB860D41A60743E9", "_encstr_A389138D838AF8282C8949C02DEF71AE523F171B33" ] ];
    level.shrink_poi_into_the_bank.waypoint_icon = [ [ "_encstr_A6A9268398807FE2F1B0FC7401997B2C2B58073F59BBBA8A37B3C26CF8B571C1904837CBA870EBF2", 0 ], [ "_encstr_BD71153280C9D5B78B509D815DF0131177A0AB5A708F8C", 0 ], [ "_encstr_95C1138ADE685F053129CB02B059FFE783C805037B", 8 ], [ "_encstr_A47720C0F3CD073033B75A436CBB7BC9B26A405B99A6490B77A455C66BE303BB5CF2", 0 ] ];
    level.shrink_poi_into_the_bank.waypoints = [ [ "_encstr_934C200EAE416ACF2B516F2FC8C3B7024F4603C99FA5A10A51F06B63D01E7C7A87D5", "_encstr_A9DA10F62308079265E7D7FF9B80D917A243" ], [ "_encstr_A8101FFB95599A07C0B68B1769B85FC2B8EF2A971BFE41C6A019449DC6709DAA0D", "_encstr_A9DA10F62308079265E7D7FF9B80D917A243" ], [ "_encstr_AA822345E3E35A5FCDE77BF8E6A01F8DF1082DF7625318B8732972977388CA0747FBEA28CF", "_encstr_A9DA10F62308079265E7D7FF9B80D917A243" ], [ "_encstr_959B22984EB1DBB7D1F5EEAC581CB7B9D7DC1AD79B6BAFEDBB3496CD5B2BF2F58DAC9DB2", "_encstr_A3D9107A2E98AFD5E1F9EA22803F012E9B33" ], [ "_encstr_89FC21F39D41821FC88E830F61C057CAB0F7D28F077949D810517A16B3925F2275671F", "_encstr_A3D9107A2E98AFD5E1F9EA22803F012E9B33" ], [ "_encstr_B9B8220A63198FED98FF3F359BE0B5C328FBE741AB6197A680F72D3DAF2A6ABFE9516A6A", "_encstr_A3D9107A2E98AFD5E1F9EA22803F012E9B33" ] ];
    level.shrink_poi_into_the_bank.weapon_xp_iw8_pi_mike1911 = [ [ "_encstr_A649124123D1370F13596079A5B0A78A1D907EEA", 2 ], [ "_encstr_A4C917893963DBDEA3D7B733CC1AC273C87DB6DBD8B71DED67", 2 ], [ "_encstr_9BF5182E5293C8F733C140702A4CA3A0EBD7AD93DD0370231B4A", 2 ], [ "_encstr_B2D614D0E3DD1720038768D4965B29CD07D908D84AB7", 2 ] ];
}

signal_nag( var_0 )
{
    if ( istrue( var_0 ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_9867080A50FD0FDBE03F", "_encstr_B268189C59764BDC3A5939A14EC23A56197B93A1C656B037BA38" ) )
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_9867080A50FD0FDBE03F", "_encstr_B268189C59764BDC3A5939A14EC23A56197B93A1C656B037BA38" ) ]]( self );
    }

    level.shutdownattractionicontrigger[level.shutdownattractionicontrigger.size] = self;
}

signal_strength( var_0 )
{
    if ( isdefined( self._id_13428 ) )
    {
        self._id_13428 setscriptablepartstate( "_encstr_9DA80D78578FB0132112730C2DBA79", "_encstr_9819045FD029", 0 );
        self._id_13428 delete();
    }

    level.shutdownattractionicontrigger = scripts\engine\utility::array_remove( level.shutdownattractionicontrigger, self );
    shut_down_station();
}

shut_down_station()
{
    var_0 = [];
    var_1 = randomint( 100 );

    if ( istrue( level.delaystreamtomovingplane ) )
    {
        if ( var_1 < 5 )
        {
            var_2 = randomint( level.shrink_poi_into_the_bank._id_13EFF.size );
            var_0[0] = level.shrink_poi_into_the_bank._id_13EFF[var_2];
        }
        else
        {
            var_2 = randomint( level.shrink_poi_into_the_bank.waypoint_icon.size );
            var_0[0] = level.shrink_poi_into_the_bank.waypoint_icon[var_2];
        }

        var_2 = randomint( level.shrink_poi_into_the_bank.waypoints.size );
        var_0[1] = level.shrink_poi_into_the_bank.waypoints[var_2];
        var_2 = randomint( level.shrink_poi_into_the_bank.chopper_gunner.size );
        var_0[2] = level.shrink_poi_into_the_bank.chopper_gunner[var_2];
        var_2 = randomint( level.shrink_poi_into_the_bank.weapon_xp_iw8_pi_mike1911.size );
        var_0[3] = level.shrink_poi_into_the_bank.weapon_xp_iw8_pi_mike1911[var_2];

        if ( istrue( level.shrink_poi_into_the_bank.besttimestate ) )
            var_0[4] = [ "_encstr_BED6164EEE012A8F6B115F5F60806B63D58D1684C06B82DE", 0 ];
    }
    else
    {
        if ( var_1 < 5 )
            var_0[0] = [ "_encstr_9EEF1DEDE3EA98484CE9ABE10E1010407123630F774252D023AAD6D837EF88", "_encstr_A389138D838AF8282C8949C02DEF71AE523F171B33" ];
        else if ( var_1 < 10 )
            var_0[0] = [ "_encstr_A9FF1CDDE3B9FFF863213398A2C8B7D3D78329C7B80193EADF4E089124CF", "_encstr_A9DA10F62308079265E7D7FF9B80D917A243" ];
        else
        {
            var_2 = randomint( level.shrink_poi_into_the_bank.waypoint_icon.size );
            var_0[0] = level.shrink_poi_into_the_bank.waypoint_icon[var_2];
        }

        var_2 = randomint( level.shrink_poi_into_the_bank.chopper_gunner.size );
        var_0[1] = level.shrink_poi_into_the_bank.chopper_gunner[var_2];
        var_2 = randomint( level.shrink_poi_into_the_bank.waypoints.size );
        var_0[2] = level.shrink_poi_into_the_bank.waypoints[var_2];
        var_2 = randomint( level.shrink_poi_into_the_bank.weapon_xp_iw8_pi_mike1911.size );
        var_0[3] = level.shrink_poi_into_the_bank.weapon_xp_iw8_pi_mike1911[var_2];

        if ( istrue( level.shrink_poi_into_the_bank.besttimestate ) )
            var_0[4] = [ "_encstr_BED6164EEE012A8F6B115F5F60806B63D58D1684C06B82DE", 0 ];
    }

    var_3 = 0;
    var_4 = _encstr_823124376CE42DC11DCD5EB6E0CB3BB0ADAC3A2FE056CDBC314EAF83A536DAAB079BE2D9B9B1::test_ai_anim();

    foreach ( var_6 in var_0 )
    {
        var_7 = var_6[0];

        if ( _encstr_A38826AFC76BFBD02C8280C06AAFB0277227292323A2BE6252DAB6F855C7606EEA97E993C2EA06F8::get_bonus_targets( var_7 ) )
        {
            var_8 = level.br_pickups.delay_hide_player_clip[var_7];

            if ( !var_3 && isdefined( var_8 ) && var_8 == 4 )
            {
                var_9 = _encstr_A38826AFC76BFBD02C8280C06AAFB0277227292323A2BE6252DAB6F855C7606EEA97E993C2EA06F8::_id_11A41( var_7, var_4, self.origin, self.angles, 0, 1 );
                var_3 = 1;
            }
            else
                var_9 = _encstr_A38826AFC76BFBD02C8280C06AAFB0277227292323A2BE6252DAB6F855C7606EEA97E993C2EA06F8::_id_11A41( var_7, var_4, self.origin, self.angles, 0, 0 );

            if ( isstring( var_6[1] ) )
            {
                var_10 = _encstr_A38826AFC76BFBD02C8280C06AAFB0277227292323A2BE6252DAB6F855C7606EEA97E993C2EA06F8::_id_11A41( var_6[1], var_4, self.origin, self.angles, 0, 0 );
                var_10.count = level.br_pickups.maxcounts[var_6[1]];
            }
            else
                var_9.count = var_6[1];
        }
    }

    if ( isdefined( level.shrink_poi_into_the_bank.beardone ) )
        [[ level.shrink_poi_into_the_bank.beardone ]]( var_4, self.origin, self.angles );

    if ( istrue( self._id_135B6 ) )
    {
        var_12 = spawnstruct();
        var_12.origin = self.origin;
        var_12.angles = ( 0, 90, 0 );
        var_4 = _encstr_823124376CE42DC11DCD5EB6E0CB3BB0ADAC3A2FE056CDBC314EAF83A536DAAB079BE2D9B9B1::test_ai_anim();
        _encstr_A38826AFC76BFBD02C8280C06AAFB0277227292323A2BE6252DAB6F855C7606EEA97E993C2EA06F8::_id_11A41( "_encstr_A1BA16BDABE2E728F9B83678F25158B747F755C07F20FE87", var_4, var_12.origin, var_12.angles, 0, 1 );
    }
}

shut_down_laser_trap()
{
    playfx( level.conf_fx["_encstr_AAE007D90BB9A5E61A"], self.origin );

    if ( isdefined( self._id_13428 ) )
    {
        self._id_13428 setscriptablepartstate( "_encstr_9DA80D78578FB0132112730C2DBA79", "_encstr_9819045FD029", 0 );
        self._id_13428 delete();
    }

    level.shutdownattractionicontrigger = scripts\engine\utility::array_remove( level.shutdownattractionicontrigger, self );
    scripts\cp_mp\killstreaks\airdrop::lastactivateinstruct();
}
