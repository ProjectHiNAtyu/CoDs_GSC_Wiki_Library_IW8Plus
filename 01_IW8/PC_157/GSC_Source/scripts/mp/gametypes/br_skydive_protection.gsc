// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    var_0 = isdefined( level.modifyplayerdamage ) && level.modifyplayerdamage == _encstr_97571CC31EE30FBA499B665A8327B7E7F8F54C512FA93F150D207EF2F097::brmodifyplayerdamage;

    if ( var_0 )
    {
        level.modifyplayerdamage = ::endmatchcamerastriggered;
        level._id_133EF = getdvarint( "_encstr_B2861B0F078649CBE882BFC45BA0D373D7B7F37BCDA04395C04BF44DB0", 1 ) == 1;
        level._id_133F1 = getdvarfloat( "_encstr_BC9F236E8D93FA6EB5BCC84B9D959A8358EEB91493DEE8958D47D2BD73537B195A9996AC4E", 0.1 );
        level._id_133EE = getdvarfloat( "_encstr_B1921F77289857030F407D73E0C28A52B3B0AA4CAF5FD89E307823ADF689E9E737", 0.1 );
        level._id_133F5 = getdvarint( "_encstr_A14529FB52A2E1F267CB01D30B2F0793E1976DAF43D8C3851F5358B8681F9299F9E759D7A83F582B7D8F4F", 800 );
        level._id_133F4 = getdvarint( "_encstr_B9B62C1B41164FEA60B32C39B548BABB377B42B18B603BA708C12937AD117E47E951986A70CC03DBF9CF4C1457D8", 50 );
        level._id_133F3 = getdvarfloat( "_encstr_8CC026D22ADA3192C09B5BE1744DFE0821443D900DC790EFBA435F0F88A5AF39880E1A31935FBFC9", 0.1 );
        level._id_133F2 = getdvarfloat( "_encstr_B29929AB579A187FEF734C7BE09591A8C1A4D877CA05B398E623AB8A5393709CC4032C725B21FAE1F980CD", 0.9 );
        level._encstr_AD7026A7EFD3754B260FB60B721938B89B6367214FDAC55847A53B411FC5186BB2B7D7B9F77206F0 = getdvarfloat( "_encstr_B4BA29D389DE9732A80B6461FD30F2F38FA3BA69333873EFD009917FF5D906E3253B43B0388E8B26D00F95", 1200 );
    }
}

toma_strike_munitionused( var_0 )
{
    if ( !istrue( level._id_133EF ) )
        return;

    thread endingpropspecate();
    thread ending_zplanes();
    thread ending_winning_players_setup();

    if ( var_0 )
        thread endingph();
    else
        self._id_133F1 = level._id_133F1;
}

ending_zplanes()
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self endon( "_encstr_8A5520833489D0439B97B7F58FF298882D810B7BDEEFD810D323DFF1A77A5DC8CF25" );
    self._id_133EF = 1;

    for ( var_0 = _encstr_87252D1327E6ADE59196B359BED9CAE8324BDCD185CD36B23A7BD88D7BCD5937D1ECC97BAB9B91AC8C0EB1B0CBCAE4(); !self isonground() && _encstr_B89F1FB29377546F09CB0E15C8B1C75BF1602B4BF0350E5740A4E60F76D8CF6529() >= level._id_133F4 && ( !isdefined( var_0 ) || var_0 >= level._encstr_AD7026A7EFD3754B260FB60B721938B89B6367214FDAC55847A53B411FC5186BB2B7D7B9F77206F0 ); var_0 = _encstr_87252D1327E6ADE59196B359BED9CAE8324BDCD185CD36B23A7BD88D7BCD5937D1ECC97BAB9B91AC8C0EB1B0CBCAE4() )
        waitframe();

    self._id_133EF = undefined;
    self notify( "_encstr_8A5520833489D0439B97B7F58FF298882D810B7BDEEFD810D323DFF1A77A5DC8CF25" );
}

_encstr_87252D1327E6ADE59196B359BED9CAE8324BDCD185CD36B23A7BD88D7BCD5937D1ECC97BAB9B91AC8C0EB1B0CBCAE4()
{
    var_0 = getdvarint( "_encstr_A4F6318FE74BC0E8132009A00BC5318FD20F3D51CBE21D10337B5078359BE8CC4AEBABF13F8BE5084696D9B41F9E607E22A703", 0 );
    var_1 = undefined;

    foreach ( var_3 in level.players )
    {
        if ( !isdefined( var_3 ) || !isalive( var_3 ) )
            continue;

        if ( !isdefined( var_3.team ) || var_3.team == self.team )
            continue;

        if ( var_0 && isai( var_3 ) )
            continue;

        if ( var_3 isonground() )
        {
            var_4 = abs( distance( self.origin, var_3.origin ) );

            if ( isdefined( var_1 ) )
                var_1 = min( var_4, var_1 );
            else
                var_1 = var_4;
        }
    }

    return var_1;
}

ending_winning_players_setup()
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self endon( "_encstr_BCD523EF6358204B23A206AB8A677008F7FF494305C55003B72B1ED3E317B5588E4CCB27B6" );
    self._id_133ED = 1;

    while ( !self isonground() )
        waitframe();

    self._id_133ED = undefined;
    self notify( "_encstr_BCD523EF6358204B23A206AB8A677008F7FF494305C55003B72B1ED3E317B5588E4CCB27B6" );
}

endingpropspecate()
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self endon( "_encstr_8A5520833489D0439B97B7F58FF298882D810B7BDEEFD810D323DFF1A77A5DC8CF25" );
    self._id_133EF = 1;
    self waittill( "_encstr_BE140D3FF56983E5E5C94AB288DB1F" );
    self._id_133EF = undefined;
    self notify( "_encstr_8A5520833489D0439B97B7F58FF298882D810B7BDEEFD810D323DFF1A77A5DC8CF25" );
}

endingph()
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self endon( "_encstr_8A5520833489D0439B97B7F58FF298882D810B7BDEEFD810D323DFF1A77A5DC8CF25" );
    self._id_133F0 = 1;
    self._id_133F1 = 1;

    while ( istrue( self._id_133EF ) )
    {
        var_0 = _encstr_B89F1FB29377546F09CB0E15C8B1C75BF1602B4BF0350E5740A4E60F76D8CF6529();
        var_1 = level._id_133F5 - level._id_133F4;
        self._id_133F0 = clamp( var_0 / var_1, 0, 1 );
        var_2 = level._id_133F3 - level._id_133F2;
        self._id_133F1 = self._id_133F0 * var_2 + level._id_133F2;
        waitframe();
    }

    self._id_133F1 = undefined;
}

_encstr_806418E25027645F391BDEC538A04FEE8D605A0B08DB5D773175( var_0 )
{
    return isdefined( var_0 ) && scripts\mp\damage::trial_vehicle_outline_id( var_0.basename );
}

endmatchcamerastriggered( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10 )
{
    if ( istrue( level._id_133EF ) )
    {
        if ( istrue( var_1._id_133EF ) && isdefined( self._id_133F1 ) && !_encstr_806418E25027645F391BDEC538A04FEE8D605A0B08DB5D773175( var_5 ) )
            var_3 = var_3 * self._id_133F1;

        if ( isdefined( var_2 ) && istrue( var_2._id_133ED ) )
        {
            switch ( var_4 )
            {
                case "_encstr_A45C0E4B9FDF3165A3B93C4491BFA4A9":
                case "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1":
                case "_encstr_A11B0CBD04C9B790F653EBCF4915":
                case "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C":
                    var_3 = var_3 * level._id_133EE;
                    break;
            }
        }
    }

    var_3 = _encstr_97571CC31EE30FBA499B665A8327B7E7F8F54C512FA93F150D207EF2F097::brmodifyplayerdamage( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10 );
    return var_3;
}

_encstr_B89F1FB29377546F09CB0E15C8B1C75BF1602B4BF0350E5740A4E60F76D8CF6529()
{
    var_0 = _encstr_9E81231898C28383CB8760E558BF27EB18E74BB010797A7D4A032187800594B088064FFB1B::modifyplayer_damage( self.origin, 0, -100000 );
    var_1 = self.origin[2] - var_0[2];
    return var_1;
}
