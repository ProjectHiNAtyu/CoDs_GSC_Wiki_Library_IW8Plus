// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    var_0 = spawnstruct();
    level.rugby = var_0;
    var_0.endzones = [];
    var_0.endzones["_encstr_BC850785638DA59537"] = [];
    var_0.endzones["_encstr_BA840579D3F7F6"] = [];
    var_0.juggcratesetups = [];
    var_0.goals = [];
    var_0.activejuggcrates = [];
    var_0.activejuggernauts = [];
    var_0.lastjuggpositions = [];
    scripts\mp\globallogic::init();
    scripts\mp\globallogic::setupcallbacks();
    var_1[0] = scripts\mp\utility\game::getgametype();
    scripts\mp\gameobjects::main( var_1 );
    initrules();
    level.teambased = 1;
    level.objectivebased = 1;
    level.onstartgametype = ::onstartgametype;
    level.getspawnpoint = ::getspawnpoint;
    level.onnormaldeath = ::onnormaldeath;
    level.onplayerkilled = ::onplayerkilled;
    level.ontimelimit = ::ontimelimit;
    level.onplayerdamaged = ::onplayerdamaged;
    level.modeonteamchangedeath = ::modeonteamchangedeath;
    level.onplayerconnect = ::onplayerconnect;
    level.ontimelimitot = ::ontimelimitot;
    level._id_11C89 = ::get_circle_back_start_node;
    game["_encstr_A33F0EC60B37A96CB7392BD3CD452D2B"] = 1;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_9E3B13FF9781AF03B23AD57FAF38269B0690E838D8";

    if ( getdvarint( "_encstr_B8020A9E9AA69A6292517AA0" ) )
        game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_891904A1D8BE" + game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"];
    else if ( getdvarint( "_encstr_93570B93F4A9629272A825B426" ) )
        game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_889708C9D0E7EBE819D9" + game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"];

    game["_encstr_B8DA073D799798C7C7"]["_encstr_A1B206E238A5E3F5"] = "_encstr_97690C886A45472BD7C20D0CAA37";

    if ( !isdefined( game["_encstr_8AC30D9CDEBA73466E41B1585E568C"] ) )
        var_2 = "_encstr_97690C886A45472BD7C20D0CAA37";
    else
        var_2 = "_encstr_ADA91282481067B3495DB5AF1510313FCBE03B6B";

    game["_encstr_B8DA073D799798C7C7"]["_encstr_9E240C10CE33016D6AEA39B0F244"] = var_2;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B3420C3D576AC3C8736F09906BB2"] = var_2;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9C3E17881382D92B1FDFB8A5C57B497B0BDF9BA2091F585165"] = "_encstr_9C3E17881382D92B1FDFB8A5C57B497B0BDF9BA2091F585165";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8AC01A9CEAB31397EB99C95A59E68C1B5EEB36367B9B2BF5D9DB85B1"] = "_encstr_8AC01A9CEAB31397EB99C95A59E68C1B5EEB36367B9B2BF5D9DB85B1";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B96B108B9BAFD873216B3F0F230932B847F7"] = "_encstr_B96B108B9BAFD873216B3F0F230932B847F7";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9CD0130E6B42F50277EF3008DF7259212954051C47"] = "_encstr_9CD0130E6B42F50277EF3008DF7259212954051C47";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_BC3314BD2D8F40F3377391597BEBA37827AF353BA777"] = "_encstr_BC3314BD2D8F40F3377391597BEBA37827AF353BA777";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_817B13C9AB9D89F2F5D816C1475DE495EBA9D5B3B3"] = "_encstr_9C2B0EB7E69847162188DBE2517DCF57";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_97D80FDBCBFF882351137B57BF6A6DD897"] = "_encstr_ADB01134285511F2B93579F8214344FB118D6B";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9F6D14C957B398F2EBA3B285B6EB9A5DB3B3EB3785B3"] = "_encstr_AA7A0A85AA17290719B39060";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8AE813BA8B18428BB8CFC39333D611B96833F646E0"] = "_encstr_B70E0D2FCB0BE592270AC143411952";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A24F1573FBE4D35E99B7021C4B18413B1F300AFAC14EBF"] = "_encstr_A1EF0F870DC8B73B583112CA982EAFEE18";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B916114EAB76135ED74EB7BA7332EB1BDBB9AC"] = "_encstr_8A480EBD3B95E44ED59BEB2BDC2BB6F2";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_883110FE9BB20592E77BD00823F46E97FAC5"] = "_encstr_9FB61107550593C2AB68490FC3C81D8A6D89A7";
    level._effect["_encstr_8B2F16602797A11B110266785AEA0F09E04B18109721D8FD"] = loadfx( "_encstr_9BCE34EB333A17AAAF5B990D673702E120B01F07E871DF63D5139182C5538BABE8F9ABFF08C9DB5A19A5E97F3D5FA362D0A02213C822" );
}

initrules()
{
    if ( isusingmatchrulesdata() )
    {
        level.initializematchrules = ::initializematchrules;
        [[ level.initializematchrules ]]();
        level thread scripts\mp\utility\game::reinitializematchrulesonmigration();
    }
    else
    {
        scripts\mp\utility\game::registerroundswitchdvar( scripts\mp\utility\game::getgametype(), 1, 0, 1 );
        scripts\mp\utility\game::registertimelimitdvar( scripts\mp\utility\game::getgametype(), 240 );
        scripts\mp\utility\game::registerscorelimitdvar( scripts\mp\utility\game::getgametype(), 75 );
        scripts\mp\utility\game::registerroundlimitdvar( scripts\mp\utility\game::getgametype(), 0 );
        scripts\mp\utility\game::registerwinlimitdvar( scripts\mp\utility\game::getgametype(), 3 );
        scripts\mp\utility\game::registernumlivesdvar( scripts\mp\utility\game::getgametype(), 0 );
        scripts\mp\utility\game::registerhalftimedvar( scripts\mp\utility\game::getgametype(), 0 );
    }

    updategametypedvars();
    level.ontimelimitgraceperiod = remove_steam_damage();
    level.currenttimelimitdelay = 0.0;
}

updategametypedvars()
{
    _encstr_88EA20CDD8932D38E8B9CB5BC1BCD985D6AC47E58395CD5ED8F6B6B5DBDCE2B3378D::updatecommongametypedvars();
}

initializematchrules()
{
    scripts\mp\utility\game::setcommonrulesfrommatchrulesdata();
    var_0 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_9B1D0BA9AEB3EC12592C63A31A" );
    setdynamicdvar( "_encstr_B87A150292A689B61B2F768BC9323B4F17147A46D9B9CC", var_0 );
    var_1 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_B9990A9AAB9DD93538B22B46" );
    setdynamicdvar( "_encstr_8BB714CDD8C9AF9CAB76312FAFA65D76ECD40E2BB246", var_1 );
    var_2 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_8B110E22D3318F5970018AAA51402DF5" );
    setdynamicdvar( "_encstr_89C6186EB1C9AF4EBAD9C4F27D53AEEC9D8A95B0ADD4832BAC32", var_2 );
    var_3 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_A4BC0C53BA3BCE15A5DA95B75D8E" );
    setdynamicdvar( "_encstr_B4AA16A696B387A3336FF85F86F24B4054F16B4AA9B7A36B", var_3 );
    var_4 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_80FC0A1A2BD81C599335B0C3" );
    setdynamicdvar( "_encstr_8A6914B98DC9D739D59D4CBCEBD0CAB183AC9CD4B00F", var_4 );
    var_5 = getmatchrulesdata( "_encstr_B3B80A4EAB764C9788B0A385", "_encstr_B9751053573B76860B388ED5C956A2D26BAC" );
    setdynamicdvar( "_encstr_B7631A6EC69CEBE4AECE98CBEBA95DB3EC860B83A3AE3995154B5B56", var_5 );
}

getjuggmaxhealth()
{
    return getdvarint( "_encstr_B87A150292A689B61B2F768BC9323B4F17147A46D9B9CC" );
}

getjuggspeedscalar( var_0 )
{
    var_1 = -0.3 + 0.1 * getdvarfloat( "_encstr_8BB714CDD8C9AF9CAB76312FAFA65D76ECD40E2BB246" );
    var_0 = int( min( var_0, getdvarint( "_encstr_8A6914B98DC9D739D59D4CBCEBD0CAB183AC9CD4B00F" ) ) );
    var_2 = 0.08 * getdvarfloat( "_encstr_89C6186EB1C9AF4EBAD9C4F27D53AEEC9D8A95B0ADD4832BAC32" );
    return var_1 + var_0 * var_2;
}

getjuggtimeout()
{
    return getdvarfloat( "_encstr_B4AA16A696B387A3336FF85F86F24B4054F16B4AA9B7A36B" );
}

remove_spawn_disable_struct()
{
    return getdvarfloat( "_encstr_B7631A6EC69CEBE4AECE98CBEBA95DB3EC860B83A3AE3995154B5B56" );
}

remove_steam_damage()
{
    return getdvarfloat( "_encstr_ADE617E6D8E4AF4E5DEC892FD7A95DCED93D67569C3AA5B5CA", 45 );
}

onstartgametype()
{
    setclientnamemode( "_encstr_95900C2EDBD01F99D6B1DFEB878D" );

    foreach ( var_1 in level.teamnamelist )
        scripts\mp\utility\game::setobjectivetext( var_1, &"_encstr_94301F0169B9EB9C6BC528A6CDBFE50B0D4091C91045A3D66F2A5A35F39BCCAD4F" );

    setupwaypointicons();
    _id_12C4B();
    thread initrugbyents();
    thread setupinitialstate();
    initspawns();
    initjugg();
    level thread _id_136F4();
    setomnvar( "_encstr_9F4514701B9195BBD176F32F1A4327C99198A8905272", 0 );
    setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", 0 );
}

_id_136F4()
{
    scripts\mp\flags::gameflagwait( "_encstr_989F0E38272BD6161DB143F532BDDC2B" );
    wait 5;
    level thread scripts\mp\hud_message::notifyteam( "_encstr_B4860DA6EA3BD9EB36851CE8EA9C2B", "_encstr_B4860DA6EA3BD9EB36851CE8EA9C2B", "_encstr_BC850785638DA59537" );
}

initrugbyents()
{
    level.trial_target_headshot_func = scripts\engine\utility::array_combine( level.outofboundstriggers, level.minetriggers, level.hurttriggers, level.radtriggers );
    initendzoneents();
    initjuggcratesetupents();
}

initendzoneents()
{
    var_0 = level.rugby;
    var_1 = scripts\engine\utility::getstructarray( "_encstr_87AA0EC9BAD9982FF559CD324FDECD2B", "_encstr_B8CE0BE43FC317DF690862BA48" );

    foreach ( var_3 in var_1 )
    {
        initendzoneent( var_3 );
        var_0.endzones[var_3.team][var_0.endzones[var_3.team].size] = var_3;
    }
}

initendzoneent( var_0 )
{
    var_1 = getentarray( var_0.target, "_encstr_B8CE0BE43FC317DF690862BA48" );

    foreach ( var_3 in var_1 )
    {
        if ( var_3.classname == "_encstr_87C222DC9E883F4753937952D0A97BFF4309557FB9F3974A2B90B2EB9983B583BA60D6FD" )
            var_0.trigger = var_3;

        if ( isdefined( var_3.script_noteworthy ) && getsubstr( var_3.script_noteworthy, 0, 3 ) == "_encstr_811804D8B049" )
            var_3 delete();
    }

    getlinktarget( var_0 );

    if ( var_0.spawnflags & 1 )
    {
        var_0.team = "_encstr_BC850785638DA59537";
        var_0.trigger.objectivekey = "_encstr_BC850785638DA59537";
    }
    else if ( var_0.spawnflags & 2 )
    {
        var_0.team = "_encstr_BA840579D3F7F6";
        var_0.trigger.objectivekey = "_encstr_BA840579D3F7F6";
    }
    else
    {
        var_0.team = "_encstr_BC850785638DA59537";
        var_0.trigger.objectivekey = "_encstr_BC850785638DA59537";
    }

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_0.chevrons ) )
            level thread _id_13232( var_0 );
    }
}

getlinktarget( var_0 )
{
    if ( level.mapname == "_encstr_93670AB8D3011F93679BDBEE" )
    {
        if ( distance2d( var_0.origin, ( 312, -1552, 216 ) ) < 10 )
            var_0.spawnflags = 1;
    }
    else if ( level.mapname == "_encstr_AB490DB5E0EB6EC6E45807F20B9391" )
    {
        if ( distance2d( var_0.origin, ( -25223.3, -12439.2, 36.5 ) ) < 10 )
            var_0.spawnflags = 2;
        else if ( distance2d( var_0.origin, ( -26150.7, -8967.81, 144 ) ) < 10 )
            var_0.spawnflags = 1;
    }
}

initjuggcratesetupents()
{
    var_0 = level.rugby;
    var_1 = scripts\engine\utility::getstructarray( "_encstr_971511E4ABCE262F7D53BA763BF5D8E42CD195", "_encstr_B8CE0BE43FC317DF690862BA48" );

    foreach ( var_3 in var_1 )
    {
        var_3 = player_get_sniper_weapon_object( var_3 );
        var_0.juggcratesetups[var_0.juggcratesetups.size] = var_3;
    }

    level.rugby = var_0;
}

player_get_sniper_weapon_object( var_0 )
{
    switch ( level.mapname )
    {
        case "_encstr_82970ED318FF61ADFFABC34919F1866A":
            if ( distance( var_0.origin, ( 3113.65, -1118.5, 378.5 ) ) < 10 )
                var_0.origin = ( 2751, -1028, 376.5 );

            break;
        default:
            break;
    }

    return var_0;
}

initoverheadcameras()
{
    level.spectatorcameras = [];
    level.spectatorcameras[0]["_encstr_BC850785638DA59537"] = spawnstruct();
    level.spectatorcameras[0]["_encstr_BA840579D3F7F6"] = spawnstruct();
    scripts\mp\spawncamera::setgamemodecamera( "_encstr_BC850785638DA59537", level.spectatorcameras[0]["_encstr_BC850785638DA59537"] );
    scripts\mp\spawncamera::setgamemodecamera( "_encstr_BA840579D3F7F6", level.spectatorcameras[0]["_encstr_BA840579D3F7F6"] );
    updateoverheadcamerapos( "_encstr_BC850785638DA59537" );
    updateoverheadcamerapos( "_encstr_BA840579D3F7F6" );
    level.updategamemodecamera = ::updateoverheadcamerapos;
    level.spectatorcameratime = 1.25;
}

initjugg()
{
    var_0 = scripts\mp\juggernaut::jugg_createconfig();
    level.rugby.juggconfig = var_0;
    var_1 = getjuggmaxhealth();
    var_0.maxhealth = var_1;
    var_0.startinghealth = var_1;
    var_2 = "_encstr_9F6B184CB4093F3A9B57A88DC3BB19A361918DB091EB958F4AC0";

    if ( scripts\common\utility::iscp() )
        var_2 = "_encstr_8FF0184F50EAAF52134CDF572EFD3A4DCBA9EFB379DBDDCA155B";

    var_0.suit = var_2;
    var_0.clothtype = "_encstr_9D6C0A764D932BEC3BE0834B";
    var_0.forcetostand = 0;
    var_0.allows["_encstr_9F100737E04EA5738E"] = 1;
    var_0.allows["_encstr_A80F0EAFBBDF6B0710B68A93689853A2"] = undefined;
    var_0.classstruct.loadoutprimary = "_encstr_B7060D79FFD2C1ABA9CE6A12B0F1CF";
}

initspawns()
{
    var_0 = level.rugby;
    level.spawnmins = ( 0, 0, 0 );
    level.spawnmaxs = ( 0, 0, 0 );
    scripts\mp\spawnlogic::setactivespawnlogic( "_encstr_A66A06EA0D593BF0", "_encstr_939A0D8DC347E521C7B50503CDB5A3" );
    var_0.startspawnclassname = "_encstr_986E0F6A38072A674196D9C7368BFFB3BD";
    scripts\mp\spawnlogic::addstartspawnpoints( var_0.startspawnclassname + "_encstr_9E1C0E6107617AA96950AF1740C18A43", 1, "_encstr_BC850785638DA59537" );
    scripts\mp\spawnlogic::addstartspawnpoints( var_0.startspawnclassname + "_encstr_B8420CBF6FD27F0A6F5083AA2041", 1, "_encstr_BA840579D3F7F6" );

    if ( !isdefined( level.teamstartspawnpoints ) )
    {
        var_0.startspawnclassname = "_encstr_B1090D98F3211171B757B62F41F7F8";
        scripts\mp\spawnlogic::addstartspawnpoints( var_0.startspawnclassname + "_encstr_9E1C0E6107617AA96950AF1740C18A43", 1, "_encstr_BC850785638DA59537" );
        scripts\mp\spawnlogic::addstartspawnpoints( var_0.startspawnclassname + "_encstr_B8420CBF6FD27F0A6F5083AA2041", 1, "_encstr_BA840579D3F7F6" );
    }

    var_1 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_A95E16D60EEB27AE7613E5F59B8358DDB9F5168DD896959B" );
    var_2 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_975714DD974663FB6F880379189936BF98E85950A36B" );

    if ( var_1.size <= 0 || var_2.size <= 0 )
    {
        var_3 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_B1090D98F3211171B757B62F41F7F8" );

        foreach ( var_5 in var_3 )
        {
            if ( distancesquared( var_5.origin, var_0.goals["_encstr_BC850785638DA59537"].origin ) < distancesquared( var_5.origin, var_0.goals["_encstr_BA840579D3F7F6"].origin ) )
            {
                var_1[var_1.size] = var_5;
                continue;
            }

            var_2[var_2.size] = var_5;
        }
    }

    var_7 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_817320D607BE93ABCE4C5EBECD1CB077B9AF2CC6362D95377DB95636DE37C82CC997" );
    var_8 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_ADA21EDD974663FB6F880379189936BF98E85950A36B8F0203A86A624893AAFF" );
    scripts\mp\spawnlogic::registerspawnpoints( "_encstr_BC850785638DA59537", var_1 );
    scripts\mp\spawnlogic::registerspawnpoints( "_encstr_BA840579D3F7F6", var_2 );
    scripts\mp\spawnlogic::registerspawnpoints( "_encstr_BC850785638DA59537", var_7 );
    scripts\mp\spawnlogic::registerspawnpoints( "_encstr_BA840579D3F7F6", var_8 );
    scripts\mp\spawnlogic::registerspawnset( "_encstr_89730D39D5B3C497AF16C68DA5CADC", var_1 );
    scripts\mp\spawnlogic::registerspawnset( "_encstr_A6A00B0A2D57BAD94EA0531F58", var_2 );
    scripts\mp\spawnlogic::registerspawnset( "_encstr_A9F912CADBA48D77084910A962F9F359F589A759", var_7 );
    scripts\mp\spawnlogic::registerspawnset( "_encstr_9C62104A7BE8B25B68035B174F30B2E9E0C1", var_8 );
    var_0.spawnsets = [];
    var_0.spawnsets["_encstr_BC850785638DA59537"] = "_encstr_89730D39D5B3C497AF16C68DA5CADC";
    var_0.spawnsets["_encstr_BA840579D3F7F6"] = "_encstr_A6A00B0A2D57BAD94EA0531F58";
    var_0.fallbackspawnsets = [];
    var_0.fallbackspawnsets["_encstr_BC850785638DA59537"] = "_encstr_A9F912CADBA48D77084910A962F9F359F589A759";
    var_0.fallbackspawnsets["_encstr_BA840579D3F7F6"] = "_encstr_9C62104A7BE8B25B68035B174F30B2E9E0C1";
    level.mapcenter = scripts\mp\spawnlogic::findboxcenter( level.spawnmins, level.spawnmaxs );
    setmapcenter( level.mapcenter );
}

getspawnpoint()
{
    var_0 = level.rugby;
    var_1 = self.pers["_encstr_89EF05D46BA8FD"];

    if ( istrue( game["_encstr_A6D60EE09BF413B9945185CB4797C583"] ) )
        var_1 = scripts\engine\utility::ter_op( var_1 == "_encstr_BC850785638DA59537", "_encstr_BA840579D3F7F6", "_encstr_BC850785638DA59537" );

    var_2 = scripts\engine\utility::ter_op( var_1 == "_encstr_BC850785638DA59537", "_encstr_BA840579D3F7F6", "_encstr_BC850785638DA59537" );

    if ( scripts\mp\spawnlogic::shoulduseteamstartspawn() )
    {
        var_3 = scripts\mp\spawnlogic::getspawnpointarray( var_0.startspawnclassname + "_encstr_984C028E" + var_1 + "_encstr_A4810727CEFBF7F281" );
        var_4 = scripts\mp\spawnlogic::getspawnpoint_startspawn( var_3 );
    }
    else
    {
        var_5 = getjuggorcratepos();
        var_6 = [];
        var_6["_encstr_B9010F6E4BCDB336B214EDB49B8E057BE6"] = var_5;
        var_6["_encstr_974A17B748C84C9AF72D0BFD86EBA237D0403B37D060B4E10B"] = 562500;
        var_6["_encstr_95F7173D939047FFE6EB298217332B47C87398B73B88136F8F"] = 36000000;
        var_6["_encstr_AA7619E85A12399F5F8E545DACBF67CBBD42207861AD5B50639B67"] = 35437500;
        var_6["_encstr_A3D80872ADF98F1AD798"] = var_5;
        var_6["_encstr_B828103957CE9897232DAC3619114BE46422"] = var_0.goals[var_2].origin - var_0.goals[var_1].origin;
        var_4 = scripts\mp\spawnlogic::getspawnpoint( self, self.team, var_0.spawnsets[var_1], var_0.fallbackspawnsets[var_1], undefined, var_6 );
    }

    return var_4;
}

modeonteamchangedeath( var_0 )
{
    if ( isdefined( level._id_12DD4 ) )
        var_0 setclientomnvar( "_encstr_9FC3176852112D634FBA63489A2FE9DFC94AA84B0AF549184F", scripts\engine\utility::ter_op( var_0.team == level._id_12DD4.team, 0, 1 ) );
}

onplayerconnect( var_0 )
{
    var_0 scripts\mp\utility\stats::setextrascore0( 0 );

    if ( isdefined( var_0.pers["_encstr_B8BE07320B5B16ECAC"] ) )
        var_0 scripts\mp\utility\stats::setextrascore0( var_0.pers["_encstr_B8BE07320B5B16ECAC"] );

    var_0 scripts\mp\utility\stats::setextrascore1( 0 );

    if ( isdefined( var_0.pers["_encstr_9CF70851FD0FB8B81BB3"] ) )
        var_0 scripts\mp\utility\stats::setextrascore1( var_0.pers["_encstr_9CF70851FD0FB8B81BB3"] );

    thread onplayerspawned( var_0 );
}

onplayerspawned( var_0 )
{
    var_0 waittill( "_encstr_983508635BE787C548A1" );

    if ( isdefined( level._id_12DD4 ) && isdefined( level._id_12DD4.team ) && isdefined( var_0.team ) )
        var_0 setclientomnvar( "_encstr_9FC3176852112D634FBA63489A2FE9DFC94AA84B0AF549184F", scripts\engine\utility::ter_op( var_0.team == level._id_12DD4.team, 0, 1 ) );
}

onplayerdamaged( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12, var_13 )
{
    if ( isdefined( var_1 ) && var_1 != var_2 && isplayer( var_1 ) )
    {
        if ( var_3 >= var_7 )
            var_3 = var_7;

        var_1 scripts\mp\persistence::statsetchild( "_encstr_A2460627DEABDC23", "_encstr_B8BE07320B5B16ECAC", var_1.pers["_encstr_B8BE07320B5B16ECAC"] );
        var_1 scripts\mp\utility\stats::setextrascore0( var_1.pers["_encstr_B8BE07320B5B16ECAC"] );
    }
}

onnormaldeath( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    _encstr_88EA20CDD8932D38E8B9CB5BC1BCD985D6AC47E58395CD5ED8F6B6B5DBDCE2B3378D::oncommonnormaldeath( var_0, var_1, var_2, var_3, var_4, var_5 );
}

onplayerkilled( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 )
{
    self.overrideweaponspeed_speedscale = undefined;

    if ( !isplayer( var_1 ) || var_1.team == self.team )
        return;

    awardgenericmedals( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 );
}

awardgenericmedals( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 )
{
    var_10 = 0;
    var_11 = 0;
    var_12 = self;
    var_13 = var_12.origin;
    var_14 = var_1.origin;
    var_15 = 0;

    if ( isdefined( var_0 ) )
    {
        var_14 = var_0.origin;
        var_15 = var_0 == var_1;
    }

    if ( isdefined( level._id_12DD4 ) )
    {
        if ( isdefined( var_1 ) && isplayer( var_1 ) && var_1.team != var_12.team )
        {
            if ( var_1 == level._id_12DD4 )
                var_1 thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_B1681304F0B8B4217F2FBF135B14EAF510B83E0BCB" );
            else if ( var_12 == level._id_12DD4 )
                var_1 thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_98BA10DF38F81489553D574F2D4D52A16378" );
            else if ( var_1.team == level._id_12DD4.team && var_1 != level._id_12DD4 )
            {
                var_16 = distancesquared( level._id_12DD4.origin, var_14 );

                if ( var_16 < 105625 )
                {
                    var_1 thread scripts\mp\rank::scoreeventpopup( "_encstr_8C0C07812DDF6808AB" );
                    var_1 thread scripts\mp\awards::givemidmatchaward( "_encstr_B3D80EB6ED91567DE17D91B2CC95CD23" );
                    var_1 scripts\mp\utility\stats::incpersstat( "_encstr_9CF70851FD0FB8B81BB3", 1 );
                    var_1 scripts\mp\persistence::statsetchild( "_encstr_A2460627DEABDC23", "_encstr_9CF70851FD0FB8B81BB3", var_1.pers["_encstr_9CF70851FD0FB8B81BB3"] );
                    var_1 scripts\mp\utility\stats::setextrascore1( var_1.pers["_encstr_9CF70851FD0FB8B81BB3"] );
                    thread scripts\common\utility::_id_13E0A( level._id_11B30, var_9, "_encstr_97A70AE945873020839AC811" );
                    return;
                }
            }
            else if ( var_1.team != level._id_12DD4.team && var_12.team == level._id_12DD4.team )
            {
                var_16 = distancesquared( level._id_12DD4.origin, var_13 );

                if ( var_16 < 105625 )
                {
                    var_1 thread scripts\mp\rank::scoreeventpopup( "_encstr_973508BF93EFFBC363B3" );
                    var_1 thread scripts\mp\awards::givemidmatchaward( "_encstr_BA020F68F21FC3E6F347AF9E43BFEB8943" );
                    thread scripts\common\utility::_id_13E0A( level._id_11B26, var_9, "_encstr_BCD10B8953E73F13911C1BDA2A" );
                }
            }
        }
    }
}

ontimelimit()
{
    if ( level.gameended )
        return;

    thread scripts\mp\gamelogic::endgame( "_encstr_8A190423A45D", game["_encstr_94EA0B2BE623AF39CA589BBDB9"]["_encstr_A69C0A4E2B5DCAD24E08172F"] );
}

ontimelimitot()
{
    if ( level.rugby.activejuggernauts.size > 0 )
    {
        if ( !istrue( level.rugby.inot ) )
        {
            setomnvar( "_encstr_BD8911631F31CFC0F7B2930AD8112FA9BF20C2", gettime() + remove_steam_damage() * 1000 );
            level.rugby.inot = 1;
            level.canprocessot = 1;
            _id_13166();
            level thread vehicle_isenemytoteam();
        }
    }
    else
    {
        level.canprocessot = 1;
        level.currenttimelimitdelay = level.ontimelimitgraceperiod;
    }
}

vehicle_isenemytoteam()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    for (;;)
    {
        if ( level.rugby.activejuggernauts.size > 0 )
        {
            wait 0.05;
            continue;
        }

        level.currenttimelimitdelay = level.ontimelimitgraceperiod;
        break;
    }
}

_id_13167()
{
    var_0 = getdvarfloat( "_encstr_B4AA16A696B387A3336FF85F86F24B4054F16B4AA9B7A36B" );
    var_0 = int( var_0 * 1000 + gettime() );
    setomnvar( "_encstr_9F4514701B9195BBD176F32F1A4327C99198A8905272", var_0 );
    setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", 1 );
    return var_0;
}

_id_13166()
{
    level notify( "_encstr_9E40130B40CF7006FA3D67BA4B4FE9B3FD6D455DB8" );
    setomnvar( "_encstr_9F4514701B9195BBD176F32F1A4327C99198A8905272", 0 );
    setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", 0 );
}

getjuggorcratepos()
{
    var_0 = level.rugby;

    if ( isdefined( level._id_12DD4 ) )
        return level._id_12DD4.origin;
    else if ( var_0.activejuggernauts.size > 0 )
    {
        foreach ( var_2 in var_0.activejuggernauts )
            return var_2.origin;
    }
    else
    {
        foreach ( var_5 in var_0.activejuggcrates )
            return var_5.origin;
    }

    return undefined;
}

doesteamhaveactivejugg( var_0 )
{
    var_1 = level.rugby;

    if ( var_1.activejuggernauts.size > 0 )
    {
        foreach ( var_3 in var_1.activejuggernauts )
        {
            if ( var_3.team == var_0 )
                return 1;
        }
    }

    return 0;
}

onjuggproximityscore( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    playsoundatpos( var_0.origin, "_encstr_98E710563C38F5C4DBB513DCD21DCAFA3627" );
    playfx( scripts\engine\utility::getfx( "_encstr_8B2F16602797A11B110266785AEA0F09E04B18109721D8FD" ), var_0.origin );
    var_1 = scripts\mp\utility\player::getplayersinradius( var_0.origin, 800 );

    foreach ( var_3 in var_1 )
    {
        if ( var_3 != var_0 && var_3.team != var_0.team )
            var_3 dodamage( 5000, var_0.origin, var_3, undefined, "_encstr_A45C0E4B9FDF3165A3B93C4491BFA4A9" );
    }

    thread scripts\mp\gamelogic::endgame( var_0.team, game["_encstr_94EA0B2BE623AF39CA589BBDB9"]["_encstr_97CA113A0B4ED995E8AF192BE64739BDE5B246"] );
}

setupinitialstate()
{
    var_0 = level.rugby;

    if ( !activateendzone( var_0.endzones["_encstr_BC850785638DA59537"][0], "_encstr_BC850785638DA59537" ) )
        return;

    if ( !activateendzone( var_0.endzones["_encstr_BA840579D3F7F6"][0], "_encstr_BA840579D3F7F6" ) )
        return;

    if ( !activatenewjuggcrate() )
        return;
}

activatenewjuggcrate()
{
    var_0 = randomint( level.rugby.juggcratesetups.size );
    var_1 = level.rugby.juggcratesetups[var_0];

    if ( !isdefined( var_1 ) )
        return 0;

    return activatejuggcrate( var_1.origin, scripts\engine\utility::ter_op( isdefined( var_1.angles ), var_1.angles, ( 0, 0, 0 ) ), 1 );
}

activateendzone( var_0, var_1 )
{
    var_2 = level.rugby;

    if ( istrue( game["_encstr_A6D60EE09BF413B9945185CB4797C583"] ) )
        var_1 = scripts\engine\utility::ter_op( var_1 == "_encstr_BC850785638DA59537", "_encstr_BA840579D3F7F6", "_encstr_BC850785638DA59537" );

    if ( !isdefined( var_0 ) )
        return 0;

    if ( isdefined( var_2.goals[var_1] ) )
        deactivateendzone( var_2.goals[var_1] );

    var_2.goals[var_1] = var_0;
    var_0 thread watchforjuggproximityscore( var_1 );
    return 1;
}

deactivateendzone( var_0 )
{
    var_0 notify( "_encstr_A8C8138FC525B37F78A929EF41E8BB8B0B5D27434B" );
}

_id_13232( var_0 )
{
    if ( level.mapname == "_encstr_8C200C3DB1A98AFBEB6BBA22B0BD" || level.mapname == "_encstr_A8640D3557CF220D73C043173809C3" || level.mapname == "_encstr_AD8808C368C180B5C743" || level.mapname == "_encstr_93670AB8D3011F93679BDBEE" || level.mapname == "_encstr_93740CB51CAFADB08DE5B91A59B3" )
    {
        if ( var_0.trigger.objectivekey == "_encstr_BC850785638DA59537" )
            var_1 = "_encstr_B2BD13F7595DB32F5B99B150AFD3D84035F7FB1160";
        else
            var_1 = "_encstr_8B3F11F9ABB85F5943F03AD310BD0F37F39B53";
    }
    else if ( level.mapname == "_encstr_BA2D0C1A1889F6509358B288911B" )
    {
        if ( var_0.trigger.targetname == "_encstr_87A90F85361B5AAC37D7AC378CF4ED7395" )
            var_1 = "_encstr_8B3F11F9ABB85F5943F03AD310BD0F37F39B53";
        else
            var_1 = "_encstr_B2BD13F7595DB32F5B99B150AFD3D84035F7FB1160";
    }
    else if ( var_0.trigger.targetname == "_encstr_87A90F85361B5AAC37D7AC378CF4ED7395" )
        var_1 = "_encstr_B2BD13F7595DB32F5B99B150AFD3D84035F7FB1160";
    else
        var_1 = "_encstr_8B3F11F9ABB85F5943F03AD310BD0F37F39B53";

    var_0 thread cargo_truck_mg_initomnvars( var_1, var_0.trigger.targetname );
    var_0 thread updatechevrons( "_encstr_9BC505B4461BB2" );
}

cargo_truck_mg_initomnvars( var_0, var_1 )
{
    wait 1.0;
    var_2 = getentitylessscriptablearrayinradius( var_0, "_encstr_B8CE0BE43FC317DF690862BA48" );
    var_2 = _id_12805( var_2, var_1 );
    var_3 = [];

    foreach ( var_5 in var_2 )
    {
        var_6 = var_3.size;
        var_3[var_6] = var_5;
        var_3[var_6].numchevrons = 1;

        if ( isdefined( var_5.script_noteworthy ) )
        {
            if ( var_5.script_noteworthy == "_encstr_9B4C028A" )
            {
                var_3[var_6].numchevrons = 2;
                continue;
            }

            if ( var_5.script_noteworthy == "_encstr_A94C0242" )
            {
                var_3[var_6].numchevrons = 3;
                continue;
            }

            if ( var_5.script_noteworthy == "_encstr_B94C02A9" )
                var_3[var_6].numchevrons = 4;
        }
    }

    self.chevrons = var_3;
}

updatechevrons( var_0 )
{
    self notify( "_encstr_AABA0F4FAACDB170519FF9EF16E697901F" );
    self endon( "_encstr_AABA0F4FAACDB170519FF9EF16E697901F" );

    while ( !isdefined( self.chevrons ) )
        waitframe();

    foreach ( var_2 in self.chevrons )
    {
        for ( var_3 = 0; var_3 < var_2.numchevrons; var_3++ )
            var_2 setscriptablepartstate( "_encstr_A17509D31AA58C430FB219" + var_3, var_0 );
    }
}

_id_12C1D( var_0, var_1 )
{
    var_2 = [];
    var_3 = [];

    switch ( level.mapname )
    {
        case "_encstr_B1110BDDD007984FF3EB671D71":
            var_3["_encstr_AF4C02EA"] = [ ( -564, 1848, 24 ) ];
            var_3["_encstr_9B4C028A"] = [ ( -1314, 440, 24 ), ( -1362, 816, 24 ) ];
            break;
        case "_encstr_B7FF08B607EB1B853BCA":
        case "_encstr_94020B5F680693E2154DD156A1":
            var_3["_encstr_A94C0242"] = [ ( -692, 1828, 42 ), ( -300, 1548, 76 ) ];
            break;
        case "_encstr_AF89088A6177FB3F82EC":
            var_3["_encstr_AB4C02E0"] = [ ( 688, 256, 280 ) ];
            var_3["_encstr_9407030723"] = [ ( 212, 1436, 338 ) ];
            break;
        default:
            break;
    }

    if ( isdefined( var_3[var_1] ) )
    {
        foreach ( var_5 in var_0 )
        {
            foreach ( var_7 in var_3[var_1] )
            {
                if ( distance( var_5.origin, var_7 ) < 10 )
                {
                    var_2[var_2.size] = var_5;
                    break;
                }
            }
        }
    }

    var_0 = scripts\engine\utility::array_remove_array( var_0, var_2 );
    return var_0;
}

_id_12805( var_0, var_1 )
{
    var_2 = [];
    var_3 = [];

    switch ( level.mapname )
    {
        case "_encstr_A4870E72AB086BF4A87FA1AC03B8FD17":
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( -2376, -3322, 39 ), ( 0, -90, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][1] = [ ( -2071, -3537, 0 ), ( 0, 180, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][2] = [ ( -2071, -3653, 0 ), ( 0, 180, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][3] = [ ( -2071, -3754, 3 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"] = [];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][0] = [ ( 2137, 493, 124 ), ( 0, -85, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][1] = [ ( 2302, 495, 128 ), ( 0, -90, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][2] = [ ( 2390, 495, 134 ), ( 0, -90, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][3] = [ ( 2457, 494, 134 ), ( 0, -90, 0 ) ];
            break;
        case "_encstr_B4040A48FAB7A85FD373DFED":
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"] = [];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][0] = [ ( -722, -1428, 201 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][1] = [ ( -722, -1567, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][2] = [ ( -721, -1496, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][3] = [ ( -721, -1639, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][4] = [ ( -720, -1711, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][5] = [ ( -720, -1806, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][6] = [ ( -719, -1896, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][7] = [ ( -719, -1999, 200 ), ( 0, 0, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][8] = [ ( -483, -2074, 200 ), ( 0, -270, 0 ) ];
            break;
        case "_encstr_AD2D0A28831FF3FB02761025":
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( 4948, 1284, 9 ), ( 0, 45, 0 ) ];
            break;
        case "_encstr_B1110BDDD007984FF3EB671D71":
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"] = [];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][0] = [ ( -603, 3101, 33 ), ( 0, 155, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( -1070, 600, 32 ), ( 0, -20, 0 ) ];
            break;
        case "_encstr_942B0BAD07AFA116399134B03A":
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"] = [];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][0] = [ ( 1773, -1148, 302 ), ( 0, -90, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][1] = [ ( 2098, -1153, 292 ), ( 0, -90, 0 ) ];
            break;
        case "_encstr_95EE0AB5E0FA9CAB73DCAC93":
        case "_encstr_A1B90D69C2293D7BBE73E828CFD830":
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( 1648, 367, 291 ), ( 0, 0, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][1] = [ ( 1947, 859, 255 ), ( 0, 270, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][2] = [ ( 1691, 854, 291 ), ( 0, 270, 0 ) ];
            break;
        case "_encstr_AF89088A6177FB3F82EC":
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( -2404.94, -1457.67, 280 ), ( 0, 0, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][1] = [ ( -849.814, -1158.33, 280 ), ( 0, 180, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][2] = [ ( -1978.45, -341.57, 280 ), ( 0, 270, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][3] = [ ( -1143, -975, 280 ), ( 0, 270, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"] = [];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][0] = [ ( -1300.9, 4861.72, 269 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][1] = [ ( -1300.9, 4947, 269 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][2] = [ ( -1300.9, 4759, 269 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][3] = [ ( -1293.48, 4459.81, 273 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][4] = [ ( -1293.48, 4392, 274 ), ( 0, 180, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][5] = [ ( -2300.19, 3725.48, 288 ), ( 0, 90, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][6] = [ ( -1700.19, 3725.48, 286 ), ( 0, 90, 0 ) ];
            var_2["_encstr_AAA50D0B8B54F7FE8F4E151257FBE1"][7] = [ ( -1598.19, 4348.83, 279 ), ( 0, 90, 0 ) ];
            break;
        case "_encstr_AB570E0D67B6FB0E9710A26AF89746A7":
        case "_encstr_944B10ED4796DB2EB730820A98F760B76B25":
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"] = [];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][0] = [ ( 765, -1883, 23 ), ( 0, 180, 0 ) ];
            var_2["_encstr_87A90F85361B5AAC37D7AC378CF4ED7395"][1] = [ ( 762, -2006, 187 ), ( 0, 180, 0 ) ];
            break;
        default:
            break;
    }

    if ( isdefined( var_2[var_1] ) )
    {
        foreach ( var_5 in var_2[var_1] )
        {
            var_6 = var_5[0];
            var_7 = var_5[1];
            var_8 = easepower( "_encstr_AD65120D2CE4231CBD4B37D1AFB11AB23B93DB37", var_6, var_7 );
            var_3[var_3.size] = var_8;
        }
    }

    var_0 = scripts\engine\utility::array_combine( var_0, var_3 );
    return var_0;
}

init_vo_arrays( var_0, var_1, var_2 )
{
    var_0.origin = var_1;
    var_0.angles = var_2;
    return var_0;
}

setupgoalvisualsforjugg( var_0 )
{
    var_1 = var_0.team;
    var_2 = scripts\mp\utility\teams::getenemyteams( var_1 );
    var_3 = var_2[0];
    var_4 = level.rugby.goals[var_3];
    var_4 thread updatechevrons( var_3 );
    var_5 = level.rugby.goals[var_1];
    var_5 thread updatechevrons( "_encstr_9819045FD029" );
}

watchforjuggproximityscore( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_A8C8138FC525B37F78A929EF41E8BB8B0B5D27434B" );

    for (;;)
    {
        self.trigger waittill( "_encstr_8B5C081B58E0B7A213E6", var_1 );

        if ( isdefined( var_1.rugbyjugginfo ) && var_1.team != var_0 )
        {
            onjuggproximityscore( var_1 );
            return;
        }
    }
}

activatenewjuggernaut( var_0 )
{
    var_1 = level.rugby;
    var_2 = setupplayerasjugg( var_0 );

    if ( !var_2 )
        return 0;

    var_3 = spawnstruct();
    var_3.player = var_0;
    var_4 = var_0 getentitynumber();
    var_3.id = var_4;
    var_1.activejuggernauts[var_4] = var_0;
    level._id_12DD4 = var_0;
    var_0.rugbyjugginfo = var_3;
    createobjectiveiconsforactivejugg( var_0, var_3 );
    startjugghud( var_0 );
    setupgoalvisualsforjugg( var_0 );
    var_0 thread watchjugghealth();
    var_0 thread watchforjuggdeathdisconnect();
    var_0 thread watchjuggprogress();
    var_0 thread watchteammatesnearjugg();

    if ( getjuggtimeout() > 0 )
        var_0 thread watchjuggtimeout();

    var_0 scripts\mp\utility\dialog::leaderdialogonplayer( "_encstr_97D80FDBCBFF882351137B57BF6A6DD897", "_encstr_A1190435A1B8" );
    var_0 thread scripts\mp\hud_message::showsplash( "_encstr_A8B10CE2EBF4D799D0810111BBE8" );
    var_5 = [ var_0 ];
    var_6 = scripts\mp\utility\game::getotherteam( var_0.team )[0];
    scripts\mp\utility\dialog::statusdialog( "_encstr_9CD0130E6B42F50277EF3008DF7259212954051C47", var_0.team, "_encstr_A1190435A1B8", var_5 );
    scripts\mp\utility\dialog::statusdialog( "_encstr_B96B108B9BAFD873216B3F0F230932B847F7", var_6, "_encstr_A1190435A1B8" );
    level thread _id_12451( var_0.team, var_6 );

    foreach ( var_8 in level.players )
    {
        if ( var_8.team == var_0.team )
        {
            if ( var_8 != var_0 )
                var_8 thread scripts\mp\hud_message::showsplash( "_encstr_B3CA0E4DED4FA820079273FB3BABE568" );

            continue;
        }

        var_8 thread scripts\mp\hud_message::showsplash( "_encstr_B6090A80830F1736538756CD" );
    }

    return 1;
}

_id_12451( var_0, var_1 )
{
    wait 3;
    scripts\mp\utility\dialog::statusdialog( "_encstr_8AE813BA8B18428BB8CFC39333D611B96833F646E0", var_0 );
    scripts\mp\utility\dialog::statusdialog( "_encstr_A24F1573FBE4D35E99B7021C4B18413B1F300AFAC14EBF", var_1 );
}

deactivatejuggernaut( var_0 )
{
    var_1 = level.rugby;
    var_2 = var_0.rugbyjugginfo;

    if ( isdefined( var_0 ) )
        var_0.rugbyjugginfo = undefined;

    var_1.activejuggernauts[var_2.id] = undefined;
    level._id_12DD4 = undefined;
    cleanupobjectiveiconsforjugg( var_0, var_2 );
    clearjugghud();

    foreach ( var_4 in var_1.endzones )
        var_4[0] thread updatechevrons( "_encstr_9BC505B4461BB2" );

    level.rugby.maxperkbonustier = undefined;
    level.rugby._id_128BF = undefined;
    level.rugby.vehicle_occupancy_isfriendlytoplayer = undefined;
    level.rugby.vehicle_occupancy_isenemytoteam = undefined;

    if ( isdefined( var_0 ) && isdefined( var_0.team ) )
        level thread scripts\mp\hud_message::notifyteam( "_encstr_A1600DD457CECEF546B7BB37AF66E4", "_encstr_82600D6B6829AF391960037D4033E2", var_0.team );
    else
        level thread scripts\mp\hud_message::notifyteam( "_encstr_B4860DA6EA3BD9EB36851CE8EA9C2B", "_encstr_B4860DA6EA3BD9EB36851CE8EA9C2B", "_encstr_BC850785638DA59537" );

    setomnvar( "_encstr_9F4514701B9195BBD176F32F1A4327C99198A8905272", 0 );
    setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", 0 );
    var_0 notify( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
}

startjugghud( var_0 )
{
    setomnvar( "_encstr_B795150F0B78F3A5F089E061E008FFFAD0B7D3F78B185B", var_0 );
    setomnvar( "_encstr_A3D215FF7A280EF0B70E3BA12D0F80984F7C9979B92D92", 1.0 );

    foreach ( var_2 in level.players )
        var_2 setclientomnvar( "_encstr_9FC3176852112D634FBA63489A2FE9DFC94AA84B0AF549184F", scripts\engine\utility::ter_op( var_2.team == var_0.team, 0, 1 ) );
}

clearjugghud()
{
    setomnvar( "_encstr_B795150F0B78F3A5F089E061E008FFFAD0B7D3F78B185B", undefined );

    foreach ( var_1 in level.players )
        var_1 setclientomnvar( "_encstr_9FC3176852112D634FBA63489A2FE9DFC94AA84B0AF549184F", -1 );
}

watchjugghealth()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );

    for (;;)
    {
        self waittill( "_encstr_B8BE07320B5B16ECAC" );
        setomnvar( "_encstr_A3D215FF7A280EF0B70E3BA12D0F80984F7C9979B92D92", self.health / self.maxhealth );
    }
}

watchforjuggdeathdisconnect()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
    self waittill( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_0 = undefined;

    if ( !isdefined( self ) )
        var_0 = level.lastjuggpositions[self.rugbyjugginfo.id];
    else
        var_0 = self.origin;

    var_1 = getnodesinradius( var_0, 32, 0, 32 );
    var_2 = getclosestpointonnavmesh( var_0 );

    if ( distance( var_0, var_2 ) > 50 )
        var_2 = var_0;

    var_2 = var_0;
    activatejuggcrate( var_2 + ( 0, 0, 0 ), ( 0, 0, 0 ) );
    deactivatejuggernaut( self );
}

watchjuggprogress()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
    var_0 = self.team;
    var_1 = scripts\mp\utility\teams::getenemyteams( var_0 );
    var_2 = var_1[0];
    var_3 = level.rugby.goals[var_0];
    var_4 = level.rugby.goals[var_2];
    var_5 = var_4.origin - var_3.origin;
    var_6 = vectordot( var_5, var_5 );
    var_7 = undefined;

    for (;;)
    {
        var_8 = self.origin * ( 1, 1, 0 ) - var_3.origin * ( 1, 1, 0 );
        var_9 = vectordot( var_5, var_8 ) / var_6;
        var_9 = clamp( var_9, 0.0, 1.0 );
        var_10 = [];
        var_10[var_0] = var_9;
        var_10[var_2] = 1.0 - var_9;

        foreach ( var_12 in level.players )
        {
            if ( var_12.team == var_0 || var_12.team == var_2 )
                var_12 setclientomnvar( "_encstr_BE381733A8E772C3D495F0B91B5BFC27E919CBAF4A2A0ACE03", var_10[var_12.team] );
        }

        if ( var_9 > 0.8 )
            level thread getquestunlockableindexfromlootid( var_9, var_0, var_2 );

        if ( isdefined( level._id_12DD4 ) )
        {
            if ( !isdefined( var_7 ) )
                var_7 = var_9;

            if ( var_9 > var_7 + 0.1 )
            {
                var_7 = var_9;
                level._id_12DD4 thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_9CCB0F0B804915D197C076E85F89C81848" );
            }
        }

        level.lastjuggpositions[self.rugbyjugginfo.id] = self.origin;
        wait 0.05;
    }
}

getquestunlockableindexfromlootid( var_0, var_1, var_2 )
{
    if ( !isdefined( level.rugby.maxperkbonustier ) )
    {
        level.rugby.maxperkbonustier = 1;
        level.rugby._id_128BF = gettime();
        level.rugby.vehicle_occupancy_isfriendlytoplayer = var_0;
        level.rugby.vehicle_occupancy_isenemytoteam = var_0;
    }
    else if ( isdefined( level.rugby._id_128BF ) && level.rugby._id_128BF + 30000 < gettime() )
    {
        level.rugby.maxperkbonustier = 1;
        level.rugby._id_128BF = gettime();
        level.rugby.vehicle_occupancy_isfriendlytoplayer = var_0;
        level.rugby.vehicle_occupancy_isenemytoteam = var_0;
    }

    if ( istrue( level.rugby.maxperkbonustier ) )
    {
        scripts\mp\utility\dialog::statusdialog( "_encstr_8AC01A9CEAB31397EB99C95A59E68C1B5EEB36367B9B2BF5D9DB85B1", var_1, "_encstr_A1190435A1B8" );
        scripts\mp\utility\dialog::statusdialog( "_encstr_9C3E17881382D92B1FDFB8A5C57B497B0BDF9BA2091F585165", var_2, "_encstr_A1190435A1B8" );
        thread scripts\mp\music_and_dialog::timelimitmusic( var_1 );
    }

    level.rugby.maxperkbonustier = 0;
}

setupplayerasjugg( var_0 )
{
    var_1 = level.rugby.juggconfig;
    var_2 = var_0 scripts\mp\juggernaut::jugg_makejuggernaut( var_1 );

    if ( !var_2 )
        return 0;

    var_0.droppeddeathweapon = 1;
    var_0 givemaxammo( var_0.classstruct.loadoutprimaryobject );
    var_0.playerstreakspeedscale = getjuggspeedscalar( 0 );
    var_0 scripts\mp\weapons::updatemovespeedscale();
    var_0 thread handlejuggjumpspam();
    var_3 = scripts\mp\utility\teams::getenemyteams( var_0.team );
    var_4 = var_3[0];
    return 1;
}

watchteammatesnearjugg()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );

    for (;;)
    {
        var_0 = 0;

        foreach ( var_2 in level.players )
        {
            if ( var_2.team != self.team || var_2 == self )
                continue;

            if ( distancesquared( var_2.origin, self.origin ) < 122500 )
                var_0++;
        }

        self.playerstreakspeedscale = getjuggspeedscalar( var_0 );
        scripts\mp\weapons::updatemovespeedscale();
        wait 0.1;
    }
}

watchjuggtimeout()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    level endon( "_encstr_9E40130B40CF7006FA3D67BA4B4FE9B3FD6D455DB8" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
    _id_13167();
    level thread _id_12E18( self );
    wait( getjuggtimeout() );
    setomnvar( "_encstr_9F4514701B9195BBD176F32F1A4327C99198A8905272", 0 );
    setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", 0 );
    self suicide();
}

_id_12E18( var_0 )
{
    level endon( "_encstr_9E40130B40CF7006FA3D67BA4B4FE9B3FD6D455DB8" );
    var_0 endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
    var_1 = getdvarfloat( "_encstr_B4AA16A696B387A3336FF85F86F24B4054F16B4AA9B7A36B" );
    var_2 = var_1;

    while ( !istrue( level.canprocessot ) )
    {
        setomnvar( "_encstr_97EE15533021DA35DFA0EF27820B7F5901AB9FC9246E73", var_2 / var_1 );
        var_2 = var_2 - level.framedurationseconds;
        wait( level.framedurationseconds );
    }
}

handlejuggjumpspam()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_AB3B0F85B71256A02FECD36957C78898FA" );
    self notifyonplayercommand( "_encstr_9BA30C0C3B87991132F302E38F23", "_encstr_A44609F657CA4A130156DF" );

    for (;;)
    {
        self waittill( "_encstr_9BA30C0C3B87991132F302E38F23" );

        while ( !self isonground() )
            waitframe();

        var_0 = self getvelocity();
        var_1 = ( var_0[0] * 0.25, var_0[1] * 0.25, var_0[2] );
        self setvelocity( var_1 );
        self.overrideweaponspeed_speedscale = 0.2;
        scripts\mp\weapons::updatemovespeedscale();

        for (;;)
        {
            var_2 = scripts\engine\utility::_id_143B9( 1, "_encstr_9BA30C0C3B87991132F302E38F23" );

            if ( var_2 == "_encstr_9BA30C0C3B87991132F302E38F23" )
            {
                while ( !self isonground() )
                    waitframe();

                var_0 = self getvelocity();
                var_1 = ( var_0[0] * 0.25, var_0[1] * 0.25, var_0[2] );
                self setvelocity( var_1 );
                continue;
            }

            break;
        }

        self.overrideweaponspeed_speedscale = undefined;
    }
}

_id_12C4B()
{
    var_0 = 0;
    level.vehicle_occupancy_isfriendlytoteam = spawnstruct();
    level.vehicle_occupancy_isfriendlytoteam.objidnum = scripts\mp\objidpoolmanager::requestreservedid( var_0 );
}

createobjectiveiconsforactivejugg( var_0, var_1 )
{
    createjuggobjective( var_0, var_1 );
    var_2 = scripts\mp\utility\teams::getenemyteams( var_0.team );
    var_3 = var_2[0];
    var_4 = level.rugby.goals[var_3];
    createendzoneobjective( var_4, var_3, var_1 );
}

cleanupobjectiveiconsforjugg( var_0, var_1 )
{
    scripts\mp\objidpoolmanager::update_objective_state( 0, "_encstr_936705F0224D13" );
    scripts\mp\objidpoolmanager::returnobjectiveid( var_1.endzoneobjid );
}

createjuggobjective( var_0, var_1 )
{
    var_2 = 0;
    var_1.juggobjid = var_2;
    scripts\mp\objidpoolmanager::objective_add_objective( var_2, "_encstr_A65A0856F3802ACA0D6B", var_0.origin, "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B" );
    scripts\mp\objidpoolmanager::objective_set_play_intro( var_2, 0 );
    scripts\mp\objidpoolmanager::objective_set_play_outro( var_2, 0 );
    scripts\mp\objidpoolmanager::objective_playermask_showtoall( var_2 );
    scripts\mp\objidpoolmanager::update_objective_onentity( var_2, var_0 );
    scripts\mp\objidpoolmanager::update_objective_setzoffset( var_2, 90 );
    objective_setownerteam( var_2, var_0.team );
    objective_setfriendlylabel( var_2, "_encstr_9D9A1A38E740C725D98B5742B319BE5FD01C31746D38BF6AC977524C" );
    objective_setenemylabel( var_2, "_encstr_AD77183C82C7F138E0BF0F1D97B8F629DF6CA7F5FF1F09C3B8A3" );
}

createendzoneobjective( var_0, var_1, var_2 )
{
    var_3 = scripts\mp\objidpoolmanager::requestobjectiveid( 99 );
    var_2.endzoneobjid = var_3;
    scripts\mp\objidpoolmanager::objective_add_objective( var_3, "_encstr_A65A0856F3802ACA0D6B", var_0.origin, "_encstr_819A1996B1EDDCF5DD855E07DB5AE63A7D39BACE89E5FA4C16CD95" );
    scripts\mp\objidpoolmanager::objective_set_play_intro( var_3, 0 );
    scripts\mp\objidpoolmanager::objective_set_play_outro( var_3, 0 );
    scripts\mp\objidpoolmanager::objective_playermask_showtoall( var_3 );
    objective_setownerteam( var_3, var_1 );
    objective_setfriendlylabel( var_3, "_encstr_B3311DCF595820BFC94D094267F9FA39081BBB63D5E8D86DE975B75F1DE9C4" );
    objective_setenemylabel( var_3, "_encstr_88071E355F9E47BDE149A971E1CFA64FF8AD4EB4F22483F72F71517939B3EDB3" );
}

activatejuggcrate( var_0, var_1, var_2 )
{
    var_3 = level.rugby;

    if ( !vandalize_attack_min_cooldown( var_0 ) )
    {
        var_0 = level.init_ai_kill_params_for_events;
        var_1 = level.init_ai;
    }

    var_4 = createjuggcrate( var_0, var_1, var_2 );
    var_3.activejuggcrates[0] = var_4;
    var_3.activejuggcrates[0].crateid = var_4;
    return 1;
}

vandalize_attack_min_cooldown( var_0 )
{
    var_1 = 1;

    foreach ( var_3 in level.trial_target_headshot_func )
    {
        if ( ispointinvolume( var_0, var_3 ) )
        {
            var_1 = 0;
            break;
        }
    }

    return var_1;
}

createjuggcrate( var_0, var_1, var_2 )
{
    var_3 = getgroundposition( var_0, 8, 2000, 32 );
    var_3 = var_3 + ( 0, 0, 5 );
    var_4 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_3 );
    var_4.angles = var_1;
    var_4.visuals = [ var_4 ];
    var_4.trigger = var_4;
    var_4.trigger.origin = var_4.origin;
    var_4.curorigin = var_4.trigger.origin;
    var_4.safeorigin = var_4.trigger.origin;
    var_4.visuals[0] setmodel( "_encstr_952620C738F8113B43BED0412E6B93A5C3D067570BF155B1397651020D31AB7D6B68" );
    var_4 thread scripts\mp\gameobjects::setdropped();
    var_4.crateid = var_4 getentitynumber();
    var_4 thread juggcratemanageuse( var_4 );

    if ( istrue( var_2 ) )
    {
        level.init_ai_kill_params_for_events = var_0;
        level.init_ai = var_1;

        foreach ( var_6 in level.teamnamelist )
            scripts\mp\utility\dialog::statusdialog( "_encstr_817B13C9AB9D89F2F5D816C1475DE495EBA9D5B3B3", var_6, "_encstr_A1190435A1B8" );
    }

    return var_4;
}

gunkillerhackthread()
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_A3750609A5E61883" );

    for (;;)
    {
        var_0 = getweaponarray();

        foreach ( var_2 in var_0 )
        {
            if ( distance2dsquared( var_2.origin, self.origin ) < 40000 )
                var_2 delete();
        }

        wait 0.25;
    }
}

juggcratemanageuse( var_0 )
{
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    self endon( "_encstr_A3750609A5E61883" );
    var_1 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self.origin + ( 0, 0, 30 ) );
    var_1.usetype = 1;
    var_1.destination = self.origin + ( 0, 0, 30 );
    var_1.vampirepoints = 1;
    self._id_14074 = scripts\mp\gameobjects::createholduseobject( "_encstr_9BA4080D39CFFB5AB7C1", var_1, self.visuals, ( 0, 0, 64 ) );

    foreach ( var_3 in level.teamnamelist )
        self._id_14074.teamprogress = undefined;

    self._id_14074.trigger._id_1408A = 16900;
    self._id_14074.trigger setuserange( 130 );
    self._id_14074.trigger sethintstring( &"_encstr_AD411888D9E7056FC5E51F6A85CD13585FE9C1C0613B49DF1FFD" );
    self._id_14074.trigger makeusable();
    self._id_14074.trigger setcursorhint( "_encstr_98110C0B790BBF87AE11E9F1A8F5" );
    self._id_14074.trigger setuseholdduration( "_encstr_88C20E3998B33933533F7207B8280675" );
    self._id_14074.trigger setusehideprogressbar( 1 );
    self._id_14074.trigger setusepriority( -3 );
    self._id_14074.trigger sethintonobstruction( "_encstr_BECC05FC5321BA" );
    self._id_14074 scripts\mp\gameobjects::setusetime( remove_spawn_disable_struct() );
    self._id_14074.interactteam = "_encstr_BC19047780DA";
    self._id_14074.curprogress = 0;
    self._id_14074.defaultusetime = self._id_14074._id_1409E;
    self._id_14074.userate = 1;
    self._id_14074.id = "_encstr_8AF90BE2C54FA2F166C04F3F90";
    self._id_14074.exclusiveuse = 0;
    self._id_14074.exclusiveclaim = 0;
    self._id_14074.skiptouching = 1;
    self._id_14074.onbeginuse = ::_id_12DD1;
    self._id_14074.onuse = ::_id_12DD0;
    self._id_14074.onenduse = ::_id_12DD2;
    self._id_14074.oncantuse = ::_id_12DD3;
    self._id_14074.inuse = 0;

    foreach ( var_6 in level.teamnamelist )
    {
        self._id_14074.numtouching[var_6] = 0;
        self._id_14074.touchlist[var_6] = [];
    }

    self._id_14074.cancontestclaim = 0;
    self._id_14074.stalemate = 0;
    self._id_14074.wasstalemate = 0;
    self._id_14074.cancontestclaim = 0;
    self._id_14074.majoritycapprogress = 1;
    self._id_14074.wasmajoritycapprogress = 0;
    self._id_14074.resetprogress = 1;

    if ( !scripts\mp\flags::gameflag( "_encstr_989F0E38272BD6161DB143F532BDDC2B" ) )
        level scripts\engine\utility::_id_143A5( "_encstr_989F0E38272BD6161DB143F532BDDC2B", "_encstr_8B5511DC1D16398EAF5BF68CACBECDB21DAB07" );

    self._id_14074.type = "_encstr_A2C00AABCD59A74C35566C1D";
    self._id_14074.offset3d = ( 0, 0, 32 );
    self._id_14074 scripts\mp\gameobjects::requestid( 1, 1 );
    self._id_14074 scripts\mp\gameobjects::setobjectivestatusicons( "_encstr_B82E19A51BF69BAFEE16F2E0F6D2CD3ABED457D9767D6C39B0D1CA" );
    self._id_14074 scripts\mp\gameobjects::setvisibleteam( "_encstr_BC19047780DA" );
    scripts\mp\objidpoolmanager::objective_set_play_intro( self._id_14074.objidnum, 0 );
    scripts\mp\objidpoolmanager::objective_set_play_outro( self._id_14074.objidnum, 0 );
}

_id_12DD1( var_0 )
{
    scripts\mp\gameobjects::setobjectivestatusicons( "_encstr_87FE15A51BDEDCD7EE16CB1C7BB437D1FA470BB5A5B93B", "_encstr_9775153007C060517790700F58B170ED870C2A4F8B68FA" );
    scripts\mp\utility\dialog::statusdialog( "_encstr_BC3314BD2D8F40F3377391597BEBA37827AF353BA777", var_0.team, "_encstr_A1190435A1B8" );
    self.visuals[0] playloopsound( "_encstr_93AC1EF527098F360A81BE87B9CA0212F8B5160A1F4230F8B37BCA8B41FB875B" );
}

_id_12DD0( var_0 )
{
    var_1 = activatenewjuggernaut( var_0 );

    if ( !var_1 )
        return;

    juggcratecleanup();
    level.rugby.activejuggcrates[0].crateid = undefined;
    level.rugby.activejuggcrates[0] = undefined;

    if ( isdefined( self._id_14074 ) )
        self._id_14074 delete();

    if ( isdefined( self.visuals ) )
    {
        foreach ( var_3 in self.visuals )
            var_3 delete();
    }

    if ( isdefined( self.trigger ) )
        self.trigger delete();
}

_id_12DD2( var_0, var_1, var_2 )
{
    self.visuals[0] stoploopsound( "_encstr_93AC1EF527098F360A81BE87B9CA0212F8B5160A1F4230F8B37BCA8B41FB875B" );

    if ( !var_2 )
        scripts\mp\gameobjects::setobjectivestatusicons( "_encstr_B82E19A51BF69BAFEE16F2E0F6D2CD3ABED457D9767D6C39B0D1CA" );

    scripts\mp\objidpoolmanager::objective_set_progress_team( self.objidnum, var_1.team );
    scripts\mp\objidpoolmanager::objective_set_progress( self.objidnum, self.curprogress / self.usetime );

    if ( self.curprogress > 0 )
        scripts\mp\objidpoolmanager::objective_show_team_progress( self.objidnum, var_1.team );
    else
        scripts\mp\objidpoolmanager::objective_show_progress( self.objidnum, 0 );
}

_id_12DD3( var_0 )
{

}

juggcratecleanup()
{
    scripts\mp\objidpoolmanager::returnobjectiveid( self.objidnum );
}

createjuggcrateobjective( var_0 )
{
    var_1 = scripts\mp\objidpoolmanager::requestobjectiveid( 99 );
    var_0.objid = var_1;
    var_2 = var_0.origin + ( 0, 0, 32 );
    scripts\mp\objidpoolmanager::objective_add_objective( var_1, "_encstr_A65A0856F3802ACA0D6B", var_2, "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B" );
    scripts\mp\objidpoolmanager::objective_set_play_intro( var_1, 0 );
    scripts\mp\objidpoolmanager::objective_set_play_outro( var_1, 0 );
    scripts\mp\objidpoolmanager::objective_playermask_showtoall( var_1 );
    objective_setneutrallabel( var_1, "_encstr_8CCA1C550FF94D08D57B97AB736CE0E1D2F51A2EE7711734BFA9A38F6505" );
    objective_setfriendlylabel( var_1, "_encstr_BA441EB3399F6118D9DF213F8177EA4B8AC6CA939B7FA1AFD1C0339399E33857" );
    objective_setenemylabel( var_1, "_encstr_B4F51BB102E18BE44C170161BFA79D7B4E7EB62F6B38E7CC7F574999CF" );
    updatejuggcrateobjectivestate( var_0 );
}

updatejuggcrateobjectivestate( var_0 )
{
    var_1 = var_0.objid;
    var_2 = istrue( var_0.inuse );

    if ( var_2 )
    {
        objective_setownerteam( var_1, var_0.usingplayer.team );
        objective_sethot( var_1, 1 );
    }
    else
    {
        objective_setownerteam( var_1, undefined );
        objective_sethot( var_1, 0 );
    }
}

get_circle_back_start_node( var_0 )
{
    var_1 = level.rugby.juggconfig;

    if ( istrue( var_0.isjuggernaut ) )
    {
        var_0 scripts\mp\hud_message::showerrormessage( "_encstr_9DC125D747D8E95F892ACD79D7D18E05A135418FDF873DBD4F15DF9D47DFC9C3C12BE5F047F980" );
        return 0;
    }

    var_2 = var_0 scripts\mp\juggernaut::vehicle_damage_setweaponhitdamagedata( var_1 );

    if ( !isdefined( var_2 ) )
    {
        var_0 scripts\mp\hud_message::showerrormessage( "_encstr_AAB91FDC0BD37193ED6D50203A8F1A8267972097AF994D454D17DFC00D453FBD03" );
        return 0;
    }

    return 1;
}

updateoverheadcamerapos( var_0 )
{
    if ( isdefined( var_0 ) )
    {
        var_1 = var_0;
        var_2 = level.spectatorcameras[0][var_1];
    }
    else
    {
        var_1 = self.team;
        var_2 = level.spectatorcameras[0][self.team];
    }

    var_3 = level.rugby;
    var_4 = undefined;

    if ( !istrue( game["_encstr_A6D60EE09BF413B9945185CB4797C583"] ) )
        var_4 = var_1;
    else
        var_4 = scripts\engine\utility::ter_op( var_1 == "_encstr_BC850785638DA59537", "_encstr_BA840579D3F7F6", "_encstr_BC850785638DA59537" );

    var_5 = scripts\engine\utility::ter_op( var_4 == "_encstr_BC850785638DA59537", "_encstr_BA840579D3F7F6", "_encstr_BC850785638DA59537" );
    var_6 = var_3.endzones[var_4][0].origin;
    var_7 = var_3.endzones[var_5][0].origin;
    var_8 = ( var_7 - var_6 ) * ( 1, 1, 0 );
    var_9 = length2d( var_8 );
    var_10 = scripts\cp_mp\utility\killstreak_utility::removeextracthelipad();

    if ( isdefined( var_10 ) )
        var_11 = var_10.origin[2];
    else
        var_11 = 5000;

    var_12 = undefined;
    var_13 = undefined;

    if ( doesteamhaveactivejugg( var_1 ) )
    {
        var_14 = getjuggorcratepos();
        var_12 = var_14 + var_8 * ( -3000 / var_9 );
        var_12 = ( var_12[0], var_12[1], var_11 );
        var_13 = var_14 + ( var_7 - var_14 ) * 0.5;
    }
    else
    {
        var_12 = var_6 + var_8 * ( -2000 / var_9 );
        var_12 = ( var_12[0], var_12[1], var_11 );
        var_13 = getjuggorcratepos();
    }

    var_15 = var_13 - var_12;
    var_16 = vectortoangles( var_15 );
    var_2.origin = var_12;
    var_2.angles = var_16;
}

startspectatorview()
{
    scripts\mp\utility\lower_message::setlowermessageomnvar( 0 );
    waitframe();
    scripts\mp\utility\player::updatesessionstate( "_encstr_A68C0A5803A5D151A2B310A6" );
    scripts\mp\spectating::setdisabled();

    if ( isdefined( self.lastdeathangles ) )
        self setplayerangles( self.lastdeathangles );

    wait 0.1;
    scripts\mp\utility\player::setdof_default();
    updateoverheadcamerapos();
    var_0 = level.spectatorcameras[0][self.team];
    var_1 = var_0.origin;
    var_2 = var_0.angles;
    self.deathspectatepos = var_1;
    self.deathspectateangles = var_2;
    var_3 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", self getvieworigin() );
    var_3 setmodel( "_encstr_8CB40B4BB398B1C0A81FDF6BEA" );
    var_3.angles = var_2;
    self.spectatorcament = var_3;
    self.isusingtacopsmapcamera = 1;
    self cameralinkto( var_3, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", 1 );
    thread dohalfwayflash();
    var_3 movecameratomappos( self, var_1, var_2 );
}

dohalfwayflash()
{
    wait 0.4;
    thread playslamzoomflash();
    applythermal();
}

endspectatorview()
{
    if ( !isdefined( self.spectatorcament ) )
        return;

    removethermal();
    removeplayeroutlinesforoverheadcam();
    thread runslamzoomonspawn();
}

applythermal()
{
    self visionsetthermalforplayer( "_encstr_950A15032508FBD74981BAC6F9C8E5815481EFF397A103" );
    self thermalvisionon();
}

removethermal()
{
    self thermalvisionoff();
}

movecameratomappos( var_0, var_1, var_2 )
{
    var_0 endon( "_encstr_9B6F0FDC8316DDE62B8CF507C616CB599C" );
    var_3 = 1.0;
    var_4 = 1.0;
    self moveto( var_1, 1.0, 0.5, 0.5 );
    var_0 playlocalsound( "_encstr_806717B61C7D6CDA8CEB6C85DA59C985AF9EBDDBADD7DEAE47" );
    var_0 setclienttriggeraudiozonepartialwithfade( "_encstr_B9230ADCE02CEEE6BED858DA", 0.5, "_encstr_971904B5B43C" );
    self rotateto( var_2, 1.0, 0.5, 0.5 );
    wait 1.1;
    var_5 = anglestoforward( var_2 ) * 300;
    var_5 = var_5 * ( 1, 1, 0 );

    if ( isdefined( var_0 ) && isdefined( var_0.spectatorcament ) )
    {
        self moveto( var_1 + var_5, 15.0, 1.0, 1.0 );
        var_0 earthquakeforplayer( 0.03, 15.0, var_1 + var_5, 1000 );
    }
}

runslamzoomonspawn()
{
    self waittill( "_encstr_9B6F0FDC8316DDE62B8CF507C616CB599C" );
    var_0 = self geteye();
    var_1 = self.angles;
    scripts\mp\utility\player::updatesessionstate( "_encstr_A68C0A5803A5D151A2B310A6" );
    self cameralinkto( self.spectatorcament, "_encstr_8CB40B4BB398B1C0A81FDF6BEA", 1 );
    self visionsetnakedforplayer( "_encstr_BC5911336A3EB1074FFE895360F00D8BE0F0E2", 0.2 );
    self.spectatorcament moveto( var_0, 0.5 );
    self playlocalsound( "_encstr_AF9D1661CA211760ACBFA0B81FC5DB4B89F0E8F865D9CBC8" );
    self clearclienttriggeraudiozone( 0.5 );
    self.spectatorcament rotateto( var_1, 0.5, 0.5 );
    wait 0.5;
    self visionsetnakedforplayer( "_encstr_A40101", 0 );
    thread playslamzoomflash();
    scripts\mp\utility\player::updatesessionstate( "_encstr_8F7508BB18675378EBC7" );
    self cameraunlink();
    self.spectatorcament delete();
    wait 1.0;
}

playslamzoomflash()
{
    var_0 = newclienthudelem( self );
    var_0.x = 0;
    var_0.y = 0;
    var_0.alignx = "_encstr_B1AD05C65666E8";
    var_0.aligny = "_encstr_B91904EC4718";
    var_0.sort = 1;
    var_0.horzalign = "_encstr_BC940BE9D5F91D47B0ABBD851E";
    var_0.vertalign = "_encstr_BC940BE9D5F91D47B0ABBD851E";
    var_0.alpha = 1;
    var_0.foreground = 1;
    var_0 setshader( "_encstr_948806DDD04BE895", 640, 480 );
    var_0 fadeovertime( 0.4 );
    var_0.alpha = 0.0;
    wait 0.4;
    var_0 destroy();
}

enableplayeroutlinesforoverheadcam()
{
    self.rugbyoverheadoutlines = [];

    foreach ( var_1 in level.players )
    {
        if ( var_1 == self )
            continue;

        var_2 = scripts\engine\utility::ter_op( var_1.team == self.team, "_encstr_9BDA192A73E553BC983B9E69D170C99380C90263FBB3E776081B9E", "_encstr_872E1B50979C204B0E3A5752638DB806B0ABCF570B0B01A5826AC2346B" );
        var_3 = scripts\mp\utility\outline::outlineenableforplayer( var_1, self, var_2, "_encstr_B9760D6356B356D8FAB96CC9A507A3" );
        self.rugbyoverheadoutlines[var_3] = var_1;
    }
}

removeplayeroutlinesforoverheadcam()
{
    if ( isdefined( self.rugbyoverheadoutlines ) )
    {
        foreach ( var_2, var_1 in self.rugbyoverheadoutlines )
            scripts\mp\utility\outline::outlinedisable( var_2, var_1 );

        self.rugbyoverheadoutlines = undefined;
    }
}

setupwaypointicons()
{
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_B82E19A51BF69BAFEE16F2E0F6D2CD3ABED457D9767D6C39B0D1CA", 0, "_encstr_9BA4080D39CFFB5AB7C1", "_encstr_8CCA1C550FF94D08D57B97AB736CE0E1D2F51A2EE7711734BFA9A38F6505", "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 1, "_encstr_B9FC095F8BCCFF02D92B43", "_encstr_9DD31F257F893988C4E36F47F798D064D1E82D7E9431FD912EE72B1B8FB6E8B059", "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 1, "_encstr_80BF06CA78A2226B", "_encstr_A67B1DA982FAA4398E829A54AFD33962CAF23D2494F5B4A4C4897D1A14A0A6", "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_8AC0185AC6B773F5EE85E51CDB96CD1DD70D17AF232B33569B19", 0, "_encstr_B9FC095F8BCCFF02D92B43", "_encstr_B3311DCF595820BFC94D094267F9FA39081BBB63D5E8D86DE975B75F1DE9C4", "_encstr_819A1996B1EDDCF5DD855E07DB5AE63A7D39BACE89E5FA4C16CD95", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_AF401832FFD7FDB647880108583F5AB4C72BAB261ECBB33F0A4A", 0, "_encstr_80BF06CA78A2226B", "_encstr_88071E355F9E47BDE149A971E1CFA64FF8AD4EB4F22483F72F71517939B3EDB3", "_encstr_819A1996B1EDDCF5DD855E07DB5AE63A7D39BACE89E5FA4C16CD95", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_87FE15A51BDEDCD7EE16CB1C7BB437D1FA470BB5A5B93B", 0, "_encstr_B9FC095F8BCCFF02D92B43", "_encstr_B7CF1F8592585465D710A02537ED2049095058EEEBF69F2E025964550F9F4FCBF7", "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 0 );
    scripts\mp\gamelogic::setwaypointiconinfo( "_encstr_9775153007C060517790700F58B170ED870C2A4F8B68FA", 0, "_encstr_80BF06CA78A2226B", "_encstr_8A341FD405D72927A3146AA2EBF4C98956793D09A4FA31E96A5272E8D7A1051435", "_encstr_8AAD13A58DEDDCD7BB0B5E83F65ACD47FA35EAD93B", 0 );
}
