// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    if ( getdvar( "_encstr_9E700851BEE33DF1B547" ) == "_encstr_8A510E519897A1332E4A3898E243F5B9" )
        return;

    scripts\mp\globallogic::init();
    scripts\mp\globallogic::setupcallbacks();
    var_0[0] = scripts\mp\utility\game::getgametype();
    var_0[1] = "_encstr_889A09E530F7E918279537";
    var_0[2] = "_encstr_A85908F249E84E372DEB";
    scripts\mp\gameobjects::main( var_0 );

    if ( isusingmatchrulesdata() )
    {
        level.initializematchrules = ::initializematchrules;
        [[ level.initializematchrules ]]();
        level thread scripts\mp\utility\game::reinitializematchrulesonmigration();
    }
    else
    {
        scripts\mp\utility\game::registerroundswitchdvar( scripts\mp\utility\game::getgametype(), 3, 0, 12 );
        scripts\mp\utility\game::registertimelimitdvar( scripts\mp\utility\game::getgametype(), 150 );
        scripts\mp\utility\game::registerscorelimitdvar( scripts\mp\utility\game::getgametype(), 1 );
        scripts\mp\utility\game::registerroundlimitdvar( scripts\mp\utility\game::getgametype(), 0 );
        scripts\mp\utility\game::registerwinlimitdvar( scripts\mp\utility\game::getgametype(), 4 );
        scripts\mp\utility\game::registernumlivesdvar( scripts\mp\utility\game::getgametype(), 1 );
        scripts\mp\utility\game::registerhalftimedvar( scripts\mp\utility\game::getgametype(), 0 );
        scripts\mp\utility\game::registerwinbytwoenableddvar( scripts\mp\utility\game::getgametype(), 1 );
        scripts\mp\utility\game::registerwinbytwomaxroundsdvar( scripts\mp\utility\game::getgametype(), 4 );
    }

    updategametypedvars();
    level.objectivebased = 1;
    level.teambased = 1;
    level.nobuddyspawns = 1;
    level.onprecachegametype = ::onprecachegametype;
    level.onstartgametype = ::onstartgametype;
    level.getspawnpoint = ::getspawnpoint;
    level.modeonspawnplayer = ::onspawnplayer;
    level.onplayerkilled = ::onplayerkilled;
    level.ondeadevent = ::ondeadevent;
    level.ononeleftevent = ::ononeleftevent;
    level.ontimelimit = ::ontimelimit;
    level.onnormaldeath = ::onnormaldeath;
    level.gamemodemaydropweapon = scripts\mp\utility\game::isplayeroutsideofanybombsite;
    level.onobjectivecomplete = ::onbombexploded;
    level.resetuiomnvargamemode = _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::resetuiomnvargamemode;
    level.allowlatecomers = 0;
    level.bombsplanted = 0;
    level.aplanted = 0;
    level.bplanted = 0;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_A2B315BFE9FB4BD57F08A0A80F7A026794309B03E0C8D0";

    if ( getdvarint( "_encstr_B8020A9E9AA69A6292517AA0" ) )
        game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_891904A1D8BE" + game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"];
    else if ( getdvarint( "_encstr_93570B93F4A9629272A825B426" ) )
        game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_889708C9D0E7EBE819D9" + game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"];

    if ( !isdefined( game["_encstr_8AC30D9CDEBA73466E41B1585E568C"] ) )
    {
        var_1 = "_encstr_A17310D26AA00E83CF6355021E2BB952AEB3";
        var_2 = "_encstr_B2F9109258B777A3392FBEBC29C06F973891";
    }
    else
    {
        var_1 = "_encstr_806516E2B81F626B5E16C6C42703532EAF5BB90B68C79A23";
        var_2 = "_encstr_AA281616FDD2C79347DF78206B9529132AA7AF26948A8DDB";
    }

    game["_encstr_B8DA073D799798C7C7"]["_encstr_9E240C10CE33016D6AEA39B0F244"] = var_1;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B3420C3D576AC3C8736F09906BB2"] = var_2;
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B8C30DA1CFF70D476FE78C6F8DF3DD"] = "_encstr_B8C30DA1CFF70D476FE78C6F8DF3DD";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8F010C5E2AC85E8E82988AAF97A0"] = "_encstr_8F010C5E2AC85E8E82988AAF97A0";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9D801298BD5B13AF385AD8DAEAE07DCCA593DC47"] = "_encstr_9D801298BD5B13AF385AD8DAEAE07DCCA593DC47";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_95260BFB08D81A89693754CFA8"] = "_encstr_95260BFB08D81A89693754CFA8";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8B850A2AE0B99BC178FF5B44"] = "_encstr_9E7D0F98DED698D72B7359ADBCBDBB73DC";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B9A10DD145CDB008EA27752B0782ED"] = "_encstr_B9A10DD145CDB008EA27752B0782ED";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_A9DC0EF6806B0A916781D7F3A983CA47"] = "_encstr_A9DC0EF6806B0A916781D7F3A983CA47";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_80291016479F618F2AFA48381304B599FFF1"] = "_encstr_80291016479F618F2AFA48381304B599FFF1";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_88291026BDB526FA0E36B073479673CEAF98"] = "_encstr_88291026BDB526FA0E36B073479673CEAF98";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_973D0D13EDAD13EBC1D8C29BA32B91"] = "_encstr_973D0D13EDAD13EBC1D8C29BA32B91";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_98920D450E453F191976AF77C17142"] = "_encstr_B4D50DC95DE59820C2236B73574977";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_9E920DEF8057054BC1E10AF0C2D742"] = "_encstr_80D50D89BD5B89D72B9B95DAE5AF98";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_B3E613CAB956B62FAF4CF6DA89EB912B6657E6CA32"] = "_encstr_BA0612823F887E975D38AAD22225B7B790AF3D0C";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_81B513CD23B9F0B371FBB55B76A80B10817E0B05E5"] = "_encstr_B7AF12C4DBD689D72BE62BB55EC163C237E8AC23";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_AFC70A63CA5846FAB17BE647"] = "_encstr_AFBA0505631CA3";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_AFFC0A1B560B46F5A35AB223"] = "_encstr_AFBA0505631CA3";
    game["_encstr_B8DA073D799798C7C7"]["_encstr_8CE60B63CA58C8AF3A2CAD2BCD"] = "_encstr_AFBA0505631CA3";
    setomnvar( "_encstr_9E0418AED2F54CF6DA4CAF1DA55BCA9CBEACDC46A3965BCAEBB0", 0 );
    setomnvar( "_encstr_980418EA2DF5C47BB613D71DB46BCAE4EBACDC8C474BDAB2AF13", 0 );
    setomnvar( "_encstr_A47A12AB2DEB13DEB631D70ED80B73A35946F558", 0 );
    setomnvar( "_encstr_957A12956B36530D0BD831BBD06B05432945373A", 0 );
    setomnvar( "_encstr_A13114956B36530D0BD8312AC041C75BA9C61C3170D9", 0 );
    level.nosuspensemusic = 1;
}

initializematchrules()
{
    scripts\mp\utility\game::setcommonrulesfrommatchrulesdata();
    setdynamicdvar( "_encstr_8FB611F39802EE3F3CBFBEE8A0BE58B78105CB", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_A12A0A56BDB2A5D731E760D0" ) );
    setdynamicdvar( "_encstr_B87A110292A6893639177FA146307B8B0B5D7A", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_B6980AABC86B3D731723FDED" ) );
    setdynamicdvar( "_encstr_B4BC12D389DE9732D047646DDDB0FAA705608A3A", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_8FB30B465699AE6E95A8B4DA95" ) );
    setdynamicdvar( "_encstr_B45511C37A4B9F5051E1E76B83CBE37E5D50A6", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_A34D0AD6BA361DB424F6ADC4" ) );
    setdynamicdvar( "_encstr_A9A8134B867B4FF2E1D92B8268CB6D3BD7F9A1DEA5", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_AB6A0C433AB030304BE060683823" ) );
    setdynamicdvar( "_encstr_BD3115A8BF42C6CF62C92EBDDAAA19EBAA7780380FFB1B", getmatchrulesdata( "_encstr_B9ED09156F02E6F981FBC1", "_encstr_AAEF0EC959B956D128C9DBECC9ACCDE6" ) );
    setdynamicdvar( "_encstr_A9461066832B0E0FF701B808CA8FC92D8F2D", 0 );
    scripts\mp\utility\game::registerhalftimedvar( "_encstr_BD07030251", 0 );
    setdynamicdvar( "_encstr_B62E0F9EDAF3E0F323D9B832109955941F", 0 );
}

waittooverridegraceperiod()
{
    if ( scripts\mp\utility\game::isteamreviveenabled() || scripts\mp\utility\game::islaststandenabled() )
        game["_encstr_B8DA073D799798C7C7"]["_encstr_B1F9099AC15967EB30E16D"] = "_encstr_B4A7144727082A6B0B50DB975F71662C8B7DE717531F";

    scripts\mp\flags::gameflagwait( "_encstr_989F0E38272BD6161DB143F532BDDC2B" );
    level.overrideingraceperiod = 1;
}

onprecachegametype()
{
    game["_encstr_BE9B133BC818DA4909FE15CAE723B25F6360FF8368"] = "_encstr_9B6F165B83F5DD1693EBF626A6561B1D5ACE2BEBB1B7E6A3";
    game["_encstr_982A154CDEAD89D7E4B2C67B67CA932B91D7DCF657B98C"] = "_encstr_8FED17AD1CEBDD169CBEBD26A695C63A5A9DACAF3A0B5BB2E6";
}

onstartgametype()
{
    if ( !isdefined( game["_encstr_A6D60EE09BF413B9945185CB4797C583"] ) )
        game["_encstr_A6D60EE09BF413B9945185CB4797C583"] = 0;

    if ( game["_encstr_A6D60EE09BF413B9945185CB4797C583"] )
    {
        var_0 = game["_encstr_941C0A6AF345075ED05BEAD3"];
        var_1 = game["_encstr_95A70AA81FEE295D3A2F56DE"];
        game["_encstr_941C0A6AF345075ED05BEAD3"] = var_1;
        game["_encstr_95A70AA81FEE295D3A2F56DE"] = var_0;
    }

    setclientnamemode( "_encstr_AA070E5BC237BA2C637D361A5837B395" );
    level._effect["_encstr_BC8C0F6E4023DA5FA9C8D3AB584351B28D"] = loadfx( "_encstr_9BCE34EB333A17AAAF5B990D673702E120B01F07E871DF63D5139182C5538BABE8F9ABFF08C9DB5A19A5E97F3D5FA362D0A02213C822" );
    level._effect["_encstr_ADF6124C2FF2A30104F7A178AB30B8F72B5448D8"] = loadfx( "_encstr_94452E933ABBC048953A8B6755389839BEC348F9020330382F089BF774A719754B8BE0A01BAF50B049169BC72E4B9843" );
    level._effect["_encstr_9F9013C9EB9311C4CC35FF507D1B6F18F04BEBBA88"] = loadfx( "_encstr_95F42BB399879796EE9B5EAFE456B8AEB26E1DE65E6B0E5E9D331E7D235698BA3BAFBBC24EB92DDC3B8B3B66E1" );
    scripts\mp\utility\game::setobjectivetext( game["_encstr_941C0A6AF345075ED05BEAD3"], &"_encstr_9F6817C52EED0BAE8979219DE7BE2BC13716C391612F8A077A" );
    scripts\mp\utility\game::setobjectivetext( game["_encstr_95A70AA81FEE295D3A2F56DE"], &"_encstr_8B1B17D348A415684594652AD4BC4D227D445164A29C228A49" );

    if ( level.splitscreen )
    {
        scripts\mp\utility\game::setobjectivescoretext( game["_encstr_941C0A6AF345075ED05BEAD3"], &"_encstr_9F6817C52EED0BAE8979219DE7BE2BC13716C391612F8A077A" );
        scripts\mp\utility\game::setobjectivescoretext( game["_encstr_95A70AA81FEE295D3A2F56DE"], &"_encstr_8B1B17D348A415684594652AD4BC4D227D445164A29C228A49" );
    }
    else
    {
        scripts\mp\utility\game::setobjectivescoretext( game["_encstr_941C0A6AF345075ED05BEAD3"], &"_encstr_88481D30D155EFB73F0BFEE53E68CF67D7510979219FD4E79768E3DBD82F5F" );
        scripts\mp\utility\game::setobjectivescoretext( game["_encstr_95A70AA81FEE295D3A2F56DE"], &"_encstr_9DFD1D37A3080DA9ECEC0F6502CF71D5F103ABBD57B04551C271D7BD3D5A09" );
    }

    scripts\mp\utility\game::setobjectivehinttext( game["_encstr_941C0A6AF345075ED05BEAD3"], &"_encstr_88AF1C3D90525168A2A4B28AA6CBD4887D0551451486B4A229EB4292C9A8" );
    scripts\mp\utility\game::setobjectivehinttext( game["_encstr_95A70AA81FEE295D3A2F56DE"], &"_encstr_974F1C47D3787DF9BCBC3F55D23F8105C153DBED6760B5819201E42C8D6C" );
    initspawns();
    thread waittooverridegraceperiod();
    setspecialloadout();
    thread bombs();
}

initspawns()
{
    level.spawnmins = ( 0, 0, 0 );
    level.spawnmaxs = ( 0, 0, 0 );
    scripts\mp\spawnlogic::addspawnpoints( game["_encstr_941C0A6AF345075ED05BEAD3"], "_encstr_A205158DDB29A38A68277B3747A861E9D8E30696502B6A" );
    scripts\mp\spawnlogic::addspawnpoints( game["_encstr_95A70AA81FEE295D3A2F56DE"], "_encstr_B99A155B837DDC46AFB98316DDE6AF8CCA3359E6915627" );

    if ( level.mapname == "_encstr_BA020F6803D1D3E6DF68AD9554B3698945" || level.mapname == "_encstr_87160FB583EB6BAFF6672B935D37192B39" || level.mapname == "_encstr_94D9102A87A18321A7AB6AFB27E31D4BCA73" )
    {
        var_0 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_B99A155B837DDC46AFB98316DDE6AF8CCA3359E6915627" );
        var_1 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_A205158DDB29A38A68277B3747A861E9D8E30696502B6A" );
    }
    else if ( level.mapname == "_encstr_984D0DC87A37E8DD33B35F475B8A95" )
    {
        var_0 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_A205158DDB29A38A68277B3747A861E9D8E30696502B6A" );
        var_1 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_B99A155B837DDC46AFB98316DDE6AF8CCA3359E6915627", 1 );
    }
    else
    {
        var_0 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_A205158DDB29A38A68277B3747A861E9D8E30696502B6A" );
        var_1 = scripts\mp\spawnlogic::getspawnpointarray( "_encstr_B99A155B837DDC46AFB98316DDE6AF8CCA3359E6915627" );
    }

    scripts\mp\spawnlogic::registerspawnset( "_encstr_9303101723E2CE585F5E839B464B688D6B97", var_0 );
    scripts\mp\spawnlogic::registerspawnset( "_encstr_BCE3103F7B31CAABEE0D8876AF80C2370B23", var_1 );
    level.mapcenter = scripts\mp\spawnlogic::findboxcenter( level.spawnmins, level.spawnmaxs );
    setmapcenter( level.mapcenter );
}

getspawnpoint()
{
    scripts\mp\spawnlogic::setactivespawnlogic( "_encstr_89EF0BF349A83A7B06BBAAB3CD", "_encstr_939A0D8DC347E521C7B50503CDB5A3" );
    var_0 = self.pers["_encstr_89EF05D46BA8FD"];

    if ( var_0 == game["_encstr_941C0A6AF345075ED05BEAD3"] )
    {
        scripts\mp\spawnlogic::activatespawnset( "_encstr_9303101723E2CE585F5E839B464B688D6B97", 1 );
        var_1 = scripts\mp\spawnlogic::getspawnpoint( self, var_0, undefined, "_encstr_9303101723E2CE585F5E839B464B688D6B97" );
    }
    else
    {
        scripts\mp\spawnlogic::activatespawnset( "_encstr_BCE3103F7B31CAABEE0D8876AF80C2370B23", 1 );
        var_1 = scripts\mp\spawnlogic::getspawnpoint( self, var_0, undefined, "_encstr_BCE3103F7B31CAABEE0D8876AF80C2370B23" );
    }

    return var_1;
}

onspawnplayer()
{
    self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", -1 );

    if ( scripts\mp\utility\entity::isgameparticipant( self ) )
    {
        self.isplanting = 0;
        self.isdefusing = 0;
        self.isbombcarrier = 0;
        self.laststanding = 0;
    }

    if ( level.multibomb && self.pers["_encstr_89EF05D46BA8FD"] == game["_encstr_941C0A6AF345075ED05BEAD3"] )
        self setclientomnvar( "_encstr_815A11ABE7B1F64022CA7248F51F79BE6A1F7D", 1 );
    else
    {
        self setclientomnvar( "_encstr_815A11ABE7B1F64022CA7248F51F79BE6A1F7D", 0 );

        foreach ( var_1 in level.objectives )
            var_1.trigger disableplayeruse( self );
    }

    scripts\mp\utility\stats::setextrascore0( 0 );

    if ( isdefined( self.pers["_encstr_8BB00783957F8B8B08"] ) )
        scripts\mp\utility\stats::setextrascore0( self.pers["_encstr_8BB00783957F8B8B08"] );

    scripts\mp\utility\stats::setextrascore1( 0 );

    if ( isdefined( self.pers["_encstr_B27B080D25DBEBAF1763"] ) )
        scripts\mp\utility\stats::setextrascore1( self.pers["_encstr_B27B080D25DBEBAF1763"] );

    level notify( "_encstr_9B6F0FDC8316DDE62B8CF507C616CB599C" );
    thread updatematchstatushintonspawn();
}

onplayerkilled( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 )
{
    self setclientomnvar( "_encstr_815A11ABE7B1F64022CA7248F51F79BE6A1F7D", 0 );
    thread checkallowspectating();
}

checkallowspectating()
{
    waitframe();
    var_0 = 0;

    if ( !scripts\mp\utility\teams::getteamdata( game["_encstr_941C0A6AF345075ED05BEAD3"], "_encstr_892A0BA3D3F25C4033ADD34893" ) )
    {
        level.spectateoverride[game["_encstr_941C0A6AF345075ED05BEAD3"]].allowenemyspectate = 1;
        var_0 = 1;
    }

    if ( !scripts\mp\utility\teams::getteamdata( game["_encstr_95A70AA81FEE295D3A2F56DE"], "_encstr_892A0BA3D3F25C4033ADD34893" ) )
    {
        level.spectateoverride[game["_encstr_95A70AA81FEE295D3A2F56DE"]].allowenemyspectate = 1;
        var_0 = 1;
    }

    if ( var_0 )
        scripts\mp\spectating::updatespectatesettings();
}

sd_endgame( var_0, var_1 )
{
    setomnvarforallclients( "_encstr_8038139574D9F7694A8F08A8A78E415FE3DB079DCF", 0 );
    setomnvar( "_encstr_A13114956B36530D0BD8312AC041C75BA9C61C3170D9", 0 );
    thread scripts\mp\gamelogic::endgame( var_0, var_1 );
}

trial_race_lap_total()
{
    foreach ( var_1 in level.players )
    {
        if ( istrue( var_1.isplanting ) && isdefined( var_1.lastnonuseweapon ) )
        {
            var_1 scripts\cp_mp\utility\inventory_utility::_switchtoweaponimmediate( var_1.lastnonuseweapon );
            break;
        }
    }
}

ondeadevent( var_0 )
{
    trial_race_lap_total();

    if ( level.bombexploded > 0 || level.bombdefused )
        return;

    if ( var_0 == "_encstr_A61904730372" )
    {
        if ( level.bombplanted )
            sd_endgame( game["_encstr_941C0A6AF345075ED05BEAD3"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"][tolower( game[game["_encstr_95A70AA81FEE295D3A2F56DE"]] ) + "_encstr_ABE60C07DDADF8190F42B11BDA13"] );
        else
            sd_endgame( game["_encstr_95A70AA81FEE295D3A2F56DE"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"][tolower( game[game["_encstr_941C0A6AF345075ED05BEAD3"]] ) + "_encstr_ABE60C07DDADF8190F42B11BDA13"] );
    }
    else if ( var_0 == game["_encstr_941C0A6AF345075ED05BEAD3"] )
    {
        if ( level.bombplanted )
            return;

        level thread sd_endgame( game["_encstr_95A70AA81FEE295D3A2F56DE"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"][tolower( game[game["_encstr_941C0A6AF345075ED05BEAD3"]] ) + "_encstr_ABE60C07DDADF8190F42B11BDA13"] );
    }
    else if ( var_0 == game["_encstr_95A70AA81FEE295D3A2F56DE"] )
        level thread sd_endgame( game["_encstr_941C0A6AF345075ED05BEAD3"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"][tolower( game[game["_encstr_95A70AA81FEE295D3A2F56DE"]] ) + "_encstr_ABE60C07DDADF8190F42B11BDA13"] );
}

ononeleftevent( var_0 )
{
    if ( level.bombexploded > 0 || level.bombdefused )
        return;

    var_1 = scripts\mp\utility\game::getlastlivingplayer( var_0 );
    var_1.laststanding = 1;
    var_1 thread givelastonteamwarning();
}

onnormaldeath( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    _encstr_88EA20CDD8932D38E8B9CB5BC1BCD985D6AC47E58395CD5ED8F6B6B5DBDCE2B3378D::oncommonnormaldeath( var_0, var_1, var_2, var_3, var_4, var_5 );
    var_6 = scripts\mp\rank::getscoreinfovalue( "_encstr_97D70583536853" );
    var_7 = var_0.team;
    var_8 = 0;

    if ( isdefined( var_1.laststanding ) && var_1.laststanding )
        var_1 thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_9BD70E1B6B1EE3FFF0B915511038049A" );

    if ( var_0.isplanting )
    {
        scripts\mp\utility\game::_id_119AC( var_0, var_1, "_encstr_BA3C1448EDDA3110D0859339A5953980A5961BC65646", var_0.origin, "_encstr_8936124CB97AC197D068101B11966A9FA6888DD6" );
        thread scripts\common\utility::_id_13E0A( level._id_11B30, var_2, "_encstr_89D109E8419005731360C2" );
        var_1 scripts\mp\utility\stats::incpersstat( "_encstr_9CF70851FD0FB8B81BB3", 1 );
        var_1 scripts\mp\persistence::statsetchild( "_encstr_A2460627DEABDC23", "_encstr_9CF70851FD0FB8B81BB3", var_1.pers["_encstr_9CF70851FD0FB8B81BB3"] );
        var_1 thread scripts\mp\awards::givemidmatchaward( "_encstr_8B5113B182473778D0C79701D2162DDB4183BEA37D" );
        var_8 = 1;
    }
    else if ( var_0.isbombcarrier )
    {
        scripts\mp\utility\game::_id_119AC( var_0, var_1, "_encstr_BA3C1448EDDA3110D0859339A5953980A5961BC65646", var_0.origin );
        thread scripts\common\utility::_id_13E0A( level._id_11B30, var_2, "_encstr_B62F0996FAF3765317CAAF" );
    }
    else if ( var_0.isdefusing )
    {
        scripts\mp\utility\game::_id_119AC( var_0, var_1, "_encstr_BD760FD13DCFF8F6DF63395CBA932120E7", var_0.origin );
        thread scripts\common\utility::_id_13E0A( level._id_11B30, var_2, "_encstr_956909CC156977424BE0FA" );
        var_1 scripts\mp\utility\stats::incpersstat( "_encstr_9CF70851FD0FB8B81BB3", 1 );
        var_1 scripts\mp\persistence::statsetchild( "_encstr_A2460627DEABDC23", "_encstr_9CF70851FD0FB8B81BB3", var_1.pers["_encstr_9CF70851FD0FB8B81BB3"] );
        var_1 thread scripts\mp\awards::givemidmatchaward( "_encstr_B71F141F7795F2FF9B19599FD1401D6BFDFFFFA7FD4D" );
        var_8 = 1;
    }

    if ( isdefined( level.sdbomb.carrier ) )
    {
        if ( isdefined( var_1 ) && isplayer( var_1 ) && var_1.pers["_encstr_89EF05D46BA8FD"] != var_0.pers["_encstr_89EF05D46BA8FD"] )
        {
            if ( var_1.pers["_encstr_89EF05D46BA8FD"] == level.sdbomb.carrier.team && var_1 != level.sdbomb.carrier )
            {
                var_9 = distancesquared( level.sdbomb.carrier.origin, var_1.origin );

                if ( var_9 < 105625 )
                {
                    var_1 thread scripts\mp\rank::scoreeventpopup( "_encstr_8C0C07812DDF6808AB" );
                    var_1 thread scripts\mp\awards::givemidmatchaward( "_encstr_B3D80EB6ED91567DE17D91B2CC95CD23" );
                    var_1 scripts\mp\utility\stats::incpersstat( "_encstr_9CF70851FD0FB8B81BB3", 1 );
                    var_1 scripts\mp\persistence::statsetchild( "_encstr_A2460627DEABDC23", "_encstr_9CF70851FD0FB8B81BB3", var_1.pers["_encstr_9CF70851FD0FB8B81BB3"] );
                    thread scripts\common\utility::_id_13E0A( level._id_11B30, var_2, "_encstr_97A70AE945873020839AC811" );
                    var_8 = 1;
                }
            }
        }
    }

    if ( !var_8 )
        _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::bombzone_awardgenericbombzonemedals( var_1, var_0 );
}

givelastonteamwarning()
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    scripts\mp\utility\player::waittillrecoveredhealth( 3 );
    level thread scripts\mp\battlechatter_mp::trysaylocalsound( self, "_encstr_8010106FB801BFF30370FDB64EE9F977E818" );
    var_0 = scripts\mp\utility\game::getotherteam( self.pers["_encstr_89EF05D46BA8FD"] )[0];
    level thread scripts\mp\hud_util::teamplayercardsplash( "_encstr_97591CD31F201B7D4B38614A889F73B3F9F75545A5A87B872DB85A12D89B", self, self.pers["_encstr_89EF05D46BA8FD"] );
    level thread scripts\mp\hud_util::teamplayercardsplash( "_encstr_B2D01767603180256FA38104BBC7519BC6B1173B10E2A2AB0F", self, var_0 );
    level notify( "_encstr_95420BAA41D6A3A17059E1E653", self );
    scripts\mp\utility\game::setmlgannouncement( 3, self.team, self getentitynumber() );
}

ontimelimit()
{
    sd_endgame( game["_encstr_95A70AA81FEE295D3A2F56DE"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"]["_encstr_A40B13A3B4AD56AFD896B5D28EF593AC0BC6A15632"] );

    foreach ( var_1 in level.players )
    {
        if ( isdefined( var_1.bombplantweapon ) )
        {
            var_1 scripts\cp_mp\utility\inventory_utility::_takeweapon( var_1.bombplantweapon );
            break;
        }
    }

    scripts\mp\utility\game::_id_119AC( undefined, undefined, "_encstr_A68D136167AD11F970F4112B8B8E25D909D70810BB" );
}

updategametypedvars()
{
    _encstr_88EA20CDD8932D38E8B9CB5BC1BCD985D6AC47E58395CD5ED8F6B6B5DBDCE2B3378D::updatecommongametypedvars();
    level.bombtimer = scripts\mp\utility\dvars::dvarfloatvalue( "_encstr_A12A0A56BDB2A5D331E760D0", 45, 1, 240 );
    level.planttime = scripts\mp\utility\dvars::dvarfloatvalue( "_encstr_B6980AABC86B3D731323FDED", 5, 0, 20 );
    level.defusetime = scripts\mp\utility\dvars::dvarfloatvalue( "_encstr_8FB30B465699AE6E95E8B4DA95", 5, 0, 20 );
    level.multibomb = scripts\mp\utility\dvars::dvarintvalue( "_encstr_A34D0AD6BA361DB426F6ADC4", 0, 0, 1 );
    level.silentplant = scripts\mp\utility\dvars::dvarintvalue( "_encstr_AB6A0C433AB030304BE060683823", 0, 0, 1 );
    level.resetprogress = scripts\mp\utility\dvars::dvarintvalue( "_encstr_AAEF0EC959B956D128C9DBECC9ACCDE6", 0, 0, 1 );
}

removebombzonec( var_0 )
{
    var_1 = [];
    var_2 = getentarray( "_encstr_A6F51207834290EF033989F3E367ABF85D1CA381", "_encstr_B9110A36362C3737732CDA59" );

    foreach ( var_4 in var_2 )
    {
        if ( isdefined( var_4.script_gameobjectname ) && var_4.script_gameobjectname == "_encstr_889A09E530F7E918279537" )
        {
            foreach ( var_6 in var_0 )
            {
                if ( distance( var_4.origin, var_6.origin ) < 100 && issubstr( tolower( var_6.script_label ), "_encstr_824C0207" ) )
                {
                    var_6.relatedbrushmodel = var_4;
                    var_1[var_1.size] = var_6;
                    break;
                }
            }
        }
    }

    foreach ( var_10 in var_1 )
    {
        var_10.relatedbrushmodel delete();
        var_11 = getentarray( var_10.target, "_encstr_B8CE0BE43FC317DF690862BA48" );

        foreach ( var_13 in var_11 )
            var_13 delete();

        var_10 delete();
    }

    return scripts\engine\utility::array_removeundefined( var_0 );
}

bombs()
{
    _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::bombzone_setupbombcase( "_encstr_AD130846E7093D189D63" );
    var_0 = getentarray( "_encstr_889A09E530F7E918279537", "_encstr_B8CE0BE43FC317DF690862BA48" );
    var_0 = removebombzonec( var_0 );
    level.objectives = [];

    foreach ( var_2 in var_0 )
    {
        var_3 = _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::setupobjective( var_2, 1, 1 );
        var_3.onbeginuse = ::onbeginuse;
        var_3.onenduse = ::onenduse;
        var_3.onuse = ::onuseplantobject;
        level.objectives[var_3.objectivekey] = var_3;
    }

    if ( !scripts\mp\flags::gameflag( "_encstr_989F0E38272BD6161DB143F532BDDC2B" ) )
        level scripts\engine\utility::_id_143A5( "_encstr_989F0E38272BD6161DB143F532BDDC2B", "_encstr_8B5511DC1D16398EAF5BF68CACBECDB21DAB07" );

    level.sdbomb scripts\mp\gameobjects::requestid( 1, 1, 2 );
    level.sdbomb scripts\mp\gameobjects::setobjectivestatusicons( "_encstr_A4010EE398639237A8480C2F56B0E7DE" );
    level.sdbomb scripts\mp\gameobjects::setvisibleteam( "_encstr_B9FC095F8BCCFF02D92B43" );
    level.sdbombmodel = level.sdbomb.visuals[0];
    level.sdbombmodel _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::setteaminhuddatafromteamname( game["_encstr_941C0A6AF345075ED05BEAD3"] );
    level.sdbombmodel setasgametypeobjective();
    hastacvis( level.sdbomb.objidnum, 1 );
    scripts\mp\objidpoolmanager::objective_set_play_intro( level.sdbomb.objidnum, 0 );
    scripts\mp\objidpoolmanager::objective_set_play_outro( level.sdbomb.objidnum, 0 );

    if ( !scripts\mp\flags::gameflag( "_encstr_989F0E38272BD6161DB143F532BDDC2B" ) )
        wait 0.5;

    foreach ( var_3 in level.objectives )
    {
        var_6 = _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::getreservedobjid( var_3.objectivekey );
        var_3 scripts\mp\gameobjects::requestid( 1, 1, var_6 );
        var_3 scripts\mp\gameobjects::setobjectivestatusicons( "_encstr_944B10F7CF52BBADA31823A97083A7A7E825", "_encstr_8B3610DD58E538DE9673D1AFA3854ED9CAE8" );
        var_3 scripts\mp\gameobjects::setvisibleteam( "_encstr_BC19047780DA" );
    }
}

onbeginuse( var_0 )
{
    _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::bombzone_onbeginuse( var_0 );

    if ( !scripts\mp\gameobjects::isfriendlyteam( var_0.pers["_encstr_89EF05D46BA8FD"] ) )
    {
        if ( level.multibomb )
        {
            if ( self.objectivekey == "_encstr_B80703EB16" )
            {
                level.objectives["_encstr_A40703FA31"] scripts\mp\gameobjects::allowuse( "_encstr_AABA05236DC831" );
                level.objectives["_encstr_A40703FA31"] scripts\mp\gameobjects::setvisibleteam( "_encstr_B9FC095F8BCCFF02D92B43" );
            }
            else
            {
                level.objectives["_encstr_B80703EB16"] scripts\mp\gameobjects::allowuse( "_encstr_AABA05236DC831" );
                level.objectives["_encstr_B80703EB16"] scripts\mp\gameobjects::setvisibleteam( "_encstr_B9FC095F8BCCFF02D92B43" );
            }
        }
    }
}

onenduse( var_0, var_1, var_2 )
{
    _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::bombzone_onenduse( var_0, var_1, var_2 );

    if ( isdefined( var_1 ) && !scripts\mp\gameobjects::isfriendlyteam( var_1.pers["_encstr_89EF05D46BA8FD"] ) )
    {
        if ( level.multibomb && !var_2 )
        {
            if ( self.objectivekey == "_encstr_B80703EB16" )
            {
                level.objectives["_encstr_A40703FA31"] scripts\mp\gameobjects::allowuse( "_encstr_80BF06CA78A2226B" );
                level.objectives["_encstr_A40703FA31"] scripts\mp\gameobjects::setvisibleteam( "_encstr_BC19047780DA" );
            }
            else
            {
                level.objectives["_encstr_B80703EB16"] scripts\mp\gameobjects::allowuse( "_encstr_80BF06CA78A2226B" );
                level.objectives["_encstr_B80703EB16"] scripts\mp\gameobjects::setvisibleteam( "_encstr_BC19047780DA" );
            }
        }
    }
}

onuseplantobject( var_0 )
{
    if ( !scripts\mp\gameobjects::isfriendlyteam( var_0.pers["_encstr_89EF05D46BA8FD"] ) )
    {
        foreach ( var_2 in level.objectives )
        {
            if ( var_2 == self )
                continue;

            var_2 scripts\mp\gameobjects::disableobject();
        }
    }

    _encstr_9D04262397C00C9B650B9EA273100FC6C073BCA109D0D29E8001C289D9187F7ED0FF2E05DD981A67::bombzone_onuseplantobject( var_0 );
    scripts\mp\utility\game::_id_119AC( var_0, undefined, "_encstr_A3710D24DEB63140821B0BB93A5619", var_0.origin );
    thread scripts\mp\music_and_dialog::bombplanted_music();
}

setspecialloadout()
{
    if ( isusingmatchrulesdata() && scripts\mp\utility\game::getmatchrulesdatawithteamandindex( "_encstr_81300F3F8910414B21F907B33B56D3BD50", game["_encstr_941C0A6AF345075ED05BEAD3"], 5, "_encstr_9E95066E81471B5F", "_encstr_A28F0613BEB3DAD7" ) )
        level.sd_loadout[game["_encstr_941C0A6AF345075ED05BEAD3"]] = scripts\mp\utility\game::getmatchrulesspecialclass( game["_encstr_941C0A6AF345075ED05BEAD3"], 5 );
}

onbombexploded( var_0, var_1, var_2, var_3, var_4 )
{
    if ( istrue( level.nukeincoming ) )
        return;

    if ( var_3 == game["_encstr_941C0A6AF345075ED05BEAD3"] )
    {
        setgameendtime( 0 );
        wait 3;
        scripts\mp\utility\game::_id_119AC( undefined, undefined, "_encstr_98301111796EC707C029341D67280A1F13118A" );
        sd_endgame( game["_encstr_941C0A6AF345075ED05BEAD3"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"]["_encstr_97CA113A0B4ED995E8AF192BE64739BDE5B246"] );
    }
    else
    {
        wait 1.5;
        setgameendtime( 0 );
        sd_endgame( game["_encstr_95A70AA81FEE295D3A2F56DE"], game["_encstr_94EA0B2BE623AF39CA589BBDB9"]["_encstr_B9A10DD145CDB008EA27752B0782ED"] );
    }
}

updatematchstatushintonspawn()
{
    if ( level.bombplanted )
    {
        if ( game["_encstr_941C0A6AF345075ED05BEAD3"] == self.team )
            self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 22 );
        else
            self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 23 );
    }
    else if ( isdefined( level.sdbomb ) )
    {
        if ( isdefined( level.sdbomb.carrier ) )
        {
            if ( level.sdbomb.carrier.team == self.team )
            {
                if ( level.sdbomb.carrier == self )
                    self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 21 );
                else
                    self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 25 );
            }
            else
                self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 26 );
        }
        else if ( game["_encstr_941C0A6AF345075ED05BEAD3"] == self.team )
            self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 24 );
        else
            self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", 26 );
    }
    else
        self setclientomnvar( "_encstr_AD061ACF50F64D32C19E2CE9FEB94A1CDB18EF03F808AC19E9A5305B", -1 );
}
