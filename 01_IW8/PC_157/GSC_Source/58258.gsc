// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level.delete_pipe_ents = spawnstruct();
    level.delete_pipe_ents.scriptables = [];
    level._encstr_9FB319DA85E138ED398E162663565B2DED37AD6E83CA27A32B0BB6 = getdvarint( "_encstr_BAD4205E5FF8275EA8C73FC61A3F2F12DD1186797F3701028042E7EF4AC3496DD25A", 2 );
    level._encstr_AAC418FF8B7B432FA8BB76BE9038636A58077F0F7FA97A1A68C0 = getdvarint( "_encstr_9D121F6E1B4E7D98277D6B85C328ED9CD1B04CD895B4B4B76EAD37E836BD4CB0D8", 20 );
    level._effect["_encstr_B91510CE3387FA989C66AF3813B9EB195BB3"] = loadfx( "_encstr_89D62FC3EF28B7A7BBFF1FDEF8586FD828D866BC45500B31CD6B650B084EC822585F6633FEF1DAE1DEA76D50FF3643A223" );
}

wait_between_combat_action( var_0 )
{
    var_1 = self;
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_1 endon( "_encstr_817D0C9D9395B9C24659F53DF490" );
    var_0 endon( "_encstr_A1A50C7032476BD0823F87278B01" );
    var_0 thread scripts\mp\utility\script::notifyafterframeend( "_encstr_A3750609A5E61883", "_encstr_A1A50C7032476BD0823F87278B01" );
    var_1 thread vfx_htown_hadirj_blink( var_0 );
    var_1 thread wait_between_stations( var_0 );
    var_0 waittill( "_encstr_AB0808DFB97F822F1899", var_2 );
    var_1 notify( "_encstr_B4BE1452C850273409317267F1E1BF9708606BEAD1BD" );
    thread wait_at_station( var_2 );

    if ( scripts\mp\outofbounds::ispointinoutofbounds( var_2 ) )
    {
        if ( isdefined( var_0 ) )
            var_0 delete();

        if ( isdefined( var_1.super ) )
            var_1 scripts\mp\supers::superusefinished( 1 );

        return;
    }

    var_1 _id_1366A( var_2 );

    if ( isdefined( var_1.super ) )
        var_1 scripts\mp\supers::superusefinished( undefined, undefined, undefined, 1 );
}

_id_1366A( var_0 )
{
    _encstr_A8461C8DD8AC0BB957E085B11B98BA8EE16DB4DEDCD66ECCDB271DAC0B6B( self.team );
    _encstr_A24317D6C273C23BACEC63F6260BB1B6A5ED6EB6C6B7D5DC1D();
    var_1 = 4096;

    if ( istrue( self.umbra ) )
        var_1 = 10000;

    var_2 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_0 + ( 0, 0, var_1 ) );
    var_2 setmodel( "_encstr_9F18210852FF4ED0282F8F893953088093E961B3FA0B754943E7AF911F2A82400FC3D3" );
    var_2 physicslaunchserver();
    var_2 setscriptablepartstate( "_encstr_BCB90F3A820F0295B340394DA349508DA2", "_encstr_BE8B08B3B4CD963163B2", 0 );
    _encstr_823124376CE42DC11DCD5EB6E0CB3BB0ADAC3A2FE056CDBC314EAF83A536DAAB079BE2D9B9B1::_id_12B3A( var_2 );
    var_2.visible = 1;
    var_2._encstr_AD3B10F33B8BA0B54B4A700822A45B786FDB = 1;
    var_2.managerespawnfade = 1;
    var_2.team = self.team;
    level.delete_pipe_ents.scriptables[level.delete_pipe_ents.scriptables.size] = var_2;
    var_2 thread _id_11D0B();
    var_2 thread _id_11D17();

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) )
        level thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_957515E82BC2AD28B116F2CA9C6885E4C8D41CB12C6E43" ) ]]( "_encstr_B14D0DAEE6CAC8BE85D2C923937B83", self );
}

_encstr_A8461C8DD8AC0BB957E085B11B98BA8EE16DB4DEDCD66ECCDB271DAC0B6B( var_0 )
{
    var_1 = [];

    foreach ( var_3 in level.delete_pipe_ents.scriptables )
    {
        if ( !isdefined( var_3 ) || !isdefined( var_3.team ) || var_3.team != var_0 )
            continue;

        var_1[var_1.size] = var_3;
    }

    var_5 = var_1.size - ( level._encstr_9FB319DA85E138ED398E162663565B2DED37AD6E83CA27A32B0BB6 - 1 );

    if ( var_5 <= 0 )
        return;

    for ( var_6 = var_5 - 1; var_6 >= 0; var_6-- )
    {
        var_7 = var_1[var_6];
        _encstr_B61C158CB2378E397B97E07B4E1D16138D56B696BDE65B( var_7 );
    }
}

_encstr_A24317D6C273C23BACEC63F6260BB1B6A5ED6EB6C6B7D5DC1D()
{
    if ( level.delete_pipe_ents.scriptables.size >= level._encstr_AAC418FF8B7B432FA8BB76BE9038636A58077F0F7FA97A1A68C0 )
        _encstr_B61C158CB2378E397B97E07B4E1D16138D56B696BDE65B( level.delete_pipe_ents.scriptables[0] );
}

dangercircletick( var_0, var_1 )
{
    if ( _encstr_AD64266E6CE44B1CD19B97B53897D9B0B62B1DBC389537F2139CBE7658D6AC8E2F3895DC17B3DC8D::unset_relic_aggressive_melee( "_encstr_A48D06ADA5BDE66D" ) || getdvarint( "_encstr_A3E01B06B19B0126B2FF4C6F6F17772130DF70B742F121192310B6642F", 0 ) == 1 )
        return;

    var_2 = var_1 * var_1;

    foreach ( var_4 in level.delete_pipe_ents.scriptables )
    {
        if ( isdefined( var_4.visible ) && isdefined( var_4.origin ) && distance2dsquared( var_4.origin, var_0 ) > var_2 )
            _encstr_B61C158CB2378E397B97E07B4E1D16138D56B696BDE65B( var_4 );
    }
}

_encstr_B61C158CB2378E397B97E07B4E1D16138D56B696BDE65B( var_0 )
{
    var_0 setscriptablepartstate( "_encstr_BCB90F3A820F0295B340394DA349508DA2", "_encstr_9F1D0909124FCF686D15A1" );
    var_0.visible = undefined;
    var_0.disabled = 1;
    var_0 notify( "_encstr_8C8C172AD8A0443A16F98F3FDB48C3832141E472B19814327D" );

    if ( var_0 _encstr_A83527375FF36358943A0858E22728AFFAAFA1ABAB2A36DADA520ED34B55D05D71772933B3C6F4F0F3::gethelispawns() )
        var_0 _encstr_A83527375FF36358943A0858E22728AFFAAFA1ABAB2A36DADA520ED34B55D05D71772933B3C6F4F0F3::lastdropedtime();

    playfx( scripts\engine\utility::getfx( "_encstr_B91510CE3387FA989C66AF3813B9EB195BB3" ), var_0.origin );
    playsoundatpos( var_0.origin, "_encstr_BCCF138563572F531D0197C91AF02ACBEBEAE8AB98" );
    level.delete_pipe_ents.scriptables = scripts\engine\utility::array_remove( level.delete_pipe_ents.scriptables, var_0 );
    var_0 delete();
}

_id_11D17()
{
    _id_11D18();
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_9E8317E8F8C58320A783DFA54913A7CD9CE54A70885BF72D4C" );
    var_0 = self;

    if ( isdefined( self.mountmantlemodel ) )
        var_0 = self.mountmantlemodel;

    var_1 = undefined;

    if ( isdefined( self.owner ) )
        var_1 = self.owner;

    while ( isdefined( var_0 ) )
    {
        var_0 waittill( "_encstr_B3410EBBA4D980B22B89A063F7E84B38", var_2, var_3 );

        if ( isdefined( var_2 ) && ( isplayer( var_2 ) || isagent( var_2 ) ) && var_2 scripts\cp_mp\utility\player_utility::_isalive() )
        {
            var_4 = var_3[2] <= -8;
            var_5 = 0;
            var_6 = undefined;

            if ( var_2 tagexists( "_encstr_8BE10B4DF5DA2C5A9B39B7EDE8" ) )
            {
                var_6 = var_2 gettagorigin( "_encstr_8BE10B4DF5DA2C5A9B39B7EDE8" );
                var_7 = self.origin + anglestoup( self.angles ) * 27.5;
                var_5 = var_6[2] <= var_7[2];
            }

            if ( var_4 && var_5 )
            {
                var_8 = var_1;

                if ( !isdefined( var_8 ) )
                    var_8 = var_2;
            }
        }
    }
}

_id_11D18()
{
    self notify( "_encstr_9E8317E8F8C58320A783DFA54913A7CD9CE54A70885BF72D4C" );
}

_id_1273B( var_0, var_1, var_2, var_3 )
{
    playfx( scripts\engine\utility::getfx( "_encstr_8766154129EB61FE78F801C02AEBF345B90A136B0988FB" ), var_0, var_1 );

    if ( var_2 < 150 )
        self playsurfacesound( "_encstr_BAC81B2D07D6B76ED52BD11B18CF2477096597D4107BFF3483C03A2258", var_3 );
    else if ( var_2 < 300 )
        self playsurfacesound( "_encstr_B75C1B08A3DF2E900AF5376119B638E7D76AC6B05A6B4898E5D853BF14", var_3 );
    else
        self playsurfacesound( "_encstr_BEEB1CE843DF11BB5337C8670E7A97194F8FF1B84FBFC80F0ADD57E7E663", var_3 );

    self stoploopsound( "_encstr_B77A18DA07D76CC29359AF0758365B85ECAC7D91C9F61CAFB138" );
}

_id_11D0B( var_0 )
{
    _id_11D0C();
    self endon( "_encstr_9F7011B5F6375AE8ED93A4B5382CD81DA2378C" );
    self._id_11D0E = 1;
    self playloopsound( "_encstr_B77A18DA07D76CC29359AF0758365B85ECAC7D91C9F61CAFB138" );
    self physics_registerforcollisioncallback();
    _id_11D0D( var_0 );

    if ( isdefined( self ) )
        thread _id_11D0C();
}

_id_11D0D( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );

    if ( isdefined( var_0 ) )
        wait( var_0 );

    var_1 = 0;

    for (;;)
    {
        self waittill( "_encstr_B3510AD8BDD8C6A56ED2B737", var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 );

        if ( isdefined( var_9 ) && scripts\cp_mp\killstreaks\airdrop::start_chants_on_movement( var_9 ) )
        {
            if ( var_9 scripts\cp_mp\killstreaks\helper_drone::unset_relic_noks() )
                var_9 thread scripts\cp_mp\killstreaks\helper_drone::helperdronedestroyed();
        }

        if ( gettime() - var_1 >= 200 )
        {
            var_1 = gettime();
            var_10 = physics_getsurfacetypefromflags( var_5 );
            var_11 = getsubstr( var_10["_encstr_81BA051A9AA88B"], 9 );

            if ( var_11 == "_encstr_A9140E55C708BA5715991B6361E3DB22" )
                var_11 = "_encstr_879D0FE30F92BBF7631A868B39686E413A";

            if ( var_11 == "_encstr_AD140E4522AA1D1E847F704857A170DB" )
                var_11 = "_encstr_899D0FBBAF359331FD03DB88C17F9D0F76";

            _id_1273B( var_6, var_7, var_8, var_11 );
        }
    }
}

_id_11D0C()
{
    if ( !istrue( self._id_11D0E ) )
        return;

    self notify( "_encstr_9F7011B5F6375AE8ED93A4B5382CD81DA2378C" );
    self._id_11D0E = undefined;
    self stoploopsound( "_encstr_B77A18DA07D76CC29359AF0758365B85ECAC7D91C9F61CAFB138" );
    self physics_unregisterforcollisioncallback();
}

vfx_htown_hadirj_blink( var_0 )
{
    var_1 = self;
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_0 endon( "_encstr_AB0808DFB97F822F1899" );
    var_0 endon( "_encstr_A1A50C7032476BD0823F87278B01" );
    wait 10;

    if ( isdefined( var_0 ) )
        var_0 delete();

    var_1 notify( "_encstr_817D0C9D9395B9C24659F53DF490" );
}

wait_between_stations( var_0 )
{
    var_1 = self;
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_1 endon( "_encstr_B4BE1452C850273409317267F1E1BF9708606BEAD1BD" );
    var_0 waittill( "_encstr_A3750609A5E61883" );
    waitframe();

    if ( isdefined( var_1.super ) )
        var_1 scripts\mp\supers::superusefinished( 1 );
}

wait_at_station( var_0 )
{
    var_1 = spawn( "_encstr_A3050EDF6FF5DC081CC1AFA37097B80B", var_0 );
    var_1 playloopsound( "_encstr_B6CC1B13303A1F7AC91B311B8173374F607BC7CDC8574BCF88087915CB" );
    wait 21;
    var_1 playsound( "_encstr_80741E5BC0D8DF2F8147E9FE4B38B32FFE3EA3E228215727188FF3F151C0FB97" );
    var_1 stoploopsound( "_encstr_B6CC1B13303A1F7AC91B311B8173374F607BC7CDC8574BCF88087915CB" );
    wait 5;
    var_1 delete();
}
