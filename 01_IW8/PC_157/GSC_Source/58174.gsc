// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

register_ai_damage_callbacks()
{
    level.agent_funcs["_encstr_9D9A17FA81D54F6A01CB6675C3E8F98BFCBE4262EB25D72640"]["_encstr_AAB20B6A503033FEC073DFA501"] = ::callbacksoldieragentdamaged;
    level.agent_funcs["_encstr_9D9A17FA81D54F6A01CB6675C3E8F98BFCBE4262EB25D72640"]["_encstr_A42E1CDF0968DFFCDB9827BFB8C8F82571E708580209A7AC48682793AFE9"] = ::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["_encstr_9D9A17FA81D54F6A01CB6675C3E8F98BFCBE4262EB25D72640"]["_encstr_8A0F13B3B0DACAA32F0756F5F6737DB65AB18DAC23"] = ::callbacksoldieragentgametypekilled;
    level.agent_funcs["_encstr_B1661F86B178B7F360037B2F6B1B69FC389EFE0E2B187FAA4D2F57277D48723D88"]["_encstr_AAB20B6A503033FEC073DFA501"] = ::callbacksoldieragentdamaged;
    level.agent_funcs["_encstr_B1661F86B178B7F360037B2F6B1B69FC389EFE0E2B187FAA4D2F57277D48723D88"]["_encstr_A42E1CDF0968DFFCDB9827BFB8C8F82571E708580209A7AC48682793AFE9"] = ::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["_encstr_B1661F86B178B7F360037B2F6B1B69FC389EFE0E2B187FAA4D2F57277D48723D88"]["_encstr_8A0F13B3B0DACAA32F0756F5F6737DB65AB18DAC23"] = ::callbacksoldieragentgametypekilled;
    level.agent_funcs["_encstr_AF141201EED3E7CAEF60A26A58DBC9A3EB588AAA"]["_encstr_AAB20B6A503033FEC073DFA501"] = ::callbacksoldieragentdamaged;
    level.agent_funcs["_encstr_AF141201EED3E7CAEF60A26A58DBC9A3EB588AAA"]["_encstr_A42E1CDF0968DFFCDB9827BFB8C8F82571E708580209A7AC48682793AFE9"] = ::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["_encstr_AF141201EED3E7CAEF60A26A58DBC9A3EB588AAA"]["_encstr_8A0F13B3B0DACAA32F0756F5F6737DB65AB18DAC23"] = ::callbacksoldieragentgametypekilled;
    level.agent_funcs["_encstr_9BD4182F6F9D52D2613915DFD0B8379AF4FFBBEBAFCECBAD6001"]["_encstr_AAB20B6A503033FEC073DFA501"] = ::callbacksoldieragentdamaged;
    level.agent_funcs["_encstr_9BD4182F6F9D52D2613915DFD0B8379AF4FFBBEBAFCECBAD6001"]["_encstr_A42E1CDF0968DFFCDB9827BFB8C8F82571E708580209A7AC48682793AFE9"] = ::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["_encstr_9BD4182F6F9D52D2613915DFD0B8379AF4FFBBEBAFCECBAD6001"]["_encstr_8A0F13B3B0DACAA32F0756F5F6737DB65AB18DAC23"] = ::callbacksoldieragentgametypekilled;
    level.agent_funcs["_encstr_9B461DA027DC484569CFB83525E3D7D0273F20B06F6A4317B2F7AE483E1BD9"]["_encstr_AAB20B6A503033FEC073DFA501"] = ::callbacksoldieragentdamaged;
    level.agent_funcs["_encstr_9B461DA027DC484569CFB83525E3D7D0273F20B06F6A4317B2F7AE483E1BD9"]["_encstr_A42E1CDF0968DFFCDB9827BFB8C8F82571E708580209A7AC48682793AFE9"] = ::callbacksoldieragentgametypedamagefinished;
    level.agent_funcs["_encstr_9B461DA027DC484569CFB83525E3D7D0273F20B06F6A4317B2F7AE483E1BD9"]["_encstr_8A0F13B3B0DACAA32F0756F5F6737DB65AB18DAC23"] = ::callbacksoldieragentgametypekilled;
}

callbacksoldieragentdamaged( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12, var_13 )
{
    var_14 = self;

    if ( !isdefined( var_14.agent_type ) )
        return;

    if ( !isdefined( var_12 ) )
        var_12 = var_5;

    if ( !isdefined( var_13 ) )
        var_13 = var_2;

    if ( var_4 != "_encstr_97590CFD0825D7720BD1A018A1F3" )
    {
        if ( is_friendly_damage( var_14, var_0 ) )
            return;
    }

    if ( !isdefined( var_1 ) )
        var_1 = var_14;

    var_15 = should_do_damage_checks( var_1, var_2, var_4, var_5, var_8, var_14 );

    if ( !var_15 )
        return;

    var_3 = var_3 | 4;
    var_16 = var_2;
    var_17 = var_12.basename;
    var_18 = var_12.classname;
    var_19 = is_suicide_bomber();
    var_20 = istrue( var_1.inlaststand );
    var_21 = var_4 == "_encstr_8AED0A5719ED37B8FB512FD7";
    var_22 = scripts\engine\utility::isbulletdamage( var_4 ) || var_4 == "_encstr_9BE3150DAD1C47870999C0F8AF5C37E55EDEC7E1CD5543" && var_8 != "_encstr_AABA05236DC831";
    var_23 = isdefined( var_1 ) && isplayer( var_1 );
    var_24 = isdefined( var_1.owner ) && isplayer( var_1.owner );
    var_25 = isdefined( var_14.unittype ) && var_14.unittype == "_encstr_AAFC0BA9AB3B9DCAC9DC2C571D";
    var_26 = var_22 && scripts\mp\utility\damage::isheadshot( var_8, var_4, var_1 );
    var_27 = var_4 == "_encstr_9BE3150DAD1C47870999C0F8AF5C37E55EDEC7E1CD5543" && ( isdefined( var_8 ) && var_8 == "_encstr_AABA05236DC831" ) || var_4 == "_encstr_A45C0E4B9FDF3165A3B93C4491BFA4A9" || var_4 == "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1" || var_4 == "_encstr_81670F602F2B4957763C758D38D1FF6C3B" || var_4 == "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C" || var_4 == "_encstr_A11B0CBD04C9B790F653EBCF4915";
    var_28 = var_4 == "_encstr_AD0D0935D0FD0FFFFBF108";
    var_29 = var_23 && var_1 _hasperk( "_encstr_AFAB177F3A7D6B39B7C9FB8301F915382B3709ED4E13C0DFCF" );
    var_30 = isdefined( var_1.classname ) && var_1.classname == "_encstr_AB440F9BD8932D071DAFB3CA435A3663B2" && isdefined( var_1.owner ) && isplayer( var_1.owner );
    var_31 = var_30 && var_4 == "_encstr_8A4E0A41A7FB067762A99949";
    var_32 = isdefined( var_1.classname ) && var_1.classname == "_encstr_AB440F9BD8932D071DAFB3CA435A3663B2" && !isdefined( var_1.owner );
    var_33 = var_32 && var_4 == "_encstr_8A4E0A41A7FB067762A99949";
    var_34 = 0;
    var_35 = 0;

    if ( ( var_23 || var_24 ) && istrue( var_14.invulnerable ) && var_4 != "_encstr_97590CFD0825D7720BD1A018A1F3" )
        return;

    if ( var_25 )
    {
        if ( var_21 )
            var_2 = 0;
        else
        {
            var_2 = var_2 * 0.3;

            if ( var_17 == "_encstr_9D8D0F1D34CAC9ADA51D597D16837DB5E0" || var_17 == "_encstr_B95911595B3063C80339B1266B4207BB79AEDB" )
                var_2 = var_2 * 15;

            if ( var_17 == "_encstr_8ACB0F82FB0D1F62E877A0AA3FB821B737" )
                var_2 = self.health + 1000;
        }

        if ( var_31 )
        {
            var_36 = [ "_encstr_A219044B93BB" ];

            if ( scripts\engine\utility::array_contains( var_36, var_1.vehiclename ) )
                var_1 dodamage( 10000, var_1.origin, var_14 );
            else
            {
                playsoundatpos( self.origin + ( 0, 0, 40 ), "_encstr_9FB30DCEA589AFCCBA8DC6267B46CB" );
                var_2 = self.health + 1000;
            }
        }
    }
    else if ( var_23 )
    {
        if ( var_17 == "_encstr_89F511713BBB2818C13559D05DB9E85501B7F1" )
            var_2 = self.health + 1000;

        if ( ( var_17 == "_encstr_97FC0F53F5B5A13A1368FBC350AACF4A49" || var_17 == "_encstr_98DF123BE37BAFB83AC15149ED2089D297B99023" ) && var_4 == "_encstr_81670F602F2B4957763C758D38D1FF6C3B" )
            var_2 = self.health + 1000;
    }

    if ( istrue( self.clearsoundsubmixmpbrinfilanim ) )
    {
        if ( _id_132EB( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12 ) )
            return;

        if ( var_8 == "_encstr_AF2D07F8E23CA3E0E3" && ( var_4 == "_encstr_A11B0CBD04C9B790F653EBCF4915" || var_4 == "_encstr_81670F602F2B4957763C758D38D1FF6C3B" ) && var_2 > 175 )
        {
            var_2 = var_2 * 0.05;
            var_8 = "_encstr_AD7A0C3ABD939BDBF536B7DDCA93";
        }
    }

    if ( var_19 )
    {
        if ( var_17 == "_encstr_B2931468F730D6F113F510ADC10BD9D9914F58411FE8" )
            var_2 = self.health + 1000;
    }

    if ( var_31 )
        playsoundatpos( self.origin + ( 0, 0, 40 ), "_encstr_9FB30DCEA589AFCCBA8DC6267B46CB" );

    if ( var_33 )
    {
        if ( istrue( self.trial_target_think_func ) )
        {
            var_2 = 0;
            var_14 notify( "_encstr_975011354F5A70F89AB39BF0D174109122DF9B", var_1 );
        }
    }

    if ( var_23 )
    {
        var_14.damaged_by_player = 1;

        if ( var_26 )
        {
            if ( var_25 )
                var_2 = bink_save_hack( var_2, var_5, var_18, var_4, var_1 );
        }

        if ( var_29 )
            var_2 = var_2 * 2;

        if ( var_27 )
        {
            var_37 = var_2 * 2.5;

            if ( isdefined( level.explosivedamagemod ) )
                var_37 = var_37 * level.explosivedamagemod;

            var_2 = var_2 + var_37;
        }

        if ( var_28 )
            var_2 = var_2 + var_2 * 3.5;

        if ( var_21 && !var_25 )
        {
            if ( istrue( var_14.immune_to_melee_damage ) )
            {
                var_2 = 0;
                var_14 notify( "_encstr_AA721AA09AD51B79A78853D5A7BFC0A77D62207832A15B3007BDE845", var_1 );
            }
            else
            {
                var_2 = 150;

                if ( issubstr( var_17, "_encstr_BED80DB4BB83AFD6379633CAEBB6E0" ) )
                    var_2 = 350;

                if ( issubstr( var_17, "_encstr_B6E10880FFA94955F7F1" ) )
                    var_2 = 350;
                else if ( isdefined( var_12.muzzle ) )
                {
                    if ( issubstr( var_12.muzzle, "_encstr_B90F0CD6BA4FA7C62BADCA1B59CA" ) )
                        var_2 = 350;

                    if ( issubstr( var_12.muzzle, "_encstr_B8820886AFD3D2468190" ) )
                        var_2 = 350;
                }
            }
        }

        if ( var_22 )
        {
            if ( !var_26 )
            {
                if ( !isdefined( level.bullet_damage_scalar ) )
                    level.bullet_damage_scalar = 1;

                var_2 = var_2 * level.bullet_damage_scalar;
            }

            var_2 = var_2 * 1;
        }

        if ( scripts\mp\utility\game::getgametype() == "_encstr_9507034B25" )
        {
            var_38 = isdefined( var_12 ) && scripts\mp\utility\weapon::iskillstreakweapon( var_12.basename );
            var_39 = scripts\mp\damage::cac_modified_damage( var_14, var_1, var_2, var_4, var_12, var_6, var_7, var_8, var_0, 0, var_3, var_38, var_13 );
            var_2 = var_39[0];
            var_34 = var_39[1];
            var_35 = var_39[2];

            if ( scripts\mp\damage::armorvest_washit( var_1 ) || scripts\mp\damage::helmet_washit( var_1 ) )
                var_3 = var_3 | level.ss_circletick;

            if ( scripts\mp\damage::armorvest_wasbroke( var_1 ) || scripts\mp\damage::helmet_wasbroke( var_1 ) )
                var_3 = var_3 | level.sr_next_ammo_restock_time;

            if ( isdefined( level._id_11FFB ) )
                var_3 = var_3 | [[ level._id_11FFB ]]( var_14 );
        }
    }

    if ( isdefined( var_17 ) && var_17 == "_encstr_97FC0F53F5B5A13A1368FBC350AACF4A49" && isdefined( var_4 ) && var_4 == "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C" )
        var_2 = var_2 * 2;

    if ( var_23 || var_24 || var_31 )
    {
        if ( isdefined( var_12 ) )
        {
            if ( var_24 )
                var_1 = var_1.owner;

            binoculars_onstateupdatefunc( self, var_1, var_0, var_12, var_2, var_6, var_7, var_8, var_9, var_4 );
        }

        if ( var_2 >= var_14.health )
        {
            if ( var_12.basename == "_encstr_AABA05236DC831" )
            {
                if ( isdefined( var_0 ) && isdefined( var_0.weapon_name ) )
                    var_12 = getcompleteweaponname( var_0.weapon_name );
            }

            var_40 = spawnstruct();
            var_40.einflictor = var_0;
            var_40.eattacker = var_1;
            var_40.idamage = var_2;
            var_40.idflags = var_3;
            var_40.smeansofdeath = var_4;
            var_40.sweapon = var_5;
            var_40.vpoint = var_6;
            var_40.vdir = var_7;
            var_40.shitloc = var_8;
            var_40.timeoffset = var_9;
            var_40.modelindex = var_10;
            var_40.partname = var_11;
            var_40.objweapon = var_12;
        }
    }

    var_2 = int( min( var_2, var_14.maxhealth ) );

    if ( is_flashbang( var_17, var_12, var_0 ) && var_4 == "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1" )
        var_14 notify( "_encstr_97E70ACC3616DC3489C29BEC", var_8, 1, undefined, var_1, "_encstr_BC850785638DA59537" );

    if ( is_gas( var_17 ) && var_4 == "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1" )
        var_14 notify( "_encstr_97E70ACC3616DC3489C29BEC", var_8, 1, undefined, var_1, "_encstr_BC850785638DA59537" );

    if ( isdefined( var_14.unittype ) && isdefined( level.agent_funcs[var_14.unittype] ) && isdefined( level.agent_funcs[var_14.unittype]["_encstr_9D9F14CD20A75A418820AFAF60A63EF2ADCB52841D09"] ) )
        var_14 [[ level.agent_funcs[var_14.unittype]["_encstr_9D9F14CD20A75A418820AFAF60A63EF2ADCB52841D09"] ]]( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, 0.0, var_10, var_11, var_34, var_35 );
    else
        var_14 [[ level.agent_funcs[var_14.agent_type]["_encstr_9D9F14CD20A75A418820AFAF60A63EF2ADCB52841D09"] ]]( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, 0.0, var_10, var_11, var_34, var_35 );
}

callbacksoldieragentgametypedamagefinished( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12, var_13, var_14 )
{
    if ( var_4 == "_encstr_97590CFD0825D7720BD1A018A1F3" )
        return;

    process_damage_feedback( var_0, var_1, var_2, var_3, var_4, var_5, var_7, var_7, var_8, var_9, self, var_13, var_14 );
    var_3 = 0;

    if ( !isdefined( self.painsound ) )
        return;

    if ( gettime() > self.next_dmg_sound )
    {
        if ( soundexists( self.painsound ) )
            self playsound( self.painsound );

        self.next_dmg_sound = gettime() + 500;
    }
}

callbacksoldieragentgametypekilled( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 )
{
    deactivateagent();

    if ( isdefined( level.spawnloopupdatefunc ) )
        [[ level.spawnloopupdatefunc ]]( var_1, var_4 );

    if ( isdefined( var_3 ) && var_3 == "_encstr_97590CFD0825D7720BD1A018A1F3" )
        return;

    if ( istrue( self.marked_for_death ) )
        self.marked_for_death = undefined;

    if ( isdefined( self.isinlaststand ) )
    {
        var_9 = spawnstruct();
        var_9.einflictor = var_0;
        var_9.eattacker = var_1;
        var_9.idamage = var_2;
        var_9.smeansofdeath = var_3;
        var_9.sweapon = var_4;
        var_9.vdir = var_5;
        var_9.shitloc = var_6;
        var_9.timeoffset = var_7;
        var_9.deathanimduration = var_8;
        thread [[ self.isinlaststand ]]( var_9 );
    }

    if ( isplayer( var_1 ) )
        level thread handle_death_sounds( var_1, self, var_3 );

    if ( isdefined( level.removefromtargetmarkeronkillfunc ) )
        level thread [[ level.removefromtargetmarkeronkillfunc ]]( self );

    var_10 = 0;
    process_damage_feedback( var_0, var_1, var_2, var_10, var_3, var_4, var_5, var_5, var_6, var_7, self, 0, 0 );
}

is_friendly_damage( var_0, var_1 )
{
    if ( isdefined( var_1 ) )
    {
        if ( isdefined( var_1.team ) && var_1.team == var_0.team )
            return 1;

        if ( isdefined( var_1.owner ) && isdefined( var_1.owner.team ) && var_1.owner.team == var_0.team )
            return 1;
    }

    return 0;
}

should_do_damage_checks( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    if ( !isdefined( var_3 ) )
        return 0;
    else if ( var_0 != var_5 && isdefined( var_0.team ) && var_0.team == var_5.team )
        return 0;
    else if ( isdefined( level.should_do_damage_check_func ) && ![[ level.should_do_damage_check_func ]]( var_0, var_1, var_2, var_3, var_4, var_5 ) )
        return 0;

    return 1;
}

is_suicide_bomber()
{
    return istrue( isdefined( self.unittype ) && self.unittype == "_encstr_BAF60EE6AE4BD82DC82B13DBD6262B93" );
}

bink_save_hack( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = var_0;

    switch ( var_2 )
    {
        case "_encstr_B453063D7FBAE9C8":
            var_5 = min( var_0, 84 );
            break;
        case "_encstr_BE1904B9D6B3":
            var_5 = min( var_0, 110 );
            break;
        case "_encstr_BE0703815F":
            var_5 = min( var_0, 105 );
            break;
        case "_encstr_A91007F0AB1AC9A31A":
            var_5 = min( var_0, 84 );
            break;
        case "_encstr_8A94070E2DCD8E7BB1":
            var_5 = min( var_0, 75 );
            break;
        case "_encstr_B6070748328C39712B":
            var_5 = min( var_0, 130 );
            break;
        default:
            var_5 = var_0;
            break;
    }

    return var_0;
}

binoculars_onstateupdatefunc( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 )
{
    if ( !isdefined( var_0.attackerdata ) )
        var_0.attackerdata = [];

    if ( !isdefined( var_1.guid ) && ( isagent( var_1 ) || isplayer( var_1 ) ) )
        var_1.guid = var_1 scripts\mp\utility\player::getuniqueid();

    if ( !isdefined( var_1.guid ) )
        return;

    if ( !isdefined( var_0.attackerdata[var_1.guid] ) )
    {
        var_0.attackers[var_1.guid] = var_1;
        var_0.attackerdata[var_1.guid] = spawnstruct();
        var_0.attackerdata[var_1.guid].damage = 0;
        var_0.attackerdata[var_1.guid].attackerent = var_1;
        var_0.attackerdata[var_1.guid].firsttimedamaged = gettime();
        var_0.attackerdata[var_1.guid].hitcount = 1;
    }
    else
        var_0.attackerdata[var_1.guid].hitcount++;

    if ( scripts\mp\utility\weapon::iscacprimaryweapon( var_3 ) && !scripts\mp\utility\weapon::iscacsecondaryweapon( var_3 ) )
        var_0.attackerdata[var_1.guid].diddamagewithprimary = 1;

    if ( isdefined( var_9 ) && var_9 != "_encstr_8AED0A5719ED37B8FB512FD7" )
        var_0.attackerdata[var_1.guid].didnonmeleedamage = 1;

    var_10 = scripts\mp\utility\weapon::getequipmenttype( var_3.basename );

    if ( isdefined( var_10 ) )
    {
        if ( var_10 == "_encstr_9C1607D0071420D7AA" )
            var_0.attackerdata[var_1.guid].diddamagewithlethalequipment = 1;

        if ( var_10 == "_encstr_94C2099887BA24607BE134" )
            var_0.attackerdata[var_1.guid].diddamagewithtacticalequipment = 1;
    }

    var_0.attackerdata[var_1.guid].damage = var_0.attackerdata[var_1.guid].damage + var_4;
    var_0.attackerdata[var_1.guid].weapon = createheadicon( var_3 );
    var_0.attackerdata[var_1.guid].objweapon = var_3;
    var_0.attackerdata[var_1.guid].vpoint = var_5;
    var_0.attackerdata[var_1.guid].vdir = var_6;
    var_0.attackerdata[var_1.guid].shitloc = var_7;
    var_0.attackerdata[var_1.guid].psoffsettime = var_8;
    var_0.attackerdata[var_1.guid].smeansofdeath = var_9;
    var_0.attackerdata[var_1.guid].attackerent = var_1;
    var_0.attackerdata[var_1.guid].lasttimedamaged = gettime();

    if ( isdefined( var_2 ) && !isplayer( var_2 ) && isdefined( var_2.primaryweapon ) )
        var_0.attackerdata[var_1.guid].sprimaryweapon = var_2.primaryweapon;
    else if ( isdefined( var_1 ) && isplayer( var_1 ) && !nullweapon( var_1 getcurrentprimaryweapon() ) )
        var_0.attackerdata[var_1.guid].sprimaryweapon = createheadicon( var_1 getcurrentprimaryweapon() );
    else
        var_0.attackerdata[var_1.guid].sprimaryweapon = undefined;
}

is_flashbang( var_0, var_1, var_2 )
{
    if ( isdefined( var_1.underbarrel ) )
    {
        var_3 = scripts\mp\utility\weapon::attachmentmap_tobase( var_1.underbarrel );

        if ( var_3 == "_encstr_8F3708CA308C739E5001" || var_3 == "_encstr_A3BD07C10B0F7F5556" )
            return 1;
    }

    return var_0 == "_encstr_970B114D33923EC8CF4FD30935D9E07D295F19";
}

is_gas( var_0 )
{
    return var_0 == "_encstr_BDD3079D0BB9FAB6C1";
}

deactivateagent()
{
    if ( scripts\mp\utility\entity::isgameparticipant( self ) )
        removefromparticipantsarray();

    removefromcharactersarray();
    self.isactive = 0;
    self.hasdied = 0;
    self.marked_by_hybrid = undefined;
    self.mortartarget = undefined;
    self.owner = undefined;
    self.connecttime = undefined;
    self.waitingtodeactivate = undefined;
    self.is_burning = undefined;
    self.is_electrified = undefined;
    self.stun_hit = undefined;
    self.targetname = undefined;
    self.script_noteworthy = undefined;
    self.script_linkname = undefined;
    self.script_linkto = undefined;
    self.target = undefined;
    self.mutations = undefined;

    foreach ( var_1 in level.characters )
    {
        if ( isdefined( var_1.attackers ) )
        {
            foreach ( var_4, var_3 in var_1.attackers )
            {
                if ( var_3 == self )
                    var_1.attackers[var_4] = undefined;
            }
        }
    }

    if ( isdefined( self.headmodel ) )
        self.headmodel = undefined;

    scripts\mp\mp_agent::deactivateagent();
    self notify( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
}

removefromparticipantsarray()
{
    var_0 = 0;

    for ( var_1 = 0; var_1 < level.participants.size; var_1++ )
    {
        if ( level.participants[var_1] == self )
        {
            for ( var_0 = 1; var_1 < level.participants.size - 1; var_1++ )
                level.participants[var_1] = level.participants[var_1 + 1];

            level.participants[var_1] = undefined;
            break;
        }
    }
}

removefromcharactersarray()
{
    var_0 = 0;

    for ( var_1 = 0; var_1 < level.characters.size; var_1++ )
    {
        if ( level.characters[var_1] == self )
        {
            for ( var_0 = 1; var_1 < level.characters.size - 1; var_1++ )
                level.characters[var_1] = level.characters[var_1 + 1];

            level.characters[var_1] = undefined;
            break;
        }
    }
}

handle_death_sounds( var_0, var_1, var_2 )
{
    if ( !scripts\engine\utility::isbulletdamage( var_2 ) )
        return;

    if ( isdefined( var_1.deathsound ) && soundexists( var_1.deathsound ) )
        playsoundatpos( var_1.origin, var_1.deathsound );

    var_3 = var_1;

    if ( var_2 == "_encstr_8F280E35E759A9A325A5D069CF8B87D3" )
    {
        var_3 playsoundtoplayer( "_encstr_A2691713430DC1B1F3779B8130CF3989B9FAA090EA6201082B", var_0 );
        var_3 playsoundtoteam( "_encstr_8AB01B98AE1B63ACA3FAB45B0EC21B8EBE86CA168CE6D0F61DBEE60E8D", var_0.team, var_0 );
    }
    else
    {
        var_3 playsoundtoplayer( "_encstr_A26C0EB50EFAD6B48DC6BE851BCA393A", var_0 );
        var_3 playsoundtoteam( "_encstr_871917DB7029B8432319C950820385493FF155BB0481301797", var_0.team, var_0 );
    }
}

process_damage_feedback( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12 )
{
    var_13 = isdefined( var_1 ) && isdefined( var_1.classname ) && isdefined( var_1.classname ) && !isdefined( var_1.gunner ) && ( var_1.classname == "_encstr_AB440F9BD8932D071DAFB3CA435A3663B2" || var_1.classname == "_encstr_88710C0763169AF7A3330A1229D8" || var_1.classname == "_encstr_93DC0DCD1B272D3847AF5BED23B2C6" );
    var_14 = undefined;

    if ( !isdefined( var_11 ) )
        var_11 = 0;

    if ( !isdefined( var_12 ) )
        var_12 = 0;

    if ( var_13 && isdefined( var_1.gunner ) )
        var_14 = var_1.gunner;
    else if ( isdefined( var_1 ) && isdefined( var_1.owner ) )
        var_14 = var_1.owner;
    else
        var_14 = var_1;

    var_15 = scripts\engine\utility::isbulletdamage( var_4 );
    var_16 = scripts\engine\utility::ter_op( var_15 && scripts\mp\utility\weapon::isprimaryweapon( var_5 ), "_encstr_9D950F23B958CDCBEF2B2A4373BE07C688", "_encstr_B1AE097698E198537660A4" );
    var_17 = 0;

    if ( isdefined( var_1 ) && isdefined( var_1.class ) && var_1.class == "_encstr_A2FF0908C2FFFBE0A75D06" )
    {
        if ( isdefined( var_4 ) && scripts\engine\utility::isbulletdamage( var_4 ) )
            var_17 = 1;
    }

    if ( isdefined( var_14 ) && var_14 != var_10 && var_2 + var_11 + var_12 > 0 && ( !isdefined( var_8 ) || var_8 != "_encstr_AF2D07F8E23CA3E0E3" ) )
    {
        var_18 = !isalive( var_10 ) || isagent( var_10 ) && var_2 >= var_10.health;

        if ( self.asm.archetype == "_encstr_8FE80EAB07B8C74755A3013AEBA093BA" )
            var_18 = !isalive( var_10 );

        if ( istrue( var_10.isjuggernaut ) )
            var_16 = "_encstr_BC1B0E53B87B92ABCFB4578A28EB6334";
        else if ( var_10 scripts\mp\heavyarmor::hasheavyarmor() || var_10 scripts\mp\heavyarmor::hasheavyarmorinvulnerability() )
            var_16 = "_encstr_B1D20EB02A6B0720F5C74549F5DEC8D3";
        else if ( var_3 & level.idflags_stun )
            var_16 = "_encstr_AD1905EA846DF8";
        else if ( scripts\mp\utility\damage::istacticaldamage( var_5, var_4 ) && var_10 _hasperk( "_encstr_AAC01A87A9F5722930B83378F6887CABD85F1B57572BBB0C6880EE47" ) )
            var_16 = "_encstr_8A760D43963AE8168D9356CD4BB93A";
        else if ( isexplosivedamagemod( var_4 ) && var_10 _hasperk( "_encstr_A2CF16DCE02BD896C2361DE5EB4CD816DCA39BA15A56B18C" ) && !scripts\mp\utility\damage::damage_should_ignore_blast_shield( var_1, var_10, var_5, var_4, var_0, var_8 ) )
            var_16 = "_encstr_AF450FE8D3C5A2F9477ADD8A18903529AF";
        else if ( scripts\mp\utility\damage::hashealthshield( var_10 ) )
            var_16 = "_encstr_9BCA0E50B76421EDD225CED9BCAA014B";
        else if ( scripts\mp\damage::armorvest_wasbroke( var_1 ) )
            var_16 = "_encstr_8C4E1362A80986137878BAAC0341038B4DE83A4A10";
        else if ( scripts\mp\damage::helmet_wasbroke( var_1 ) )
            var_16 = "_encstr_B25B145B2BCD7295884887CB4088DF2AA5554BE7A3FA";
        else if ( scripts\mp\damage::armorvest_washit( var_1 ) )
            var_16 = "_encstr_9BCA0E50B76421EDD225CED9BCAA014B";
        else if ( scripts\mp\damage::helmet_washit( var_1 ) )
            var_16 = "_encstr_A2FE0F60B23BF98183558D7D3CFF89A163";
        else if ( var_11 > 0 )
            var_16 = "_encstr_9BCA0E50B76421EDD225CED9BCAA014B";
        else if ( var_10 _hasperk( "_encstr_9EAA160357C1E73CA33813DBB9D974EF9BB0948C65E96384" ) && isdefined( var_10.inlaststand ) && var_10.inlaststand == 1 && !var_10.hasshownlaststandicon )
        {
            var_10.hasshownlaststandicon = 1;
            var_16 = "_encstr_BEF30D345AD13616E63A6E3A58B9C8";
        }

        if ( isdefined( var_10.playerforcespawn ) && var_10.playerforcespawn.size > 1 )
            var_16 = "_encstr_88B50EBEB0F80B8533206009E6AB4C8E";

        var_19 = "_encstr_B1AE097698E198537660A4";

        if ( var_16 == "_encstr_8C4E1362A80986137878BAAC0341038B4DE83A4A10" )
        {
            if ( var_19 == "_encstr_9D950F23B958CDCBEF2B2A4373BE07C688" )
                var_19 = "_encstr_8F94144AAD5B7AC4893823774083BDF2394F924598A5";
            else
                var_19 = "_encstr_B24B0E8FBB7A585019E209A10ACDD08E";
        }

        var_20 = weaponclass( var_5 );
        var_21 = var_20 == "_encstr_A91007F0AB1AC9A31A";
        var_22 = !var_21 && scripts\mp\utility\damage::isheadshot( var_8, var_4, var_1 );
        var_23 = 1;
        var_24 = var_4 == "_encstr_8AED0A5719ED37B8FB512FD7";
        var_25 = "_encstr_A40101" + gettime();

        if ( !var_24 && var_21 && isdefined( var_14.pelletdmg ) && isdefined( var_14.pelletdmg[var_25] ) && isdefined( var_14.pelletdmg[var_25][var_10.guid] ) && var_14.pelletdmg[var_25][var_10.guid] > 1 )
        {
            if ( var_18 )
                var_24 = 1;
            else
                var_23 = 0;
        }

        var_26 = undefined;

        if ( var_10.health <= var_2 )
            var_26 = 1;

        if ( self.asm.archetype == "_encstr_8FE80EAB07B8C74755A3013AEBA093BA" )
            var_26 = var_10.health <= 0;

        var_22 = scripts\mp\utility\damage::isheadshot( var_8, var_4, var_1 );

        if ( var_23 )
        {
            if ( isdefined( var_1 ) )
            {
                if ( isdefined( var_1.owner ) )
                    var_1.owner thread scripts\mp\damagefeedback::updatedamagefeedback( var_16, var_26, var_22, var_19 );
                else
                    var_1 thread scripts\mp\damagefeedback::updatedamagefeedback( var_16, var_26, var_22, var_19 );
            }
        }
    }
}

_hasperk( var_0 )
{
    var_1 = self.perks;

    if ( !isdefined( var_1 ) )
        return 0;

    if ( isdefined( var_1[var_0] ) )
        return 1;

    return 0;
}

_id_132EB( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12 )
{
    var_13 = var_12.basename;
    var_14 = 0;

    if ( isdefined( var_0 ) && ( issubstr( var_13, "_encstr_8A7609A386B2E4D6A5A356" ) || isdefined( var_12.magazine ) && issubstr( var_12.magazine, "_encstr_A47E091AC0F8A3F7BBF00A" ) || isdefined( var_0.weapon_name ) && issubstr( var_0.weapon_name, "_encstr_A3360B5AE68D5637195A0B93E5" ) ) )
    {
        var_14 = 1;
        var_15 = var_8 == "_encstr_AF2D07F8E23CA3E0E3";

        if ( var_15 )
        {
            var_16 = scripts\engine\trace::create_character_contents();
            var_17 = vectornormalize( var_7 );
            var_18 = var_6 - var_17 * 12;
            var_19 = var_6 + var_17 * 12;
            var_20 = scripts\engine\trace::ray_trace_detail( var_18, var_19, undefined, var_16 );

            if ( var_20["_encstr_B130095358E1B3930B687D"] > 0 && var_20["_encstr_B130095358E1B3930B687D"] < 1 )
            {
                var_21 = var_6 - self.origin;
                var_21 = ( var_21[0], var_21[1], 0 );

                if ( vectordot( var_21, var_20["_encstr_930E073E8FC00DDF69"] ) < 0 )
                    var_15 = 0;
            }
            else
                var_15 = 0;
        }

        if ( var_15 )
        {
            var_22 = var_0 getlinkedparent();

            if ( isdefined( var_22 ) && var_22 == self )
            {
                self.clearspaceforscriptableinstance = 1;
                self._id_13B2A = 0;
            }
        }
        else if ( var_8 != "_encstr_AABA05236DC831" )
        {
            self.clearspaceforscriptableinstance = undefined;
            self._id_13B2A = undefined;
        }
    }

    if ( var_8 == "_encstr_AF2D07F8E23CA3E0E3" )
    {
        if ( var_14 )
            return 1;
    }
    else if ( var_8 == "_encstr_AABA05236DC831" && isdefined( var_0 ) )
    {
        var_23 = var_0 getlinkedparent();

        if ( istrue( self.clearspaceforscriptableinstance ) && var_14 && isdefined( var_23 ) && var_23 == self )
        {
            if ( !isdefined( self._id_13B2C ) )
                self._id_13B2C = [ var_0 ];
            else if ( !scripts\engine\utility::array_contains( self._id_13B2C, var_0 ) )
                self._id_13B2C[self._id_13B2C.size] = var_0;

            self._id_13B2A++;
            return 1;
        }
        else if ( issubstr( var_13, "_encstr_8ACB0862588107A3B825" ) )
        {
            var_24 = var_0.origin - self.origin;
            var_25 = vectornormalize( ( var_24[0], var_24[1], 0 ) );
            var_24 = vectornormalize( var_24 );

            if ( vectordot( anglestoforward( self.angles ), var_25 ) > 0.5 && -0.98 < var_24[2] && var_24[2] < 0.98 )
                return 1;
        }
    }

    if ( var_4 == "_encstr_8AED0A5719ED37B8FB512FD7" )
    {
        if ( isdefined( var_1 ) )
            var_26 = vectornormalize( var_1.origin - self.origin );
        else
            var_26 = vectornormalize( var_6 - self.origin );

        var_27 = anglestoforward( self.angles );

        if ( vectordot( var_27, var_26 ) > 0.5 )
            return 1;
    }

    return 0;
}
