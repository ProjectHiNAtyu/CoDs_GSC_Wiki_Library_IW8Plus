// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level.persistentdatainfo = [];
    level thread updatebufferedstats();
    level thread _id_13FC7();
    level thread uploadglobalstatcounters();
    level thread writekdhistorystats();
}

initbufferedstats()
{
    self.bufferedstats = [];
    self.squadmemberbufferedstats = [];
    self.bufferedchildstats = [];
    self.bufferedchildstats["_encstr_A2460627DEABDC23"] = [];
    self.bufferedchildstats["_encstr_A2460627DEABDC23"]["_encstr_801A0BD15ADA560A63B09795C8"] = self getplayerdata( "_encstr_9F7C076CF6B5D6F6E6", "_encstr_A2460627DEABDC23", "_encstr_801A0BD15ADA560A63B09795C8" );

    if ( scripts\mp\utility\game::onlinestatsenabled() )
    {
        self.bufferedstats["_encstr_882C0B7B2D8CF0C931ABCFF1EF"] = self getplayerdata( "_encstr_A20703C962", "_encstr_882C0B7B2D8CF0C931ABCFF1EF" );
        self.bufferedstats["_encstr_93DD09851B36AE3916B15E"] = self getplayerdata( "_encstr_A20703C962", "_encstr_93DD09851B36AE3916B15E" );
        self.bufferedstats["_encstr_BADA076094A34865EB"] = self getplayerdata( "_encstr_A20703C962", "_encstr_BADA076094A34865EB" );
        self.bufferedstats["_encstr_80CC058CB830E3"] = self getplayerdata( "_encstr_A20703C962", "_encstr_80CC058CB830E3" );
        self.bufferedchildstats["_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91"] = [];
        self.bufferedchildstats["_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91", 0 );
        self.bufferedchildstats["_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91"][1] = self getplayerdata( "_encstr_A20703C962", "_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91", 1 );
        self.bufferedchildstats["_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91"][2] = self getplayerdata( "_encstr_A20703C962", "_encstr_8227170FE0A6D5633AD21C1BB4B2C9152D5B560AD8B0BCCA91", 2 );
        self.bufferedchildstatsmax["_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46"] = [];
        self.bufferedchildstatsmax["_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46", 0 );
        self.bufferedchildstatsmax["_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46"][1] = self getplayerdata( "_encstr_A20703C962", "_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46", 1 );
        self.bufferedchildstatsmax["_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46"][2] = self getplayerdata( "_encstr_A20703C962", "_encstr_8AD11AC383A95887D45DB18E4BC1C6A5CA39A25AB5AC823616972B46", 2 );
        self.bufferedchildstats["_encstr_BA1420C686C263C695373BB2851435D5B1A34B0EC6A52BE451A56B59826385CB2B23"] = [];
        self.bufferedchildstats["_encstr_BA1420C686C263C695373BB2851435D5B1A34B0EC6A52BE451A56B59826385CB2B23"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_BA1420C686C263C695373BB2851435D5B1A34B0EC6A52BE451A56B59826385CB2B23", 0 );
        self.bufferedchildstatsmax["_encstr_B1D323D13A3F81D0F7C66F53C89211DF8380EBB863B7C7888CA54D391105680FBBFAE201CA"] = [];
        self.bufferedchildstatsmax["_encstr_B1D323D13A3F81D0F7C66F53C89211DF8380EBB863B7C7888CA54D391105680FBBFAE201CA"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_B1D323D13A3F81D0F7C66F53C89211DF8380EBB863B7C7888CA54D391105680FBBFAE201CA", 0 );
        self.bufferedchildstats["_encstr_8FA71DCB7F49A898D25BE1D3879A5D38F095B0012284A8415A63E1938FD2AD"] = [];
        self.bufferedchildstats["_encstr_8FA71DCB7F49A898D25BE1D3879A5D38F095B0012284A8415A63E1938FD2AD"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_8FA71DCB7F49A898D25BE1D3879A5D38F095B0012284A8415A63E1938FD2AD", 0 );
        self.bufferedchildstatsmax["_encstr_A9FC20F792A3C1F8C2E0D7D9A28895BFB1E32BE8F860B71B13886B91BFEB43F09D55"] = [];
        self.bufferedchildstatsmax["_encstr_A9FC20F792A3C1F8C2E0D7D9A28895BFB1E32BE8F860B71B13886B91BFEB43F09D55"][0] = self getplayerdata( "_encstr_A20703C962", "_encstr_A9FC20F792A3C1F8C2E0D7D9A28895BFB1E32BE8F860B71B13886B91BFEB43F09D55", 0 );
        self.bufferedstats["_encstr_9F0717531BE5974328A7153C5F200E131D579ACAE348AB30B8"] = self getplayerdata( "_encstr_A20703C962", "_encstr_9F0717531BE5974328A7153C5F200E131D579ACAE348AB30B8" );
        self.bufferedstats["_encstr_A6C921AFEA0FF349FCDA989932931D686757BDAF40FF98D962D1E0A88AE2C901AF0DB5"] = self getplayerdata( "_encstr_A20703C962", "_encstr_A6C921AFEA0FF349FCDA989932931D686757BDAF40FF98D962D1E0A88AE2C901AF0DB5" );
        self.bufferedstatsmax["_encstr_8FA0241B4DD5AB388BB747A72AF5AE446D89A0881BF0D3933F09D9A1211F79C9AA14D10B624F"] = self getplayerdata( "_encstr_A20703C962", "_encstr_8FA0241B4DD5AB388BB747A72AF5AE446D89A0881BF0D3933F09D9A1211F79C9AA14D10B624F" );
        initbestscorestatstable();
    }
}

initbestscorestatstable()
{
    var_0 = "_encstr_8CA71BE94FDA53A1FA7C77F93F0E356EBB27314A4BB95965352553CBC3";
    self.bestscorestats = [];
    self.bufferedbestscorestats = [];
    var_1 = 0;

    for (;;)
    {
        var_2 = tablelookupbyrow( var_0, var_1, 0 );

        if ( var_2 == "_encstr_A40101" )
            break;

        self.bestscorestats[var_2] = self getplayerdata( "_encstr_A20703C962", "_encstr_B37C0BC29A17ABD7F9A773AFD6", var_2 );
        var_1++;
    }
}

statgetchild( var_0, var_1 )
{
    if ( var_0 == "_encstr_A2460627DEABDC23" )
        return self getplayerdata( "_encstr_9F7C076CF6B5D6F6E6", var_0, var_1 );
    else
        return self getplayerdata( "_encstr_A20703C962", var_0, var_1 );
}

statsetchild( var_0, var_1, var_2, var_3 )
{
    if ( isagent( self ) )
        return;

    if ( istrue( game["_encstr_A4A90E389CC28D1DA5C6AC49B75D9B32"] ) )
        return;

    if ( isdefined( var_3 ) || !scripts\mp\utility\game::onlinestatsenabled() )
        return;

    if ( var_0 == "_encstr_A2460627DEABDC23" )
    {
        self setplayerdata( "_encstr_9F7C076CF6B5D6F6E6", var_0, var_1, var_2 );
        setbestscore( var_1, var_2 );
    }
    else
        self setplayerdata( "_encstr_A20703C962", var_0, var_1, var_2 );
}

stataddchild( var_0, var_1, var_2 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() )
        return;

    var_3 = self getplayerdata( "_encstr_A20703C962", var_0, var_1 );
    self setplayerdata( "_encstr_A20703C962", var_0, var_1, var_3 + var_2 );
}

statgetchildbuffered( var_0, var_1, var_2 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() && !istrue( var_2 ) )
        return 0;

    return self.bufferedchildstats[var_0][var_1];
}

statsetchildbuffered( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() && !istrue( var_3 ) )
        return;

    self.bufferedchildstats[var_0][var_1] = var_2;
}

stataddchildbuffered( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() && !istrue( var_3 ) )
        return;

    var_4 = statgetchildbuffered( var_0, var_1, var_3 );
    statsetchildbuffered( var_0, var_1, var_4 + var_2, var_3 );
}

stataddchildbufferedwithmax( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() )
        return;

    var_4 = statgetchildbuffered( var_0, var_1 ) + var_2;

    if ( var_4 > var_3 )
        var_4 = var_3;

    if ( var_4 < statgetchildbuffered( var_0, var_1 ) )
        var_4 = var_3;

    statsetchildbuffered( var_0, var_1, var_4 );
}

updatebufferedstats()
{
    wait 0.15;
    var_0 = 0;

    while ( !level.gameended )
    {
        scripts\mp\hostmigration::waittillhostmigrationdone();
        var_0++;

        if ( var_0 >= level.players.size )
            var_0 = 0;

        if ( isdefined( level.players[var_0] ) )
        {
            level.players[var_0] writebufferedstats();
            level.players[var_0] updateweaponbufferedstats();
        }

        wait 2.0;
    }
}

_id_13FC7()
{
    level endon( "_encstr_8B3F0DFF273807594FE02A62188B4A" );
    level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    foreach ( var_1 in level.players )
    {
        var_1 writebufferedstats();
        var_1 updateweaponbufferedstats();
    }

    level.disableweaponstats = 1;
}

setbestscore( var_0, var_1 )
{
    var_2 = scripts\mp\utility\game::onlinestatsenabled();

    if ( !var_2 )
        return;

    if ( isdefined( self.bestscorestats[var_0] ) && var_1 > self.bestscorestats[var_0] )
    {
        self.bestscorestats[var_0] = var_1;
        self.bufferedbestscorestats[var_0] = var_1;
    }
}

writebestscores()
{
    foreach ( var_1 in level.players )
    {
        if ( isdefined( var_1 ) && var_1 scripts\mp\utility\game::onlinestatsenabled() )
        {
            foreach ( var_4, var_3 in var_1.bufferedbestscorestats )
                var_1 setplayerdata( "_encstr_A20703C962", "_encstr_B37C0BC29A17ABD7F9A773AFD6", var_4, var_3 );
        }
    }
}

writebufferedstats()
{
    var_0 = scripts\mp\utility\game::onlinestatsenabled();

    if ( var_0 )
    {
        foreach ( var_3, var_2 in self.bufferedstats )
            self setplayerdata( "_encstr_A20703C962", var_3, var_2 );

        if ( !isai( self ) )
        {
            foreach ( var_3, var_2 in self.squadmemberbufferedstats )
                self setplayerdata( level.loadoutsgroup, "_encstr_9BE80D401A8D9849BD7562D5552BD8", var_3, var_2 );
        }
    }

    foreach ( var_3, var_2 in self.bufferedchildstats )
    {
        foreach ( var_8, var_7 in var_2 )
        {
            if ( var_3 == "_encstr_A2460627DEABDC23" )
            {
                self setplayerdata( "_encstr_9F7C076CF6B5D6F6E6", var_3, var_8, var_7 );
                setbestscore( var_8, var_7 );
                continue;
            }

            if ( var_0 )
                self setplayerdata( "_encstr_A20703C962", var_3, var_8, var_7 );
        }
    }
}

writekdhistorystats()
{
    if ( !scripts\mp\utility\game::matchmakinggame() )
        return;

    level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    wait 0.1;

    if ( scripts\mp\utility\game::waslastround() || !scripts\mp\utility\game::isroundbased() && scripts\mp\utility\game::hittimelimit() )
    {
        foreach ( var_1 in level.players )
        {
            var_2 = 0;

            if ( isdefined( var_1.pers["_encstr_97AB0BB614FAE16B465F60C073"] ) && var_1.pers["_encstr_97AB0BB614FAE16B465F60C073"] > 0 )
            {
                var_3 = var_1.pers["_encstr_97AB0BB614FAE16B465F60C073"];
                var_4 = 0;

                if ( isdefined( var_1.pers["_encstr_936D0957D870D493391BAB"] ) )
                    var_4 = var_1.pers["_encstr_936D0957D870D493391BAB"];

                var_2 = int( 100 * ( var_4 / var_3 ) );
            }

            var_1 incrementrankedreservedhistory( var_1.kills, var_1.deaths, var_1.pers["_encstr_B4D30A88DFE9A8361227494F"], var_2, var_1.pers["_encstr_B8BE07320B5B16ECAC"] );
        }
    }
}

incrementrankedreservedhistory( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() )
        return;

    for ( var_5 = 0; var_5 < 4; var_5++ )
    {
        var_6 = self getplayerdata( "_encstr_A20703C962", "_encstr_B2F60B0239931F626017A2A177", var_5 + 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_B2F60B0239931F626017A2A177", var_5, var_6 );
        var_6 = self getplayerdata( "_encstr_A20703C962", "_encstr_AFF60B5B3284B4CD477B93E544", var_5 + 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_AFF60B5B3284B4CD477B93E544", var_5, var_6 );
        var_6 = self getplayerdata( "_encstr_A20703C962", "_encstr_9FBA105802D77DD05C2FD1A141C2B0B0337B", var_5 + 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_9FBA105802D77DD05C2FD1A141C2B0B0337B", var_5, var_6 );
        var_6 = self getplayerdata( "_encstr_A20703C962", "_encstr_BA2C10DA808633C89159E31BAB33CBA7D3B3", var_5 + 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_BA2C10DA808633C89159E31BAB33CBA7D3B3", var_5, var_6 );
        var_6 = self getplayerdata( "_encstr_A20703C962", "_encstr_8C120E431379DAAFE8B4EC722BE0E213", var_5 + 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_8C120E431379DAAFE8B4EC722BE0E213", var_5, var_6 );
    }

    self setplayerdata( "_encstr_A20703C962", "_encstr_B2F60B0239931F626017A2A177", 4, int( clamp( var_0, 0, 255 ) ) );
    self setplayerdata( "_encstr_A20703C962", "_encstr_AFF60B5B3284B4CD477B93E544", 4, int( clamp( var_1, 0, 255 ) ) );
    self setplayerdata( "_encstr_A20703C962", "_encstr_9FBA105802D77DD05C2FD1A141C2B0B0337B", 4, int( clamp( var_2, 0, 255 ) ) );
    self setplayerdata( "_encstr_A20703C962", "_encstr_BA2C10DA808633C89159E31BAB33CBA7D3B3", 4, int( var_3 ) );
    self setplayerdata( "_encstr_A20703C962", "_encstr_8C120E431379DAAFE8B4EC722BE0E213", 4, var_4 );
}

incrementweaponstat( var_0, var_1, var_2 )
{
    if ( scripts\mp\utility\weapon::iskillstreakweapon( var_0 ) )
        return;

    if ( istrue( level.disableweaponstats ) )
        return;

    if ( scripts\mp\utility\game::onlinestatsenabled() )
    {
        var_3 = self getplayerdata( "_encstr_A20703C962", "_encstr_9BA20C8A189F5A9F3EBF93A7CBB8", "_encstr_8AA90CDD952CE0DB739A1D0B47DC", var_0, var_1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_9BA20C8A189F5A9F3EBF93A7CBB8", "_encstr_8AA90CDD952CE0DB739A1D0B47DC", var_0, var_1, var_3 + var_2 );
    }
}

incrementattachmentstat( var_0, var_1, var_2, var_3 )
{
    if ( istrue( level.disableweaponstats ) )
        return;

    if ( !scripts\mp\utility\weapon::attachmentlogsstats( var_0, var_3 ) )
        return;

    if ( scripts\mp\utility\game::onlinestatsenabled() )
    {
        var_4 = self getplayerdata( "_encstr_A20703C962", "_encstr_9BA20C8A189F5A9F3EBF93A7CBB8", "_encstr_BCD211CB7C1B084E5B2241289B1F6E18F6D477", var_0, var_1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_9BA20C8A189F5A9F3EBF93A7CBB8", "_encstr_BCD211CB7C1B084E5B2241289B1F6E18F6D477", var_0, var_1, var_4 + var_2 );
    }
}

updateweaponbufferedstats( var_0 )
{
    if ( !isdefined( self.trackingweapon ) )
        return;

    if ( nullweapon( self.trackingweapon ) )
        return;

    if ( scripts\mp\utility\weapon::issuperweapon( self.trackingweapon ) )
    {
        if ( !istrue( scripts\mp\supers::shouldtracksuperweaponstats( self.trackingweapon ) ) )
            return;
    }

    if ( scripts\mp\utility\weapon::iskillstreakweapon( self.trackingweapon ) || scripts\mp\utility\weapon::isenvironmentweapon( self.trackingweapon ) || scripts\mp\utility\weapon::isbombsiteweapon( self.trackingweapon ) )
        return;

    var_1 = self.trackingweapon;
    var_2 = undefined;

    if ( var_1.isalternate )
    {
        var_3 = scripts\mp\utility\weapon::attachmentmap_tobase( var_1.underbarrel );

        if ( var_3 == "_encstr_A85B083786B7E8ECAEB9" || var_3 == "_encstr_89070358A2" || var_3 == "_encstr_877608807A621B2867B5" || var_3 == "_encstr_88D506545542FFDB" || var_3 == "_encstr_A3BD07C10B0F7F5556" || var_3 == "_encstr_8F3708CA308C739E5001" || var_3 == "_encstr_A6E00D2C2837F69E396E8009D35059" || var_3 == "_encstr_9B8B09FA614ECB20C93119" || var_3 == "_encstr_813507FFA8B84E0A2F" )
        {
            var_2 = var_3;
            perslog_attachmentstats( var_2, var_1 );
            persclear_stats();
            return;
        }
    }

    if ( !isdefined( var_2 ) )
    {
        var_4 = var_1.basename;

        if ( getsubstr( var_4, 0, 4 ) == "_encstr_82C50518EB38C1" || getsubstr( var_4, 0, 3 ) == "_encstr_B219046E68FA" )
            var_2 = scripts\mp\utility\weapon::getweaponrootname( var_1 );
    }

    if ( !scripts\mp\utility\weapon::iscacprimaryweapon( var_2 ) && !scripts\mp\utility\weapon::iscacsecondaryweapon( var_2 ) )
        return;

    var_5 = getweaponvariantindex( var_1 );
    persincrement_weaponstats( var_2, var_5 );

    if ( !isdefined( level.get_audio_approved_length_extender_for_non_english_vo ) )
        level.get_audio_approved_length_extender_for_non_english_vo = scripts\mp\utility\game::getgametype() == "_encstr_9507034B25" && getdvarint( "_encstr_80ED2173F35E1923AD316B835E5234780205A4E963D8070BC06B633F03917293B0B4D3", 1 ) == 1;

    if ( !scripts\mp\utility\weapon::ispickedupweapon( var_1 ) || istrue( level.get_audio_approved_length_extender_for_non_english_vo ) )
        perslog_weaponstats( var_2, var_5, var_0 );

    var_6 = getweaponattachments( var_1 );

    foreach ( var_3 in var_6 )
    {
        var_8 = scripts\mp\utility\weapon::attachmentmap_tobase( var_3 );

        if ( !scripts\mp\utility\weapon::attachmentlogsstats( var_8, var_1 ) )
            continue;

        switch ( var_8 )
        {
            case "_encstr_A85B083786B7E8ECAEB9":
            case "_encstr_813507FFA8B84E0A2F":
            case "_encstr_9B8B09FA614ECB20C93119":
            case "_encstr_A6E00D2C2837F69E396E8009D35059":
            case "_encstr_8F3708CA308C739E5001":
            case "_encstr_A3BD07C10B0F7F5556":
            case "_encstr_88D506545542FFDB":
            case "_encstr_877608807A621B2867B5":
            case "_encstr_89070358A2":
                continue;
        }

        perslog_attachmentstats( var_8, var_1 );
    }

    persclear_stats();
}

persclear_stats()
{
    self.trackingweapon = isundefinedweapon();
    self.trackingweaponshots = 0;
    self.trackingweaponkills = 0;
    self.trackingweaponhits = 0;
    self.trackingweaponheadshots = 0;
    self.trackingweapondeaths = 0;
}

persincrement_weaponstats( var_0, var_1 )
{
    if ( self.trackingweaponshots > 0 )
        incrementweaponstat( var_0, "_encstr_804806A3D04F9347", self.trackingweaponshots );

    if ( self.trackingweaponkills > 0 )
        incrementweaponstat( var_0, "_encstr_BA8D06E75935489E", self.trackingweaponkills );

    if ( self.trackingweaponhits > 0 )
        incrementweaponstat( var_0, "_encstr_80CC058CB830E3", self.trackingweaponhits );

    if ( self.trackingweaponheadshots > 0 )
        incrementweaponstat( var_0, "_encstr_B4D30A88DFE9A8261227494F", self.trackingweaponheadshots );

    if ( self.trackingweapondeaths > 0 )
        incrementweaponstat( var_0, "_encstr_BA0607842BE8FB4B56", self.trackingweapondeaths );
}

perslog_weaponstats( var_0, var_1, var_2 )
{
    if ( self.trackingweaponshots > 0 )
        scripts\common\utility::_id_13E0A( level._id_11B31, var_0, "_encstr_804806A3D04F9347", self.trackingweaponshots, var_1, var_2 );

    if ( self.trackingweaponkills > 0 )
        scripts\common\utility::_id_13E0A( level._id_11B31, var_0, "_encstr_BA8D06E75935489E", self.trackingweaponkills, var_1, var_2 );

    if ( self.trackingweaponhits > 0 )
        scripts\common\utility::_id_13E0A( level._id_11B31, var_0, "_encstr_80CC058CB830E3", self.trackingweaponhits, var_1, var_2 );

    if ( self.trackingweaponheadshots > 0 )
        scripts\common\utility::_id_13E0A( level._id_11B31, var_0, "_encstr_B4D30A88DFE9A8361227494F", self.trackingweaponheadshots, var_1, var_2 );

    if ( self.trackingweapondeaths > 0 )
        scripts\common\utility::_id_13E0A( level._id_11B31, var_0, "_encstr_BA0607842BE8FB4B56", self.trackingweapondeaths, var_1, var_2 );
}

perslog_attachmentstats( var_0, var_1 )
{
    if ( !scripts\mp\utility\weapon::attachmentlogsstats( var_0, var_1 ) )
        return;

    if ( self.trackingweaponshots > 0 && var_0 != "_encstr_94C2099887BA24607BE134" )
    {
        incrementattachmentstat( var_0, "_encstr_804806A3D04F9347", self.trackingweaponshots, var_1 );
        scripts\common\utility::_id_13E0A( level._id_11B25, var_0, "_encstr_804806A3D04F9347", self.trackingweaponshots, var_1 );
    }

    if ( self.trackingweaponkills > 0 && var_0 != "_encstr_94C2099887BA24607BE134" )
    {
        incrementattachmentstat( var_0, "_encstr_BA8D06E75935489E", self.trackingweaponkills, var_1 );
        scripts\common\utility::_id_13E0A( level._id_11B25, var_0, "_encstr_BA8D06E75935489E", self.trackingweaponkills, var_1 );
    }

    if ( self.trackingweaponhits > 0 && var_0 != "_encstr_94C2099887BA24607BE134" )
    {
        incrementattachmentstat( var_0, "_encstr_80CC058CB830E3", self.trackingweaponhits, var_1 );
        scripts\common\utility::_id_13E0A( level._id_11B25, var_0, "_encstr_80CC058CB830E3", self.trackingweaponhits, var_1 );
    }

    if ( self.trackingweaponheadshots > 0 && var_0 != "_encstr_94C2099887BA24607BE134" )
    {
        incrementattachmentstat( var_0, "_encstr_B4D30A88DFE9A8261227494F", self.trackingweaponheadshots, var_1 );
        scripts\common\utility::_id_13E0A( level._id_11B25, var_0, "_encstr_B4D30A88DFE9A8261227494F", self.trackingweaponheadshots, var_1 );
    }

    if ( self.trackingweapondeaths > 0 )
    {
        incrementattachmentstat( var_0, "_encstr_BA0607842BE8FB4B56", self.trackingweapondeaths, var_1 );
        scripts\common\utility::_id_13E0A( level._id_11B25, var_0, "_encstr_BA0607842BE8FB4B56", self.trackingweapondeaths, var_1 );
    }
}

uploadglobalstatcounters()
{
    level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );

    if ( !scripts\mp\utility\game::matchmakinggame() )
        return;

    var_0 = 0;
    var_1 = 0;
    var_2 = 0;
    var_3 = 0;
    var_4 = 0;
    var_5 = 0;

    foreach ( var_7 in level.players )
        var_5 = var_5 + var_7.timeplayed["_encstr_BE7D068EF6D10B1B"];

    getentitylessscriptablearray( "_encstr_875C1A5419C0B7F1EBA842EAA047375338F6D9C43828D7C5A3904A33", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", int( var_5 / 60 ) ] );

    if ( scripts\mp\utility\game::isroundbased() && !scripts\mp\utility\game::waslastround() )
        return;

    waitframe();

    foreach ( var_7 in level.players )
    {
        var_0 = var_0 + var_7.kills;
        var_1 = var_1 + var_7.deaths;
        var_2 = var_2 + var_7.assists;
        var_3 = var_3 + var_7 scripts\mp\utility\stats::getpersstat( "_encstr_B4D30A88DFE9A8361227494F" );
        var_4 = var_4 + var_7 scripts\mp\utility\stats::getpersstat( "_encstr_A88209D66B171F296551FB" );
    }

    getentitylessscriptablearray( "_encstr_8A3618DFF117BA8F7968775350166FD2FF1E6655F0A712F42058", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", var_0 ] );
    getentitylessscriptablearray( "_encstr_BCDE19111BF0DF61A904887EEBA6F275DA32F1211701CFE15B7896", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", var_1 ] );
    getentitylessscriptablearray( "_encstr_9CB41C619BEFF7BF253B299503E9E10107C3415018B0B8EEEA6F309F5D78", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", var_3 ] );
    getentitylessscriptablearray( "_encstr_BAB71BC836EDCEEBAC3B95CD47BED91BF6980B367DB9AB2D6C5A19CAB9", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", var_4 ] );
    getentitylessscriptablearray( "_encstr_93E3188C1BB7B3F52BCEAC73A3AF9DB1B7C4C2B1F5CE0B6B56B9", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", 1 ] );

    if ( !isdefined( level.assists_disabled ) )
        getentitylessscriptablearray( "_encstr_8BEA1A46C6DECEBE2B9DB2E68ED776C6ED13858DEB85DC6E2DB91DB9", [ "_encstr_ABEB0ADBF55A8DC90DCF20E8", var_2 ] );
}

touchedmovingplatform()
{
    if ( !scripts\mp\utility\game::onlinestatsenabled() )
        return;

    for ( var_0 = 4; var_0 > 0; var_0-- )
    {
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_A38611A3871AE0D031C589866CE910AD527B33", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_A38611A3871AE0D031C589866CE910AD527B33", var_0, var_1 );
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_9B271575465187EA23989229D80F64CFA823FB0CD01BA7", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_9B271575465187EA23989229D80F64CFA823FB0CD01BA7", var_0, var_1 );
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_8A1217CDAA22CF6301DB60A9DF2E99F38BD9CB5B028B67EBE9", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_8A1217CDAA22CF6301DB60A9DF2E99F38BD9CB5B028B67EBE9", var_0, var_1 );
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_AD47158D33FFC0C2AD9301DAD6171AD0F46BA79B186390", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_AD47158D33FFC0C2AD9301DAD6171AD0F46BA79B186390", var_0, var_1 );
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_9F4013EA6ECAFA93ACB396B3ACEBD02DB98EB7932F", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_9F4013EA6ECAFA93ACB396B3ACEBD02DB98EB7932F", var_0, var_1 );
        var_1 = self getplayerdata( "_encstr_A20703C962", "_encstr_AB831BBA9B2BD7E2AECADCD1EBC6EDDAC1B1AC1D59EB1A5ACD47F693E5", var_0 - 1 );
        self setplayerdata( "_encstr_A20703C962", "_encstr_AB831BBA9B2BD7E2AECADCD1EBC6EDDAC1B1AC1D59EB1A5ACD47F693E5", var_0, var_1 );
    }

    self setplayerdata( "_encstr_A20703C962", "_encstr_A38611A3871AE0D031C589866CE910AD527B33", 0, 0 );
    self setplayerdata( "_encstr_A20703C962", "_encstr_9B271575465187EA23989229D80F64CFA823FB0CD01BA7", 0, 0 );
    self setplayerdata( "_encstr_A20703C962", "_encstr_8A1217CDAA22CF6301DB60A9DF2E99F38BD9CB5B028B67EBE9", 0, 0 );
    self setplayerdata( "_encstr_A20703C962", "_encstr_AD47158D33FFC0C2AD9301DAD6171AD0F46BA79B186390", 0, 0 );
    self setplayerdata( "_encstr_A20703C962", "_encstr_9F4013EA6ECAFA93ACB396B3ACEBD02DB98EB7932F", 0, 0 );
    self setplayerdata( "_encstr_A20703C962", "_encstr_AB831BBA9B2BD7E2AECADCD1EBC6EDDAC1B1AC1D59EB1A5ACD47F693E5", 0, 0 );
}
