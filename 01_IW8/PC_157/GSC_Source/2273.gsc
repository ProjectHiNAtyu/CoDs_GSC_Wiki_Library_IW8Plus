// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

vehicle_occupancy_getleveldataforvehicle( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldata();
    var_3 = var_2.vehicledata[var_0];

    if ( !isdefined( var_3 ) )
    {
        if ( isdefined( var_1 ) )
        {
            var_3 = spawnstruct();
            var_2.vehicledata[var_0] = var_3;
            var_3.seatdata = [];
            var_3.enterstartcallback = undefined;
            var_3.enterendcallback = undefined;
            var_3.exitstartcallback = undefined;
            var_3.exitendcallback = undefined;
            var_3.reentercallback = undefined;
            var_3._id_11D02 = undefined;
            var_3.restrictions = [];
            var_3.damagemodifier = -1;
            var_3.hideoccupant = undefined;
            var_3.camera = "_encstr_AABA05236DC831";
            var_3.threatbiasgroup = "_encstr_BE230E855D3B187159B74DB9BB1B4481";
            var_3.exitextents = [];
            var_3.exitextents["_encstr_875606482B58E505"] = undefined;
            var_3.exitextents["_encstr_959B05982C8DDA"] = undefined;
            var_3.exitextents["_encstr_B1AD05C65666E8"] = undefined;
            var_3.exitextents["_encstr_9353062E718710C9"] = undefined;
            var_3.exitextents["_encstr_B91904EC4718"] = undefined;
            var_3.exitextents["_encstr_A94607EE8F336B37B5"] = undefined;
            var_3.exitoffsets = [];
            var_3.exitdirections = [];
            var_3.exittopcastoffset = undefined;
            var_3.damagefeedbackgrouplight = "_encstr_BCE307116330CEEF4B";
            var_3.damagefeedbackgroupheavy = "_encstr_A61904730372";
        }
    }

    return var_3;
}

vehicle_occupancy_getleveldataforseat( var_0, var_1, var_2 )
{
    var_3 = vehicle_occupancy_getleveldataforvehicle( var_0, var_2 );
    var_4 = var_3.seatdata[var_1];

    if ( !isdefined( var_4 ) )
    {
        if ( istrue( var_2 ) )
        {
            var_4 = spawnstruct();
            var_3.seatdata[var_1] = var_4;
            var_4.vehicledata = var_3;
            var_4.seatswitcharray = [];
            var_4.exitids = [];
            var_4.spawnpriority = undefined;
            var_4.viewclamps = [];
            var_4.viewclamps["_encstr_B91904EC4718"] = undefined;
            var_4.viewclamps["_encstr_A94607EE8F336B37B5"] = undefined;
            var_4.viewclamps["_encstr_B1AD05C65666E8"] = undefined;
            var_4.viewclamps["_encstr_9353062E718710C9"] = undefined;
            var_4.hideheldweapon = undefined;
            var_4.hidestowedweapon = undefined;
            var_4._id_13345 = undefined;
            var_4._id_13E8A = undefined;
            var_4._id_13E8B = undefined;
            var_4._id_13E92 = undefined;
        }
    }

    return var_4;
}

vehicle_occupancy_registerinstance( var_0 )
{
    var_0.occupants = [];
    var_0.occupantsreserving = [];
    var_0.isempty = 1;

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_BA6011272BCEA59B8ECAC9A4DCB93AB037362B" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_BA6011272BCEA59B8ECAC9A4DCB93AB037362B" ) ]]( var_0 );
}

vehicle_occupancy_deregisterinstance( var_0 )
{
    var_0.occupants = undefined;
    var_0.occupantsreserving = undefined;
    var_0.isempty = undefined;
    var_0._id_1287D = undefined;
    var_0.brking_rankupdate = undefined;

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_8F201367E235A1C9C22344B360E97D6BD31A6852EF" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_8F201367E235A1C9C22344B360E97D6BD31A6852EF" ) ]]( var_0 );
}

_id_141DE( var_0 )
{
    return isdefined( var_0.occupants );
}

vehicle_occupancy_getallvehicleseats( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        var_1 = 1;

    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( isdefined( var_2 ) )
        return getarraykeys( var_2.seatdata );
    else
        return [];
}

vehicle_occupancy_getavailablevehicleseats( var_0, var_1, var_2 )
{
    var_3 = [];
    var_4 = vehicle_occupancy_getallvehicleseats( var_0 );

    foreach ( var_6 in var_4 )
    {
        if ( !vehicle_occupancy_seatisavailable( var_0, var_6 ) )
            continue;

        var_3[var_3.size] = var_6;
    }

    if ( istrue( var_1 ) )
    {
        if ( var_3.size > 0 )
        {
            var_8 = [];

            foreach ( var_6 in var_3 )
            {
                var_10 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_6 );
                var_11 = var_10.spawnpriority;

                if ( !isdefined( var_11 ) )
                    var_11 = 0;
                else
                    var_11 = int( max( 0, var_11 ) );

                var_8[var_6] = var_11;
            }

            if ( istrue( var_2 ) )
            {
                for ( var_13 = 0; var_13 < var_3.size - 1; var_13++ )
                {
                    var_14 = var_13;

                    for ( var_15 = var_13 + 1; var_15 < var_3.size; var_15++ )
                    {
                        if ( var_8[var_3[var_15]] > var_8[var_3[var_14]] )
                            var_14 = var_15;
                    }

                    if ( var_14 != var_13 )
                    {
                        var_16 = var_3[var_13];
                        var_3[var_13] = var_3[var_14];
                        var_3[var_14] = var_16;
                    }
                }
            }
            else
            {
                for ( var_13 = 0; var_13 < var_3.size - 1; var_13++ )
                {
                    var_17 = var_3[var_13];

                    for ( var_15 = var_13 + 1; var_15 < var_3.size; var_15++ )
                    {
                        var_18 = var_3[var_15];

                        if ( var_8[var_18] > var_8[var_17] )
                        {
                            var_16 = var_17;
                            var_3[var_13] = var_18;
                            var_3[var_15] = var_16;
                        }
                    }
                }
            }
        }
    }

    return var_3;
}

vehicle_occupancy_seatisavailable( var_0, var_1, var_2 )
{
    var_3 = var_0.occupants[var_1];
    var_4 = var_0.occupantsreserving[var_1];

    if ( istrue( var_0.brking_rankupdate ) )
        return 0;

    if ( !isdefined( var_3 ) && !isdefined( var_4 ) )
        return 1;

    if ( isdefined( var_2 ) )
    {
        if ( isdefined( var_3 ) && var_3 == var_2 )
            return 1;

        if ( isdefined( var_4 ) && var_4 == var_2 )
            return 1;
    }

    return 0;
}

vehicle_occupancy_getseatoccupant( var_0, var_1, var_2 )
{
    if ( !isdefined( var_2 ) )
        var_2 = 1;

    if ( isdefined( var_0.occupants ) )
        return var_0.occupants[var_1];
    else
        return undefined;
}

vehicle_occupancy_getalloccupants( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        var_1 = 1;

    return var_0.occupants;
}

vehicle_occupancy_getalloccupantsandreserving( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        var_1 = 1;

    if ( !isdefined( var_0.occupants ) )
        return undefined;

    return scripts\engine\utility::array_combine_unique( var_0.occupants, var_0.occupantsreserving );
}

_id_141D6( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        var_1 = 1;

    if ( !isdefined( var_0.occupants ) )
        return undefined;

    return var_0.occupantsreserving;
}

vehicle_occupancy_getoccupantseat( var_0, var_1 )
{
    foreach ( var_4, var_3 in var_0.occupants )
    {
        if ( var_3 == var_1 )
            return var_4;
    }

    return undefined;
}

vehicle_occupancy_occupantisvehicledriver( var_0 )
{
    if ( isdefined( var_0.vehicle ) )
    {
        var_1 = vehicle_occupancy_getoccupantseat( var_0.vehicle, var_0 );
        var_2 = vehicle_occupancy_getleveldataforseat( var_0.vehicle.vehiclename, var_1 );

        if ( isdefined( var_2.animtag ) )
        {
            var_3 = tolower( var_2.animtag );

            if ( var_3 == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
                return 1;
        }
    }

    return 0;
}

vehicle_occupancy_getdriver( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getdriverseat( var_0, var_1 );

    if ( isdefined( var_2 ) )
        return vehicle_occupancy_getseatoccupant( var_0, var_2, !istrue( var_1 ) );

    return undefined;
}

vehicle_occupancy_getdriverseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename, !istrue( var_1 ) );

    if ( !isdefined( var_2 ) )
        return undefined;

    var_3 = var_2.driverseatid;

    if ( !isdefined( var_3 ) )
    {
        foreach ( var_6, var_5 in var_2.seatdata )
        {
            if ( isdefined( var_5.animtag ) && tolower( var_5.animtag ) == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
            {
                var_3 = var_6;
                break;
            }
        }

        var_2.driverseatid = var_3;
    }

    return var_3;
}

_id_141DF( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_1 );

    if ( !isdefined( var_2.animtag ) )
        return 0;

    if ( tolower( var_2.animtag ) != "_encstr_A90D0BC8EF0F8E870A0E75E832" )
        return 0;

    return 1;
}

vehicle_occupancy_enter( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = 0;

    if ( isdefined( var_3 ) && isdefined( var_3.useonspawn ) )
        var_5 = 1;

    if ( !var_5 && !var_2 scripts\cp_mp\utility\player_utility::_isalive() )
        return;

    if ( istrue( var_2.inlaststand ) )
        return;

    if ( istrue( var_0.isdestroyed ) )
        return;

    if ( istrue( var_0.oob ) )
    {
        if ( isdefined( var_0.oobendtime ) && var_0.oobendtime - gettime() < 100 )
            return;
    }

    if ( isdefined( var_0.vehicletype ) && var_0.vehicletype == "_encstr_98BC16C708FB175B473B568D2D17B3A8E2404F7790F65D43" )
    {
        var_6 = [ var_0 ];
        var_7 = [ "_encstr_98C1190E865EE6D26CDC36DE73A32B73E8E6EB6C1B5A0EB91AED1D", "_encstr_BD431CE7B0D853097F67676D6BE477B61B072950F79BD30A5247185850D0", "_encstr_9E9C1638865EB95A6CE68DDEE64795B98E6EAF9BF6B1968C", "_encstr_941116D7F47B0FC88317C8B07BCC017DD35AD8D44D52D773", "_encstr_9DD6156A78B803FAD687D7EF95056246B86329B453E0D5" ];
        var_8 = physics_createcontents( var_7 );

        if ( isdefined( var_8 ) )
        {
            var_9 = ( 0, 0, 1 );
            var_10 = getdvarfloat( "_encstr_938C1BCB06FBCFF577A36AC0F8692FA317FF3953AF632BF41BF0D20AD0", 30 );
            var_11 = getdvarfloat( "_encstr_93821B8B3F6829B7B083E248E815AFDAC1A309E35338AB836F799A7353", 0.5 );
            var_12 = var_0 physics_getentitycenterofmass()["_encstr_B90409AE736EB1B036598C"];

            if ( isdefined( var_12 ) )
            {
                var_13 = var_12 + var_9 * var_10;
                var_14 = scripts\engine\trace::sphere_trace( var_12, var_13, var_11, var_6, var_8 );

                if ( isdefined( var_14 ) )
                {
                    var_15 = distance( var_12, var_14["_encstr_B7260923C89E8F3378E72E"] );

                    if ( var_15 < var_10 )
                        return;
                }
            }
        }
    }

    if ( !scripts\cp_mp\vehicles\vehicle_tracking::_wakeupvehicle( var_0, 0, 0 ) )
        return 0;

    foreach ( var_17 in var_0.occupantsreserving )
    {
        if ( isdefined( var_17 ) && var_17 == var_2 )
            return;
    }

    var_19 = vehicle_occupancy_getoccupantseat( var_0, var_2 );

    if ( istrue( vehicle_occupancy_seatisavailable( var_0, var_1, var_2 ) ) )
    {
        vehicle_occupancy_stopmonitoringoccupant( var_2 );

        if ( !isdefined( var_3 ) )
            var_3 = spawnstruct();

        var_3.immediate = istrue( var_4 );
        var_3.raceendnotify = "_encstr_B6D01716314A171AFA300F1B013F27BF807B9745C81753CCB0";
        var_3.raceendon = "_encstr_95BD16BB9B28C976CC1B018803BB8F97549740C8406CF7F1";

        if ( !var_3.immediate )
        {
            thread vehicle_occupancy_raceplayerdeathdisconnect( var_2, var_3 );
            thread vehicle_occupancy_racevehicledeath( var_0, var_3 );
            thread vehicle_occupancy_raceseatunavailable( var_0, var_2, var_1, var_19, var_3 );
            thread vehicle_occupancy_racecomplete( var_19, var_1, var_3 );
        }

        if ( isdefined( var_19 ) )
            thread vehicle_occupancy_exitstart( var_0, var_19, var_1, var_2, var_3 );

        if ( isdefined( var_1 ) )
            thread vehicle_occupancy_enterstart( var_0, var_1, var_19, var_2, var_3 );

        vehicle_occupancy_updatefull( var_0 );
        vehicle_occupancy_updateempty( var_0 );

        if ( !var_3.immediate )
        {
            var_3 waittill( var_3.raceendnotify );
            waittillframeend;
            var_3 notify( var_3.raceendon );
        }

        if ( !scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_instanceisregistered( var_0 ) )
        {
            var_3.success = 0;

            if ( isdefined( var_1 ) )
                thread vehicle_occupancy_enterend( var_0, var_1, var_19, var_2, var_3 );
        }
        else
        {
            var_20 = vehicle_occupancy_raceresults( var_0, var_2, var_19, var_1, var_3 );

            if ( isdefined( var_19 ) )
                thread vehicle_occupancy_exitend( var_0, var_19, var_1, var_2, var_3 );

            if ( isdefined( var_1 ) )
                thread vehicle_occupancy_enterend( var_0, var_1, var_19, var_2, var_3 );

            vehicle_occupancy_updatefull( var_0 );
            vehicle_occupancy_updateempty( var_0 );

            if ( var_20 )
            {
                if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B26C0DBFE1F8826F525C61A7828940" ) )
                    [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B26C0DBFE1F8826F525C61A7828940" ) ]]( var_2, var_0, var_19, var_1 );

                thread vehicle_occupancy_monitoroccupant( var_0, var_2, var_1 );
                var_2 forcereloading();

                if ( istrue( var_2.tracking_max_health ) )
                    var_2 notify( "_encstr_AB9A1419CA07F866F317B39D377AAE59D3E6CDB1B76C" );

                if ( isdefined( var_19 ) )
                {
                    var_21 = _id_141DF( var_0, var_19 );

                    if ( istrue( var_21 ) && scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9F3B13E7E1A003FF1BEA63B4CFBDD9A8B960BD819A" ) )
                        var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9F3B13E7E1A003FF1BEA63B4CFBDD9A8B960BD819A" ) ]]( "_encstr_943308484B349D58C3E7" );
                }

                if ( isdefined( var_1 ) )
                {
                    var_21 = _id_141DF( var_0, var_1 );

                    if ( istrue( var_21 ) && !istrue( level.loadoutbrfieldupgrade ) )
                    {
                        var_22 = 0;
                        var_23 = "_encstr_A40101";
                        var_24 = "_encstr_A40101";
                        var_25 = "_encstr_A40101";
                        var_26 = "_encstr_A40101";

                        switch ( var_0.targetname )
                        {
                            case "_encstr_AB510CB03836AF93ABCD6ED21673":
                                var_23 = var_2._id_14238.apc;
                                var_24 = var_2._id_14238.c4_pick_up_listener;
                                var_22 = 1;
                                var_25 = var_2._id_14238.c130airdrop_heightoverride;
                                break;
                            case "_encstr_A219044B93BB":
                                var_23 = var_2._id_14238.check_cannot_spawn_tank;
                                var_25 = var_2._id_14238.check_carrier_status;
                                var_26 = var_2._id_14238.check_for_damage_scalar_change;
                                break;
                            case "_encstr_98C20F6C169CCEDEEB1D27EA1B5BFA6BCE":
                            case "_encstr_93120C26CEB35F60D753E8D8E70B":
                                var_23 = var_2._id_14238.get_extra_focus_fire_multipler;
                                var_25 = var_2._id_14238.get_fake_digit_from_pool;
                                break;
                            case "_encstr_B6DE05E0ED1382":
                                var_23 = var_2._id_14238.vehicle_damage_endburndown;
                                var_25 = var_2._id_14238.vehicle_damage_enginevisualclearcallback;
                                break;
                            case "_encstr_A4E90F635A473A63B2BEC4D2E48CBEAD9D":
                            case "_encstr_BC8F0CED4311BB6CA9F19BBFB0A1":
                                var_23 = var_2._id_14238.x1opsenableelimination;
                                var_25 = var_2._id_14238.x1opsendgame;
                                var_26 = var_2._id_14238.zombieingas;
                                break;
                            case "_encstr_BC120A09810621EE6FAB69F3":
                                var_23 = var_2._id_14238._id_139F7;
                                var_25 = var_2._id_14238._id_139F8;
                                var_26 = var_2._id_14238._id_139FC;
                                break;
                            case "_encstr_A6390B63B4CEA1D17D1D16E6AD":
                                var_23 = scripts\engine\utility::ter_op( isdefined( var_0.spawndata.usealtmodel ), var_2._id_14238._id_13A47, var_2._id_14238._id_13A52 );
                                var_24 = scripts\engine\utility::ter_op( isdefined( var_0.spawndata.usealtmodel ), var_2._id_14238._id_13A48, var_2._id_14238._id_13A53 );
                                var_22 = 1;
                                break;
                            case "_encstr_94C20B50BFCB3F037BF93BA34D":
                                var_23 = var_2._id_14238._id_11D4D;
                                var_25 = var_2._id_14238._id_11D5F;
                                var_26 = var_2._id_14238._id_11D70;
                                break;
                            case "_encstr_B7C80A23E9733716DA39060C":
                                var_23 = var_2._id_14238.br_is_allowed_armor_insert;
                                var_26 = var_2._id_14238.br_isplayerbeforeinitialinfildeploy;
                                break;
                            case "_encstr_A492074CDE5BC459E4":
                                var_23 = var_2._id_14238.create_head_icon_for_crate;
                                var_26 = var_2._id_14238.createjuggdroplocation;
                                break;
                            case "_encstr_B3FE140EF940B73A682973676F2A61FBD00342991120":
                            case "_encstr_A26E118D2C93CEB7EB47E4D5D8D6AFB9AECDC1":
                                var_23 = "_encstr_A40101";
                                var_25 = var_2._id_14238.get_fake_digit_from_pool;
                                break;
                            case "_encstr_88AE0ABD1C2B9BEB53B22BE0":
                                var_23 = "_encstr_A40101";
                                var_25 = var_2._id_14238.vehicle_damage_enginevisualclearcallback;
                                break;
                            case "_encstr_A1F51125F3D09601DA23771B6F76AAC220785E":
                                var_23 = "_encstr_A40101";
                                var_25 = var_2._id_14238.vehicle_damage_enginevisualclearcallback;
                                break;
                            default:
                                var_23 = "_encstr_A40101";
                                var_25 = "_encstr_A40101";
                        }

                        var_0 radiusdamagestepped( var_25 );

                        if ( var_23 != "_encstr_A40101" && !isdefined( var_0.gasfxair ) )
                        {
                            var_0 getvehiclecamo();
                            var_0 getexecutionpartner( var_23 );

                            if ( var_22 )
                            {
                                foreach ( var_28 in var_0.turrets )
                                {
                                    var_28 isbasejumpavailable( var_24 );
                                    break;
                                }
                            }

                            var_0._id_1426C = var_26;
                            var_0.gasfxair = 1;
                        }

                        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9FB314E6D185398EA10D16C6635673ECAC45A5AD2BE4" ) )
                            var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9FB314E6D185398EA10D16C6635673ECAC45A5AD2BE4" ) ]]( "_encstr_943308484B349D58C3E7" );
                    }
                }

                if ( !isdefined( var_19 ) )
                    var_30 = "_encstr_95F4102A9345A2258A22BE2B8A84A46826A8";
                else
                    var_30 = "_encstr_BA5B0C35151445F56AAB94458609";

                abilityleft::cleanuparenamolotovs( var_0, var_2, var_1, var_19 );
                scripts\cp_mp\vehicles\vehicle_dlog::_id_1418A( var_0, var_2, var_1, var_30 );
                return;
            }

            if ( isdefined( var_19 ) && !istrue( var_3.vehicledeath ) )
            {
                if ( istrue( var_3.playerdeath ) || istrue( var_3.playerlaststand ) || istrue( var_3.playerdisconnect ) )
                {
                    var_31 = spawnstruct();
                    var_31.playerdeath = var_3.playerdeath;
                    var_31.playerlaststand = var_3.playerlaststand;
                    var_31.playerdisconnect = var_3.playerdisconnect;
                    thread vehicle_occupancy_exit( var_0, var_19, var_2, var_31, 1 );
                }
                else
                    vehicle_occupancy_reenter( var_0, var_19, var_1, var_2, var_3 );
            }
        }
    }
}

vehicle_occupancy_exit( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = var_1;

    if ( isdefined( var_2 ) )
    {
        if ( !isdefined( var_5 ) )
            var_5 = vehicle_occupancy_getoccupantseat( var_0, var_2 );

        if ( !var_2 scripts\cp_mp\utility\player_utility::_isalive() )
            var_4 = 1;

        if ( istrue( var_2.inlaststand ) )
            var_4 = 1;

        vehicle_occupancy_stopmonitoringoccupant( var_2 );
    }
    else
    {
        var_4 = 1;
        vehicle_occupancy_purgedataforseatinstance( var_0, var_5 );
    }

    if ( istrue( var_0.isdestroyed ) )
        var_4 = 1;

    if ( !isdefined( var_3 ) )
        var_3 = spawnstruct();

    var_3.immediate = istrue( var_4 );
    var_3.raceendnotify = "_encstr_B6D01716314A171AFA300F1B013F27BF807B9745C81753CCB0";
    var_3.raceendon = "_encstr_95BD16BB9B28C976CC1B018803BB8F97549740C8406CF7F1";

    if ( !var_3.immediate )
    {
        thread vehicle_occupancy_raceplayerdeathdisconnect( var_2, var_3 );
        thread vehicle_occupancy_racevehicledeath( var_0, var_3 );
        thread vehicle_occupancy_racecomplete( var_5, undefined, var_3 );
    }

    thread vehicle_occupancy_exitstart( var_0, var_5, undefined, var_2, var_3 );

    if ( !var_3.immediate )
    {
        var_3 waittill( var_3.raceendnotify );
        waittillframeend;
        var_3 notify( var_3.raceendon );
    }

    var_6 = vehicle_occupancy_raceresults( var_0, var_2, var_5, undefined, var_3 );
    thread vehicle_occupancy_exitend( var_0, var_5, undefined, var_2, var_3 );
    vehicle_occupancy_updatefull( var_0 );
    vehicle_occupancy_updateempty( var_0 );

    if ( !var_6 )
    {
        if ( !istrue( var_3.playerdeath ) && !istrue( var_3.playerlaststand ) && !istrue( var_3.playerdisconnect ) && !istrue( var_3.vehicledeath ) )
            vehicle_occupancy_reenter( var_0, var_5, undefined, var_2, var_3 );
    }
    else if ( isdefined( var_2 ) )
    {
        var_2 forcereloading();
        var_7 = _id_141DF( var_0, var_5 );

        if ( istrue( var_7 ) && scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9F3B13E7E1A003FF1BEA63B4CFBDD9A8B960BD819A" ) )
            var_2 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_B1580B38A27EF1A0A7568CF523", "_encstr_9F3B13E7E1A003FF1BEA63B4CFBDD9A8B960BD819A" ) ]]( "_encstr_943308484B349D58C3E7" );
    }
}

_id_141E2( var_0, var_1 )
{
    if ( level.teambased )
        return _id_141E3( var_0, var_1.team );
    else
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return isdefined( var_0._id_12564 ) && var_0._id_12564 == var_1;
    }
}

_id_141E0( var_0, var_1 )
{
    if ( level.teambased )
        return _id_141E1( var_0, var_1.team );
    else
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return isdefined( var_0._id_12564 ) && var_0._id_12564 != var_1;
    }
}

_id_141E4( var_0, var_1 )
{
    if ( level.teambased )
        return _id_141E5( var_0, var_1.team );
    else
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return !isdefined( var_0._id_12564 );
    }
}

_id_141D5( var_0 )
{
    if ( !level.teambased )
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return var_0._id_12564;
    }

    return undefined;
}

_id_141E3( var_0, var_1 )
{
    if ( level.teambased )
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return isdefined( var_0._id_13AAD ) && var_0._id_13AAD == var_1;
    }

    return undefined;
}

_id_141E1( var_0, var_1 )
{
    if ( level.teambased )
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return isdefined( var_0._id_13AAD ) && var_0._id_13AAD != var_1;
    }

    return undefined;
}

_id_141E5( var_0, var_1 )
{
    if ( level.teambased )
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return !isdefined( var_0._id_13AAD );
    }

    return undefined;
}

_id_141D7( var_0 )
{
    if ( level.teambased )
    {
        if ( istrue( var_0.playersetattractionoff ) )
            var_0 _id_141C8( var_0 );

        return var_0._id_13AAD;
    }

    return undefined;
}

_id_141F4( var_0 )
{
    var_0.playersetattractionoff = 1;
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setvehicledirty( var_0 );
}

_id_141C8( var_0 )
{
    if ( level.teambased )
    {
        var_1 = 0;
        var_2 = var_0._id_13AAD;

        if ( isdefined( var_0.team ) && var_0.team != "_encstr_9BA4080D39CFFB5AB7C1" )
        {
            var_0._id_13AAD = var_0.team;
            var_0.playersetattractionoff = undefined;
            var_1 = 1;
        }

        if ( !var_1 )
        {
            foreach ( var_4 in var_0.occupants )
            {
                if ( isdefined( var_4 ) )
                {
                    var_0._id_13AAD = var_4.team;
                    var_0.playersetattractionoff = undefined;
                    var_1 = 1;
                    break;
                }
            }
        }

        if ( !var_1 )
        {
            var_0._id_13AAD = undefined;
            var_0.playersetattractionoff = undefined;
        }

        if ( !isdefined( var_2 ) && !isdefined( var_0._id_13AAD ) )
            return 0;

        if ( isdefined( var_2 ) && isdefined( var_0._id_13AAD ) && var_2 == var_0._id_13AAD )
            return 0;

        _id_141D4( var_0, var_2, var_0._id_13AAD );
        return 1;
    }
    else
    {
        var_1 = 0;
        var_6 = var_0._id_12564;

        if ( isdefined( var_0.originalowner ) )
        {
            var_0._id_12564 = var_0.originalowner;
            var_0.playersetattractionoff = undefined;
            var_1 = 1;
        }

        if ( !var_1 )
        {
            var_7 = vehicle_occupancy_getalloccupants( var_0 );

            foreach ( var_4 in var_7 )
            {
                if ( isdefined( var_4 ) )
                {
                    var_0._id_12564 = var_4;
                    var_0.playersetattractionoff = undefined;
                    return;
                }
            }
        }

        if ( !isdefined( var_6 ) && !isdefined( var_0._id_12564 ) )
            return 0;

        if ( isdefined( var_6 ) && isdefined( var_0._id_12564 ) && var_6 == var_0._id_12564 )
            return 0;

        _id_141D4( var_0, var_6, var_0._id_12564 );
        return 1;
    }
}

_id_141D4( var_0, var_1, var_2 )
{
    _calloutmarkerping_predicted_timeout::_id_14121( var_0, var_1, var_2 );
    var_3 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( !isdefined( var_3.playersetattractionlocationindex ) )
        return;

    thread [[ var_3.playersetattractionlocationindex ]]( var_0, var_1, var_2 );
}

vehicle_occupancy_setoriginalowner( var_0, var_1 )
{
    var_0.originalowner = var_1;
    vehicle_occupancy_updateowner( var_0 );
}

vehicle_occupancy_setowner( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_0.owners ) )
        var_0.owners = [];
    else
    {
        vehicle_occupancy_clearowner( var_0, var_1 );
        var_0.owners = scripts\engine\utility::array_removeundefined( var_0.owners );
    }

    var_0.owners[var_0.owners.size] = var_1;

    if ( isdefined( var_3 ) && var_3 == -1 )
    {

    }
    else
        thread vehicle_occupancy_watchowner( var_0, var_1, var_2, var_3 );

    vehicle_occupancy_updateowner( var_0 );
}

vehicle_occupancy_updateowner( var_0 )
{
    var_0 notify( "_encstr_B67C1528DF92B366FDFD1E6260482798094B7A3AC91BD7" );
    var_1 = var_0.owner;
    var_2 = var_0.ownerteam;
    var_3 = undefined;

    if ( isdefined( var_0.owners ) )
    {
        for ( var_4 = var_0.owners.size - 1; var_4 >= 0; var_4-- )
        {
            if ( vehicle_occupancy_isplayervalidowner( var_0, var_0.owners[var_4] ) )
            {
                var_3 = var_0.owners[var_4];
                break;
            }
        }
    }

    if ( !isdefined( var_3 ) )
    {
        if ( vehicle_occupancy_isplayervalidowner( var_0, var_0.originalowner ) )
            var_3 = var_0.originalowner;
    }

    var_0.owner = var_3;
    var_5 = 0;

    if ( isdefined( var_3 ) || isdefined( var_1 ) )
    {
        if ( !isdefined( var_3 ) && isdefined( var_1 ) )
            var_5 = 1;
        else if ( isdefined( var_3 ) && !isdefined( var_1 ) )
            var_5 = 1;
        else if ( var_3 != var_1 )
            var_5 = 1;
    }

    var_6 = 0;

    if ( isdefined( var_3 ) )
    {
        if ( !isdefined( var_2 ) || var_2 != var_3.team )
            var_6 = 1;

        var_0.ownerteam = var_3.team;
        var_0 setvehicleteam( var_3.team );
        thread vehicle_occupancy_watchownerjoinedteam( var_0, var_3 );
    }
    else
    {
        if ( var_5 )
            var_6 = 1;

        var_0.ownerteam = undefined;
    }

    if ( var_5 )
    {
        if ( !level.teambased )
            _id_141F4( var_0 );
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B4B70CCB5007102D87F8EB30A223" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B4B70CCB5007102D87F8EB30A223" ) ]]( var_0 );

    var_7 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( isdefined( var_7 ) && isdefined( var_7.updateownercallback ) )
        [[ var_7.updateownercallback ]]( var_0, var_3, var_5, var_6 );
}

vehicle_occupancy_clearowner( var_0, var_1 )
{
    var_0 notify( "_encstr_B96B150B9FA0807E124F5F2F43AAB7807FF5D380070279" + var_1 getentitynumber() );

    if ( isdefined( var_0.owners ) )
        var_0.owners = scripts\engine\utility::array_remove( var_0.owners, var_1 );

    if ( isdefined( var_0.owner ) && var_0.owner == var_1 )
        vehicle_occupancy_updateowner( var_0 );
}

vehicle_occupancy_setteam( var_0, var_1 )
{
    var_2 = !isdefined( var_0.team ) || var_0.team != var_1;
    var_0.team = var_1;

    if ( var_0.classname == "_encstr_AB440F9BD8932D071DAFB3CA435A3663B2" )
        var_0 setvehicleteam( var_1 );

    if ( var_2 )
    {
        if ( level.teambased )
            _id_141F4( var_0 );
    }

    var_3 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( isdefined( var_3 ) && isdefined( var_3.updateteamcallback ) )
        [[ var_3.updateteamcallback ]]( var_0, var_1, var_2 );

    vehicle_occupancy_updateowner( var_0 );
}

vehicle_occupancy_init()
{
    var_0 = spawnstruct();
    level.vehicle.occupancy = var_0;
    var_0.vehicledata = [];
    var_0._id_13CEA = getdvarint( "_encstr_A6E71A938B2BFE71A6E2F6EBDC73EAB8481854D77083C5F35BDD6F71", 1 ) > 0;

    if ( var_0._id_13CEA )
    {
        var_0._id_13CEB = 0;
        var_0._id_13CEC = [];
    }

    vehicle_occupancy_initdebug();
    [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_80C50550FA44C9" ) ]]();
}

vehicle_occupancy_enterstart( var_0, var_1, var_2, var_3, var_4 )
{
    var_4 endon( var_4.raceendon );
    var_0.occupantsreserving[var_1] = var_3;
    var_3._id_1425D = var_0;
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setvehicledirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setpointsdirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
    var_5 = undefined;

    if ( var_4.immediate )
        var_5 = gettime();

    if ( isdefined( var_4.enterstartwaitmsg ) )
        var_3 waittill( var_4.enterstartwaitmsg );

    vehicle_occupancy_deleteseatcorpse( var_0, var_1, 1 );

    if ( isdefined( var_3 ) && var_3 isthrowinggrenade() )
    {
        if ( !isdefined( var_4.enterstartcomplete ) )
            var_4.enterstartcomplete = 1;

        var_4.success = 0;
        return;
    }

    var_6 = vehicle_occupancy_getenterstartcallbackforseat( var_0, var_1 );

    if ( isdefined( var_6 ) )
        [[ var_6 ]]( var_0, var_1, var_2, var_3, var_4 );

    if ( !isdefined( var_4.enterstartcomplete ) )
        var_4.enterstartcomplete = 1;

    if ( var_4.immediate )
        return;
}

vehicle_occupancy_exitstart( var_0, var_1, var_2, var_3, var_4 )
{
    var_4 endon( var_4.raceendon );
    var_5 = undefined;

    if ( var_4.immediate )
        var_5 = gettime();

    var_6 = vehicle_occupancy_getexitstartcallbackforseat( var_0, var_1 );

    if ( isdefined( var_6 ) )
        [[ var_6 ]]( var_0, var_1, var_2, var_3, var_4 );

    if ( !isdefined( var_4.exitstartcomplete ) )
        var_4.exitstartcomplete = 1;

    if ( var_4.immediate )
        return;
}

vehicle_occupancy_exitstartcallback( var_0, var_1, var_2, var_3, var_4 )
{
    var_4 endon( var_4.raceendon );
    var_5 = vehicle_occupancy_findplayerexit( var_3, var_0, var_1, var_2, var_4 );

    if ( !var_5 )
    {
        var_4.exitstartcomplete = 0;
        _id_141D1( var_3, 2 );

        if ( !istrue( var_4.immediate ) )
        {
            waitframe();
            var_4 notify( var_4.raceendnotify );
        }
    }
}

vehicle_occupancy_enterend( var_0, var_1, var_2, var_3, var_4 )
{
    if ( istrue( var_4.success ) )
    {
        var_0.occupants[var_1] = var_3;
        var_0.occupantsreserving[var_1] = undefined;
        var_3.vehicle = var_0;
        var_3._id_1425D = undefined;

        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_AAB0079B102F47FF38", "_encstr_8B7A183F017F996E3C43BF93E9A35B51E8BF42C9596B10E4CDAB" ) )
            self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_AAB0079B102F47FF38", "_encstr_8B7A183F017F996E3C43BF93E9A35B51E8BF42C9596B10E4CDAB" ) ]]();

        vehicle_occupancy_applyrestrictionstooccupant( var_0, var_1, var_3, var_4 );
        _id_141F9( var_3, var_0, var_1 );
        vehicle_occupancy_hideoccupant( var_0, var_1, var_3, var_4 );
        vehicle_occupancy_applycameratooccupant( var_0, var_1, var_2, var_3, var_4 );
        vehicle_occupancy_applydamagemodifiertooccupant( var_0, var_1, var_3, var_4 );
        _id_141DB( var_0, var_1, var_3, var_4 );

        if ( !isdefined( var_2 ) )
            vehicle_occupancy_onentervehicle( var_0, var_1, var_3, var_4 );

        var_5 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_1 );

        if ( isdefined( var_5.animtag ) && tolower( var_5.animtag ) == tolower( "_encstr_A90D0BC8EF0F8E870A0E75E832" ) )
            vehicle_occupancy_setowner( var_0, var_3, 1 );

        if ( !isdefined( var_2 ) )
        {
            var_3 notify( "_encstr_A11C0E7341A881D2E913AF5F1D8DFAD2" );

            if ( isdefined( var_5._id_12023 ) )
                thread _id_141DA( var_3, var_5, 1 );
        }
        else
        {
            var_3 notify( "_encstr_A886143B07903FF2885960019B495012C2A10B8031DD" );

            if ( isdefined( var_5._id_12023 ) )
                thread _id_141DA( var_3, var_5, 0 );
        }
    }
    else
    {
        if ( isdefined( var_3 ) )
        {
            var_3._id_1425D = undefined;
            var_5 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_1 );

            if ( isdefined( var_5._id_13E92 ) )
                vehicle_occupancy_taketurret( var_3, var_0, var_5._id_13E92, var_4, 1 );

            vehicle_occupancy_showoccupant( var_0, var_1, var_3, var_4, 1 );
        }

        if ( !istrue( var_4.vehicledeath ) )
            var_0.occupantsreserving[var_1] = undefined;
    }

    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setvehicledirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setpointsdirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
    var_6 = gettime();
    var_7 = vehicle_occupancy_getenterendcallbackforseat( var_0, var_1 );

    if ( isdefined( var_7 ) )
        [[ var_7 ]]( var_0, var_1, var_2, var_3, var_4 );
}

vehicle_occupancy_exitend( var_0, var_1, var_2, var_3, var_4 )
{
    if ( var_4.success )
    {
        var_0.occupants[var_1] = undefined;

        if ( isdefined( var_3 ) )
        {
            var_3 notify( "_encstr_B39D12E3CD5112EB8DB8E76F8099B43913DBAC1B" );
            var_5 = 0;

            if ( !isdefined( var_2 ) )
            {
                var_3.vehicle = undefined;
                var_5 = 1;
            }

            vehicle_occupancy_removerestrictionsfromoccupant( var_0, var_1, var_3, var_4 );
            _id_141F9( var_3, var_0, var_2 );
            vehicle_occupancy_showoccupant( var_0, var_1, var_3, var_4, var_5 );
            vehicle_occupancy_removecamerafromoccupant( var_0, var_2, var_3, var_4 );
            vehicle_occupancy_removedamagemodifierfromoccupant( var_0, var_1, var_3, var_4 );
            _id_141F5( var_0, var_1, var_3, var_4 );
        }

        if ( !isdefined( var_2 ) )
            vehicle_occupancy_onexitvehicle( var_0, var_1, var_3, var_4 );

        if ( !var_0 scripts\common\vehicle_code::vehicle_is_stopped() && _id_141DF( var_0, var_1 ) )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_9507034B25", "_encstr_A179136258E7EB4548B5171D0B38CE1315918B2AA3" ) )
            {
                var_6 = spawnstruct();
                var_6.onplayerkillednew = 1;
                var_3 thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_9507034B25", "_encstr_A179136258E7EB4548B5171D0B38CE1315918B2AA3" ) ]]( "_encstr_9B3119EA58779D47D38DD5DA237E1764AFF8136178E957A7E87BC8", var_6 );
            }
        }
    }

    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setvehicledirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setpointsdirty( var_0 );
    scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
    var_7 = gettime();
    var_8 = vehicle_occupancy_getexitendcallbackforseat( var_0, var_1 );

    if ( isdefined( var_8 ) )
        [[ var_8 ]]( var_0, var_1, var_2, var_3, var_4 );

    if ( isdefined( var_3 ) )
    {
        var_3 usebuttondone();

        if ( !isdefined( var_2 ) )
        {
            if ( isdefined( var_3._id_14277 ) )
                var_3._id_14277 = undefined;

            if ( isdefined( var_3._id_14276 ) )
                var_3._id_14276 = undefined;
        }
    }
}

vehicle_occupancy_reenter( var_0, var_1, var_2, var_3, var_4 )
{
    thread vehicle_occupancy_monitoroccupant( var_0, var_3, var_1 );
    var_5 = gettime();
    var_6 = vehicle_occupancy_getreentercallbackforseat( var_0, var_1 );

    if ( isdefined( var_6 ) )
        [[ var_6 ]]( var_0, var_1, var_2, var_3, var_4 );
}

vehicle_occupancy_getleveldata()
{
    return level.vehicle.occupancy;
}

_id_141DA( var_0, var_1, var_2 )
{
    var_3 = 5000;

    if ( istrue( var_2 ) )
    {
        var_0._id_14277 = var_1._id_12023;
        thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A47205E8C28D13", "_encstr_BA8311EBBB38A3FA5B79675F0B8981C7304067" ) ]]( var_0, var_1._id_12023, undefined, 1 );
        var_0._id_14276 = gettime();
    }
    else if ( isdefined( var_0._id_14277 ) && isdefined( var_0._id_14276 ) && var_0._id_14277 != var_1._id_12023 && gettime() - var_0._id_14276 > var_3 )
    {
        thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A47205E8C28D13", "_encstr_BA8311EBBB38A3FA5B79675F0B8981C7304067" ) ]]( var_0, var_1._id_12023 );
        var_0._id_14277 = var_1._id_12023;
        var_0._id_14276 = gettime();
    }
}

vehicle_occupancy_purgedataforseatinstance( var_0, var_1 )
{
    var_0.occupants[var_1] = undefined;
    var_0.occupantsreserving[var_1] = undefined;
}

vehicle_occupancy_onentervehicle( var_0, var_1, var_2, var_3 )
{
    _id_141F4( var_0 );
    var_0 scripts\cp_mp\vehicles\vehicle_spawn::_id_1421A();
    var_2 setstance( "_encstr_B1AD06374716DC8C" );
    var_2 scripts\common\utility::allow_array( vehicle_occupancy_getoccupantrestrictions(), 0 );
    thread _id_141F8( var_2, var_0, var_1 );
    abilityleft::claymore_crate_use( var_0, var_2 );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B90B0FBD37A23747AC2759CA43D2D8C6CA", 1 ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B90B0FBD37A23747AC2759CA43D2D8C6CA" ) ]]( var_0, var_1, var_2, var_3 );
}

vehicle_occupancy_onexitvehicle( var_0, var_1, var_2, var_3 )
{
    if ( !istrue( var_3.playerdisconnect ) )
    {
        var_2 vehicle_occupancy_stopmovefeedbackforplayer();
        var_2 vehicle_occupancy_cleardamagefeedbackforplayer();

        if ( !istrue( var_3.playerdeath ) )
        {
            if ( istrue( var_3.playerlaststand ) )
                var_3.onprematchfadedone2 = "_encstr_A375064985EE1993";
            else if ( !isdefined( var_3.onprematchfadedone2 ) )
                var_3.onprematchfadedone2 = "_encstr_81B20AC1D939CBA31F2FDAD9";

            var_2 scripts\common\utility::allow_array( vehicle_occupancy_getoccupantrestrictions(), 1 );
            thread scripts\cp_mp\vehicles\vehicle::_id_14203( var_0, var_2 );
        }
        else
            var_3.onprematchfadedone2 = "_encstr_A375064985EE1993";

        thread _id_141D9( var_2, var_3.playerdeath, var_3.playerlaststand );
    }
    else
        var_3.onprematchfadedone2 = "_encstr_8A820B44944DA1E92727A81A2A";

    _id_141F4( var_0 );

    if ( scripts\cp_mp\vehicles\vehicle_spawn::_id_14214() && var_0.occupants.size == 0 )
        var_0 thread scripts\cp_mp\vehicles\vehicle_spawn::_id_1421D();

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_98110E985E273AEB23216010CABEA9D1", 1 ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_98110E985E273AEB23216010CABEA9D1" ) ]]( var_0, var_1, var_2, var_3 );

    var_2 notify( "_encstr_AA1814EBFD89205DD387EDC3B38A96502599F16224E4" );
    scripts\cp_mp\vehicles\vehicle_dlog::vehicle_dlog_exitevent( var_0, var_2, var_1, var_3.onprematchfadedone2 );
    abilityleft::claymore_forceclampangles( var_0, var_2, var_1 );
}

vehicle_occupancy_updatefull( var_0 )
{
    var_1 = vehicle_occupancy_getavailablevehicleseats( var_0 ).size <= 0;

    if ( var_1 )
    {
        if ( !istrue( var_0.isfull ) )
        {
            scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setpointdirty( var_0, "_encstr_B7DC0792FB8D2234F1" );
            scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
            var_0.isfull = 1;
        }
        else
            scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
    }
    else if ( istrue( var_0.isfull ) )
    {
        var_0.isfull = undefined;
        scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_setpointdirty( var_0, "_encstr_B7DC0792FB8D2234F1" );
        scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
    }
    else
        scripts\cp_mp\vehicles\vehicle_interact::vehicle_interact_updateusability( var_0 );
}

vehicle_occupancy_updateempty( var_0 )
{
    var_1 = vehicle_occupancy_getavailablevehicleseats( var_0 );
    var_2 = vehicle_occupancy_getallvehicleseats( var_0 );
    var_3 = var_1.size == var_2.size;

    if ( !istrue( var_0.isempty ) && var_3 )
        scripts\cp_mp\vehicles\vehicle_tracking::vehiclecannotbesuspended( var_0, 0 );

    if ( istrue( var_0.isempty ) && !var_3 )
        var_4 = scripts\cp_mp\vehicles\vehicle_tracking::vehiclecannotbesuspended( var_0, 1, 0 );

    var_0.isempty = var_3;
}

vehicle_occupancy_getenterstartcallbackforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.enterstartcallback ), var_3.enterstartcallback, var_2.enterstartcallback );
}

vehicle_occupancy_getenterendcallbackforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.enterendcallback ), var_3.enterendcallback, var_2.enterendcallback );
}

vehicle_occupancy_getexitstartcallbackforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.exitstartcallback ), var_3.exitstartcallback, var_2.exitstartcallback );
}

vehicle_occupancy_getexitendcallbackforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.exitendcallback ), var_3.exitendcallback, var_2.exitendcallback );
}

vehicle_occupancy_getreentercallbackforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.reentercallback ), var_3.reentercallback, var_2.reentercallback );
}

vehicle_occupancy_applyrestrictionstooccupant( var_0, var_1, var_2, var_3 )
{
    if ( !vehicle_occupancy_movementisallowed( var_0 ) )
    {
        if ( var_1 == vehicle_occupancy_getdriverseat( var_0 ) )
            vehicle_occupancy_allowmovementplayer( var_0, var_2, 0, var_1 );
    }

    var_4 = vehicle_occupancy_getrestrictionsforseat( var_0, var_1 );
    var_2 scripts\common\utility::allow_array( var_4, 0 );
    var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::loadout_finalizeweapons( "_encstr_BC5008F4B573F81FC5B2" );
}

vehicle_occupancy_removerestrictionsfromoccupant( var_0, var_1, var_2, var_3 )
{
    if ( !istrue( var_3.playerdeath ) )
    {
        vehicle_occupancy_allowmovementplayer( var_0, var_2, 1, undefined );
        var_4 = vehicle_occupancy_getrestrictionsforseat( var_0, var_1 );
        var_2 scripts\common\utility::allow_array( var_4, 1 );
        var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::move_structs( "_encstr_BC5008F4B573F81FC5B2" );
    }
}

_id_141DD()
{
    if ( !isdefined( level.spawn_deceleration ) )
        level.spawn_deceleration = getdvarint( "_encstr_87FA1AD38A7318F0F4CC6B07F35ED057E7B2CBDFB2C3CB71CBA16F47", 1 );

    return level.spawn_deceleration;
}

vehicle_occupancy_hideoccupant( var_0, var_1, var_2, var_3 )
{
    if ( vehicle_shouldhideoccupantforseat( var_0, var_1 ) )
    {
        var_2.nocorpse = 1;

        if ( _id_141DD() )
            var_2 scripts\cp_mp\utility\player_utility::allowunresolvedcollision();
        else
            var_2 playerhide();

        var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::loadout_finalizeweapons( "_encstr_BC5008F4B573F81FC5B2" );
    }
}

_id_141DC( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldata();

    if ( !var_2._id_13CEA )
        return;

    var_3 = var_2._id_13CEB;
    var_2._id_13CEB++;
    var_0 scripts\cp_mp\utility\player_utility::allowunresolvedcollision();
    var_2._id_13CEC[var_3] = var_0;

    if ( !isdefined( var_1._id_13CEC ) )
        var_1._id_13CEC = [];

    var_1._id_13CEC[var_3] = var_0;
    var_0 _calloutmarkerping_isvehicleoccupiedbyenemy::loadout_finalizeweapons( "_encstr_BC5008F4B573F81FC5B2" );
    return var_3;
}

_id_141F7( var_0, var_1, var_2 )
{
    var_3 = vehicle_occupancy_getleveldata();

    if ( !var_3._id_13CEA )
        return;

    if ( istrue( var_2 ) )
    {
        waitframe();
        waitframe();
    }

    if ( !var_3._id_13CEA )
        return;

    if ( !isdefined( var_3._id_13CEC[var_0] ) )
        return;

    var_4 = var_3._id_13CEC[var_0];

    if ( isdefined( var_1 ) && isdefined( var_1._id_13CEC ) )
        var_1._id_13CEC[var_0] = undefined;

    if ( isdefined( var_4 ) )
    {
        var_4 scripts\cp_mp\utility\player_utility::allplayers_clearphysicaldof();
        var_4 _calloutmarkerping_isvehicleoccupiedbyenemy::move_structs( "_encstr_BC5008F4B573F81FC5B2" );
    }
}

_id_141F6( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldata();

    if ( !var_2._id_13CEA )
        return;

    if ( istrue( var_1 ) )
    {
        waitframe();
        waitframe();
    }

    if ( !isdefined( var_0._id_13CEC ) )
        return;

    foreach ( var_5, var_4 in var_0._id_13CEC )
    {
        if ( isdefined( var_2._id_13CEC[var_5] ) )
        {
            var_2._id_13CEC[var_5] = undefined;

            if ( isdefined( var_4 ) )
                var_4 scripts\cp_mp\utility\player_utility::allplayers_clearphysicaldof();
        }
    }

    var_0._id_13CEC = undefined;
}

_id_141C9()
{
    var_0 = vehicle_occupancy_getleveldata();

    if ( !var_0._id_13CEA )
        return;

    foreach ( var_3, var_2 in var_0._id_13CEC )
    {
        if ( !isdefined( var_2 ) )
            var_0._id_13CEC[var_3] = undefined;
    }
}

vehicle_occupancy_showoccupant( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !istrue( var_3.playerdeath ) )
        var_2.nocorpse = undefined;

    if ( vehicle_shouldhideoccupantforseat( var_0, var_1 ) || istrue( var_4 ) )
    {
        if ( _id_141DD() )
        {
            if ( istrue( var_4 ) )
            {
                var_2 scripts\cp_mp\utility\player_utility::_id_125D0();
                var_2 playershow();
                var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::move_structs( "_encstr_BC5008F4B573F81FC5B2" );
            }
            else
            {
                var_2 scripts\cp_mp\utility\player_utility::allplayers_clearphysicaldof();
                var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::move_structs( "_encstr_BC5008F4B573F81FC5B2" );
            }
        }
        else
        {
            var_2 playershow();
            var_2 _calloutmarkerping_isvehicleoccupiedbyenemy::move_structs( "_encstr_BC5008F4B573F81FC5B2" );
        }
    }
}

vehicle_occupancy_applycameratooccupant( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = vehicle_getcameraforseat( var_0, var_1 );

    if ( isdefined( var_5 ) && var_5 != "_encstr_AABA05236DC831" )
    {
        var_6 = vehicle_getcameraforseat( var_0, var_2 );

        if ( var_6 != var_5 )
            var_3 cameraset( var_5 );
    }
}

vehicle_occupancy_removecamerafromoccupant( var_0, var_1, var_2, var_3 )
{
    if ( isdefined( var_1 ) )
    {
        var_4 = vehicle_getcameraforseat( var_0, var_1 );

        if ( var_4 == "_encstr_AABA05236DC831" )
        {
            var_2 cameradefault();
            return;
        }
    }
    else
        var_2 cameradefault();
}

vehicle_occupancy_applydamagemodifiertooccupant( var_0, var_1, var_2, var_3 )
{
    var_4 = vehicle_occupancy_getdamagemodifierforseat( var_0, var_1 );

    if ( isdefined( var_4 ) && var_4 != -1 )
        var_2 scripts\cp_mp\utility\damage_utility::adddamagemodifier( var_0.vehiclename + "_encstr_984C028E" + var_1, var_4, 0, ::vehicle_occupancy_damagemodifierignorefunc );
}

vehicle_occupancy_removedamagemodifierfromoccupant( var_0, var_1, var_2, var_3 )
{
    if ( !istrue( var_3.playerdeath ) )
    {
        var_4 = vehicle_occupancy_getdamagemodifierforseat( var_0, var_1 );

        if ( isdefined( var_4 ) && var_4 != -1 )
            var_2 scripts\cp_mp\utility\damage_utility::removedamagemodifier( var_0.vehiclename + "_encstr_984C028E" + var_1, 0 );
    }
}

vehicle_occupancy_getrestrictionsforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.restrictions ), var_3.restrictions, var_2.restrictions );
}

vehicle_shouldhideoccupantforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];

    if ( isdefined( var_3.hideoccupant ) )
        return istrue( var_3.hideoccupant );
    else
        return istrue( var_2.hideoccupant );
}

vehicle_getcameraforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( isdefined( var_1 ) )
    {
        var_3 = var_2.seatdata[var_1];
        var_4 = var_2.camera;

        if ( isdefined( var_3.camera ) )
            var_4 = var_3.camera;

        if ( isdefined( var_3.animtag ) && tolower( var_3.animtag ) == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
            var_4 = "_encstr_AABA05236DC831";
    }
    else
        var_4 = "_encstr_AABA05236DC831";

    return var_4;
}

vehicle_occupancy_getdamagemodifierforseat( var_0, var_1 )
{
    var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_3 = var_2.seatdata[var_1];
    return scripts\engine\utility::ter_op( isdefined( var_3.damagemodifier ), var_3.damagemodifier, var_2.damagemodifier );
}

vehicle_occupancy_damagemodifierignorefunc( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    var_7 = scripts\cp_mp\utility\damage_utility::packdamagedata( var_1, var_2, var_3, var_5, var_4, var_0 );

    if ( var_4 == "_encstr_A43E119D6859218C97A9F7EFD14F4F98831E53" )
        return 1;

    if ( isdefined( var_5 ) && var_5.basename == "_encstr_9DF00DF37BD0E2716F3B8BC7086BBB" )
        return 1;

    if ( var_2 scripts\cp_mp\utility\damage_utility::isstuckdamage( var_7 ) )
        return 1;

    return 0;
}

vehicle_occupancy_monitoroccupant( var_0, var_1, var_2 )
{
    thread _id_141E8( var_0, var_1, var_2 );
    thread vehicle_occupancy_monitorseatswitch( var_0, var_1, var_2, 1 );
    thread vehicle_occupancy_monitorexit( var_0, var_1, var_2 );
    thread _id_141E9( var_0, var_1, var_2 );
}

vehicle_occupancy_stopmonitoringoccupant( var_0 )
{
    var_0 notify( "_encstr_951622BB35705F51710F210F01D0D307FE5DFF0B1947CD08ABE9A2206732AD73856D685B" );
    var_0 notify( "_encstr_8FFD243BB286A5D86359FADED88DBA1C58DCD8F27D6BED735AD17BE44D56B0D14DDDA5D13686" );
    var_0 notify( "_encstr_B8091ECE56D0B4B163B2D7F61B8D57E02C9BD85E7DB5B737B4D1F6C951872D3A" );
    var_0 notify( "_encstr_B41323EC950D96D8C6CABEDBC6D8ABE016371BBCD76B7B73B48EED27A30B6BCA54DC23AC32" );
}

vehicle_occupancy_monitorseatswitch( var_0, var_1, var_2, var_3 )
{
    var_1 endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_1 endon( "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_AA1A09EB7A8DC85DE22BD1" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_1 notify( "_encstr_8FFD243BB286A5D86359FADED88DBA1C58DCD8F27D6BED735AD17BE44D56B0D14DDDA5D13686" );
    var_1 endon( "_encstr_8FFD243BB286A5D86359FADED88DBA1C58DCD8F27D6BED735AD17BE44D56B0D14DDDA5D13686" );
    var_4 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( var_4.seatdata.size <= 1 )
        return;

    var_5 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_2 );

    if ( !isdefined( var_5.seatswitcharray ) || var_5.seatswitcharray.size <= 0 )
        return;

    if ( !isbot( var_1 ) )
    {
        if ( var_3 )
            wait 0.2;

        while ( var_1 aiupdatecoverexposetype() )
            waitframe();

        while ( !var_1 aiupdatecoverexposetype() )
            waitframe();

        var_6 = vehicle_occupancy_getnextavailableseat( var_0, var_1, var_2 );

        if ( isdefined( var_6 ) )
            thread vehicle_occupancy_enter( var_0, var_6, var_1 );

        _id_141D1( var_1, 1 );
        thread vehicle_occupancy_monitorseatswitch( var_0, var_1, var_2, 0 );
    }
}

vehicle_occupancy_getnextavailableseat( var_0, var_1, var_2 )
{
    var_3 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_2 );

    if ( !isdefined( var_3.seatswitcharray ) || var_3.seatswitcharray.size <= 0 )
        return undefined;

    foreach ( var_5 in var_3.seatswitcharray )
    {
        if ( vehicle_occupancy_seatisavailable( var_0, var_5, var_1 ) )
            return var_5;
    }
}

vehicle_occupancy_monitorexit( var_0, var_1, var_2 )
{
    var_1 notify( "_encstr_B8091ECE56D0B4B163B2D7F61B8D57E02C9BD85E7DB5B737B4D1F6C951872D3A" );
    var_1 endon( "_encstr_B8091ECE56D0B4B163B2D7F61B8D57E02C9BD85E7DB5B737B4D1F6C951872D3A" );
    var_0 endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    vehicle_occupancy_monitorexitinternal( var_0, var_1, var_2 );
    var_3 = spawnstruct();

    if ( isdefined( var_1 ) )
    {
        if ( !var_1 scripts\cp_mp\utility\player_utility::_isalive() )
            var_3.playerdeath = 1;

        if ( istrue( var_1.inlaststand ) )
            var_3.playerlaststand = 1;
    }
    else
        var_3.playerdisconnect = 1;

    thread vehicle_occupancy_exit( var_0, var_2, var_1, var_3 );
}

vehicle_occupancy_monitorexitinternal( var_0, var_1, var_2 )
{
    var_1 endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_1 endon( "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );
    var_3 = gettime() + 1000;
    var_4 = 0;
    var_1 setclientomnvar( "_encstr_9D0D1C73689F838F18A06D7843639F4E2318EB6AF8C77CEFB01564916969", 0 );

    for (;;)
    {
        if ( !var_1 usebuttonpressed() )
            var_4 = 1;

        if ( var_4 && gettime() >= var_3 )
            break;

        waitframe();
    }

    var_5 = level.framedurationseconds;
    var_6 = getdvarint( "_encstr_9F3D0B9A2AA87A62895AB4622A", 250 ) / 1000;

    for (;;)
    {
        var_7 = 0;
        var_8 = var_1 getspawnbucketforplayer();
        var_9 = 0;
        var_1 setclientomnvar( "_encstr_9D0D1C73689F838F18A06D7843639F4E2318EB6AF8C77CEFB01564916969", 0 );
        var_10 = isdefined( var_0 ) && istrue( var_0.loadandplayholoeffect );

        while ( var_1 usebuttonpressed() )
        {
            var_1 enablereloading();
            var_1 reloadbuttonpressed();
            var_9 = 1;
            var_7 = var_7 + var_5;
            var_11 = var_1 usinggamepad();
            var_12 = var_1 sendcollectedclientanticheatdata();
            var_13 = !var_11 && !var_12;
            var_14 = !var_11 && var_12;
            var_15 = var_11 && var_8 == 0;
            var_16 = var_11 && var_8 > 0;
            var_17 = var_15 || var_14;

            if ( var_15 || var_14 )
                var_1 setclientomnvar( "_encstr_9D0D1C73689F838F18A06D7843639F4E2318EB6AF8C77CEFB01564916969", var_7 / 0.3 );

            if ( ( var_17 && var_7 > 0.3 || var_13 ) && !var_10 )
                return;
            else if ( var_16 && var_7 >= var_6 )
            {
                var_1 forcereloading();
                var_1 cancelreloading();
            }

            wait( var_5 );
        }

        if ( var_9 && var_1 usinggamepad() && var_8 > 0 && var_7 < var_6 && !var_10 )
            return;
        else if ( var_9 )
        {
            var_1 forcereloading();
            var_1 cancelreloading();
        }

        waitframe();
    }
}

_id_141D1( var_0, var_1 )
{
    var_2 = undefined;

    switch ( var_1 )
    {
        case 1:
            var_2 = "_encstr_B7681EB215849234C4159ACBD42A8215AF35AE298A1A90BEF4A1A155A025A222";
            break;
        case 2:
            var_2 = "_encstr_A90D15D97F204CE79807E6D0EE20B5D45F5309C9B38927";
            break;
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) )
        var_0 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) ]]( var_2 );
}

_id_141E9( var_0, var_1, var_2 )
{
    var_1 endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_1 endon( "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );
    var_1 notify( "_encstr_B41323EC950D96D8C6CABEDBC6D8ABE016371BBCD76B7B73B48EED27A30B6BCA54DC23AC32" );
    var_1 endon( "_encstr_B41323EC950D96D8C6CABEDBC6D8ABE016371BBCD76B7B73B48EED27A30B6BCA54DC23AC32" );

    if ( var_2 == vehicle_occupancy_getdriverseat( var_0 ) )
    {
        level waittill( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
        var_1 allowmovement( 0 );
    }
}

_id_141E8( var_0, var_1, var_2 )
{
    var_1 endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_1 endon( "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );
    var_0 endon( "_encstr_A3750609A5E61883" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    var_1 notify( "_encstr_951622BB35705F51710F210F01D0D307FE5DFF0B1947CD08ABE9A2206732AD73856D685B" );
    var_1 endon( "_encstr_951622BB35705F51710F210F01D0D307FE5DFF0B1947CD08ABE9A2206732AD73856D685B" );

    if ( scripts\cp_mp\utility\vehicle_omnvar_utility::_id_1427A( var_1 ) )
        return;

    if ( 1 )
        wait 1.5;

    childthread _id_141EA( var_0, var_1, var_2 );
    childthread _id_141EB( var_0, var_1, var_2, 0 );
    var_3 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_2 );

    if ( isdefined( var_3._id_13E8B ) )
        childthread _id_141EB( var_0, var_1, var_2, 1 );

    var_4 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

    if ( isdefined( var_4._id_11D02 ) )
        childthread [[ var_4._id_11D02 ]]( var_0, var_1, var_2, "_encstr_951622BB35705F51710F210F01D0D307FE5DFF0B1947CD08ABE9A2206732AD73856D685B" );
}

_id_141D2( var_0 )
{
    scripts\cp_mp\utility\vehicle_omnvar_utility::_id_1427B( var_0 );
    var_0 notify( "_encstr_951622BB35705F51710F210F01D0D307FE5DFF0B1947CD08ABE9A2206732AD73856D685B" );
}

_id_141EA( var_0, var_1, var_2 )
{
    var_3 = vehicle_occupancy_getdriverseat( var_0 );

    if ( var_2 == var_3 )
    {
        var_4 = var_0 scripts\cp_mp\vehicles\vehicle::vehiclecanfly();

        if ( var_4 )
        {
            for (;;)
            {
                var_5 = var_0 getplayerip( 0 );
                var_6 = var_0 getplayerip( 2 );
                var_7 = var_0 getplayerip( 1 );
                var_8 = var_0 getplayerip( 3 );

                if ( abs( var_5 ) > 0 || abs( var_6 ) > 0 || abs( var_7 ) > 0 || abs( var_8 ) > 0 )
                    _id_141D2( var_1 );

                wait 0.05;
            }
        }
        else
        {
            for (;;)
            {
                var_9 = var_0 getplayerip( 4 );

                if ( abs( var_9 ) >= 0.2 )
                    _id_141D2( var_1 );

                wait 0.05;
            }
        }
    }
}

_id_141EB( var_0, var_1, var_2, var_3 )
{
    var_4 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_2 );
    var_5 = var_4._id_13E8A;

    if ( istrue( var_3 ) )
        var_5 = var_4._id_13E8B;

    if ( var_0 _calloutmarkerping_isvehicleoccupiedbyenemy::unreachable_function() || var_0 _calloutmarkerping_handleluinotify_mappingdeletemarker::unresolvedcollisiontolerancesqr() )
        return;

    if ( isdefined( var_5 ) )
    {
        var_6 = scripts\cp_mp\vehicles\vehicle::_id_14192( var_0, var_5 );

        if ( isdefined( var_6 ) )
        {
            var_6 scripts\engine\utility::_id_143A5( "_encstr_B7BA0C7308EBDAFA5918279CF613", "_encstr_80BE0EDB1BD3D365731666238A650A61" );
            _id_141D2( var_1 );
        }
    }
}

vehicle_occupancy_raceplayerdeathdisconnect( var_0, var_1 )
{
    var_1 endon( var_1.raceendon );
    var_2 = var_0 scripts\engine\utility::_id_143B5( "_encstr_A3750609A5E61883", "_encstr_8A820B4696CDB1ED3737AC1B3A", "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );

    if ( var_2 == "_encstr_A3750609A5E61883" )
        var_1.playerdeath = 1;
    else if ( var_2 == "_encstr_8A820B4696CDB1ED3737AC1B3A" )
        var_1.playerdisconnect = 1;
    else if ( var_2 == "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" )
        var_1.playerlaststand = 1;

    var_1 notify( var_1.raceendnotify );
}

vehicle_occupancy_racevehicledeath( var_0, var_1 )
{
    var_1 endon( var_1.raceendon );
    var_0 waittill( "_encstr_A3750609A5E61883" );
    var_1.vehicledeath = 1;
    var_1 notify( var_1.raceendnotify );
}

vehicle_occupancy_raceseatunavailable( var_0, var_1, var_2, var_3, var_4 )
{
    var_4 endon( var_4.raceendon );

    while ( isdefined( var_0 ) )
    {
        if ( !vehicle_occupancy_seatisavailable( var_0, var_2, var_1 ) )
        {
            var_4.seatunavailable = 1;
            var_4 notify( var_4.raceendnotify );
            break;
        }

        waitframe();
    }
}

vehicle_occupancy_racecomplete( var_0, var_1, var_2 )
{
    var_2 endon( var_2.raceendon );

    if ( isdefined( var_0 ) && isdefined( var_1 ) )
    {
        while ( !istrue( var_2.enterstartcomplete ) || !istrue( var_2.exitstartcomplete ) )
            waitframe();
    }
    else if ( isdefined( var_0 ) )
    {
        while ( !istrue( var_2.exitstartcomplete ) )
            waitframe();
    }
    else
    {
        while ( !istrue( var_2.enterstartcomplete ) )
            waitframe();
    }

    var_2 notify( var_2.raceendnotify );
}

vehicle_occupancy_raceresults( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !isdefined( var_4.success ) )
        var_4.success = 1;

    if ( var_4.immediate )
    {
        var_4.playerdisconnect = scripts\engine\utility::ter_op( isdefined( var_1 ), 0, 1 );

        if ( !var_4.playerdisconnect )
        {
            var_4.playerdeath = !var_1 scripts\cp_mp\utility\player_utility::_isalive();
            var_4.playerlaststand = istrue( var_1.inlaststand );
        }

        var_4.vehicledeath = istrue( var_0.isdestroyed );
    }
    else if ( var_4.success )
    {
        if ( isdefined( var_2 ) && !istrue( var_4.exitstartcomplete ) )
            var_4.success = 0;

        if ( isdefined( var_3 ) && !istrue( var_4.enterstartcomplete ) )
            var_4.success = 0;

        if ( istrue( var_4.vehicledeath ) )
            var_4.success = 0;
    }
    else
        return 0;

    if ( isdefined( var_3 ) )
    {
        if ( istrue( var_4.playerdeath ) || istrue( var_4.playerlaststand ) || istrue( var_4.playerdisconnect ) || istrue( var_4.vehicledeath ) || istrue( var_4.seatunavailable ) )
            var_4.success = 0;
    }
    else
    {

    }

    return var_4.success;
}

vehicle_occupancy_watchowner( var_0, var_1, var_2, var_3 )
{
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_B96B150B9FA0807E124F5F2F43AAB7807FF5D380070279" + var_1 getentitynumber() );

    if ( istrue( var_2 ) )
        var_1 waittill( "_encstr_B39D12E3CD5112EB8DB8E76F8099B43913DBAC1B" );

    var_4 = scripts\engine\utility::ter_op( isdefined( var_3 ), var_3, 20 );
    wait( var_4 );
    thread vehicle_occupancy_clearowner( var_0, var_1 );
}

vehicle_occupancy_watchownerjoinedteam( var_0, var_1 )
{
    var_1 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 endon( "_encstr_B67C1528DF92B366FDFD1E6260482798094B7A3AC91BD7" );
    var_1 scripts\engine\utility::_id_143A5( "_encstr_B2170C4AD884CDC823B9DB9D9F42", "_encstr_8CD0124A97D7F07BAD07C8C342FAA010C490DD5B" );
    thread vehicle_occupancy_updateowner( var_0 );
}

vehicle_occupancy_isplayervalidowner( var_0, var_1 )
{
    if ( !isdefined( var_1 ) )
        return 0;

    if ( level.teambased && isdefined( var_0.team ) )
    {
        if ( var_0.team != "_encstr_9BA4080D39CFFB5AB7C1" && var_1.team != var_0.team )
            return 0;
    }
    else if ( isdefined( var_0.originalowner ) )
    {
        if ( var_1 != var_0.originalowner )
            return 0;
    }

    return 1;
}

vehicle_occupancy_animateplayer( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    thread vehicle_occupancy_stopanimatingplayer();
    self endon( "_encstr_8AC0269DCA344B368D957DDBD836AE1C58CD36BCFA9BA3F61C50B9A56B581D2DB97605D8C2BC954E" );
    var_6 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_1 );

    if ( !isdefined( var_6.animtag ) )
        return;

    var_7 = spawn( "_encstr_93DC0DCD1B272D3847AF5BED23B2C6", var_0 gettagorigin( var_6.animtag ) );
    var_7.angles = var_0 gettagangles( var_6.animtag );
    var_7 linkto( var_0, var_6.animtag, ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_7 setmodel( "_encstr_9BC813A0B775E3D91265C55631FA13ABDDD7D0309A" );
    var_7 hide();
    self.animrig = var_7;

    if ( isdefined( var_4 ) || isdefined( var_5 ) )
    {
        allowfultondropondeath( var_4, var_5 );
        thread allowleaderboardstatsupdates( 1 );
    }

    self animscriptentervehicle();

    if ( tolower( var_6.animtag ) == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
    {
        self vehicle_setstowedweaponvisibility( 0 );
        self vehicle_setheldweaponvisibility( 0 );
    }
    else if ( vehicle_shouldhideoccupantforseat( var_0, var_1 ) )
    {
        self vehicle_setstowedweaponvisibility( 0 );
        self vehicle_setheldweaponvisibility( 0 );
    }
    else
    {
        if ( istrue( var_6.hidestowedweapon ) )
            self vehicle_setstowedweaponvisibility( 0 );

        if ( istrue( var_6.hideheldweapon ) )
            self vehicle_setheldweaponvisibility( 0 );
    }

    if ( !isdefined( var_6._id_13E8A ) )
    {
        if ( !isdefined( var_2 ) )
            self setplayerangles( var_7.angles * ( 0, 1, 0 ) );
        else if ( tolower( var_6.animtag ) == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
            self setplayerangles( var_7.angles * ( 0, 1, 0 ) );
    }

    self cancelmantle();
    var_8 = undefined;
    var_9 = istrue( var_6._id_1409C );

    if ( istrue( var_8 ) )
        self playerlinktodelta( var_7, "_encstr_BA010BA012DFB703A379A39542", 0, getdvarfloat( "_encstr_AA532296F60B97EB45BB5810B39D2733821B1691CE5291B43EA788904FB4193DEA870B25", 180 ), getdvarfloat( "_encstr_BD79212FA04A8F9CED31F0D3538D6DE43FB3EEA9F02DA2F70BCFAB8341A745CB4081E3", 180 ), getdvarfloat( "_encstr_B6CA20E7EF1ED156301854DE70D8BE4A7D2FBF1353C96B17F0818A62C8E8D5D1C0B9", 180 ), getdvarfloat( "_encstr_B117232B5A9B07E891B2BFE7EC189C90B1BB298DC9506BF83B77D37340BBF22DBA4C902745", 180 ), var_9, 1, 0 );
    else if ( var_6.viewclamps.size > 0 )
        self playerlinktodelta( var_7, "_encstr_BA010BA012DFB703A379A39542", 0, var_6.viewclamps["_encstr_9353062E718710C9"], var_6.viewclamps["_encstr_B1AD05C65666E8"], var_6.viewclamps["_encstr_B91904EC4718"], var_6.viewclamps["_encstr_A94607EE8F336B37B5"], var_9, 1, 0 );
    else
        self playerlinktodelta( var_7, "_encstr_BA010BA012DFB703A379A39542", 0, 180, 180, 180, 180, var_9, 1, 0 );

    if ( istrue( var_6._id_145E0 ) )
    {
        self.animrig._id_145E0 = 1;
        self setworldupreference( var_0 );
    }

    var_10 = vehicle_occupancy_getanimbasename( var_0.vehiclename, var_1 );

    if ( vehicle_occupancy_checkvalidanimtype( var_10, var_3 ) )
    {
        self.animname = var_10;
        var_7.animname = var_10;
        var_7 useanimtree( level.scr_animtree[var_10] );
        vehicle_occupancy_watchplayeranimate( var_0, var_3, var_6.animtag );
    }
    else
        scripts\engine\utility::_id_143A5( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3", "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );

    if ( isdefined( self ) )
        thread vehicle_occupancy_stopanimatingplayer();

    var_7 delete();
}

vehicle_occupancy_watchplayeranimate( var_0, var_1, var_2 )
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self endon( "_encstr_8BE0118D16E68ED7DC3AB0CDC8D7CD47589C3A" );

    for (;;)
        var_0 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_95830561050CA8", "_encstr_A1360C387169A767DDC91BD278CF" ) ]]( self, self.animrig, var_1, var_2 );
}

vehicle_occupancy_stopanimatingplayer()
{
    if ( !isdefined( self.animrig ) )
        return;

    self notify( "_encstr_8AC0269DCA344B368D957DDBD836AE1C58CD36BCFA9BA3F61C50B9A56B581D2DB97605D8C2BC954E" );
    self vehicle_setstowedweaponvisibility( 1 );
    self vehicle_setheldweaponvisibility( 1 );
    self animscriptexitvehicle();
    self stopanimscriptsceneevent();

    if ( istrue( self.animrig._id_145E0 ) )
        self setworldupreference( undefined );

    self.animname = undefined;
    self.animrig delete();
}

allowfultondropondeath( var_0, var_1 )
{
    self notify( "_encstr_BA8724BC33C776D81C24F39D4D0458B64BBAB761AA7B37F03435C7F77EEF90850772A869E2CF" );
    self overridevehicleseatanimconditionals( var_0, var_1 );
}

allowleaderboardstatsupdates( var_0 )
{
    self endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    self notify( "_encstr_BA8724BC33C776D81C24F39D4D0458B64BBAB761AA7B37F03435C7F77EEF90850772A869E2CF" );
    self endon( "_encstr_BA8724BC33C776D81C24F39D4D0458B64BBAB761AA7B37F03435C7F77EEF90850772A869E2CF" );

    if ( istrue( var_0 ) )
        waitframe();

    self overridevehicleseatanimconditionals( "_encstr_A40101", 0 );
}

vehicle_occupancy_checkvalidanimtype( var_0, var_1 )
{
    if ( !isdefined( level.scr_anim[var_0] ) )
        return 0;

    return isdefined( level.scr_anim[var_0][var_1] );
}

vehicle_occupancy_getanimbasename( var_0, var_1 )
{
    return var_0 + "_encstr_984C028E" + var_1;
}

vehicle_occupancy_allowmovement( var_0, var_1 )
{
    if ( var_1 )
    {
        var_0.movementdisabled--;

        if ( var_0.movementdisabled == 0 )
        {
            if ( isdefined( var_0.occupants ) )
            {
                scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_hidewarning( "_encstr_93E4112B4F934590659D839D445B380E8ACFA1", var_0.occupants, var_0.vehiclename );

                foreach ( var_4, var_3 in var_0.occupants )
                    vehicle_occupancy_allowmovementplayer( var_0, var_3, 1, var_4 );
            }

            return 1;
        }
    }
    else
    {
        if ( !isdefined( var_0.movementdisabled ) )
            var_0.movementdisabled = 0;

        var_0.movementdisabled++;

        if ( var_0.movementdisabled == 1 )
        {
            if ( isdefined( var_0.occupants ) )
            {
                scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_showwarning( "_encstr_93E4112B4F934590659D839D445B380E8ACFA1", var_0.occupants, var_0.vehiclename );

                foreach ( var_4, var_3 in var_0.occupants )
                    vehicle_occupancy_allowmovementplayer( var_0, var_3, 0, var_4 );
            }

            return 0;
        }
    }
}

vehicle_occupancy_clearallowmovement( var_0 )
{
    if ( isdefined( self.occupants ) )
    {
        foreach ( var_3, var_2 in self.occupants )
            vehicle_occupancy_allowmovementplayer( 1, var_2, var_3 );
    }

    var_0.movementdisabled = undefined;
}

vehicle_occupancy_allowmovementplayer( var_0, var_1, var_2, var_3 )
{
    if ( var_2 )
    {
        if ( istrue( var_1.vehicledisabledmovement ) )
        {
            if ( var_1 scripts\cp_mp\utility\player_utility::_isalive() )
                var_1 scripts\common\utility::allow_movement( 1 );

            var_1.vehicledisabledmovement = undefined;
        }
    }
    else
    {
        var_4 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_3 );

        if ( isdefined( var_4.animtag ) && var_4.animtag == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
        {
            if ( !istrue( var_1.vehicledisabledmovement ) )
            {
                if ( var_1 scripts\cp_mp\utility\player_utility::_isalive() )
                {
                    var_1 scripts\common\utility::allow_movement( 0 );
                    var_1.vehicledisabledmovement = 1;
                }
            }
        }
    }
}

_id_141CA( var_0, var_1 )
{
    if ( !istrue( var_1 ) && istrue( var_0.vehicledisabledmovement ) )
        var_0 scripts\common\utility::allow_movement( 1 );

    var_0.vehicledisabledmovement = undefined;
}

vehicle_occupancy_movementisallowed( var_0 )
{
    return !isdefined( var_0.movementdisabled ) || var_0.movementdisabled <= 0;
}

vehicle_occupancy_getexitpositionandangles( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = vehicle_occupancy_getexitboundinginfo( var_0 );
    var_6 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_2 );
    var_7 = [];

    foreach ( var_9 in var_6.exitids )
    {
        var_10 = vehicle_occupancy_getexitposition( var_0, var_1, var_9, var_5, var_3 );

        if ( isdefined( var_10 ) )
        {
            var_7[0] = var_10;
            var_11 = undefined;

            if ( !isdefined( var_6.animtag ) || var_6.animtag != "_encstr_A90D0BC8EF0F8E870A0E75E832" )
                var_11 = vehicle_occupancy_getexitangles( var_0, var_1, var_9, var_4 );

            if ( isdefined( var_0.vehiclename ) && ( var_0.vehiclename == "_encstr_B7C80A23E9733716DA39060C" || var_0.vehiclename == "_encstr_82F407ABC5611796BB" ) )
                var_11 = ( 0, var_0.angles[1], 0 );

            var_7[1] = var_11;
            return var_7;
        }
    }

    return undefined;
}

vehicle_occupancy_getexitposition( var_0, var_1, var_2, var_3, var_4 )
{
    if ( istrue( var_3.exitsfailed[var_2] ) )
        return undefined;

    if ( isdefined( var_3.exitpositions[var_2] ) )
        return var_3.exitpositions[var_2];

    var_5 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_6 = var_5.exitoffsets[var_2];
    var_7 = var_5.exitdirections[var_2];

    if ( !isdefined( var_6 ) )
        var_6 = ( 0, 0, 0 );

    var_8 = [ "_encstr_9E9C1638865EB95A6CE68DDEE64795B98E6EAF9BF6B1968C", "_encstr_9DD6156A78B803FAD687D7EF95056246B86329B453E0D5", "_encstr_B7F9145B18AB8AF721FE235718AB8F95E96811E39843", "_encstr_941116D7F47B0FC88317C8B07BCC017DD35AD8D44D52D773", "_encstr_B7D018B89C4B13AC473342305523920D607E50E3571038A69138", "_encstr_BA411B0E0DF2B9B4D8CD1BB7B9D1B2B93A37D707C6162FAC9C8DB196E0" ];

    if ( getdvarint( "_encstr_B7F515E68D4EF5B3CA1AD28DD8B251874BA375C2D1B293", 1 ) == 0 )
        var_8[var_8.size] = "_encstr_A18816F8C3E1EFFCFF5A92BF8363BBF55BCBD9C3538DF74D";

    var_9 = physics_createcontents( var_8 );
    var_10 = var_0 getlinkedchildren( 1 );

    if ( !isdefined( var_10 ) )
        var_10 = [];

    var_10[var_10.size] = var_0;
    var_11 = scripts\engine\utility::ter_op( isdefined( var_5.exittopcastoffset ), var_5.exittopcastoffset, 20 );
    var_12 = var_6[0];
    var_12 = clamp( var_12, var_3.offsets["_encstr_959B05982C8DDA"], var_3.offsets["_encstr_875606482B58E505"] );
    var_13 = scripts\engine\utility::ter_op( var_3.flipleftright, var_6[1] * -1, var_6[1] );
    var_13 = clamp( var_13, var_3.offsets["_encstr_9353062E718710C9"], var_3.offsets["_encstr_B1AD05C65666E8"] );
    var_14 = ( 0, var_0.angles[1], 0 );
    var_15 = var_0.origin;
    var_15 = var_15 + var_12 * anglestoforward( var_14 );
    var_15 = var_15 + var_13 * anglestoright( var_14 );
    var_16 = var_3.offsets["_encstr_A94607EE8F336B37B5"] + ( var_3.offsets["_encstr_B91904EC4718"] - var_3.offsets["_encstr_A94607EE8F336B37B5"] ) / 2;
    var_17 = var_3.offsets["_encstr_B91904EC4718"] + var_11;
    var_18 = undefined;
    var_19 = undefined;
    var_20 = var_15 + ( 0, 0, var_17 );
    var_15 = var_15 + ( 0, 0, var_16 );
    var_21 = "_encstr_9CEF11339FFFC15AD060AF2F50A819AA4BADFF";

    if ( !var_0 tagexists( var_21 ) )
        var_21 = "_encstr_8B1E09E97A4FAFAD55C15A";

    var_22 = var_0 gettagorigin( var_21 );
    var_23 = 0;
    var_24 = physics_raycast( var_22, var_15, var_9, var_10, 0, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3", 1 );

    if ( isdefined( var_24 ) && var_24.size > 0 )
        var_23 = 1;

    if ( var_23 )
        var_3.exitsfailed[var_2] = 1;
    else
    {
        var_23 = 0;
        var_24 = physics_raycast( var_15, var_20, var_9, var_10, 0, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3", 1 );

        if ( isdefined( var_24 ) && var_24.size > 0 )
        {
            var_25 = 2;
            var_26 = ( var_17 - var_16 ) * var_24[0]["_encstr_B130095358E1B3930B687D"];

            if ( var_26 <= 72 + var_25 )
                var_23 = 1;
            else
                var_20 = var_24[0]["_encstr_B7260923C89E8F3378E72E"] - ( 0, 0, var_25 );
        }

        if ( var_23 )
        {
            var_3.exitsfailed[var_2] = 1;
            return;
        }

        var_7 = tolower( var_7 );

        if ( var_3.flipleftright )
        {
            if ( var_7 == "_encstr_B1AD05C65666E8" )
                var_7 = "_encstr_9353062E718710C9";
            else if ( var_7 == "_encstr_9353062E718710C9" )
                var_7 = "_encstr_B1AD05C65666E8";
        }

        var_15 = var_20;
        var_27 = ( 0, 0, 0 );
        var_28 = ( 0, 0, 0 );
        var_29 = ( 0, 0, 0 );
        var_30 = ( 0, 0, 0 );
        var_31 = ( 0, 0, 0 );
        var_32 = ( 0, 0, 0 );

        if ( var_7 == "_encstr_B1AD05C65666E8" )
        {
            var_27 = var_27 + ( var_12, 0, 0 );
            var_27 = var_27 + ( 0, var_3.offsets["_encstr_B1AD05C65666E8"], 0 );
            var_30 = var_30 + ( 0, 32, 0 );
        }
        else if ( var_7 == "_encstr_9353062E718710C9" )
        {
            var_27 = var_27 + ( var_12, 0, 0 );
            var_27 = var_27 + ( 0, var_3.offsets["_encstr_9353062E718710C9"], 0 );
            var_30 = var_30 + ( 0, -32, 0 );
        }
        else if ( var_7 == "_encstr_875606482B58E505" )
        {
            var_27 = var_27 + ( var_3.offsets["_encstr_875606482B58E505"], 0, 0 );
            var_27 = var_27 + ( 0, var_13, 0 );
            var_30 = var_30 + ( 32, 0, 0 );
        }
        else if ( var_7 == "_encstr_959B05982C8DDA" )
        {
            var_27 = var_27 + ( var_3.offsets["_encstr_959B05982C8DDA"], 0, 0 );
            var_27 = var_27 + ( 0, var_13, 0 );
            var_30 = var_30 + ( -32, 0, 0 );
        }

        var_28 = ( 0, 0, var_17 );
        var_29 = var_27 + var_28;
        var_32 = var_30;
        var_15 = var_20;
        var_20 = var_0.origin + rotatevector( var_29 + var_32, var_14 );
        var_23 = 0;
        var_24 = physics_raycast( var_15, var_20, var_9, var_10, 0, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3", 1 );

        if ( isdefined( var_24 ) && var_24.size > 0 )
            var_23 = 1;

        if ( var_23 )
        {
            var_3.exitsfailed[var_2] = 1;
            return;
        }

        var_30 = var_30 / 2;
        var_31 = ( 0, 0, -72 );
        var_32 = var_30 + var_31;
        var_28 = ( 0, 0, var_3.offsets["_encstr_B91904EC4718"] ) + ( 0, 0, var_11 );
        var_29 = var_27 + var_28;
        var_15 = var_0.origin + rotatevector( var_29 + var_32, var_14 );
        var_28 = ( 0, 0, var_3.offsets["_encstr_A94607EE8F336B37B5"] ) - ( 0, 0, 40 );
        var_29 = var_27 + var_28;
        var_31 = ( 0, 0, 0 );
        var_32 = var_30 + var_31;
        var_20 = var_0.origin + rotatevector( var_29 + var_32, var_14 );
        var_23 = 0;
        var_24 = physics_charactercast( var_15, var_20, var_1, 0, ( 0, 0, 0 ), var_9, var_10, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3", "_encstr_B3C411793B0B26E8CB729B139FA21048E2BBE3" );

        if ( isdefined( var_24 ) && var_24.size > 0 )
        {
            if ( var_24[1] )
                var_23 = 1;
            else if ( var_24[0].size == 0 )
            {
                if ( !istrue( var_4 ) )
                    var_23 = 1;
                else
                    var_20 = var_20 + ( 0, 0, 40 );
            }
            else
                var_20 = var_24[0][0]["_encstr_8B320F8A639B5B058EE8CFB7C803F1526D"];
        }

        if ( var_23 )
        {
            var_3.exitsfailed[var_2] = 1;
            return;
        }

        var_3.exitpositions[var_2] = var_20;
    }
}

vehicle_occupancy_getexitboundinginfo( var_0 )
{
    var_1 = undefined;

    if ( isdefined( var_0.exitboundinginfo ) && var_0.exitboundinginfo.timestamp == gettime() )
        var_1 = var_0.exitboundinginfo;
    else
    {
        var_2 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );

        if ( isdefined( var_2 ) && isdefined( var_2.exitextents ) )
        {
            var_3 = rotatevector( ( var_2.exitextents["_encstr_875606482B58E505"], var_2.exitextents["_encstr_B1AD05C65666E8"] * -1, var_2.exitextents["_encstr_B91904EC4718"] ), var_0.angles );
            var_4 = rotatevector( ( var_2.exitextents["_encstr_875606482B58E505"], var_2.exitextents["_encstr_9353062E718710C9"], var_2.exitextents["_encstr_B91904EC4718"] ), var_0.angles );
            var_5 = rotatevector( ( var_2.exitextents["_encstr_959B05982C8DDA"] * -1, var_2.exitextents["_encstr_B1AD05C65666E8"] * -1, var_2.exitextents["_encstr_B91904EC4718"] ), var_0.angles );
            var_6 = rotatevector( ( var_2.exitextents["_encstr_959B05982C8DDA"] * -1, var_2.exitextents["_encstr_9353062E718710C9"], var_2.exitextents["_encstr_B91904EC4718"] ), var_0.angles );
            var_7 = rotatevector( ( var_2.exitextents["_encstr_875606482B58E505"], var_2.exitextents["_encstr_B1AD05C65666E8"] * -1, var_2.exitextents["_encstr_A94607EE8F336B37B5"] * -1 ), var_0.angles );
            var_8 = rotatevector( ( var_2.exitextents["_encstr_875606482B58E505"], var_2.exitextents["_encstr_9353062E718710C9"], var_2.exitextents["_encstr_A94607EE8F336B37B5"] * -1 ), var_0.angles );
            var_9 = rotatevector( ( var_2.exitextents["_encstr_959B05982C8DDA"] * -1, var_2.exitextents["_encstr_B1AD05C65666E8"] * -1, var_2.exitextents["_encstr_A94607EE8F336B37B5"] * -1 ), var_0.angles );
            var_10 = rotatevector( ( var_2.exitextents["_encstr_959B05982C8DDA"] * -1, var_2.exitextents["_encstr_9353062E718710C9"], var_2.exitextents["_encstr_A94607EE8F336B37B5"] * -1 ), var_0.angles );
            var_11 = [ var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10 ];
            var_12 = -99999;
            var_13 = 99999;
            var_14 = -99999;
            var_15 = 99999;
            var_16 = -99999;
            var_17 = 99999;
            var_18 = ( 0, var_0.angles[1], 0 );

            foreach ( var_20 in var_11 )
            {
                var_20 = rotatevectorinverted( var_20, var_18 );

                if ( var_20[0] > var_12 )
                    var_12 = var_20[0];

                if ( var_20[0] < var_13 )
                    var_13 = var_20[0];

                if ( var_20[1] < var_15 )
                    var_15 = var_20[1];

                if ( var_20[1] > var_14 )
                    var_14 = var_20[1];

                if ( var_20[2] > var_16 )
                    var_16 = var_20[2];

                if ( var_20[2] < var_17 )
                    var_17 = var_20[2];
            }

            var_1 = spawnstruct();
            var_0.exitboundinginfo = var_1;
            var_1 = var_1;
            var_1.vehicle = var_0;
            var_1.timestamp = gettime();
            var_1.offsets["_encstr_875606482B58E505"] = var_12;
            var_1.offsets["_encstr_959B05982C8DDA"] = var_13;
            var_1.offsets["_encstr_B1AD05C65666E8"] = var_14;
            var_1.offsets["_encstr_9353062E718710C9"] = var_15;
            var_1.offsets["_encstr_B91904EC4718"] = var_16;
            var_1.offsets["_encstr_A94607EE8F336B37B5"] = var_17;
            var_1.exitsfailed = [];
            var_1.exitpositions = [];
            var_1.orientedboxpoints = [];
            var_1.unorientedboxpoints = [];
            var_1.flipleftright = abs( angleclamp180( var_0.angles[2] ) ) > 90;
            var_1 thread vehicle_cleanupexitboundinginfo();
        }
    }

    return var_1;
}

vehicle_cleanupexitboundinginfo()
{
    waitframe();

    if ( isdefined( self.vehicle ) )
        return;

    if ( !isdefined( self.vehicle.exitboundinginfo ) )
        return;

    if ( self.vehicle.exitboundinginfo.timestamp != self.timestamp )
        return;

    self.vehicle.exitboundinginfo = undefined;
}

vehicle_occupancy_getexitangles( var_0, var_1, var_2, var_3 )
{
    if ( istrue( level.playerlocationtriggerexit ) )
    {
        var_4 = ( 0, var_0.angles[1], 0 );
        return var_4;
    }

    var_5 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_6 = vehicle_occupancy_getexitboundinginfo( var_0 );
    var_7 = var_6.exitpositions[var_2];
    var_8 = undefined;
    var_9 = 0;

    if ( istrue( var_3 ) )
    {
        var_8 = var_0.origin + rotatevector( var_5.exitoffsets[var_2], var_0.angles );
        var_9 = 1;
    }

    if ( !isdefined( var_8 ) )
        var_8 = var_1 getvieworigin() + anglestoforward( var_1 getplayerangles() ) * 550;

    var_10 = undefined;

    if ( istrue( var_3 ) )
        var_10 = var_7 + ( 0, 0, 22 );
    else
        var_10 = var_7 + ( 0, 0, 60 );

    var_11 = vectornormalize( var_8 - var_10 );

    if ( !var_9 )
    {
        var_12 = physics_createcontents( [ "_encstr_B7D018B89C4B13AC473342305523920D607E50E3571038A69138", "_encstr_9DD6156A78B803FAD687D7EF95056246B86329B453E0D5" ] );
        var_13 = physics_raycast( var_10, var_10 + var_11 * 300, var_12, undefined, 0, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3", 1 );

        if ( isdefined( var_13 ) && var_13.size > 0 )
        {
            var_14 = var_13[0]["_encstr_B60E07C9FD1C2055E3"];
            var_15 = 0;

            if ( isdefined( var_14 ) )
            {
                var_16 = var_0 getlinkedchildren( 1 );

                if ( !isdefined( var_16 ) )
                    var_16 = [];

                var_16[var_16.size] = var_0;

                foreach ( var_18 in var_16 )
                {
                    if ( var_14 == var_18 )
                    {
                        var_15 = 1;
                        break;
                    }
                }
            }

            if ( var_15 )
            {
                var_20 = var_5.exitdirections[var_2];
                var_4 = ( 0, var_0.angles[1], 0 );

                if ( var_20 == "_encstr_B1AD05C65666E8" || var_20 == "_encstr_9353062E718710C9" )
                    var_21 = anglestoright( var_4 );
                else
                    var_21 = anglestoforward( var_4 );

                var_11 = var_11 - var_21 * vectordot( var_11, var_21 );
            }
        }
    }

    var_22 = vectortoangles( var_11 );
    var_22 = ( clamp( var_22[0], -12, 12 ), var_22[1], 0 );
    return var_22;
}

vehicle_occupancy_getfallbackexitpositionandangles( var_0, var_1, var_2 )
{
    var_3 = vectordot( ( 0, 0, 1 ), anglestoup( var_0.angles ) ) < 0;
    var_4 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_5 = undefined;
    var_6 = undefined;

    if ( var_3 )
    {
        if ( !isdefined( var_4.exitfallbackoffsetinverted ) )
            return undefined;

        var_5 = var_4.exitfallbackoffsetinverted;
        var_6 = anglestoup( var_0.angles ) * -1;
    }
    else
    {
        if ( !isdefined( var_4.exitfallbackoffset ) )
            return undefined;

        var_5 = var_4.exitfallbackoffset;
        var_6 = anglestoup( var_0.angles );
    }

    var_7 = vehicle_occupancy_getexitcastcontents();
    var_8 = vehicle_occupancy_getexitcastignorelist( var_0 );
    var_9 = var_0.origin + var_6 * var_5;
    var_10 = physics_getclosestpointtocapsule( var_9, 16, 36, ( 0, 0, 0 ), 0, var_7, var_8, "_encstr_828C15A7C847CB7B768330689A4A13067764A09E5D87D3" );

    if ( !isdefined( var_10 ) || var_10.size <= 0 )
        return [ var_9, var_0.angles * ( 0, 1, 0 ) ];
    else
        return undefined;
}

vehicle_occupancy_findplayerexit( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !isdefined( var_0 ) || isdefined( var_3 ) || istrue( var_4.playerdeath ) && !istrue( var_4.playerlaststand ) )
        return 1;

    var_5 = vehicle_occupancy_getleveldataforvehicle( var_1.vehiclename );
    var_6 = istrue( var_5.allowairexit ) || istrue( var_4.allowairexit ) || !var_1 scripts\cp_mp\vehicles\vehicle_tracking::_issuspendedvehicle() && !var_1 vehicle_isonground();
    var_7 = vehicle_occupancy_getexitpositionandangles( var_1, var_0, var_2, var_6, var_4.playerlaststand );

    if ( isdefined( var_7 ) )
    {
        var_4.exitposition = var_7[0];
        var_4.exitangles = var_7[1];
        return 1;
    }
    else
    {
        if ( istrue( var_5.onprematchstarted2 ) )
        {
            var_8 = var_1 physics_getentitycenterofmass();
            var_9 = var_0 getboundsmidpoint();
            var_4.exitposition = var_8["_encstr_B90409AE736EB1B036598C"] - var_9;
            var_4.exitangles = undefined;
            return 1;
        }

        return 0;
    }
}

vehicle_occupancy_moveplayertoexit( var_0, var_1, var_2 )
{
    if ( !isdefined( var_0 ) || istrue( var_2.playerdeath ) && !istrue( var_2.playerlaststand ) || isdefined( var_1 ) )
        return 1;

    if ( isdefined( var_2.exitposition ) )
    {
        var_0 unlink();
        var_0 dontinterpolate();
        var_0 setorigin( var_2.exitposition, 1, 1 );
        var_0 setstance( "_encstr_B1AD06374716DC8C" );

        if ( isdefined( var_2.exitangles ) )
            var_0 setplayerangles( var_2.exitangles );

        return 1;
    }
    else
        return 0;
}

vehicle_occupancy_getexitcastcontents()
{
    return physics_createcontents( [ "_encstr_9E9C1638865EB95A6CE68DDEE64795B98E6EAF9BF6B1968C", "_encstr_941116D7F47B0FC88317C8B07BCC017DD35AD8D44D52D773", "_encstr_A18816F8C3E1EFFCFF5A92BF8363BBF55BCBD9C3538DF74D", "_encstr_B7F9145B18AB8AF721FE235718AB8F95E96811E39843", "_encstr_9DD6156A78B803FAD687D7EF95056246B86329B453E0D5", "_encstr_B7D018B89C4B13AC473342305523920D607E50E3571038A69138", "_encstr_BA411B0E0DF2B9B4D8CD1BB7B9D1B2B93A37D707C6162FAC9C8DB196E0" ] );
}

vehicle_occupancy_getexitcastignorelist( var_0 )
{
    var_1 = vehicle_occupancy_getleveldataforvehicle( var_0.vehiclename );
    var_2 = [ var_0 ];

    if ( isdefined( var_1.exitignorelistcallback ) )
        var_2 = [[ var_1.exitignorelistcallback ]]( var_0 );

    return var_2;
}

vehicle_occupancy_animtagtoexittag( var_0 )
{
    var_0 = tolower( var_0 );
    var_1 = getsubstr( var_0, 8, var_0.size );
    return "_encstr_876F0E29A167410E27BA2B76C26BCBD0" + var_1;
}

vehicle_occupancy_watchmovefeedback( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );

    for (;;)
    {
        vehicle_occupancy_updatemovefeedback( var_0 );
        waitframe();
    }
}

vehicle_occupancy_updatemovefeedback( var_0 )
{
    var_1 = vehicle_occupancy_getseatoccupant( self, var_0 );
    var_2 = vehicle_occupancy_getalloccupants( self );

    if ( isdefined( var_1 ) )
    {
        var_3 = var_1 getnormalizedmovement()[0];

        if ( abs( var_3 ) > 0.15 )
        {
            foreach ( var_5 in var_2 )
            {
                if ( var_5 scripts\cp_mp\utility\player_utility::_isalive() )
                    var_5 vehicle_occupancy_startmovefeedbackforplayer();
            }

            return;
        }

        foreach ( var_5 in var_2 )
        {
            if ( var_5 scripts\cp_mp\utility\player_utility::_isalive() )
                var_5 vehicle_occupancy_stopmovefeedbackforplayer();
        }

        return;
    }
    else if ( isdefined( var_2 ) )
    {
        foreach ( var_5 in var_2 )
        {
            if ( var_5 scripts\cp_mp\utility\player_utility::_isalive() )
                var_5 vehicle_occupancy_stopmovefeedbackforplayer();
        }
    }
}

vehicle_occupancy_startmovefeedbackforplayer()
{
    if ( istrue( self.vehiclemoveshakeenabled ) )
        return;

    self.vehiclemoveshakeenabled = 1;
    self setscriptablepartstate( "_encstr_8912118D054410E6E31AECD053BFB6505E9323", "_encstr_88B6083E286DBA96172B", 0 );
}

vehicle_occupancy_stopmovefeedbackforplayer()
{
    if ( !istrue( self.vehiclemoveshakeenabled ) )
        return;

    self.vehiclemoveshakeenabled = undefined;
    self setscriptablepartstate( "_encstr_8912118D054410E6E31AECD053BFB6505E9323", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
}

vehicle_occupancy_updatedamagefeedback( var_0 )
{
    var_1 = vehicle_occupancy_getleveldataforvehicle( self.vehiclename );

    if ( !isdefined( var_1 ) )
        return;

    if ( !isdefined( var_0.damage ) || var_0.damage <= 0 )
        return;

    if ( !isdefined( var_0.meansofdeath ) )
        return;

    var_2 = undefined;
    var_3 = undefined;

    switch ( var_0.meansofdeath )
    {
        case "_encstr_9BE3150DAD1C47870999C0F8AF5C37E55EDEC7E1CD5543":
        case "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1":
        case "_encstr_A11B0CBD04C9B790F653EBCF4915":
        case "_encstr_81670F602F2B4957763C758D38D1FF6C3B":
        case "_encstr_9E0A12A801F1A13344CE341769AE337BB97150B1":
        case "_encstr_A88211C92CA36712F335C480B96EE5B4143049":
            var_2 = "_encstr_8BA90608F481F0DB";
            var_3 = var_1.damagefeedbackgrouplight;
            break;
        case "_encstr_A45C0E4B9FDF3165A3B93C4491BFA4A9":
        case "_encstr_A9ED0B35F488AF94A9A0A00D8A":
        case "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C":
            var_2 = "_encstr_BD4606EBD8DE5619";
            var_3 = var_1.damagefeedbackgroupheavy;
            break;
    }

    if ( !isdefined( var_2 ) )
        return;

    if ( !isdefined( var_3 ) || var_3 == "_encstr_AABA05236DC831" )
        return;

    var_4 = [];

    if ( var_3 == "_encstr_BCE307116330CEEF4B" )
    {
        foreach ( var_7, var_6 in var_1.seatdata )
        {
            if ( !isdefined( var_6.animtag ) )
                continue;

            if ( var_6.animtag == "_encstr_A90D0BC8EF0F8E870A0E75E832" )
            {
                var_4 = [ vehicle_occupancy_getseatoccupant( self, var_7 ) ];
                break;
            }
        }
    }
    else if ( var_3 == "_encstr_A61904730372" )
        var_4 = vehicle_occupancy_getalloccupants( self );

    if ( !isdefined( var_4 ) || var_4.size == 0 )
        return;

    foreach ( var_9 in var_4 )
    {
        if ( !isdefined( var_9 ) )
            continue;

        if ( !var_9 scripts\cp_mp\utility\player_utility::_isalive() )
            continue;

        if ( var_2 == "_encstr_8BA90608F481F0DB" )
        {
            var_9 thread vehicle_occupancy_lightdamagefeedbackforplayer();
            continue;
        }

        if ( var_2 == "_encstr_BD4606EBD8DE5619" )
            var_9 thread vehicle_occupancy_heavydamagefeedbackforplayer();
    }
}

vehicle_occupancy_lightdamagefeedbackforplayer()
{
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self endon( "_encstr_818431D95986B4C6D8AC7DBDB1D8ABC1C2E61B5EEBB18D2BC2C931B43B0D3A220BD62CEC958C56B2C8C4B0B1D6283658F25927" );

    if ( !isdefined( self.vehiclelightdamagefeedbackid ) )
        self.vehiclelightdamagefeedbackid = 1;

    self setscriptablepartstate( "_encstr_81B118C38871C417183DCCE1C141FF0FEF783AAA2061BC4FB09D", "_encstr_B30B07E216CBFFC4C2" + self.vehiclelightdamagefeedbackid, 0 );
    self.vehiclelightdamagefeedbackid = 1 + scripts\engine\utility::mod( self.vehiclelightdamagefeedbackid + 1, 3 );
    wait 0.15;
    thread vehicle_occupancy_clearlightdamagefeedbackplayer();
}

vehicle_occupancy_clearlightdamagefeedbackplayer()
{
    self notify( "_encstr_818431D95986B4C6D8AC7DBDB1D8ABC1C2E61B5EEBB18D2BC2C931B43B0D3A220BD62CEC958C56B2C8C4B0B1D6283658F25927" );
    self setscriptablepartstate( "_encstr_81B118C38871C417183DCCE1C141FF0FEF783AAA2061BC4FB09D", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
    self.vehiclelightdamagefeedbackid = undefined;
}

vehicle_occupancy_heavydamagefeedbackforplayer()
{
    self endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self endon( "_encstr_BEA2312315606846E1554E67FE67CBF349366A1301CAEA1587455B919A5381D56FE3E3C93F81F17FA91AA1BEF711D991E7D762" );

    if ( !isdefined( self.vehicleheavydamagefeedbackid ) )
        self.vehicleheavydamagefeedbackid = 1;

    self setscriptablepartstate( "_encstr_BE3E18C309930F76D07384A90BD03F67560D0A9A916BF72E3853", "_encstr_B30B07E216CBFFC4C2" + self.vehicleheavydamagefeedbackid, 0 );
    self.vehicleheavydamagefeedbackid = 1 + scripts\engine\utility::mod( self.vehicleheavydamagefeedbackid + 1, 3 );
    wait 0.3;
    thread vehicle_occupancy_clearheavydamagefeedbackplayer();
}

vehicle_occupancy_clearheavydamagefeedbackplayer()
{
    self notify( "_encstr_BEA2312315606846E1554E67FE67CBF349366A1301CAEA1587455B919A5381D56FE3E3C93F81F17FA91AA1BEF711D991E7D762" );
    self setscriptablepartstate( "_encstr_BE3E18C309930F76D07384A90BD03F67560D0A9A916BF72E3853", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
    self.vehicleheavydamagefeedbackid = undefined;
}

vehicle_occupancy_cleardamagefeedbackforplayer()
{
    vehicle_occupancy_clearlightdamagefeedbackplayer();
    vehicle_occupancy_clearheavydamagefeedbackplayer();
}

vehicle_occupancy_giveturret( var_0, var_1, var_2, var_3 )
{
    if ( isdefined( var_2.raceendon ) )
        var_2 endon( var_2.raceendon );

    if ( istrue( var_3 ) )
        childthread vehicle_occupancy_givetaketurrettimeout( var_2, 1.5 );

    if ( !var_0 hasweapon( var_1 ) )
        var_0 scripts\cp_mp\utility\inventory_utility::_giveweapon( var_1 );

    var_4 = undefined;

    if ( var_0 scripts\cp_mp\utility\inventory_utility::iscurrentweapon( var_1 ) )
        var_4 = 1;
    else
    {
        thread _id_141D3( var_0, var_2 );
        var_4 = var_0 scripts\cp_mp\utility\inventory_utility::domonitoredweaponswitch( var_1, 1, 1 );
    }

    _id_141CB( var_0 );

    if ( isdefined( var_2 ) && isdefined( var_4 ) && !var_4 )
    {
        var_2.success = 0;
        var_2 notify( var_2.raceendnotify );
    }
}

vehicle_occupancy_taketurret( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    if ( isdefined( var_3.raceendon ) )
        var_3 endon( var_3.raceendon );

    if ( istrue( var_4 ) )
        childthread vehicle_occupancy_givetaketurrettimeout( var_3, 1.5 );

    if ( var_0 hasweapon( var_2 ) )
    {
        var_6 = undefined;
        thread _id_141CB( var_0 );

        if ( var_0 scripts\cp_mp\utility\inventory_utility::isswitchingtoweaponwithmonitoring( var_2 ) )
        {
            var_0 scripts\cp_mp\utility\inventory_utility::abortmonitoredweaponswitch( getcompleteweaponname( var_2 ) );
            var_6 = 1;
        }
        else
        {
            if ( isdefined( var_5 ) )
                var_7 = scripts\cp_mp\vehicles\vehicle::_id_14191( var_1, var_5 );
            else
                var_7 = scripts\cp_mp\vehicles\vehicle::_id_14192( var_1, var_2 );

            if ( isdefined( var_7 ) )
                var_0 controlturretoff( var_7 );

            if ( var_0 hasweapon( var_2 ) )
            {
                var_8 = var_0 scripts\cp_mp\utility\inventory_utility::iscurrentweapon( var_2 );

                if ( var_8 )
                {
                    var_0 scripts\cp_mp\utility\inventory_utility::_takeweapon( var_2 );
                    var_0 thread scripts\cp_mp\utility\inventory_utility::forcevalidweapon();
                }
                else
                    var_0 thread scripts\cp_mp\utility\inventory_utility::getridofweapon( var_2, 1 );
            }

            var_6 = 1;
        }

        if ( isdefined( var_6 ) && !var_6 )
        {
            var_3.success = 0;
            var_3 notify( var_3.raceendnotify );
        }
    }
}

vehicle_occupancy_givetaketurrettimeout( var_0, var_1 )
{
    wait( var_1 );
    var_0.success = 0;
    var_0 notify( var_0.raceendnotify );
}

_id_141D3( var_0, var_1 )
{
    var_0 endon( "_encstr_87DC14B3C0C903B191786B89AC8373FA90A51D5742F3" );
    var_0 notify( "_encstr_9BD02BEB1838510A99F5998DEEAF23F0A1E8275F31119F23DF9D9307C7715AA68FB887937888E90A29A0E33FBD" );
    var_0 endon( "_encstr_9BD02BEB1838510A99F5998DEEAF23F0A1E8275F31119F23DF9D9307C7715AA68FB887937888E90A29A0E33FBD" );

    if ( var_0 scripts\common\utility::is_weapon_switch_allowed() )
        return;

    var_0 enableweaponswitch();
    var_1 waittill( var_1.raceendon );
    thread _id_141CB( var_0 );
}

_id_141CB( var_0 )
{
    var_0 notify( "_encstr_9BD02BEB1838510A99F5998DEEAF23F0A1E8275F31119F23DF9D9307C7715AA68FB887937888E90A29A0E33FBD" );

    if ( var_0 scripts\common\utility::is_weapon_switch_allowed() )
        var_0 enableweaponswitch();
    else
        var_0 disableweaponswitch();
}

vehicle_occupancy_ejectalloccupants( var_0 )
{
    var_1 = vehicle_occupancy_getallvehicleseats( var_0 );

    foreach ( var_3 in var_1 )
    {
        var_4 = vehicle_occupancy_getseatoccupant( var_0, var_3 );

        if ( isdefined( var_4 ) )
        {
            var_5 = spawnstruct();
            var_5.allowairexit = 1;
            var_5.onprematchfadedone2 = "_encstr_95690CE1806F9F8D33E1C990E9C3";
            thread vehicle_occupancy_exit( var_0, var_3, var_4, var_5, 1 );
        }
    }
}

vehicle_occupancy_getoccupantrestrictions()
{
    return [ "_encstr_9C3D071B63023B26C3", "_encstr_9F24062875D5FD98", "_encstr_9F100737E04EA5738E", "_encstr_A19007A5D1888C325D", "_encstr_82230A15C0DBCB73D7C0AA53", "_encstr_ABA00B4DA8B3A30BAF9092BAD8", "_encstr_B42F0C4317C37B67037D287092A3", "_encstr_81B60ACE5339388B71A7B24B", "_encstr_8F2F11D8C28C32CA27F5071B2C6C56D6AC37A3", "_encstr_800811A2303B363F6B6BB7BE689163BB5B90CA", "_encstr_B84E11CA1E56D8AB3A5A7BE6D79DA56CD12D6B" ];
}

_id_141D8()
{
    return [ "_encstr_B770132BB3074E306D1981930716E80D97E9A393BA", "_encstr_A9AF10E0F285CA19B35C28B0BD4FC89D8822", "_encstr_A8C706AFD3214275", "_encstr_A64D0743C1D1370153", "_encstr_B4EB0BE03F9C08058ACD7877A7", "_encstr_A80F0EAFBBDF6B0710B68A93689853A2", "_encstr_9D1E0EAE4FF7C9F9F94210D80B0B85C1" ];
}

vehicle_occupancy_getdriverrestrictions()
{
    return [ "_encstr_B770132BB3074E306D1981930716E80D97E9A393BA", "_encstr_A9AF10E0F285CA19B35C28B0BD4FC89D8822", "_encstr_A8C706AFD3214275", "_encstr_807805775B15A2", "_encstr_A64D0743C1D1370153", "_encstr_B4EB0BE03F9C08058ACD7877A7", "_encstr_A80F0EAFBBDF6B0710B68A93689853A2", "_encstr_9D1E0EAE4FF7C9F9F94210D80B0B85C1" ];
}

vehicle_occupancy_getcombatpassengerrestrictions()
{
    return [ "_encstr_A14C0E78A29718E8A8C95FF78F273DB8" ];
}

vehicle_occupancy_getcombatcabpassengerrestrictions()
{
    var_0 = vehicle_occupancy_getcombatpassengerrestrictions();
    return var_0;
}

vehicle_occupancy_getpassivepassengerrestrictions()
{
    return vehicle_occupancy_getdriverrestrictions();
}

vehicle_occupancy_getturretpassengerrestrictions()
{
    var_0 = vehicle_occupancy_getcombatpassengerrestrictions();
    var_0[var_0.size] = "_encstr_9D1E0EAE4FF7C9F9F94210D80B0B85C1";
    var_0[var_0.size] = "_encstr_A9AF10E0F285CA19B35C28B0BD4FC89D8822";
    return scripts\engine\utility::array_remove_duplicates( var_0 );
}

vehicle_occupancy_disablefirefortime( var_0, var_1, var_2 )
{
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_0 notify( "_encstr_94FD255C3FE2B33134C7B138B7538BF91A655E6319FA7BFBE1E330103B61A31BD04D4E7D6CC23B" );
    var_0 endon( "_encstr_94FD255C3FE2B33134C7B138B7538BF91A655E6319FA7BFBE1E330103B61A31BD04D4E7D6CC23B" );

    if ( !istrue( self.vehicledisablefire ) )
    {
        var_0.vehicledisablefire = 1;
        var_0 scripts\common\utility::allow_fire( 0, "_encstr_982313255F4A7BC8B4876DC02A611821722B93B5F7" );
    }

    if ( !isdefined( var_0.vehicledisablefireendtime ) || !istrue( var_2 ) )
        var_0.vehicledisablefireendtime = gettime() + var_1;

    while ( isdefined( var_0.vehicledisablefireendtime ) && gettime() < var_0.vehicledisablefireendtime )
        wait 0.05;

    thread vehicle_occupancy_cleardisablefirefortime( var_0 );
}

vehicle_occupancy_cleardisablefirefortime( var_0, var_1 )
{
    var_0 notify( "_encstr_94FD255C3FE2B33134C7B138B7538BF91A655E6319FA7BFBE1E330103B61A31BD04D4E7D6CC23B" );

    if ( isdefined( var_0.vehicledisablefire ) )
    {
        if ( !istrue( var_1 ) )
            var_0 scripts\common\utility::allow_fire( 1, "_encstr_982313255F4A7BC8B4876DC02A611821722B93B5F7" );
    }

    var_0.vehicledisablefire = undefined;
    var_0.vehicledisablefireendtime = undefined;
}

_id_141F8( var_0, var_1, var_2 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_89400F47B06D9529A5DED1D4864BCA3646" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_89400F47B06D9529A5DED1D4864BCA3646" ) ]]( var_0, var_1, var_2 );
}

_id_141D9( var_0, var_1, var_2 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_A4D20FFFA0DBC7023798BBC971307A85E1" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_A4D20FFFA0DBC7023798BBC971307A85E1" ) ]]( var_0, var_1, var_2 );
}

_id_141F9( var_0, var_1, var_2 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_8BE5112711DDFA9CC8978C154B21D8322551EB" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_8BE5112711DDFA9CC8978C154B21D8322551EB" ) ]]( var_0, var_1, var_2 );
}

_id_141DB( var_0, var_1, var_2, var_3 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B8BD0C344B1956682CB9A1120B76" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B8BD0C344B1956682CB9A1120B76" ) ]]( var_0, var_1, var_2, var_3 );
}

_id_141F5( var_0, var_1, var_2, var_3 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_89CA0C6E34BDBB68B0DCD084853B" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_89CA0C6E34BDBB68B0DCD084853B" ) ]]( var_0, var_1, var_2, var_3 );
}

vehicle_occupancy_registersentient( var_0 )
{
    if ( isdefined( var_0.sentientdisabled ) && var_0.sentientdisabled > 0 )
        return;

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_A92B114E56762D378E954E9AACB98E9656B9A3" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_A92B114E56762D378E954E9AACB98E9656B9A3" ) ]]( var_0 );
}

vehicle_occupancy_unregistersentient( var_0 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B9BC1357CDE459D9A5371DCA4EA6CA731D4B959B47" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_B9BC1357CDE459D9A5371DCA4EA6CA731D4B959B47" ) ]]( var_0 );
}

vehicle_occupancy_issentient( var_0 )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_95A90B23EBD7317DBB3A98C883" ) )
        return [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_A8EF121B4F60AFD7806DF9985E265770BFBDCA60", "_encstr_95A90B23EBD7317DBB3A98C883" ) ]]( var_0 );
}

vehicle_occupancy_allowsentient( var_0 )
{
    if ( var_0 )
    {
        self.sentientdisabled--;

        if ( self.sentientdisabled == 0 )
            vehicle_occupancy_registersentient( self );
    }
    else
    {
        if ( !isdefined( self.sentientdisabled ) )
            self.sentientdisabled = 0;

        self.sentientdisabled++;

        if ( self.sentientdisabled == 1 )
            vehicle_occupancy_unregistersentient( self );
    }
}

_id_141E7( var_0, var_1 )
{
    var_2 = spawnstruct();
    var_2.seatid = var_1;
    var_3 = vehicle_occupancy_getleveldataforseat( var_0.vehiclename, var_1 );

    if ( isdefined( var_3.animtag ) )
    {
        var_2.origin = var_0 gettagorigin( var_3.animtag );
        var_2.angles = var_0 gettagangles( var_3.animtag );
    }
    else
    {
        var_2.origin = var_0.origin;
        var_2.angles = var_0.angles;
    }

    return var_2;
}

vehicle_occupancy_linkseatcorpse( var_0, var_1, var_2 )
{
    var_3 = vehicle_occupancy_getleveldataforseat( var_1.vehiclename, var_2 );

    if ( isdefined( var_3.animtag ) )
    {
        var_0 enablelinkto();
        var_0 linkto( var_1, var_3.animtag );
    }
    else
    {
        var_0 enablelinkto();
        var_0 linkto( var_1 );
    }
}

vehicle_occupancy_assignseatcorpse( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_1.corpses ) )
        var_1.corpses = [];

    vehicle_occupancy_deleteseatcorpse( var_1, var_2, 0 );
    var_1.corpses[var_2] = var_0;

    if ( !var_3 )
        var_0.matchdata_logmultikill = 1;
}

_id_141CC( var_0, var_1, var_2 )
{
    if ( isdefined( var_1.corpses ) && isdefined( var_1.corpses[var_2] ) )
        var_1.corpses[var_2] = undefined;

    var_0.matchdata_logmultikill = undefined;
}

vehicle_occupancy_deleteseatcorpse( var_0, var_1, var_2 )
{
    if ( isdefined( var_0.corpses ) && isdefined( var_0.corpses[var_1] ) )
    {
        var_3 = var_0.corpses[var_1];

        if ( isdefined( var_3 ) )
        {
            if ( !istrue( var_3.matchdata_logmultikill ) || !var_2 )
            {
                var_0.corpses[var_1] delete();
                var_0.corpses[var_1] = undefined;
            }
        }
    }
}

vehicle_occupancy_deleteseatcorpses( var_0 )
{
    if ( isdefined( var_0.corpses ) )
    {
        foreach ( var_2 in var_0.corpses )
        {
            if ( isdefined( var_2 ) )
                var_2 delete();
        }
    }

    var_0.corpses = undefined;
}

_id_141C6( var_0, var_1 )
{
    if ( istrue( var_0.isdestroyed ) || !isdefined( var_0.occupants ) )
        var_0._id_1287D = undefined;
    else
    {
        if ( var_1 )
        {
            var_0._id_1287D--;
            return;
        }

        if ( !isdefined( var_0._id_1287D ) )
            var_0._id_1287D = 0;

        var_0._id_1287D++;
    }
}

_id_141C7( var_0 )
{
    if ( istrue( var_0.isdestroyed ) || !isdefined( var_0.occupants ) )
        return 0;

    if ( isdefined( var_0._id_1287D ) && var_0._id_1287D > 0 )
        return 0;

    return 1;
}

vehicle_occupancy_generateseatswitcharray( var_0, var_1 )
{
    var_2 = [];
    var_3 = 0;
    var_4 = 0;

    for (;;)
    {
        if ( !var_3 )
        {
            if ( var_0 == var_1[var_4] )
                var_3 = 1;
        }
        else
        {
            var_4 = scripts\engine\utility::mod( var_4, var_1.size );

            if ( var_0 == var_1[var_4] )
                break;

            var_2[var_2.size] = var_1[var_4];
        }

        var_4++;
    }

    return var_2;
}

vehicle_occupancy_killoccupants( var_0, var_1 )
{
    if ( !isdefined( var_1.inflictor ) )
    {
        switch ( var_1.meansofdeath )
        {
            case "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1":
            case "_encstr_A11B0CBD04C9B790F653EBCF4915":
            case "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C":
            case "_encstr_81670F602F2B4957763C758D38D1FF6C3B":
                if ( isdefined( var_0.killcament ) )
                    var_0.killcament delete();

                var_0.killcament = var_1.inflictor;
                var_1.inflictor = var_0;
        }
    }

    if ( !isdefined( var_1.inflictor ) )
        var_1.inflictor = undefined;

    var_2 = var_1.meansofdeath;

    if ( var_2 == "_encstr_81670F602F2B4957763C758D38D1FF6C3B" )
        var_2 = "_encstr_BA3916099077D7673B375A25D3CB8C29EF394169385E873C";
    else if ( var_2 == "_encstr_A11B0CBD04C9B790F653EBCF4915" )
        var_2 = "_encstr_9E0B13A801F1A16F27C52E196DED47FA817110C1A1";

    var_3 = vehicle_occupancy_getallvehicleseats( self );

    foreach ( var_5 in var_3 )
    {
        var_6 = vehicle_occupancy_getseatoccupant( self, var_5 );

        if ( isdefined( var_6 ) && var_6 scripts\cp_mp\utility\player_utility::_isalive() )
        {
            var_7 = var_1.attacker;

            if ( scripts\common\utility::iscp() )
            {
                var_6.shouldskipdeathsshield = 1;

                if ( !isdefined( var_7 ) )
                {
                    if ( isdefined( var_1.inflictor ) )
                        var_7 = var_1.inflictor;
                }

                if ( !isdefined( var_7 ) )
                    var_7 = var_6;

                if ( isdefined( var_7 ) && isdefined( var_7.team ) )
                {
                    if ( var_7.team == var_6.team )
                    {
                        vehicle_occupancy_exit( self, var_5, var_6, undefined, 1 );
                        var_6.skipvehiclespashdamage = 1;
                        continue;
                    }
                }
            }
            else if ( !isdefined( var_7 ) || !istrue( scripts\cp_mp\utility\player_utility::playersareenemies( var_7, var_6 ) ) )
                var_7 = var_6;

            var_6.donotmodifydamage = 1;
            var_8 = 0;

            if ( level.gametype == "_encstr_9507034B25" && istrue( var_6.isjuggernaut ) )
            {
                if ( isdefined( var_6.juggcontext.juggconfig._id_14232 ) && var_6.health > var_6.juggcontext.juggconfig._id_14232 )
                    var_8 = 1;
            }

            if ( !istrue( var_8 ) )
            {
                var_9 = scripts\engine\utility::ter_op( isent( var_7 ), var_7, undefined );
                var_6 dodamage( var_6.maxhealth, var_0.origin, var_9, var_1.inflictor, var_2, var_1.objweapon, "_encstr_9E2B0C1BF05A500737C7E0B29D62" );

                if ( isdefined( level._id_14254 ) )
                    var_6 thread [[ level._id_14254 ]]();
            }

            var_6.donotmodifydamage = undefined;
            thread vehicle_occupancy_exit( var_0, var_5, var_6, undefined, 1 );
        }
    }

    vehicle_occupancy_deleteseatcorpses( var_0 );
}

vehicle_occupancy_initdebug()
{
    var_0 = vehicle_occupancy_getleveldata();
    var_0.debuginstances = [];
}
