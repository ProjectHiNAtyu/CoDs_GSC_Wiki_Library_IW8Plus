// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

supportbox_init()
{
    level.brking_watchcircletimers = [];
    scripts\common\interactive::interactive_addusedcallback( ::supportbox_usedcallback, "_encstr_98A111B217AB9607D7B9AB0738BDE4A312BDC3" );
    scripts\common\interactive::interactive_addusedcallback( ::calloutmarkerpingvo_playpredictivepingcleared, "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787" );
    scripts\mp\utility\join_team_aggregator::registeronplayerjointeamcallback( ::_id_139B1 );
    level._effect["_encstr_944F3B3C9DFAF82098A97719E890EA89DD5F7047286D5BAEB331E818EF38925C17885D497F798F9BC3F0302F1E5B1347CB60EC327AF3F703DBD5EBC168"] = loadfx( "_encstr_944F3B3C9DFAF82098A97719E890EA89DD5F7047286D5BAEB331E818EF38925C17885D497F798F9BC3F0302F1E5B1347CB60EC327AF3F703DBD5EBC168" );
    level._effect["_encstr_BAB239DE656865170CBA311ADB487FAAA8C3505D8B207BC6B4693B21ED34BB2450A5FCE73790C9C75E2042FB4998BB5110337D25AF08CBB204B92B"] = loadfx( "_encstr_BAB239DE656865170CBA311ADB487FAAA8C3505D8B207BC6B4693B21ED34BB2450A5FCE73790C9C75E2042FB4998BB5110337D25AF08CBB204B92B" );
}

_id_139B1( var_0 )
{
    foreach ( var_2 in level.brking_watchcircletimers )
    {
        if ( isdefined( var_2 ) )
            var_2 _id_139AF( var_0 );
    }
}

debug_reach_exhaust_waste( var_0, var_1, var_2, var_3 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0 thread supportbox_watchdisownedtimeout();
    var_0 thread supportbox_hideandshowaftertime();
    var_0 thread _id_139B2( self );

    if ( !scripts\mp\flags::gameflag( "_encstr_A84113F7EAA383D7A0A1BC011B0BB1FDAFD2F5CEEF" ) )
        var_0 thread _id_139B3();

    var_0 waittill( "_encstr_8AE90E7D08B8538A21DB77CF1155D2B3", var_4 );
    var_0 setnodeploy( 1 );
    var_0 supportbox_handlemovingplatforms( var_4 );

    if ( 1 )
        thread scripts\mp\weapons::outlineequipmentforowner( var_0 );

    var_0.issuper = 1;
    var_0.superid = level.superglobals.staticsuperdata[var_2].id;
    scripts\mp\weapons::onequipmentplanted( var_0, var_1, ::supportbox_destroy );
    level.brking_watchcircletimers[var_0 getentitynumber()] = var_0;
    var_0 scripts\cp_mp\emp_debuff::set_apply_emp_callback( ::supportbox_empapplied );

    if ( !istrue( var_0.madedamageable ) )
        var_0 supportbox_makedamageable();

    var_0.makedamageable = undefined;
    var_0 setscriptablepartstate( "_encstr_A9430BE4892FC82DB432B0A09B", "_encstr_B7180526C81F4B", 0 );
    wait 0.0;

    if ( !scripts\cp_mp\utility\game_utility::isrealismenabled() )
        var_0 supportbox_addheadicon( var_3 );

    wait 0.75;
    var_0 setscriptablepartstate( "_encstr_8CCC08BAB3EB9177A5B7", "_encstr_8C4E06E38023450B", 0 );
    var_0 setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_A3B405174FD9CB", 0 );
    wait( supportbox_getdeployanimduration() );
    var_0 setscriptablepartstate( "_encstr_82380726952CB17B73", "_encstr_B30B07E216CBFFC4C2", 0 );
    var_0 setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_BE1A09B707B273A423B156", 0 );
}

_id_139B2( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_8AE90E7D08B8538A21DB77CF1155D2B3" );
    var_0 endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    var_1 = scripts\engine\utility::_id_143B9( 2, "_encstr_ADEC120BD083C04B706DA138630950D0175FFB83" );

    if ( var_1 == "_encstr_945408D1B4B556B7BA3A" )
        return;

    var_2 = undefined;
    var_3 = tablesort( self.origin, 500, 500 );
    var_3[var_3.size] = self;
    var_4 = scripts\engine\trace::create_contents( 0, 1, 1, 1, 0, 1, 1, 0, 1 );
    var_5 = self.origin;
    var_6 = -2000.0;
    var_7 = self.origin + ( 0.0, 0.0, var_6 );
    var_8 = scripts\engine\trace::ray_trace( var_5, var_7, var_3, var_4 );

    if ( var_8["_encstr_B130095358E1B3930B687D"] < 1.0 )
    {
        var_2 = var_8["_encstr_B60E07C9FD1C2055E3"];

        if ( isdefined( var_2 ) )
        {
            if ( tugofwar_tank( var_2 ) )
                self.origin = var_0.origin;
        }
    }
}

_id_139B3()
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_8AE90E7D08B8538A21DB77CF1155D2B3" );
    level waittill( "_encstr_A39F11A0FDA082D16B53E91FFF45070A08980A" );

    if ( isdefined( self ) )
        self delete();
}

tugofwar_tank( var_0 )
{
    if ( isdefined( level._id_145F1 ) )
    {
        foreach ( var_2 in level._id_145F1._id_13C8D )
        {
            if ( var_2 == var_0 )
                return 1;
            else if ( isdefined( var_2.wz_tease ) && var_2.wz_tease == var_0 )
                return 1;
        }
    }

    return 0;
}

supportbox_used( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0._id_13B87 = "_encstr_944F3B3C9DFAF82098A97719E890EA89DD5F7047286D5BAEB331E818EF38925C17885D497F798F9BC3F0302F1E5B1347CB60EC327AF3F703DBD5EBC168";
    debug_reach_exhaust_waste( var_0, "_encstr_98A111B217AB9607D7B9AB0738BDE4A312BDC3", "_encstr_B4F610A33B508F1370C93A2210A8838250D9", "_encstr_A8A71FD0EA19F54B8DDEE6FA958BAB5A83B62B9B47F5DCBA3807B7933ABE89DEE1" );
    var_0 thread supportbox_makeusable( "_encstr_98A111B217AB9607D7B9AB0738BDE4A312BDC3", &"_encstr_BCE32053EFB7F1A2AC9DD144214410FD6921BF5F3F871B24C3FF80696C5867652F31" );
}

calloutmarkerpingvo_playpredictivepingadded( var_0 )
{
    var_0 endon( "_encstr_A3750609A5E61883" );
    var_0._id_13B87 = "_encstr_BAB239DE656865170CBA311ADB487FAAA8C3505D8B207BC6B4693B21ED34BB2450A5FCE73790C9C75E2042FB4998BB5110337D25AF08CBB204B92B";
    debug_reach_exhaust_waste( var_0, "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787", "_encstr_82341137AEE0ACC9D785E4B6DE9CFA324EED38", "_encstr_ABD7243802414393DFCA9618AC773809396A1060CAE981C9FFFC9D8B877743F39D4379B032F8" );
    var_0 thread supportbox_makeusable( "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787", &"_encstr_B8AE1E17A35568A8994575CB3E8989508D3F367FCDF1B062E14D3DC05609DB38" );
}

supportbox_hideandshowaftertime( var_0 )
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_8AE90E7D08B8538A21DB77CF1155D2B3" );
    var_1 = getdvarfloat( "_encstr_9F6923CABE9D3FB69B401088C3D3278D575801B0F89F1A8140406B5BE9D79D66A963387F95", 0 );
    self setscriptablepartstate( "_encstr_A9430BE4892FC82DB432B0A09B", "_encstr_BECC05FC5321BA", 0 );
    wait( var_1 );
    self.madedamageable = 1;
    supportbox_makedamageable();
    self setscriptablepartstate( "_encstr_A9430BE4892FC82DB432B0A09B", "_encstr_B7180526C81F4B", 0 );
}

supportbox_unset()
{
    if ( 0 )
    {
        foreach ( var_1 in self.plantedsuperequip )
        {
            if ( var_1.equipmentref == "_encstr_98A111B217AB9607D7B9AB0738BDE4A312BDC3" || var_1.equipmentref == "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787" )
            {
                var_1 thread supportbox_destroy();
                scripts\mp\weapons::removeequip( var_1 );
            }
        }
    }
}

supportbox_explode( var_0, var_1 )
{
    if ( isdefined( var_0 ) || isdefined( self.owner ) )
    {
        self clearscriptabledamageowner();

        if ( isdefined( var_0 ) )
            self setentityowner( var_0 );
        else
            self setentityowner( self.owner );
    }

    self setscriptablepartstate( "_encstr_8CCC08BAB3EB9177A5B7", "_encstr_AB0808DFB97F822F1899", 0 );
    self setscriptablepartstate( "_encstr_82380726952CB17B73", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
    self setscriptablepartstate( "_encstr_BE6407862CD8B6ACC8", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
    thread supportbox_delete( var_0, 0.1, var_1 );
}

supportbox_destroy( var_0 )
{
    if ( !isdefined( var_0 ) )
        var_0 = !istrue( self.planted );

    var_1 = "_encstr_944F3B3C9DFAF82098A97719E890EA89DD5F7047286D5BAEB331E818EF38925C17885D497F798F9BC3F0302F1E5B1347CB60EC327AF3F703DBD5EBC168";

    if ( isdefined( self._id_13B87 ) )
        var_1 = self._id_13B87;

    var_2 = undefined;
    var_3 = 0;

    if ( !var_0 )
    {
        var_2 = supportbox_getcloseanimduration();
        var_3 = var_2 + 1;
    }

    thread supportbox_delete( undefined, var_3, 0 );
    var_4 = undefined;
    var_5 = undefined;

    if ( isdefined( self ) )
    {
        var_6 = self.origin;
        var_7 = anglestoforward( self.angles );
        var_8 = anglestoup( self.angles );
        var_9 = self getlinkedparent();

        if ( isdefined( var_9 ) )
        {
            var_4 = var_9;
            var_5 = var_4.origin - var_6;
        }

        self setscriptablepartstate( "_encstr_82380726952CB17B73", "_encstr_9BA4080D39CFFB5AB7C1", 0 );
        self setscriptablepartstate( "_encstr_BE6407862CD8B6ACC8", "_encstr_9BA4080D39CFFB5AB7C1", 0 );

        if ( !var_0 )
        {
            self setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_8095062309D0F76F", 0 );
            wait( var_2 );
            self setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_B9DD0B6C8DEDB9B2C8943236AC", 0 );
            wait 1;
        }

        if ( isdefined( var_4 ) && isent( var_4 ) )
            var_6 = var_4.origin - var_5;

        playfx( scripts\engine\utility::getfx( var_1 ), var_6, var_7, var_8 );
        playsoundatpos( var_6, "_encstr_BCCF138563572F531D0197C91AF02ACBEBEAE8AB98" );
    }
}

supportbox_delete( var_0, var_1, var_2 )
{
    self notify( "_encstr_A3750609A5E61883" );
    self.isdestroyed = 1;
    self setcandamage( 0 );

    if ( isdefined( self.owner ) )
        self.owner scripts\mp\weapons::removeequip( self );

    supportbox_removeheadicon();
    supportbox_makeunusable();

    if ( isdefined( self.owner ) )
    {
        if ( isdefined( self.equipmentref ) && self.equipmentref == "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787" )
            self.owner scripts\cp\vehicles\vehicle_compass_cp::_id_12032( "_encstr_82341137AEE0ACC9D785E4B6DE9CFA324EED38", self.usedcount, var_0, var_2 );
        else
            self.owner scripts\cp\vehicles\vehicle_compass_cp::_id_12032( "_encstr_B4F610A33B508F1370C93A2210A8838250D9", self.usedcount, var_0, var_2 );
    }

    scripts\mp\analyticslog::logevent_fieldupgradeexpired( self.owner, self.superid, self.usedcount, istrue( var_2 ) );
    wait( var_1 );

    if ( isdefined( self ) )
        self delete();
}

supportbox_makeusable( var_0, var_1 )
{
    scripts\common\interactive::interactive_addusedcallbacktoentity( var_0 );
    self.playersused = [];
    self.usedcount = 0;
    self makeusable();
    self setusepriority( -1 );
    self enablemissilehint( 1 );
    self setcursorhint( "_encstr_939A0CEC70DBF521459F5B47F73D" );
    self sethintstring( var_1 );
    self setuserange( 128 );
    self setuseholdduration( "_encstr_93370F8CAE27588ED27BB9FADC0DDB4EA3" );
    self sethintrequiresholding( 0 );
    self sethinttag( "_encstr_9830081379E42703F8A3" );
    thread supportbox_watchallplayeruse();
}

supportbox_makeunusable()
{
    self notify( "_encstr_9ED618B32B40DA77F65BF812E258B75640E36D26B3F0261B9111" );
    scripts\common\interactive::interactive_removeusedcallbackfromentity();
    self makeunusable();
    self.playersused = undefined;
}

supportbox_watchallplayeruse()
{
    self endon( "_encstr_A3750609A5E61883" );
    self endon( "_encstr_9ED618B32B40DA77F65BF812E258B75640E36D26B3F0261B9111" );
    var_0 = gettime();

    for (;;)
    {
        supportbox_updateplayersused();

        if ( gettime() >= var_0 )
        {
            supportbox_updateplayerusevisibility();
            var_0 = gettime() + 150;
        }

        waitframe();
    }
}

supportbox_updateplayerusevisibility()
{
    var_0 = scripts\common\utility::playersnear( self.origin, 300 );

    foreach ( var_2 in var_0 )
    {
        if ( isdefined( var_2 ) )
        {
            if ( !supportbox_playercanuse( var_2 ) )
            {
                self disableplayeruse( var_2 );
                continue;
            }

            self enableplayeruse( var_2 );
        }
    }
}

supportbox_updateplayersused()
{
    foreach ( var_1 in self.playersused )
    {
        if ( isdefined( var_1 ) )
        {
            var_2 = var_1 getentitynumber();

            if ( !scripts\mp\utility\player::isreallyalive( var_1 ) && isdefined( self.playersused[var_2] ) )
            {
                self.playersused[var_2] = undefined;
                _id_139AF( var_1 );
            }
        }
    }
}

supportbox_playercanuse( var_0 )
{
    if ( !scripts\mp\utility\player::isreallyalive( var_0 ) )
        return 0;

    if ( !var_0 scripts\common\utility::is_crate_use_allowed() )
        return 0;

    if ( isdefined( self.playersused[var_0 getentitynumber()] ) )
        return 0;

    if ( isdefined( self.owner ) && scripts\cp_mp\utility\player_utility::playersareenemies( var_0, self.owner ) )
        return 0;

    if ( scripts\mp\utility\game::getgametype() == "_encstr_9507034B25" && scripts\mp\utility\game::round_vehicle_logic() != "_encstr_A107034A75" )
    {
        if ( isdefined( self.owner ) && !scripts\engine\utility::array_contains( _encstr_9E81231898C28383CB8760E558BF27EB18E74BB010797A7D4A032187800594B088064FFB1B::round_enemy_stuck_logic( self.owner.team, self.owner.squadindex ), var_0 ) )
            return 0;
        else if ( isdefined( self.team ) && self.team != var_0.team )
            return 0;
    }

    return 1;
}

supportbox_onplayeruse( var_0 )
{
    var_1 = var_0 getweaponslistprimaries();

    foreach ( var_3 in var_1 )
    {
        if ( scripts\mp\utility\weapon::ismeleeonly( var_3 ) || scripts\mp\utility\weapon::issuperweapon( var_3 ) || scripts\mp\utility\weapon::iskillstreakweapon( var_3 ) || scripts\mp\utility\weapon::isgamemodeweapon( var_3 ) )
            continue;

        var_4 = scripts\mp\utility\weapon::getweapongroup( var_3 );
        var_5 = undefined;

        if ( scripts\mp\utility\weapon::issinglehitweapon( var_3 ) )
            var_5 = 1;
        else if ( var_4 == "_encstr_AABE0E47EF4F93A830EFCFC309E7BF9E" )
            var_5 = 1.5;
        else
            var_5 = 3;

        var_6 = scripts\mp\weapons::getammooverride( var_3 ) * var_5;

        if ( var_3.isalternate && scripts\mp\utility\weapon::attachmentmap_tobase( var_3.underbarrel ) == "_encstr_BE970867A0DBD0FB0FF0" )
        {
            var_7 = var_0 getweaponammoclip( var_3 );
            var_8 = int( var_7 + var_6 );
            var_0 setweaponammoclip( var_3, var_8 );
            continue;
        }

        var_9 = var_0 getweaponammostock( var_3 );
        var_8 = int( var_9 + var_6 );
        var_0 setweaponammostock( var_3, var_8 );
    }

    var_11 = var_0 scripts\mp\equipment::getcurrentequipment( "_encstr_987F080E394BDAC2E45E" );

    if ( isdefined( var_11 ) )
        var_0 scripts\mp\equipment::incrementequipmentammo( var_11 );

    var_12 = var_0 scripts\mp\equipment::getcurrentequipment( "_encstr_B98F0AC7D5B99F4DDBA8353B" );

    if ( isdefined( var_12 ) )
        var_0 scripts\mp\equipment::incrementequipmentammo( var_12 );

    var_0 scripts\mp\damagefeedback::hudicontype( "_encstr_A80E08F7ABD99A0A1852" );
    _id_139AE( var_0 );
    thread supportbox_onplayeruseanim();
    return 1;
}

_id_139AE( var_0 )
{
    if ( isdefined( var_0 ) )
    {
        if ( isdefined( self.equipmentref ) && self.equipmentref == "_encstr_B41B0FCA8BD5B40EEB0BE4D6F69390B787" )
            var_0 playsoundtoplayer( "_encstr_890D10F9AE382F1237985B62C8AB819F539D", var_0 );
        else
            var_0 playsoundtoplayer( "_encstr_AFC80F0BDA5BF6FA8D93C247ACFAD56E2B", var_0 );
    }
}

supportbox_onplayeruseanim()
{
    self endon( "_encstr_A3750609A5E61883" );

    if ( istrue( self.onuseanimplaying ) )
        return;

    self setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_B6D0080F939A0B790B30", 0 );
    self.onuseanimplaying = 1;
    wait( supportbox_getuseanimduration() );
    self setscriptablepartstate( "_encstr_AFCD06E7E630CBC7", "_encstr_BE1A09B707B273A423B156", 0 );
    self.onuseanimplaying = undefined;
}

supportbox_makedamageable()
{
    thread scripts\mp\damage::monitordamage( 100, "_encstr_8CFB0986B4E856B8EA960E", ::supportbox_handlefataldamage, ::supportbox_handledamage );
}

supportbox_handledamage( var_0 )
{
    if ( var_0.meansofdeath == "_encstr_A9ED0B35F488AF94A9A0A00D8A" )
        return 0;

    var_1 = !isdefined( self.owner ) || scripts\cp_mp\utility\player_utility::playersareenemies( self.owner, var_0.attacker );
    var_2 = undefined;

    if ( isexplosivedamagemod( var_0.meansofdeath ) )
        var_2 = supportbox_explosivedamagetohits( var_0, var_1 );
    else if ( scripts\engine\utility::isbulletdamage( var_0.meansofdeath ) )
        var_2 = supportbox_bulletdamagetohits( var_0, var_1 );

    if ( isdefined( var_2 ) )
    {
        var_3 = 5;

        if ( var_1 )
            var_3 = 5;

        return int( ceil( min( 1, var_2 / 5 ) * self.maxhealth ) );
    }

    return var_0.damage;
}

supportbox_handlefataldamage( var_0 )
{
    supportbox_givepointsfordeath( var_0.attacker );
    thread supportbox_explode( var_0.attacker, 1 );
}

supportbox_bulletdamagetohits( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( scripts\mp\utility\damage::isfmjdamage( var_0.objweapon, var_0.meansofdeath, 1 ) && var_1, 2, 0 );

    if ( var_0.damage > 150 )
        return var_2 + 10;

    if ( var_0.damage >= 80 )
        return var_2 + 5;
    else if ( var_0.damage >= 30 )
        return var_2 + 2;
    else
        return var_2 + 1;
}

supportbox_explosivedamagetohits( var_0, var_1 )
{
    if ( var_0.damage > 200 )
        return 20;

    if ( var_0.damage > 70 )
        return 10;
    else if ( var_0.damage > 30 )
        return 7;
    else
        return 2;
}

supportbox_removeowneroutline()
{
    if ( isdefined( self.outlineid ) )
        scripts\mp\utility\outline::outlinedisable( self.outlineid, self );
}

supportbox_addheadicon( var_0 )
{
    self.showdroplocations = scripts\cp_mp\entityheadicons::setheadicon_singleimage( [], var_0, 20, 1, 1000, 100, undefined, 1 );
    self.showemergencyhint = scripts\cp_mp\entityheadicons::setheadicon_factionimage( 0, 20, undefined, undefined, undefined, undefined, 1 );
    _id_139B0();
}

supportbox_removeheadicon()
{
    if ( isdefined( self.showdroplocations ) )
    {
        scripts\cp_mp\entityheadicons::setheadicon_deleteicon( self.showdroplocations );
        self.showdroplocations = undefined;
    }

    if ( isdefined( self.showemergencyhint ) )
    {
        scripts\cp_mp\entityheadicons::setheadicon_deleteicon( self.showemergencyhint );
        self.showemergencyhint = undefined;
    }
}

supportbox_givepointsfordeath( var_0 )
{
    if ( !isdefined( self.owner ) || scripts\cp_mp\utility\player_utility::playersareenemies( self.owner, var_0 ) )
    {
        var_0 notify( "_encstr_B6BB140AE56FC14D7781B0FDAF0869F3E818D827BDEB" );
        var_0 thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_B6BB140AE56FC14D7781B0FDAF0869F3E818D827BDEB" );
        var_0 scripts\mp\battlechatter_mp::equipmentdestroyed( self );
    }
}

supportbox_givexpforuse( var_0 )
{
    if ( isdefined( self.owner ) && !scripts\cp_mp\utility\player_utility::playersareenemies( self.owner, var_0 ) )
    {
        if ( self.owner != var_0 )
        {
            self.owner thread scripts\mp\utility\points::giveunifiedpoints( "_encstr_81D61C7F23F052B4F058357A7680E7FBC089C7C7EBA91A8CC826EB422948" );
            self.owner scripts\cp\vehicles\vehicle_compass_cp::_id_12098( self );
        }

        self.owner scripts\mp\utility\stats::incpersstat( "_encstr_B159114873BDFBA3975708FE12E76ADBA2DAB8", 1 );
        self.owner scripts\mp\supers::hide_plunderboxes( "_encstr_B4F610A33B508F1370C93A2210A8838250D9" );
        self.usedcount++;
    }
}

supportbox_onmovingplatformdeath( var_0 )
{
    supportbox_destroy( 1 );
}

supportbox_handlemovingplatforms( var_0 )
{
    var_1 = spawnstruct();
    var_1.linkparent = var_0;
    var_1.deathoverridecallback = ::supportbox_onmovingplatformdeath;
    var_1.endonstring = "_encstr_A3750609A5E61883";
    var_1.validateaccuratetouching = 1;

    if ( isdefined( var_0 ) && _calloutmarkerping_handleluinotify_enemyrepinged::tugofwar_tank( var_0 ) )
    {
        var_1._id_123B4 = 1;
        self _meth_87BA( 1 );
    }

    thread scripts\mp\movers::handle_moving_platforms( var_1 );
}

supportbox_watchdisownedtimeout()
{
    self endon( "_encstr_A3750609A5E61883" );
    supportbox_watchdisownedtimeoutinternal();

    if ( isdefined( self ) && !istrue( self.isdestroyed ) )
        thread supportbox_destroy();
}

supportbox_watchdisownedtimeoutinternal()
{
    self.owner endon( "_encstr_8A820B4696CDB1ED3737AC1B3A" );
    self.owner endon( "_encstr_B2170C4AD884CDC823B9DB9D9F42" );
    self.owner endon( "_encstr_8CD0124A97D7F07BAD07C8C342FAA010C490DD5B" );
    level endon( "_encstr_AD1D0BEF9161A06F1F684ADA39" );
    scripts\mp\hostmigration::waitlongdurationwithhostmigrationpause( 60 );
}

supportbox_empapplied( var_0 )
{
    var_1 = var_0.attacker;
    supportbox_givepointsfordeath( var_1 );
    thread supportbox_destroy();
}

_id_139B0()
{
    foreach ( var_1 in level.players )
    {
        if ( !isdefined( var_1 ) )
            return;

        _id_139AF( var_1 );
    }
}

_id_139AF( var_0 )
{
    if ( !isdefined( self ) )
        return;

    if ( !isdefined( self.owner ) && !isdefined( self.team ) )
        return;

    if ( !isdefined( var_0 ) )
        return;

    var_1 = self.showdroplocations;

    if ( !isdefined( var_1 ) )
        return;

    var_2 = self.showemergencyhint;

    if ( !isdefined( var_2 ) )
        return;

    if ( scripts\mp\utility\game::getgametype() == "_encstr_9507034B25" && scripts\mp\menus::_id_13733() && isdefined( self.owner ) )
        var_3 = scripts\engine\utility::array_contains( _encstr_9E81231898C28383CB8760E558BF27EB18E74BB010797A7D4A032187800594B088064FFB1B::round_enemy_stuck_logic( self.owner.team, self.owner.squadindex ), var_0 );
    else
    {
        if ( isdefined( self.owner ) )
            var_4 = self.owner.team;
        else
            var_4 = self.team;

        var_3 = scripts\mp\utility\player::isfriendly( var_4, var_0 );
    }

    var_5 = isdefined( self.playersused ) && isdefined( self.playersused[var_0 getentitynumber()] );

    if ( var_3 && !var_5 )
    {
        scripts\cp_mp\entityheadicons::_id_1315D( var_1, var_0 );
        scripts\cp_mp\entityheadicons::_id_1315E( var_2, var_0 );
    }
    else if ( var_3 )
    {
        scripts\cp_mp\entityheadicons::_id_1315E( var_1, var_0 );
        scripts\cp_mp\entityheadicons::_id_1315D( var_2, var_0 );
    }
    else
    {
        scripts\cp_mp\entityheadicons::_id_1315E( var_1, var_0 );
        scripts\cp_mp\entityheadicons::_id_1315E( var_2, var_0 );
    }
}

#using_animtree("_encstr_B1CF0CC7CF3E927058D976FD7148");

supportbox_getdeployanimduration()
{
    return getanimlength( %_encstr_82071A4B2127ABD5AB280F736081B7634F4C92C5959D123790103F7B );
}

#using_animtree("_encstr_A40101");

supportbox_getuseanimduration()
{
    return getanimlength( %_encstr_9DBA23808F675BDB2B3AA82E132227E2BF4F50C877FEF1D7C22711BD212A2109E617E0B09F );
}

#using_animtree("_encstr_A40101");

supportbox_getcloseanimduration()
{
    return getanimlength( %_encstr_BA521B1848DE98780B2F7DE0234DD2A2A767F80F506A8D3F882040A3B2 );
}

supportbox_usedcallback( var_0, var_1 )
{
    if ( istrue( var_1.isjuggernaut ) && level.gametype != "_encstr_9507034B25" )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) )
            var_1 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) ]]( "_encstr_8C23201BC3314517752F3860142E2E0C01378F876FF19D1B90C791583DAF9F3229A9" );

        return;
    }

    if ( var_0 supportbox_playercanuse( var_1 ) )
    {
        if ( isdefined( level._id_12099 ) )
            var_2 = var_0 [[ level._id_12099 ]]( var_1 );
        else
            var_2 = var_0 supportbox_onplayeruse( var_1 );

        if ( var_2 )
        {
            var_0.playersused[var_1 getentitynumber()] = var_1;
            var_0 _id_139AF( var_1 );
            var_0 supportbox_givexpforuse( var_1 );
        }
    }
}

calloutmarkerpingvo_playpredictivepingcleared( var_0, var_1 )
{
    if ( istrue( var_1.isjuggernaut ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) )
            var_1 [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "_encstr_801904A15DC8", "_encstr_A4851193A81077FF205DAFBA4BF03A3F4FE14A" ) ]]( "_encstr_8C23201BC3314517752F3860142E2E0C01378F876FF19D1B90C791583DAF9F3229A9" );

        return;
    }

    if ( var_0 supportbox_playercanuse( var_1 ) )
    {
        if ( isdefined( level._id_11FFE ) )
            var_2 = var_0 [[ level._id_11FFE ]]( var_1 );
        else
            var_2 = 0;

        if ( var_2 && !istrue( var_0._id_13F0F ) )
        {
            var_0.playersused[var_1 getentitynumber()] = var_1;
            var_0 _id_139AF( var_1 );
            var_0 supportbox_givexpforuse( var_1 );
        }
    }
}
