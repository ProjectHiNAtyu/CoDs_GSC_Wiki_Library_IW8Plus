// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

setvehiclearchetype( var_0, var_1, var_2 )
{
    scripts\asm\shared\utility::setoverridearchetype( "_encstr_9A50080BA7292FFA0DA2", self._blackboard.currentvehicleanimalias, 1 );
}

clearvehiclearchetype( var_0, var_1, var_2 )
{
    scripts\asm\shared\utility::clearoverridearchetype( "_encstr_9A50080BA7292FFA0DA2", 0, 1 );
}

chooseanim_vehicle( var_0, var_1, var_2 )
{
    return scripts\asm\asm::asm_lookupanimfromalias( var_1, scripts\engine\utility::string( self._blackboard.chosenvehicleposition.vehicle_position ) );
}

getvehicleplayerturretcamo( var_0, var_1, var_2 )
{
    return scripts\asm\asm::asm_lookupanimfromalias( var_1, "_encstr_AFAB063620A0C612" );
}

getvehiclespawns( var_0, var_1, var_2 )
{
    return scripts\asm\asm::asm_lookupanimfromalias( var_1, "_encstr_B674156C3DFB70A77D3A89D8D3127D09639FFD6D91D318" );
}

shouldentervehicle( var_0, var_1, var_2, var_3 )
{
    if ( isdefined( self._blackboard.currentvehicle ) && istrue( self._blackboard.movedtovehicle ) )
        return 1;

    return 0;
}

getvehicleanimtargetoriginandangles( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = [];

    if ( !isdefined( var_4 ) )
        var_4 = 1.0;

    if ( isdefined( var_0 ) && isdefined( var_2 ) )
    {
        var_6 = var_0 gettagorigin( var_2 );
        var_7 = var_0 gettagangles( var_2 );
        var_8 = getstartorigin( var_6, var_7, var_1 );
        var_9 = getstartangles( var_6, var_7, var_1 );
        var_10 = getmovedelta( var_1, 0.0, var_4 );
        var_11 = getangledelta3d( var_1, 0.0, var_4 )[1];
        var_5["_encstr_B19E0CDCE8C29CA39EC9A5D9A573"] = var_8;
        var_5["_encstr_B1D40CB94716C93A28E63BD89537"] = var_9;
        var_5["_encstr_A6200D5388CBEFDA793002FC1C6B22"] = rotatevector( var_10, var_9 ) + var_8;
        var_5["_encstr_8E890DBBF01D2F6763478EBFF96977"] = ( var_9[0], angleclamp( var_9[1] + var_11 ), var_9[2] );
    }
    else
    {
        var_5["_encstr_B19E0CDCE8C29CA39EC9A5D9A573"] = self.origin;
        var_5["_encstr_B1D40CB94716C93A28E63BD89537"] = self.angles;
        var_5["_encstr_A6200D5388CBEFDA793002FC1C6B22"] = var_3.origin;
        var_5["_encstr_8E890DBBF01D2F6763478EBFF96977"] = var_3.angles;
    }

    return var_5;
}

linktovehicle( var_0, var_1, var_2, var_3 )
{
    self forceteleport( var_0, var_1 );

    if ( istrue( var_2 ) )
        self linktoblendtotag( self._blackboard.currentvehicle, var_3, 0 );
    else
        self linktomoveoffset( self._blackboard.currentvehicle, var_3 );

    if ( isagent( self ) )
        self playerlinkedoffsetenable();

    self._blackboard.linkedtovehicle = 1;
}

faceenemyincombat( var_0, var_1 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );

    for (;;)
    {
        var_2 = istrue( self._blackboard.chosenvehicleposition.canshootinvehicle ) && ( !isdefined( self.canshootinvehicle ) || istrue( self.canshootinvehicle ) );
        var_3 = isdefined( self._blackboard.currentvehicle ) && !istrue( self._blackboard.currentvehicle.vehicledisableturningwhileshooting );
        var_4 = isdefined( self.enemy ) && ( !( isplayer( self.enemy ) || isai( self.enemy ) ) || isalive( self.enemy ) );
        var_5 = vehicleincombat( var_0, var_1, var_1 );

        if ( var_5 && var_4 && var_2 && var_3 )
        {
            var_6 = anglestoaxis( self._blackboard.currentvehicle.angles );
            var_7 = var_6["_encstr_B42E085325A82CB3F221"];
            var_8 = var_6["_encstr_87070365F7"];
            var_9 = scripts\engine\utility::getyaw( self.enemy.origin ) - self._blackboard.currentvehicle.angles[1];
            var_9 = angleclamp180( var_9 );
            var_10 = rotatepointaroundvector( var_8, var_7, var_9 );
            var_11 = axistoangles( var_10, vectorcross( var_10, var_8 ), var_8 );
            self orientmode( "_encstr_91440EF5D7AA1B467F70DAB9531A9ED1", var_11 );
        }
        else
            self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );

        waitframe();
    }
}

playanim_vehicleidle( var_0, var_1, var_2 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    self.leftaimlimit = 90;
    self.rightaimlimit = -90;
    setvehiclearchetype();

    if ( !istrue( self._blackboard.linkedtovehicle ) && isdefined( self._blackboard.currentvehicle ) )
    {
        var_3 = scripts\asm\asm::asm_getanim( var_0, "_encstr_AB320D5D273203A0AC9F26F8C784D8" );
        var_4 = scripts\asm\asm::asm_getxanim( "_encstr_AB320D5D273203A0AC9F26F8C784D8", var_3 );
        self.asm.targetvalues = getvehicleanimtargetoriginandangles( self._blackboard.currentvehicle, var_4, self._blackboard.chosenvehicleanimpos.sittag, self._blackboard.chosenvehicleposition );
        linktovehicle( self.asm.targetvalues["_encstr_A6200D5388CBEFDA793002FC1C6B22"], self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"], self._blackboard.chosenvehicleanimpos.linktoblend, self._blackboard.chosenvehicleanimpos.sittag );
    }

    self animmode( "_encstr_8B970A9BF6D99C589DD2472F" );
    self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );
    var_5 = scripts\asm\asm::asm_getanim( var_0, var_1 );
    self aisetanim( var_1, var_5 );
    scripts\asm\asm::asm_donotetracks( var_0, var_1, scripts\asm\asm::asm_getnotehandler( var_0, var_1 ) );
}

_id_1426F( var_0 )
{
    self endon( "_encstr_AD75063D571AE108" );
    var_1 = 5;
    var_2 = 10;
    var_3 = 0.1;
    var_0 startfiring();

    for (;;)
    {
        var_4 = 1;
        var_5 = gettime() + var_2 * 1000;

        while ( var_4 && var_5 > gettime() )
        {
            var_0 shootturret();
            wait( var_3 );
        }

        wait( var_1 );
    }
}

_id_1244B( var_0, var_1, var_2 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    scripts\common\utility::lookatentity( level.player );
    self useturret( self._blackboard.currentvehicle.mgturret[0] );

    if ( isdefined( self._blackboard.currentvehicle.mgturret ) )
        thread _id_1426F( self._blackboard.currentvehicle.mgturret[0] );

    setvehiclearchetype();
    self animmode( "_encstr_8B970A9BF6D99C589DD2472F" );
    self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );
    var_3 = scripts\asm\asm::asm_getanim( var_0, var_1 );
    self aisetanim( var_1, var_3 );
    scripts\asm\asm::asm_donotetracks( var_0, var_1, scripts\asm\asm::asm_getnotehandler( var_0, var_1 ) );
}

_id_1244C( var_0, var_1, var_2 )
{
    clearvehiclearchetype();
    self stopuseturret();

    if ( isdefined( self._blackboard.currentvehicle.mgturret ) )
        self._blackboard.currentvehicle.mgturret[0] setmode( "_encstr_84FD0F03BB736BB3C36E7AF251911725E0" );
}

waitforturn( var_0, var_1 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );

    if ( isdefined( self._blackboard.chosenvehicleanimpos.sittag ) )
    {
        self animmode( "_encstr_8BBA05185F8B99" );
        self orientmode( "_encstr_A34A0B518A172592D6E64FA115", self._blackboard.chosenvehicleposition.angles[1] );

        while ( abs( self.angles[1] - self._blackboard.chosenvehicleposition.angles[1] ) > 5 )
            waitframe();

        self motionwarp( self._blackboard.chosenvehicleposition.origin, self._blackboard.chosenvehicleposition.angles, 250 );
        wait 0.25;
    }

    scripts\asm\asm::asm_fireevent( var_0, "_encstr_961804BD954A" );
}

shouldorienttoentervehicle( var_0, var_1, var_2, var_3 )
{
    if ( shouldentervehicle( var_0, var_1, var_2, var_3 ) )
    {
        if ( abs( self._blackboard.chosenvehicleposition.angles[1] - self.angles[1] ) > 3 )
            return 1;

        if ( distance2d( self._blackboard.chosenvehicleposition.origin, self.origin ) > 5 )
            return 1;
    }

    return 0;
}

shouldentervehicleearly( var_0, var_1, var_2, var_3 )
{
    if ( shouldentervehicle( var_0, var_1, var_2, var_3 ) && !shouldorienttoentervehicle( var_0, var_1, var_2, var_3 ) )
        return 1;

    return 0;
}

playanim_arriveatvehicle( var_0, var_1, var_2 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    thread waitforturn( var_0, var_1 );
    scripts\asm\asm::asm_loopanimstate( var_0, var_1, 1.0 );
}

arriveatvehicle_terminate( var_0, var_1, var_2 )
{
    self motionwarpcancel();
}

_id_12D9E()
{
    self endon( "_encstr_AD75063D571AE108" );
    self endon( "_encstr_ABE91511E087D917799209ECCFD307EBA3878E0BC1EE0F" );
    self endon( "_encstr_A7C419339835372FA1AAA868E1209E6BF853DFD5439930422022AA" );

    for (;;)
    {
        self orientmode( "_encstr_91440EF5D7AA1B467F70DAB9531A9ED1", self.angles );
        waitframe();
    }
}

enterexitvehiclemotionwarp( var_0, var_1, var_2, var_3, var_4 )
{
    self endon( "_encstr_AD75063D571AE108" );
    self endon( "_encstr_ABE91511E087D917799209ECCFD307EBA3878E0BC1EE0F" );
    var_5 = getanimlength( var_1 );
    var_6 = getnotetracktimes( var_1, "_encstr_8E6A12DF40FBB7D7CAA96F81BA6787164D97BAB5" )[0];
    var_7 = getnotetracktimes( var_1, "_encstr_81411083374B18F8F3B1D3190BE3B8206594" )[0];

    if ( !isdefined( var_6 ) )
        var_6 = 0.0;

    if ( !isdefined( var_7 ) )
        var_7 = 1.0;

    if ( var_3 )
    {
        if ( isdefined( self._blackboard.chosenvehicleanimpos.fastroperig ) )
            thread _id_12D9E();
        else
        {
            if ( isdefined( var_4 ) )
                self.asm.targetvalues = getvehicleanimtargetoriginandangles( self._blackboard.currentvehicle, var_4, var_2, self._blackboard.chosenvehicleposition, var_7 );
            else
                self.asm.targetvalues = getvehicleanimtargetoriginandangles( self._blackboard.currentvehicle, var_1, var_2, self._blackboard.chosenvehicleposition, var_7 );

            self orientmode( "_encstr_91440EF5D7AA1B467F70DAB9531A9ED1", self.asm.targetvalues["_encstr_B1D40CB94716C93A28E63BD89537"] );
        }
    }

    var_8 = var_5 * var_6;
    wait( var_8 );

    if ( !isdefined( self.asm ) )
        return;

    self notify( "_encstr_A7C419339835372FA1AAA868E1209E6BF853DFD5439930422022AA" );

    if ( isdefined( var_4 ) )
        self.asm.targetvalues = getvehicleanimtargetoriginandangles( self._blackboard.currentvehicle, var_4, var_2, self._blackboard.chosenvehicleposition, var_7 );
    else
        self.asm.targetvalues = getvehicleanimtargetoriginandangles( self._blackboard.currentvehicle, var_1, var_2, self._blackboard.chosenvehicleposition, var_7 );

    var_9 = self.asm.targetvalues["_encstr_A6200D5388CBEFDA793002FC1C6B22"];

    if ( var_3 )
    {
        self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"] = ( 0, self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"][1], 0 );
        var_9 = getclosestpointonnavmesh( self.asm.targetvalues["_encstr_A6200D5388CBEFDA793002FC1C6B22"] );
        var_10 = scripts\engine\trace::create_solid_ai_contents( 1 );
        var_11 = [ self, self._blackboard.currentvehicle ];
        var_12 = var_9 + ( 0, 0, 64 );
        var_13 = var_9 + ( 0, 0, -1000 );
        var_14 = physics_spherecast( var_12, var_13, 12, var_10, var_11, "_encstr_838C158FAC235780CB6F10381FF25AD76A558896473B11" );

        if ( isdefined( var_14 ) && var_14.size > 0 )
            var_9 = var_14[0]["_encstr_BD260953AA97E3F014279D"];

        self orientmode( "_encstr_91440EF5D7AA1B467F70DAB9531A9ED1", self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"] );
    }

    var_18 = ( var_7 - var_6 ) * var_5;
    self motionwarp( var_9, self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"], int( var_18 * 1000 ) );

    if ( var_3 )
    {
        wait( var_18 );

        if ( !isdefined( self._blackboard ) )
            return;

        if ( istrue( self._blackboard.linkedtovehicle ) )
        {
            self unlink();
            self._blackboard.linkedtovehicle = undefined;
            self orientmode( "_encstr_A34A0B518A172592D6E64FA115", self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"][1] );
            self animmode( "_encstr_8AD6086722F1FB98F58B" );
        }

        self notify( "_encstr_B4350A0AAB73BA371120E5FC" );
    }
}

playanim_entervehicle( var_0, var_1, var_2 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    setvehiclearchetype();
    self.asm.customdata.arrivalangles = undefined;
    self._blackboard.startedenteringvehicle = 1;
    var_3 = scripts\asm\asm::asm_getanim( var_0, var_1 );
    var_4 = scripts\asm\asm::asm_getxanim( var_1, var_3 );
    self animmode( "_encstr_8B970A9BF6D99C589DD2472F" );
    self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );

    if ( isdefined( self._blackboard.currentvehicle ) )
    {
        if ( !istrue( self._blackboard.linkedtovehicle ) )
            linktovehicle( self.origin, self.angles, self._blackboard.chosenvehicleanimpos.linktoblend, self._blackboard.chosenvehicleanimpos.sittag );

        var_5 = scripts\asm\asm::asm_getanim( var_0, "_encstr_AB320D5D273203A0AC9F26F8C784D8" );
        var_6 = scripts\asm\asm::asm_getxanim( "_encstr_AB320D5D273203A0AC9F26F8C784D8", var_5 );
        thread enterexitvehiclemotionwarp( var_1, var_4, self._blackboard.chosenvehicleanimpos.sittag, 0, var_6 );
    }

    self aisetanim( var_1, var_3 );
    scripts\asm\asm::asm_donotetracks( var_0, var_1, scripts\asm\asm::asm_getnotehandler( var_0, var_1 ) );
}

entervehicle_terminate( var_0, var_1, var_2 )
{
    clearvehiclearchetype();

    if ( isalive( self ) )
    {
        if ( !istrue( self._blackboard.linkedtovehicle ) && isdefined( self._blackboard.currentvehicle ) )
        {
            linktovehicle( self.asm.targetvalues["_encstr_A6200D5388CBEFDA793002FC1C6B22"], self.asm.targetvalues["_encstr_8E890DBBF01D2F6763478EBFF96977"] );
            self.asm.targetvalues = undefined;
        }

        self._blackboard.enteredvehicle = 1;
    }

    self motionwarpcancel();
}

shouldexitvehicle( var_0, var_1, var_2, var_3 )
{
    if ( !_id_14233() )
        return 0;

    if ( istrue( self._blackboard.exitingvehicle ) )
    {
        scripts\vehicle\vehicle_common::exitingvehicle();
        return 1;
    }

    return 0;
}

exitvehiclewatchpath( var_0 )
{
    self endon( var_0 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );

    for (;;)
    {
        if ( isdefined( self.pathgoalpos ) )
        {
            self animmode( "_encstr_820E07FAE8780B3A4C" );
            self orientmode( "_encstr_84280CCC58B159106BB7D14B7B37" );
            return;
        }

        waitframe();
    }
}

playanim_exitvehicle( var_0, var_1, var_2 )
{
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    self setdefaultaimlimits();
    self.requestopendoor = 1;
    self.requestopendoorparams = var_2;

    if ( isdefined( self._blackboard.currentvehicle ) && isdefined( self._blackboard.chosenvehicleanimpos.vehicle_getoutanim ) )
    {
        var_3 = getanimname( self._blackboard.chosenvehicleanimpos.vehicle_getoutanim );
        self._blackboard.currentvehicle.maxdogtags[var_3]._id_1212C = 1;
    }

    scripts\engine\utility::set_movement_speed( 60 );
    self aisettargetspeed( 60 );
    self.onquesttablethide = self.turnrate;
    self.turnrate = 0.3;

    if ( istrue( self._blackboard.chosenvehicleanimpos.death_no_ragdoll ) )
        self.noragdoll = undefined;

    setvehiclearchetype();
    var_4 = scripts\asm\asm::asm_getanim( var_0, var_1 );
    var_5 = scripts\asm\asm::asm_getxanim( var_1, var_4 );
    self._blackboard.exitvehicleanimindex = var_4;

    if ( isdefined( self._blackboard.currentvehicle ) )
    {
        if ( isdefined( self._blackboard.chosenvehicleanimpos.exittag ) )
            thread enterexitvehiclemotionwarp( var_1, var_5, self._blackboard.chosenvehicleanimpos.exittag, 1, undefined );
        else
            thread enterexitvehiclemotionwarp( var_1, var_5, self._blackboard.chosenvehicleanimpos.sittag, 1, undefined );
    }

    self animmode( "_encstr_8B970A9BF6D99C589DD2472F" );
    self aisetanim( var_1, var_4 );
    var_6 = scripts\asm\asm::asm_donotetracks( var_0, var_1, scripts\asm\asm::asm_getnotehandler( var_0, var_1 ), undefined, undefined, 0 );

    if ( var_6 == "_encstr_B6B30A278FC7F078673A0B11" )
    {
        thread exitvehiclewatchpath( var_1 );
        scripts\asm\asm::asm_donotetracks( var_0, var_1, scripts\asm\asm::asm_getnotehandler( var_0, var_1 ), undefined, undefined, 0 );
    }

    scripts\asm\asm::asm_fireevent( var_0, "_encstr_961804BD954A" );
}

endvehiclemotionwarp()
{
    self notify( "_encstr_ABE91511E087D917799209ECCFD307EBA3878E0BC1EE0F" );
    self.asm.targetvalues = undefined;
    self motionwarpcancel();
}

exitvehicle_terminate( var_0, var_1, var_2 )
{
    self._blackboard.invehicle = undefined;
    scripts\common\utility::clear_movement_speed();

    if ( isdefined( self.onquesttablethide ) )
    {
        self.turnrate = self.onquesttablethide;
        self.onquesttablethide = undefined;
    }

    if ( !isalive( self ) && !istrue( self._blackboard.chosenvehicleanimpos.vehicle_death_ragdoll ) )
    {
        var_3 = scripts\asm\asm::asm_getxanim( var_1, self._blackboard.exitvehicleanimindex );
        var_4 = self aigetanimtime( var_1, self._blackboard.exitvehicleanimindex );
        var_5 = getanimlength( var_3 );
        var_6 = getnotetracktimes( var_3, "_encstr_8DA5133B56344B36D856AFC895C23A0DEBEE2C5A1D" )[0];
        var_7 = getnotetracktimes( var_3, "_encstr_824216F3BD31A1E094D1A121852939A46110C004018FF878" )[0];
        var_8 = self._blackboard.currentvehicle scripts\common\vehicle::ishelicopter() && self._blackboard.currentvehicle scripts\common\vehicle::vehicle_is_crashing();

        if ( isdefined( var_6 ) && isdefined( var_7 ) )
        {
            if ( var_4 < var_6 )
                self._blackboard.invehicle = 1;
            else if ( var_4 < var_7 )
            {
                if ( var_8 )
                    self._blackboard.invehicle = 1;
                else
                {
                    self._blackboard.vehicledeathwait = ( var_7 - var_4 ) * var_5;
                    self._blackboard.vehicleexitanimtime = var_4;
                    self._blackboard.vehicleexitstatename = var_1;
                }
            }
        }
    }
    else if ( istrue( self._blackboard.linkedtovehicle ) )
    {
        self unlink();
        self._blackboard.linkedtovehicle = undefined;
        self notify( "_encstr_B4350A0AAB73BA371120E5FC" );
    }

    if ( !isdefined( self._blackboard.vehicledeathwait ) )
    {
        endvehiclemotionwarp();
        self._blackboard.exitvehicleanimindex = undefined;
    }

    self._blackboard.exitingvehicle = undefined;
    self.requestopendoor = undefined;
    self.requestopendoorparams = undefined;
    clearvehiclearchetype();
}

watchvehicledeath()
{
    self endon( "_encstr_8A490E5973475A8EE546CA63B23ACA46" );

    if ( self isragdoll() )
        return;

    if ( isdefined( self._blackboard.currentvehicle ) )
    {
        var_0 = self._blackboard.currentvehicle;

        for (;;)
        {
            if ( !isdefined( self ) )
                return;

            if ( !isdefined( var_0 ) || var_0 scripts\common\vehicle_code::vehicle_iscorpse() )
            {
                self startragdoll();
                self.skipdeathcleanup = 0;
                scripts\asm\soldier\death::deathcleanup();
                return;
            }

            waitframe();
        }
    }
}

playanim_vehicledeath( var_0, var_1, var_2 )
{
    if ( !isdefined( self ) )
        return;

    setvehiclearchetype();

    if ( !isagent( self ) )
    {
        if ( isdefined( self.damagemod ) && self.damagemod == "_encstr_9B0D099AD3887D91252954" )
            self.ragdoll_directionscale = 0;

        scripts\asm\soldier\death::handleburningtodeath();
        self.burningtodeath = undefined;

        if ( isdefined( self._blackboard.vehicledeathwait ) )
        {
            var_3 = animsetgetallanimindicesforalias( self._blackboard.currentvehicleanimalias, self._blackboard.vehicleexitstatename, self._blackboard.exitvehicleanimindex );
            self aisetanim( self._blackboard.vehicleexitstatename, self._blackboard.exitvehicleanimindex, 1 );
            self aisetanimtime( var_3, self._blackboard.vehicleexitanimtime );
            self animmode( "_encstr_B69807B9DE36C69683" );
            wait( self._blackboard.vehicledeathwait );
            self.ragdoll_directionscale = 0;
            endvehiclemotionwarp();
            self._blackboard.exitvehicleanimindex = undefined;
            self._blackboard.vehicledeathwait = undefined;
        }

        self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );

        if ( !istrue( self._blackboard.invehicle ) || istrue( self._blackboard.chosenvehicleanimpos.vehicle_death_ragdoll ) )
        {
            self.skipdeathcleanup = 0;
            self.forceragdollimmediate = 1;
            self.nogravityragdoll = 1;
        }
        else
        {
            self animmode( "_encstr_8B970A9BF6D99C589DD2472F" );
            self.noragdoll = 1;
            self.skipdeathcleanup = 1;
            thread watchvehicledeath();
        }
    }
    else
    {
        self motionwarpcancel();
        self orientmode( "_encstr_85C814B4E90721D14ECB3038E22521D1679E4C3945FF" );
    }

    scripts\asm\soldier\death::playdeathanim( var_0, var_1, var_2 );
}

playanim_vehicle( var_0, var_1, var_2 )
{
    setvehiclearchetype();
    scripts\asm\asm::asm_playanimstate( var_0, var_1, var_2 );
}

playanim_vehiclereload( var_0, var_1, var_2 )
{
    self endon( "_encstr_A1D411E4CA8DDE2C32AF8E56C9D65ACD16A356" );
    self endon( var_1 + "_encstr_A3DB0AF5332DDCD237D0AC8C" );
    setvehiclearchetype();
    var_3 = scripts\asm\asm::asm_getanim( var_0, var_1 );
    self aisetanim( var_1, var_3 );
    var_4 = scripts\asm\asm::asm_getxanim( var_1, var_3 );
    scripts\asm\asm::asm_playfacialanim( var_0, var_1, var_4 );
    scripts\asm\asm::asm_donotetracks( var_0, var_1, undefined, undefined, undefined, 1 );
}

vehiclereload_terminate( var_0, var_1, var_2 )
{
    scripts\asm\soldier\script_funcs::reload_cleanup( var_0, var_1, var_2 );
    clearvehiclearchetype();
}

isinvehicle( var_0, var_1, var_2, var_3 )
{
    return istrue( self._blackboard.invehicle );
}

isnotinvehicle( var_0, var_1, var_2, var_3 )
{
    return !istrue( self._blackboard.invehicle );
}

update_sentry_settings( var_0, var_1, var_2, var_3 )
{
    return isdefined( self._blackboard.requestedturret );
}

vehicleincombat( var_0, var_1, var_2, var_3 )
{
    if ( weaponclass( self.weapon ) == "_encstr_BA080F126090E3D245A1F7BFBDE6CA25A0" )
        return 0;

    return scripts\asm\asm::asm_getdemeanor() == "_encstr_AA7C07466F9DA30713";
}

vehiclecanshoot( var_0, var_1, var_2, var_3 )
{
    return istrue( self._blackboard.chosenvehicleposition.canshootinvehicle ) && vehiclehasalias( var_0, var_1, var_2, var_3 ) && ( !isdefined( self.canshootinvehicle ) || istrue( self.canshootinvehicle ) );
}

vehiclecanshootlmg( var_0, var_1, var_2, var_3 )
{
    var_4 = weaponclass( self.weapon );

    if ( var_4 == "_encstr_BE0703A54C" )
        return vehiclecanshoot( var_0, var_1, var_2, var_3 );

    return 0;
}

vehicleshouldhide( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\asm\asm_bb::bb_iswhizbyrequested() )
        return 0;

    scripts\asm\asm_bb::bb_requestwhizby( undefined );
    self._blackboard.vehiclehidetime = gettime() + randomintrange( 1000, 3000 );
    return vehiclehasalias( var_0, var_1, var_2, var_3 );
}

vehicleshouldstophide( var_0, var_1, var_2, var_3 )
{
    return gettime() > self._blackboard.vehiclehidetime;
}

vehiclehasalias( var_0, var_1, var_2, var_3 )
{
    var_4 = self._blackboard.currentvehicleanimalias;
    var_5 = scripts\engine\utility::string( self._blackboard.chosenvehicleposition.vehicle_position );
    var_6 = archetypegetrandomalias( var_4, var_2, var_5, scripts\asm\asm::asm_isfrantic() );
    return isdefined( var_6 );
}

vehicleshouldrunexit( var_0, var_1, var_2, var_3 )
{
    return vehiclehasalias( var_0, var_1, var_2, var_3 ) && istrue( self.vehiclerunexit );
}

vehicleshouldsetuprope( var_0, var_1, var_2, var_3 )
{
    if ( !_id_14233() )
        return 0;

    if ( istrue( self._blackboard.vehiclesetuprope ) )
    {
        scripts\vehicle\vehicle_common::exitingvehicle();
        self._blackboard.vehiclesetuprope = undefined;
        return 1;
    }

    return 0;
}

vehiclegetoutcodemove( var_0, var_1, var_2, var_3 )
{
    if ( scripts\asm\asm::asm_eventfired( var_0, "_encstr_B6B30A278FC7F078673A0B11" ) && isdefined( self.pathgoalpos ) )
        return 1;

    return 0;
}

_id_14233()
{
    if ( !isdefined( self._blackboard.currentvehicle ) || self._blackboard.currentvehicle scripts\common\vehicle_code::vehicle_iscorpse() )
        return 1;

    if ( !isdefined( self._blackboard.chosenvehicleanimpos.vehicle_getoutanim ) )
        return 1;

    var_0 = getanimname( self._blackboard.chosenvehicleanimpos.vehicle_getoutanim );

    if ( isdefined( self._blackboard.currentvehicle.maxdogtags ) && ( self._blackboard.currentvehicle.maxdogtags[var_0].open || self._blackboard.currentvehicle.maxdogtags[var_0]._id_1212C ) )
        return 1;

    if ( !isdefined( self._blackboard.currentvehicle.get_allowed_population ) || self._blackboard.currentvehicle.get_allowed_population )
        return 1;

    return 0;
}
