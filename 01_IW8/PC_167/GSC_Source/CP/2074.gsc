// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

#using_animtree("_encstr_A35F099B8B0BAA5B5081FA");

main( var_0, var_1, var_2 )
{
    scripts\common\vehicle_build::build_template( "_encstr_951007814D5B63F807", var_0, var_1, var_2 );
    scripts\common\vehicle_build::build_localinit( ::init_local );
    scripts\common\vehicle_build::build_deathmodel( "_encstr_B85414BCDF02F19615D70899DF390B87EA86364F732A" );
    scripts\common\vehicle_build::build_deathfx( "_encstr_8A7D2554A580A818D093C0466228D7C59E518A03AF79E349CF280399936B22487C5E2116EB8C9B", "_encstr_A6D70CA3B0D97DACC3A12CABCD1D", "_encstr_A1C61B2410485CC11BE393BFD7B0FB84C89B11AF8AD8EE1AF89997AF19", undefined, undefined, 1, 0.5, 1, undefined );
    scripts\common\vehicle_build::build_rocket_deathfx( "_encstr_AB643B94D653506B6347B250FB3D1118C77B1E83388B41458DFA58A29397D9AEBBE883108DA7A8F736022819CAAE85A16387B8751D2393C39A9EB3D8A3", "_encstr_A2B40B8E2C3B7DDB274B9D4B37", "_encstr_AF73140D3BFB572AB79A176E47087BED9A49EE15DD05", undefined, undefined, 0, 0, 0 );
    scripts\common\vehicle_build::build_radiusdamage( ( 0, 0, 0 ), 500, 120, 20 );
    scripts\common\vehicle_build::build_treadfx( var_2, "_encstr_8B1608EC43B8D647A113", "_encstr_A2F42585F3EBF868176729688BD28007826E313BB382881825BAF37EB7ADD04F4B8BB12543DAE3" );
    scripts\common\vehicle_build::build_life( 800 );
    scripts\common\vehicle_build::build_team( "_encstr_9A8507BA4040188D08" );
    scripts\common\vehicle_build::build_aianims( ::setanims );
    scripts\common\vehicle_build::build_light( var_2, "_encstr_B17E16686F9C1E1F6ABCE56519E26180CE3F7960F73CB0DB", "_encstr_A2B40B8E2C3B7DDB274B9D4B37", "_encstr_BD7B3394B14BD79B0B28CFB12540E9477162634F63404E93D8DABFE1A35A7890606F36603A2278FBDE77017B70DF7B65BB20106D09", "_encstr_92B408E4D573DCD2CDEC" );
    scripts\common\vehicle_build::build_unload_groups( ::unload_groups );
    scripts\common\vehicle_build::build_bulletshield( 1 );
    scripts\common\vehicle_build::build_is_helicopter();
    scripts\common\vehicle_build::build_drive( %_encstr_8D150ED89A22030B778FEE689C4FB3EF, undefined, 0, 3.0 );

    if ( var_2 == "_encstr_96301F92C72534F043AF1B4D58BF3E1C73C187E338719A60237273D2F949FB3E0F" || var_2 == "_encstr_91212442880A10292B59EB157A7BAE08DB0F11D440914DC22B2B5E28F74A5B33535715F03F83" || var_2 == "_encstr_ACD6315B966B8702F1E96B52B8233E6B6110D9D79396DBCEA520730A1907F32B1BF85D794E5BCF15B7B95A63B81FEEF7D05DB3" )
    {
        scripts\common\vehicle_build::build_turret( "_encstr_81AE1A48C3E2F9F32D40F0134067C113C7AE9B309610797F090DD9A8", "_encstr_A2A111470B76D75B96E6B4765D9B7D639533A3", "_encstr_AC9D21AB85E9BF1FE84BE32768400A7149AE32E6F43F01653040EFFFD058EF0A23343B", "_encstr_97910BA3154320F8EBBA8811A2", 40, 0 );
        scripts\common\vehicle_build::build_turret( "_encstr_81AE1A48C3E2F9F32D40F0134067C113C7AE9B309610797F090DD9A8", "_encstr_8AC8120CBB40A937334002EA0B98C75A982F9874", "_encstr_AD1822CB5F60CAA0C2BFF997B7AA7EA90CF633A103DF39617ABBCBFF9F82D008D10FF89B", "_encstr_97910BA3154320F8EBBA8811A2", 40, 0 );
    }

    if ( scripts\common\utility::issp() )
    {
        if ( isdefined( level.littlebird_bulletdamage ) )
        {
            level._effect["_encstr_87DB0A3A616269F75DDF7FEB"] = loadfx( "_encstr_AD1A31CB9F7072BB63FA7FEF8F1BF52A0CF633A103DFBAEC8AE3A7E9C343CF28D701B9F82F2181ADD25FD3F7F7792F9266A762" );
            level._effect["_encstr_92DB0AEA3058EF97D365E8A5"] = loadfx( "_encstr_A22731035158B70234F93EF7AF5E0A7F2079BA4ECB88CFAB8451F7C39D06327E90263655E18077426F6317F78BB8CFEE20A928" );
            level._effect["_encstr_82DB0A4DC9E0BFDC5525A72F"] = loadfx( "_encstr_A51C317BA26B0FCABF908F06A592778FC82AC0A9B86040EBB6504EBA660DA173AD3F73C73328190B2F55A3577A276650333880" );
        }
    }
}

init_local()
{
    self.unload_land_offset = 112;
    self.unload_hover_offset = 120;
    self.script_badplace = 0;
    thread scripts\common\vehicle::vehicle_lights_on( "_encstr_92B408E4D573DCD2CDEC" );
    thread handle_scriptable_vfx();
    self.vehicleanimalias = "_encstr_951007814D5B63F807";
    self.vehicledisableturningwhileshooting = 1;
    self.vehicledisableweaponreloading = 1;

    if ( scripts\common\utility::issp() && isdefined( level.littlebird_bulletdamage ) )
        thread littlebird_damage_function();
}

handle_scriptable_vfx()
{
    self endon( "_encstr_AD75063D571AE108" );

    if ( scripts\common\utility::issp() || scripts\common\utility::iscp() )
    {
        scripts\engine\utility::flag_wait( "_encstr_ABEC127358A564FBBB9F4A4CA5637F6A23D08A2B" );
        self setscriptablepartstate( "_encstr_817F076A48F76C8B81", "_encstr_AB0703DBB9" );
        self setscriptablepartstate( "_encstr_ACFF0D1B50BF6BCF23C80631FDC8AB", "_encstr_AB0703DBB9" );
    }
}

littlebird_damage_function()
{
    self endon( "_encstr_AD75063D571AE108" );
    self.stored_damage = 0;
    self.state = "_encstr_ADD308E8E3E8690D1180";
    waitframe();
    var_0 = self.maxhealth / 3;
    self.d1_health = var_0;
    self.d2_health = var_0 * 1.75;
    self.d3_health = var_0 * 2.5;
    self.d4_health = var_0 * 3;
    self.hover_states["_encstr_ADD308E8E3E8690D1180"] = ( 100, 80, 80 );
    self.hover_states["_encstr_87DB0A3A616269F75DDF7FEB"] = ( 100, 160, 100 );
    self.hover_states["_encstr_92DB0AEA3058EF97D365E8A5"] = ( 150, 400, 200 );
    self.hover_states["_encstr_82DB0A4DC9E0BFDC5525A72F"] = ( 150, 400, 200 );
    self sethoverparams( self.hover_states[self.state][0], self.hover_states[self.state][1], self.hover_states[self.state][2] );

    while ( isalive( self ) )
    {
        self waittill( "_encstr_B2BE0788BAF573592F", var_1, var_2, var_3, var_3, var_3, var_3, var_3, var_4 );

        if ( scripts\engine\utility::is_equal( var_2, level.player ) )
        {
            if ( var_1 > 1 && custom_hdromeo_check() )
                var_1 = 2000;

            if ( !scripts\engine\utility::is_equal( var_4, "_encstr_A2B40B8E2C3B7DDB274B9D4B37" ) )
                var_1 = var_1 / 2;

            if ( var_1 < 40 )
                var_1 = 40;

            self.stored_damage = self.stored_damage + var_1;
        }

        check_littlebird_damage_states();
        waitframe();
    }
}

custom_hdromeo_check()
{
    if ( scripts\engine\utility::is_equal( level.player.currentweapon.basename, "_encstr_990E1AB477E0F5CD377D4391C9EDAD95DB7D1385D88DD29BD12DD86E" ) || scripts\engine\utility::is_equal( level.player.currentweapon.basename, "_encstr_A7CC259474A121AB10194B6368E87D4AF798DE0E51A11AD33B806F37E9033DF2472A22864BC712" ) )
        return 1;
    else
        return 0;
}

check_littlebird_damage_states()
{
    switch ( self.state )
    {
        case "_encstr_ADD308E8E3E8690D1180":
            if ( self.stored_damage > self.d1_health )
            {
                self.state = "_encstr_87DB0A3A616269F75DDF7FEB";
                do_state_change();
            }

            break;
        case "_encstr_87DB0A3A616269F75DDF7FEB":
            if ( self.stored_damage > self.d2_health )
            {
                self.state = "_encstr_92DB0AEA3058EF97D365E8A5";
                do_state_change();
            }

            break;
        case "_encstr_92DB0AEA3058EF97D365E8A5":
            if ( self.stored_damage > self.d3_health )
            {
                self.state = "_encstr_82DB0A4DC9E0BFDC5525A72F";
                do_state_change();
            }

            break;
        case "_encstr_82DB0A4DC9E0BFDC5525A72F":
            if ( self.stored_damage > self.d4_health )
            {
                self.state = "_encstr_84670547C3E9F4";
                self.script_bulletshield = undefined;
                self dodamage( self.health - self.healthbuffer + 1, self.origin );
            }

            break;
    }
}

do_state_change()
{
    playfxontag( scripts\engine\utility::getfx( self.state ), self, "_encstr_A2B40B8E2C3B7DDB274B9D4B37" );
    self sethoverparams( self.hover_states[self.state][0], self.hover_states[self.state][1], self.hover_states[self.state][2] );
}

#using_animtree("_encstr_A5AD0EDA0198272AF00797B83388B643");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

#using_animtree("_encstr_B40101");

setanims()
{
    var_0 = [];

    for ( var_1 = 0; var_1 < 8; var_1++ )
        var_0[var_1] = spawnstruct();

    var_0[0].canshootinvehicle = 0;
    var_0[1].canshootinvehicle = 0;
    var_0[2].canshootinvehicle = 1;
    var_0[3].canshootinvehicle = 1;
    var_0[4].canshootinvehicle = 1;
    var_0[5].canshootinvehicle = 1;
    var_0[6].canshootinvehicle = 1;
    var_0[7].canshootinvehicle = 1;
    var_0[0].idle = %_encstr_ACCB22E4564CFA67347D1B269C2CEC7BAF074BD8DE1DD7A58CB12BBE9B2BB04E36D0C04C;
    var_0[0].idle_anim = "_encstr_ACCB22E4564CFA67347D1B269C2CEC7BAF074BD8DE1DD7A58CB12BBE9B2BB04E36D0C04C";
    var_0[1].idle = %_encstr_AC03242243FAEE8380B6D886037148FD49DB7F621BF1803B69201543FA81C6B28983D31CB227;
    var_0[1].idle_anim = "_encstr_AC03242243FAEE8380B6D886037148FD49DB7F621BF1803B69201543FA81C6B28983D31CB227";
    var_0[2].idle = %_encstr_8B2221A32792D69BF87E8968A350BD37FEDFABAAF31841A06C6F0FB6CACB3ACAB84A7B;
    var_0[3].idle = %_encstr_8D9D21C959267DD9D0AFC6C4C92CB3BDFACEBA2F64BED2321B59BE37CA0B39D8431898;
    var_0[4].idle = %_encstr_B29621D0D722D6D5B2F9112E8A1AED18B747607066C7A8B99A1F80AEA7F22DC1F8B2DA;
    var_0[5].idle = %_encstr_A609214BC15E0FEB383FE4F27DA833076839B36383B88F2730A3DFEB7BC07A8F2B3B4F;
    var_0[6].idle = %_encstr_A1A62110D21E374333C7A996C23F0B0F099A50C04FF993D9DBE53816AD67B3DF2C57FA;
    var_0[7].idle = %_encstr_A256215207A66F238A295355BB524350D0D813E14F5FD7B7D035C667521E6318817257;
    var_0[0].sittag = "_encstr_AB680B55361AD76B09EB28E886";
    var_0[1].sittag = "_encstr_93680B3AB03BAF385A1BBD8E19";
    var_0[2].sittag = "_encstr_A3CC0FEB30D11F438BF68A0750BF2AFAB3";
    var_0[3].sittag = "_encstr_93CC0FF179CFE9378F3393590A7F655832";
    var_0[4].sittag = "_encstr_A1CC0F1DC2767D0EB06E9BB273ECB23933";
    var_0[5].sittag = "_encstr_8ECC0F13404778BB59873F951D37C95581";
    var_0[6].sittag = "_encstr_B8CC0FF3835F1FE72EDBB741322F8DFB7F";
    var_0[7].sittag = "_encstr_ACCC0FA30B76AF0E58B96E56E63B2BC96C";
    var_0[2].getout = %_encstr_95C0244A85794FB3F9D9DA3298C36B57367CB5C90766EF788398D13A880326270BC8214C3149;
    var_0[3].getout = %_encstr_AFC7244BC15E0FEB383FE4F27DA833076839B36343B8BF201881DFFB6FA07E8725D6CA3A100D;
    var_0[4].getout = %_encstr_8E9B249A23F8392BC316C22A5BAFF3EDB99F1509E769FF5B7B6B0922C0F1EB263807B19CC110;
    var_0[5].getout = %_encstr_852424395989D73B0DEB634CC90BECDBFACE57CBA1F5CAC3D21D7D8DDEB5C40BE8EB2D198D59;
    var_0[6].getout = %_encstr_AB9624780DF32EAE68CFDC09387B6B2FB79FCB40AE9783305924F1621899DAEA488942D7A84B;
    var_0[7].getout = %_encstr_B8A624C8473E891B632973FAEBB89EBF91C775F905D1FDD2649361E7823BB8C103AEA97C60F7;
    var_0[0].death_no_ragdoll = 1;
    var_0[1].death_no_ragdoll = 1;
    var_0[2].vehicle_death_ragdoll = 1;
    var_0[3].vehicle_death_ragdoll = 1;
    var_0[4].vehicle_death_ragdoll = 1;
    var_0[5].vehicle_death_ragdoll = 1;
    var_0[6].vehicle_death_ragdoll = 1;
    var_0[7].vehicle_death_ragdoll = 1;
    var_0[0].isincircle = 0;
    var_0[1].isincircle = 0;
    var_0[2].isincircle = 1;
    var_0[3].isincircle = 1;
    var_0[4].isincircle = 1;
    var_0[5].isincircle = 1;
    var_0[6].isincircle = 1;
    var_0[7].isincircle = 1;
    return var_0;
}

set_vehicle_anims( var_0 )
{

}

unload_groups()
{
    var_0 = [];
    var_0["_encstr_A99B055607BB60"] = [];
    var_0["_encstr_A5AD056A019C63"] = [];
    var_0["_encstr_8253060E2B5FE330"] = [];
    var_0["_encstr_AF1904A7F929"] = [ 0, 1, 2, 3, 4, 5, 6, 7 ];
    var_0["_encstr_A99B055607BB60"] = [ 2, 3, 4, 5, 6, 7 ];
    var_0["_encstr_A5AD056A019C63"] = [ 2, 3, 4 ];
    var_0["_encstr_8253060E2B5FE330"] = [ 5, 6, 7 ];
    var_0["_encstr_8B1608EC43B8D647A113"] = var_0["_encstr_A99B055607BB60"];
    return var_0;
}
