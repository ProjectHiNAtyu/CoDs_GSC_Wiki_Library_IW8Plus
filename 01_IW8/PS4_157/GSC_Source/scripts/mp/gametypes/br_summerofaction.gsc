// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_1396C()
{
    scripts\mp\flags::gameflaginit( "activate_cash_lzs", 0 );
    tarmac_techo_start();
    level thread streakmatchlifeid();
    level thread scripts\mp\gametypes\br_event_soa_tower_helipad.gsc::init();
    waittillframeend;
    level thread scripts\mp\gametypes\br_soa_tower_ai_event.gsc::init();
    level thread grenade_trail_modifier();
    level thread _id_13C0F();
    level thread scripts\mp\gametypes\br_heavy_weapon_drop.gsc::init();
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level thread t();
    level thread tank_turret_get_target_and_fire();
    level thread success_zone_center();
    level thread tank_watchforgameend();
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "modifyVehicleDamage", ::_id_11CA1 );
}

tarmac_techo_start()
{
    level._id_12E2E = spawnstruct();
    level._id_12E2E.parachuteoverheadwarningtimeoutms = getdvarfloat( "scr_soa_event_vault_door_rotate_duration", 15.0 );
    level._id_12E2E.spotlight_turret_info = getdvarint( "scr_soa_event_vault_specialist_drops_max", 2 );
    level.spotlight_movement_think = getdvarint( "scr_i_soa_explosive_bows_to_spawn", 5 );
}

streakmatchlifeid()
{
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "dangerCircleTick", ::dangercircletick );
    scripts\engine\scriptable::scriptable_addusedcallback( ::_id_13456 );
}

tank_watchforgameend()
{
    level._id_13457 = spawnstruct();
    level._id_13457._id_1346A = scripts\mp\gametypes\br_analytics.gsc::dialog_kill_watcher_civ;
    level._id_13457.open_any_random_airlock_door = scripts\mp\gametypes\br_analytics.gsc::dialog_low_health;
    level._id_13457._id_12540 = scripts\mp\gametypes\br_analytics.gsc::detonatingplayer;
    level._id_13457._id_12650 = scripts\mp\gametypes\br_analytics.gsc::detonation_time;
    level._id_13457._id_125D1 = scripts\mp\gametypes\br_analytics.gsc::detonation_color_omnvar_value;
    level._id_13457._id_12556 = scripts\mp\gametypes\br_analytics.gsc::detonation_code_omnvar_value;
    level._id_13457._id_13738 = scripts\mp\gametypes\br_analytics.gsc::devspectateenemyteam1;
    level._id_13457._id_1373B = scripts\mp\gametypes\br_analytics.gsc::devscriptedtests;
    level._id_13457._id_145C2 = scripts\mp\gametypes\br_analytics.gsc::devspectateenemyteam2;
}

t()
{
    scripts\mp\gametypes\br_gametypes.gsc::_id_12B11( "onPlayerKilled", ::onplayerkilled );
}

tank_turret_get_target_and_fire()
{
    level waittill( "prematch_fade_done" );
    var_0 = [];
    var_0[var_0.size] = ( 37835, 11168, 869 );
    var_0[var_0.size] = ( 37010, -37468, -490 );
    var_0[var_0.size] = ( 11191, 37393, 1989 );
    var_0[var_0.size] = ( -21516, 56288, 3406 );
    var_0[var_0.size] = ( -36014, 33788, 1581 );
    var_0[var_0.size] = ( 5811, -4154, -81 );
    var_0[var_0.size] = ( -18258, -7437, 280 );
    var_0[var_0.size] = ( 39559, 43081, 2389 );
    var_0[var_0.size] = ( 23375, 15266, -121 );
    var_0[var_0.size] = ( -23164, -24840, -76 );

    if ( var_0.size )
    {
        foreach ( var_2 in var_0 )
        {
            var_3 = easepower( "brloot_soa_pow_dogtag", scripts\engine\utility::drop_to_ground( var_2, 0, -100, ( 0, 0, 1 ) ) + ( 0, 0, 25 ) );
            scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_3 );
        }
    }
}

success_zone_center()
{
    level waittill( "prematch_fade_done" );
    var_0 = [];
    var_0[var_0.size] = ( -23081, -24534, -70 );
    var_0[var_0.size] = ( 37091, -37568, -501 );
    var_0[var_0.size] = ( 6667, -4767, -82 );
    var_0[var_0.size] = ( 37611, 11364, 743 );
    var_0[var_0.size] = ( 39251, 42917, 2382 );
    var_0[var_0.size] = ( 23748, 14291, -222 );
    var_0[var_0.size] = ( 11198, 37448, 1998 );
    var_0[var_0.size] = ( -21618, 56541, 3381 );
    var_0[var_0.size] = ( -35763, 33656, 1559 );
    var_0[var_0.size] = ( -18569, -7431, 247 );
    var_0 = scripts\engine\utility::array_randomize( var_0 );

    for ( var_1 = 0; var_1 < level.spotlight_movement_think; var_1++ )
    {
        var_2 = easepower( "brloot_killstreak_explosive_bow", scripts\engine\utility::drop_to_ground( var_0[var_1], 0, -100, ( 0, 0, 1 ) ) + ( 0, 0, 25 ) );
        scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_2 );
    }
}

onplayerkilled( var_0 )
{
    var_1 = var_0.victim;
    var_2 = var_0.attacker;
    var_3 = var_0.objweapon;
    var_4 = var_0.meansofdeath;

    if ( scripts\mp\utility\game::round_vehicle_logic() == "rebirth" )
        scripts\mp\gametypes\br_gametype_rebirth.gsc::end_game_tutorial_func( var_0 );
    else if ( scripts\mp\utility\game::round_vehicle_logic() == "bodycount" )
    {
        if ( self.spawnsystem_init <= 0 )
            self.attacker thread scripts\mp\utility\points::giveunifiedpoints( "br_gametype_bodycount_final_kill" );

        thread scripts\mp\gametypes\br_gametype_bodycount.gsc::juggerbear();
    }

    if ( isplayer( var_2 ) && ( isdefined( var_3.equipmentref ) && scripts\mp\equipment::isequipmentlethal( var_3.equipmentref ) || isdefined( var_4 ) && isexplosivedamagemod( var_4 ) ) )
    {
        if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
            var_2 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_explosive_weapons_lethal_kills_for_s3_5_event_wz", 1 );
    }

    if ( isplayer( var_2 ) && var_3.basename == "iw8_sn_t9explosivebow_mp" )
    {
        if ( isdefined( level._id_13457 ) )
            [[ level._id_13457.open_any_random_airlock_door ]]( self );

        if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
            var_2 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_kills_with_combat_bow_for_s3_5_event_wz", 1 );
    }

    if ( isplayer( var_2 ) && ( !isdefined( var_2.kills ) || var_2.kills == 0 ) )
    {
        var_5 = 1;
        var_6 = scripts\mp\utility\player::getteamarray( var_2.team );

        if ( var_6.size == 0 )
            return;

        foreach ( var_8 in var_6 )
        {
            if ( isdefined( var_8.kills ) && var_8.kills )
                var_5 = 0;
        }

        if ( var_5 )
        {
            if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
                var_2 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_first_blood_for_s3_5_event_wz", 1 );
        }
    }
}

_id_13456( var_0, var_1, var_2, var_3, var_4 )
{
    if ( var_0.type == "brloot_soa_pow_dogtag" )
    {
        if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
        {
            foreach ( var_6 in scripts\mp\utility\teams::getteamdata( var_3.team, "players" ) )
                var_6 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_collect_pow_tags_for_s3_5_event_wz", 1 );
        }
    }
}

dangercircletick( var_0, var_1 )
{
    var_2 = var_1 * var_1;

    foreach ( var_4 in level.shutdownattractionicontrigger )
    {
        if ( !isdefined( var_4 ) )
            continue;

        if ( distance2dsquared( var_4.origin, var_0 ) > var_2 )
            var_4 scripts\mp\gametypes\br_heavy_weapon_drop.gsc::shut_down_laser_trap();
    }

    foreach ( var_7 in level._id_12819 )
    {
        if ( !isdefined( var_7 ) )
            continue;

        if ( distance2dsquared( var_7.origin, var_0 ) > var_2 )
            var_7 _id_12818();
    }

    foreach ( var_10 in level._id_13460.choppers )
    {
        if ( !isdefined( var_10 ) || var_10.stadiumpuzzleactive )
            continue;

        if ( distance2dsquared( var_10.origin, var_0 ) > var_2 )
        {
            var_10.lootfunc = undefined;
            var_10 dodamage( 5000, var_10.origin );
        }
    }

    if ( scripts\mp\utility\game::round_vehicle_logic() == "bodycount" )
        scripts\mp\gametypes\br_gametype_bodycount.gsc::dangercircletick( var_0, var_1 );
}

activatemusictrigger()
{

}

_id_13C0F()
{
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level thread _id_13C10();
    level thread _id_13C11();
}

_id_13C10()
{
    var_0 = ( -196, 836, 3890 );

    if ( level.mapname == "mp_don4" )
        var_0 = ( 20270, -14587, 3731 );

    var_1 = scripts\mp\gameobjects::createhintobject( var_0, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_DOOR", undefined, undefined, undefined, 350, 360, 200, 120 );
    var_1 thread _id_13C0D();
}

_id_13C0D()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = getent( "e_vault_door", "targetname" );

    for (;;)
    {
        self waittill( "trigger", var_1 );

        if ( var_1 scripts\mp\gametypes\br_public.gsc::should_damage_pavelow_boss() )
        {
            if ( soundexists( "br_keypad_confirm" ) )
                playsoundatpos( self.origin, "br_keypad_confirm" );

            var_0 thread _id_13C0E( var_1 );
            self delete();
        }
        else if ( soundexists( "br_keypad_deny" ) )
            playsoundatpos( self.origin, "br_keypad_deny" );

        wait 0.25;
    }
}

_id_13C0E( var_0 )
{
    level endon( "game_ended" );
    self endon( "death" );
    var_1 = incrementpersistentstat( level.players, self.origin, 10000 );

    foreach ( var_3 in var_1 )
        var_3 scripts\mp\hud_message::showsplash( "br_soa_tower_event_vault_opening", undefined, var_0 );

    var_5 = ( -161, 752, 3972 );
    var_6 = ( -353, 873, 3970 );
    var_7 = ( -354, 644, 3970 );

    if ( level.mapname == "mp_don4" )
    {
        var_5 = ( 20330, -14534, 3816 );
        var_6 = ( 20218, -14734, 3816 );
        var_7 = ( 20440, -14734, 3816 );
    }

    playsoundatpos( var_5, "mx_soa_ode_to_joy" );
    playsoundatpos( var_6, "evt_soa_ode_to_joy_alarm_01" );
    playsoundatpos( var_7, "evt_soa_ode_to_joy_alarm_02" );
    self rotateyaw( -90, level._id_12E2E.parachuteoverheadwarningtimeoutms, 0.25, 0.25 );
    playsoundatpos( self.origin, "evt_door_vault_open_start" );
    wait 0.5;
    self playloopsound( "evt_soa_door_vault_lp" );
    wait( level._id_12E2E.parachuteoverheadwarningtimeoutms - 0.5 );
    playsoundatpos( self.origin, "evt_door_vault_open_stop" );
    self stoploopsound();
}

_id_13C11()
{
    var_0 = ( -73, 449, 3895 );
    var_1 = ( -73, 337, 3895 );
    var_2 = ( -73, 233, 3895 );
    var_3 = ( 0, 180, 0 );

    if ( level.mapname == "mp_don4" )
    {
        var_0 = ( 20675.3, -14460, 3726 );
        var_1 = ( 20746.3, -14460, 3726 );
        var_2 = ( 20882.5, -14460, 3726 );
        var_3 = ( 0, 90, 0 );
    }

    var_4 = spawnstruct();
    var_4.origin = var_0;
    var_4.angles = var_3;
    var_4.itemsdropped = 0;
    var_4._id_13904 = "soa_tower_vault_lockbox_right";
    var_5 = scripts\mp\gameobjects::createhintobject( var_4.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_1" );
    var_5 thread _id_13C12( "helipad", var_4 );
    var_6 = spawnstruct();
    var_6.origin = var_1;
    var_6.angles = var_3;
    var_6.itemsdropped = 0;
    var_6._id_13904 = "soa_tower_vault_lockbox_middle";
    var_7 = scripts\mp\gameobjects::createhintobject( var_6.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_2" );
    var_7 thread _id_13C12( "security", var_6 );
    var_8 = spawnstruct();
    var_8.origin = var_2;
    var_8.angles = var_3;
    var_8.itemsdropped = 0;
    var_8._id_13904 = "soa_tower_vault_lockbox_left";
    var_9 = scripts\mp\gameobjects::createhintobject( var_8.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_3" );
    var_9 thread _id_13C12( "arms_deal", var_8 );
}

_id_13C12( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "death" );

    for (;;)
    {
        self waittill( "trigger", var_2 );
        var_3 = 0;

        switch ( var_0 )
        {
            case "helipad":
                var_3 = var_2 scripts\mp\gametypes\br_public.gsc::should_damage_pavelow_boss( "brloot_access_card_gold_vault_lockbox_1" );
                break;
            case "security":
                var_3 = var_2 scripts\mp\gametypes\br_public.gsc::should_damage_pavelow_boss( "brloot_access_card_gold_vault_lockbox_2" );
                break;
            case "arms_deal":
                var_3 = var_2 scripts\mp\gametypes\br_public.gsc::should_damage_pavelow_boss( "brloot_access_card_gold_vault_lockbox_3" );
                break;
        }

        if ( var_3 )
        {
            if ( soundexists( "br_keypad_confirm" ) )
                playsoundatpos( self.origin, "br_keypad_confirm" );

            var_4 = getent( var_1._id_13904, "targetname" );
            playsoundatpos( var_4.origin, "evt_door_lockbox_open" );
            var_4 rotateyaw( 80, 1.5, 0.5, 0.5 );
            wait 1.32;
            var_1 thread _id_13C14( var_0, var_2 );
            var_2 scripts\mp\gametypes\br_pickups.gsc::_id_12BFC();
            self delete();
        }
        else if ( soundexists( "br_pickup_deny" ) )
            var_2 playlocalsound( "br_pickup_deny" );

        wait 0.25;
    }
}

_id_13C14( var_0, var_1 )
{
    var_2 = scripts\mp\utility\teams::getteamdata( var_1.team, "teamCount" );
    var_3 = _id_13C13( var_0, var_2 );
    scripts\mp\gametypes\br_lootcache.gsc::_id_11A42( var_3, 0 );

    if ( var_0 == "arms_deal" )
    {
        var_4 = ( 15, 0, 0 );

        if ( level.mapname == "mp_don4" )
            var_4 = ( 0, 15, 0 );

        var_5 = scripts\mp\gametypes\br_quest_util.gsc::_id_135DF( "blueprintextract", scripts\engine\utility::drop_to_ground( self.origin + var_4, 0, -200, ( 0, 0, 1 ) ) + ( 0, 0, 25 ), 0 );
        var_6 = scripts\mp\gametypes\br_quest_util.gsc::risk_flagspawndebugobjicons();
        var_5 scripts\mp\gametypes\br_blueprint_extract_spawn.gsc::controlslinked( var_6 );
        scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_5 );
    }
}

_id_13C13( var_0, var_1 )
{
    var_2 = [];

    switch ( var_0 )
    {
        case "helipad":
            var_2[0] = "brloot_super_stoppingpower";

            if ( scripts\mp\utility\game::round_vehicle_logic() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_extra_life";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
                var_2[4] = "brloot_bodycount_dogtag";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
                var_3 = min( level._id_12E2E.spotlight_turret_info, var_1 );

                for ( var_4 = 0; var_4 < var_3; var_4++ )
                    var_2[var_2.size] = "brloot_specialist_bonus";
            }

            break;
        case "security":
            var_2[0] = "brloot_super_armorbox";

            if ( scripts\mp\utility\game::round_vehicle_logic() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_dogtag";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
                var_2[4] = "brloot_offhand_advancedsupplydrop";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
                var_2[4] = "brloot_killstreak_auav";
            }

            break;
        case "arms_deal":
            var_2[0] = "brloot_super_deadsilence";

            if ( scripts\mp\utility\game::round_vehicle_logic() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_dogtag";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
            }

            break;
    }

    return var_2;
}

_id_13C15( var_0, var_1, var_2 )
{
    var_3 = scripts\engine\utility::drop_to_ground( var_1, 0 ) + var_2;

    switch ( var_0 )
    {
        case "helipad":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_1", var_3 );
            scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_4 );
            break;
        case "security":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_2", var_3 );
            scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_4 );
            break;
        case "arms_deal":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_3", var_3 );
            scripts\mp\gametypes\br_pickups.gsc::_id_12B3A( var_4 );
            break;
    }
}

wp_loop()
{
    var_0 = scripts\engine\utility::get_linked_ents();

    foreach ( var_2 in var_0 )
        var_2 linkto( self );
}

activate_additional_ammo_crates()
{

}

grenade_trail_modifier()
{
    waitframe();
    scripts\mp\flags::gameflagwait( "prematch_fade_done" );
    level thread _id_13453();
    level thread _id_13455();
    level thread _id_13452();
}

_id_13453()
{
    var_0 = spawnstruct();
    var_0.origin = ( 9262, 49682, 1050 );
    var_0.angles = ( 0, 90, 0 );
    var_1 = scripts\mp\gametypes\br_pickups.gsc::test_ai_anim();
    scripts\mp\gametypes\br_lootcache.gsc::_id_11A41( "brloot_killstreak_explosive_bow", var_1, var_0.origin, var_0.angles, 0, 0 );
}

_id_13455()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = ( 9083, 49848, 1083.5 );
    var_1 = [];
    var_1[0] = ( 6079, -4232, 0 );
    var_1[1] = ( 39449, 43127, 2473 );
    var_1[2] = ( -36348, 33833, 1643 );
    var_1[3] = ( 37142, -37391, -422 );
    var_1[4] = ( 37557, 11234, 865 );
    var_1[5] = ( -21286, 56351, 3495 );
    var_1[6] = ( -18442, -7252, 316 );
    var_1[7] = ( -23164, -24840, -76 );
    var_1[8] = ( 23563, 14610, -93 );
    var_1[9] = ( 11140, 37097, 2041 );
    var_2 = scripts\mp\gameobjects::createhintobject( var_0, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/CIA_OUTPOST_MAP" );

    if ( !isdefined( level._id_12819 ) )
        level._id_12819 = [];

    for (;;)
    {
        var_2 waittill( "trigger", var_3 );

        if ( var_1.size == 0 || isdefined( var_3._id_1281B ) )
        {
            var_3 playlocalsound( "br_pickup_deny" );
            continue;
        }

        var_2 makeunusable();
        var_3 playlocalsound( "ui_intel_interact" );
        var_3.valve_steam_off = 1;
        var_3 thread _id_13454();
        var_1 = scripts\engine\utility::array_randomize( var_1 );
        var_4 = scripts\mp\gametypes\br_public.gsc::round_enemy_stuck_logic( var_3.team, var_3.squadindex );
        scripts\engine\utility::array_thread( var_4, ::_id_12817, var_1 );
        scripts\engine\utility::array_thread( var_4, ::_id_1281A, var_1.size );
        wait 5;
        var_2 makeusable();
    }
}

_id_12817( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self._id_1281B = 1;
    var_1 = [];

    foreach ( var_3 in var_0 )
    {
        var_4 = spawnstruct();
        var_4.origin = var_3;
        var_4 scripts\mp\gametypes\br_quest_util.gsc::init_tactical_boxes( 2, 0, 0, var_3 );
        var_4 scripts\mp\gametypes\br_quest_util.gsc::_id_1316F( 2000 );
        var_4 scripts\mp\gametypes\br_quest_util.gsc::_id_1336A( self );
        level._id_12819 = scripts\engine\utility::array_add( level._id_12819, var_4 );
        wait 0.5;
    }
}

_id_1281A( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    var_0 = var_0 * 0.5;
    var_1 = scripts\mp\hud_util::createprimaryprogressbar( undefined, 150 );
    var_2 = scripts\mp\hud_util::createprimaryprogressbartext( undefined, 150 );
    var_2 settext( &"BR_SOA_EVENT/CIA_OUTPOST_MAP_UPDATING" );
    var_1 scripts\mp\hud_util::updatebar( 0, 1 / var_0 );

    for ( var_3 = 0; var_3 < var_0 && isalive( self ) && !level.gameended; var_3 = var_3 + 0.05 )
        wait 0.05;

    self.valve_steam_off = 0;
    self playlocalsound( "ui_intel_splash_open" );
    var_1 scripts\mp\hud_util::destroyelem();
    var_2 scripts\mp\hud_util::destroyelem();
}

_id_13454()
{
    while ( self.valve_steam_off == 1 )
    {
        self playlocalsound( "ui_intel_splash_close" );
        wait 1.5;
    }
}

_id_13452()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    var_0 = spawnstruct();
    var_0.origin = ( 9452, 49671, 1208 );
    var_1 = scripts\mp\gameobjects::createhintobject( var_0.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/CIA_OUTPOST_COORDS" );
    var_1 waittill( "trigger", var_2 );
    level notify( "soa_bombardment_complete" );

    if ( !isdefined( level._id_119E7 ) )
        scripts\mp\gametypes\br_lootchopper.gsc::init();

    var_3 = scripts\engine\utility::getstruct( "cia_outpost_patrol_org", "targetname" );
    var_4 = scripts\engine\utility::getstruct( "cia_outpost_path_node_1", "targetname" );
    var_5 = scripts\engine\utility::getstruct( "cia_outpost_path_node_2", "targetname" );
    var_6 = scripts\engine\utility::getstruct( "cia_outpost_path_node_3", "targetname" );
    var_7 = var_4.origin + ( 20500, 20500, 8000 );
    var_8 = [ var_4.origin, var_5.origin, var_6.origin ];
    var_1 delete();
    var_9 = scripts\mp\gametypes\br_lootchopper.gsc::_id_11A18( var_3, undefined, 1, var_8, var_7 );
    var_9 thread scripts\mp\gametypes\br_publicevent_tower.gsc::connectedplayercount();
    var_9.intro_driver_logic = scripts\mp\gametypes\br_event_soa_tower_helipad.gsc::_id_13450;
    var_9.intro_enemy_respawner = scripts\mp\gametypes\br_event_soa_tower_helipad.gsc::_id_13450;
    var_9.lootfunc = scripts\mp\gametypes\br_publicevent_tower.gsc::_id_1344E;
    var_9._id_135B6 = 1;
    var_9.updateteamscoreplacements = 1;
    var_9.usefuncoverride = 1;
    var_9 thread scripts\mp\gametypes\br_event_soa_tower_helipad.gsc::_id_13450( var_4.origin );

    if ( !isdefined( level._id_13460.choppers ) )
        level._id_13460.choppers = [];

    level._id_13460.choppers = scripts\engine\utility::array_add( level._id_13460.choppers, var_9 );
    var_2 endon( "disconnect" );
    var_2 endon( "death" );
    var_2 thread scripts\mp\utility\dialog::leaderdialogonplayer( var_2.team + "_enemy_toma_strike_inbound" );
    var_2 thread crates_delete_early();
    level thread _id_11ECA( var_2.origin, 4000, var_2 );
    var_10 = var_2 scripts\cp_mp\utility\killstreak_utility::createstreakinfo( "toma_strike", var_2 );
    var_11 = anglestoforward( var_2 getplayerangles() );
    var_12 = anglestoforward( var_2.angles );
    var_13 = anglestoright( var_2.angles );

    for ( var_14 = 0; var_14 < 10; var_14 = var_14 + 0.1 )
    {
        var_15 = randomintrange( 2000, 4000 );
        var_16 = randomint( 360 );
        var_17 = var_15 * anglestoforward( ( 0, var_16, 0 ) );
        var_18 = var_2.origin + var_17;
        var_19 = var_2 scripts\cp_mp\killstreaks\toma_strike::findunobstructedfiringinfo( var_18, 500, var_11, var_12, var_13 );
        var_19 = var_2 cratephysicsoncallback( var_18, 500 );
        var_2 thread create_animpack( var_10, var_19 );
        wait 0.1;
    }

    level notify( "soa_bombardment_complete" );
}

_id_11CA1( var_0 )
{
    if ( istrue( self.usefuncoverride ) && scripts\mp\utility\weapon::unset_jugg_ignoreall_after_notify( var_0.objweapon ) )
        return getdvarint( "scr_br_soa_explosive_bow_vehicle_damage", 4500 );

    return var_0.damage;
}

_id_11ECA( var_0, var_1, var_2 )
{
    var_3 = [];

    foreach ( var_5 in level.players )
    {
        if ( var_5 scripts\mp\gametypes\br_public.gsc::isplayeringulag() || !var_5 scripts\cp_mp\utility\player_utility::_isalive() )
            continue;

        if ( isdefined( var_2 ) && var_5.team == var_2.team )
        {
            var_3[var_3.size] = var_5;
            button( var_5, var_2 );
            continue;
        }

        if ( length2dsquared( var_5.origin - var_0 ) < var_1 * var_1 )
        {
            button_sequence( var_5 );
            var_3[var_3.size] = var_5;
        }
    }

    var_7 = [ "ebr_alert_missile_10", "ebr_alert_missile_20", "ebr_alert_missile_30" ];
    scripts\mp\gametypes\br_public.gsc::brleaderdialog( var_7[randomintrange( 0, 3 )], 1, var_3 );
}

button( var_0, var_1 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_launch", undefined, var_1 );
}

button_sequence( var_0 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_incoming" );
}

buttonmashcount( var_0 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_launch_enemy" );
}

crates_delete_early()
{
    var_0 = getmaxobjectivecount( self.origin[0], self.origin[1], 4000 );
    level waittill( "soa_bombardment_complete" );
    var_0 delete();
}

create_animpack( var_0, var_1 )
{
    var_2 = magicgrenademanual( "toma_proj_mp", var_1.sourcepos, var_1.initvelocity, 5 );
    var_2 setentityowner( self );
    var_2 setotherent( self );
    var_2.owner = self;
    var_2 setscriptablepartstate( "launch", "active", 0 );
    var_2 setscriptablepartstate( "trail", "active", 0 );
    var_2.explodeent = spawn( "script_model", var_2.origin );
    var_2.explodeent setmodel( "ks_toma_strike_missile_mp" );
    var_2.explodeent linkto( var_2 );
    var_2.explodeent dontinterpolate();
    var_2.explodeent setentityowner( self );
    var_3 = spawn( "script_model", var_1.sourcepos );
    var_3 linkto( var_2, "tag_origin", ( 10, 0, 10 ), ( 0, 0, 0 ) );
    var_2.killcament = var_3;
    var_2.streakinfo = var_0;
    var_4 = randomint( 360 );
    var_2.angles = ( 90, var_4, 0 );
    var_2 thread create_badplace_extraction( var_1.preexplpos, var_1.parachutecleanup );
    var_2 thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_watch_stuck( vectortoangles( var_1.initvelocity ), gettime(), var_1.initvelocity );
}

cratephysicsoncallback( var_0, var_1 )
{
    var_2 = spawnstruct();
    var_3 = var_0 + ( 0, 0, 5000 );
    var_4 = vectornormalize( var_0 - ( var_3[0], var_3[1], 0 ) );
    var_5 = scripts\cp_mp\killstreaks\toma_strike::_id_13BD6( var_0, var_1, var_4 );
    var_6 = ( 0, 0, -1 * getdvarint( "NPOQPMP", 800 ) );
    var_7 = ( var_5.point - 0.5 * var_6 * squared( 4 ) - var_3 ) / 4;
    var_8 = 3.925 * randomfloatrange( 0.95, 1.0 );
    var_9 = var_3 + var_7 * var_8 + 0.5 * var_6 * squared( var_8 );
    var_2.sourcepos = var_3;
    var_2.num_of_frame_frozen = var_5.num_of_frame_frozen;
    var_2.num_of_subway_cars = var_5.num_of_subway_cars;
    var_2.goalpos = var_5.point;
    var_2.preexplpos = var_9;
    var_2.initvelocity = var_7;
    var_2.parachutecleanup = var_8;
    return var_2;
}

create_badplace_extraction( var_0, var_1 )
{
    self endon( "death" );
    self endon( "missile_dest_failed" );
    self.killcament thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_move_killcam( 3.675, var_0 );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_1 );
    self setmissileminimapvisible( 0 );
    thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_missile_explode( var_0 );
}

_id_12818()
{
    scripts\mp\gametypes\br_quest_util.gsc::lastdirtyscore();
    level._id_12819 = scripts\engine\utility::array_remove( level._id_12819, self );
}
