// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level.ai_event thread _id_119F0();
}

_id_119F0()
{
    level.ai_event._id_119FC = [];
    level.ai_event._id_12D26 = [];
    level._effect["vfx_golden_loot_explosion_flare"] = loadfx( "vfx/iw8_br/gameplay/vfx_golden_loot_explosion_flare" );
    level._effect["vfx_br_legendary_loot_glow"] = loadfx( "vfx/iw8_br/gameplay/vfx_br_launch_code_glow" );
    _id_119F2();
}

_id_119F2()
{
    var_0 = [];
    var_0["nothing"] = getdvarfloat( "scr_arms_deal_lt_ammo_nothing", 1.0 );
    var_0["brloot_ammo_killer_based"] = getdvarfloat( "scr_arms_deal_lt_ammo_killer_based", 0.7 );
    _id_119E8( var_0, "loot_table_ammo" );
    var_0 = [];
    var_0["nothing"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_nothing", 10 );
    var_0["brloot_plunder_cash_uncommon_1"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_uncommon_1", 10 );
    var_0["brloot_plunder_cash_uncommon_2"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_uncommon_2", 5 );
    var_0["brloot_plunder_cash_uncommon_3"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_uncommon_3", 2 );
    var_0["brloot_plunder_cash_rare_1"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_rare_1", 0.5 );
    var_0["brloot_plunder_cash_rare_2"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_rare_2", 0.25 );
    var_0["brloot_plunder_cash_epic_1"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_epic_1", 0.1 );
    var_0["brloot_plunder_cash_epic_2"] = getdvarfloat( "scr_arms_deal_lt_cash_loot_id_cash_epic_2", 0.05 );
    _id_119E8( var_0, "loot_table_cash" );
    var_0 = [];
    var_0["nothing"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_nothing", 10 );
    var_0["brloot_armor_plate"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_armor", 4 );
    var_0["brloot_offhand_frag"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_frag", 0.5 );
    var_0["brloot_offhand_semtex"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_semtex", 0.35 );
    var_0["brloot_offhand_flash"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_flash", 0.5 );
    var_0["brloot_offhand_smoke"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_smoke", 0.25 );
    var_0["brloot_offhand_molotov"] = getdvarfloat( "scr_arms_deal_lt_gear_loot_id_gear_molotov", 0.2 );
    _id_119E8( var_0, "loot_table_gear" );
    var_0 = [];
    var_0["brloot_plunder_cash_uncommon_1"] = getdvarfloat( "scr_arms_deal_lt_brute_loot_id_cash_uncommon_1", 5 );
    var_0["brloot_plunder_cash_uncommon_2"] = getdvarfloat( "scr_arms_deal_lt_brute_loot_id_cash_uncommon_2", 1 );
    var_0["brloot_plunder_cash_uncommon_3"] = getdvarfloat( "scr_arms_deal_lt_brute_loot_id_cash_uncommon_3", 0.7 );
    var_0["brloot_plunder_cash_rare_1"] = getdvarfloat( "scr_arms_deal_lt_brute_loot_id_cash_rare_1", 0.5 );
    var_0["brloot_plunder_cash_rare_2"] = getdvarfloat( "scr_arms_deal_lt_brute_loot_id_cash_rare_2", 0.25 );
    _id_119E8( var_0, "loot_table_brute" );
    var_0 = [];
    var_0["brloot_weapon_lm_t9slowfire_lege"] = 1;
    _id_119E8( var_0, "loot_table_brute_legendary_weapon" );
    var_0 = [];
    var_0["brloot_access_card_gold_vault_lockbox_3"] = 1;
    _id_119E8( var_0, "loot_table_brute_vault_key" );
    var_0 = [];
    var_0["nothing"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_nothing", 18 );
    var_0["brloot_super_armorbox"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_super_armor_box", 1.0 );
    var_0["brloot_plate_pouch"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_armor_satchel", 1.0 );
    var_0["brloot_self_revive"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_self_revive", 1.0 );
    var_0["brloot_super_munitionsbox"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_munitions_box", 1.0 );
    var_0["brloot_super_stoppingpower"] = getdvarfloat( "scr_arms_deal_lt_deployables_loot_id_stopping_power", 1.0 );
    _id_119E8( var_0, "loot_table_deployables" );
    var_0 = [];
    var_0["brloot_bodycount_dogtag"] = 1;
    _id_119E8( var_0, "loot_table_power_grab_dog_tags" );
    var_0 = [];
    var_0["nothing"] = getdvarfloat( "scr_arms_deal_lt_power_grab_revive_token_loot_id_nothing", 1.0 );
    var_0["brloot_bodycount_extra_life"] = getdvarfloat( "scr_arms_deal_lt_power_grab_revive_token_loot_id_power_grab_revive_token", 0.25 );
    _id_119E8( var_0, "loot_table_power_grab_revive_token" );
}

_id_119F7( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_3 ) )
        var_3 = 0;

    wait( var_3 );
    var_4 = level.ai_event._id_119FC[var_0];
    var_2.dropstruct = scripts\mp\gametypes\br_pickups.gsc::test_ai_anim();
    var_2.dropstruct.ml_p3_to_safehouse_transition = scripts\engine\utility::ter_op( var_1 == 1, 6 + randomintrange( 1, 10 ), 6 );
    var_2.dropstruct.silencer_pick_up_monitor = 0;

    for ( var_5 = 0; var_5 < var_1; var_5++ )
    {
        var_6 = randomfloat( 1.0 );

        foreach ( var_13, var_8 in var_4 )
        {
            var_9 = var_8[2];
            var_10 = var_8[3];

            if ( var_6 >= var_9 && var_6 <= var_10 )
            {
                var_11 = undefined;

                switch ( var_13 )
                {
                    case "nothing":
                        return;
                    case "brloot_ammo_killer_based":
                        if ( isdefined( var_2 ) )
                        {
                            var_12 = weaponclass( var_2.eattacker getcurrentweapon() );

                            switch ( var_12 )
                            {
                                case "rifle":
                                    var_11 = "brloot_ammo_762";
                                    break;
                                case "mg":
                                    var_11 = "brloot_ammo_762";
                                    break;
                                case "pistol":
                                    var_11 = "brloot_ammo_919";
                                    break;
                                case "smg":
                                    var_11 = "brloot_ammo_919";
                                    break;
                                case "sniper":
                                    var_11 = "brloot_ammo_50cal";
                                    break;
                                case "rocketlauncher":
                                    var_11 = "brloot_ammo_rocket";
                                    break;
                                case "spread":
                                    var_11 = "brloot_ammo_12g";
                                    break;
                            }
                        }

                        break;
                    default:
                        var_11 = var_13;
                        break;
                }

                var_2.dropstruct.ml_p3_to_safehouse_transition = var_2.dropstruct.ml_p3_to_safehouse_transition + 2;
                thread _id_119F8( var_11, var_2 );
                wait 0.002;
            }
        }
    }
}

_id_119F8( var_0, var_1 )
{
    if ( !isdefined( var_0 ) )
        return;

    var_2 = ( 0, 0, 0 );
    var_1.legendary = 0;

    if ( issubstr( var_0, "lege" ) )
    {
        var_3 = randomintrange( 15, 40 );
        var_1.dropstruct.ml_p3_to_safehouse_transition = var_3;
        var_1.legendary = 1;
    }

    switch ( var_0 )
    {
        case "brloot_access_card_gold_vault_lockbox_3":
            var_3 = 0;
            var_1.dropstruct.ml_p3_to_safehouse_transition = var_3;
            var_1.legendary = 1;
            break;
    }

    var_4 = scripts\mp\gametypes\br_lootcache.gsc::_id_11A41( var_0, var_1.dropstruct, var_1.origin + ( 0, 0, var_1.dropstruct.silencer_pick_up_monitor ), var_1.angles, 0, var_1.legendary, 0 );
    var_1.dropstruct.silencer_pick_up_monitor = var_1.dropstruct.silencer_pick_up_monitor + 3;
}

_id_119E8( var_0, var_1 )
{
    var_2 = [];
    var_3 = 0;

    foreach ( var_5 in var_0 )
        var_3 = var_3 + var_5;

    var_7 = 0;
    var_8 = getarraykeys( var_0 );
    var_9 = undefined;

    foreach ( var_14, var_5 in var_0 )
    {
        var_2[var_14] = [];
        var_11 = var_5 / var_3;

        if ( var_7 == 0 )
        {
            var_12 = 0;
            var_13 = var_11;
        }
        else
        {
            var_12 = var_9[3];
            var_13 = var_12 + var_11;
        }

        var_2[var_14] = [ var_5, var_11, var_12, var_13 ];
        var_9 = var_2[var_14];
        var_7++;
    }

    level.ai_event._id_119FC[var_1] = var_2;
}

_id_12D28( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_0 ) )
        return;

    var_4 = var_0 scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_set_hot();

    if ( !var_4 )
        return;

    if ( !isdefined( self._id_12D29 ) || self._id_12D29 != var_0 )
    {
        self._id_12D2A = self._id_12D29;
        self._id_12D29 = var_0;
    }

    if ( !isalive( self ) && isdefined( var_1 ) && isdefined( var_2 ) )
    {
        var_5 = 0;
        var_5 = scripts\mp\utility\damage::isheadshot( var_1, var_2, var_0 );
        self._id_12D25 = var_5 && !self.enemy_left_monitor;
    }

    if ( !isalive( self ) )
    {
        if ( !isdefined( var_0.boardroomopen ) )
            var_0.boardroomopen = 1;
        else
            var_0.boardroomopen = var_0.boardroomopen + 1;
    }

    if ( self.enemy_left_monitor && isalive( self ) )
    {
        if ( !isdefined( var_0.body0 ) )
            var_0.body0 = var_3;
        else
            var_0.body0 = var_0.body0 + var_3;
    }
}

_id_12D22( var_0 )
{
    var_1 = undefined;
    var_2 = undefined;

    switch ( var_0 )
    {
        case "takedown":
            if ( isdefined( self._id_12D29 ) )
            {
                if ( !self.enemy_left_monitor )
                {
                    var_1 = scripts\engine\utility::ter_op( self._id_12D25, "br_soa_tower_reward_kill_agent_headshot", "br_soa_tower_reward_kill_agent" );
                    var_3 = self.is_correct_wire_color.smeansofdeath == "MOD_GRENADE" || self.is_correct_wire_color.smeansofdeath == "MOD_GRENADE_SPLASH";
                    var_1 = scripts\engine\utility::ter_op( var_3, "br_soa_tower_reward_kill_agent_explosive", var_1 );
                    var_2 = scripts\mp\rank::getscoreinfovalue( var_1 );

                    if ( self._id_12D29 scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_origin() )
                        var_2 = 1;

                    self._id_12D29 thread scripts\mp\rank::giverankxp( var_1, var_2 );
                    self._id_12D29 thread scripts\mp\rank::scoreeventpopup( var_1 );

                    if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
                        self._id_12D29 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_eliminate_enemies_arms_deal_for_s3_5_event_wz", 1 );
                }
                else
                {
                    var_1 = "br_soa_tower_reward_kill_brute";
                    var_2 = scripts\mp\rank::getscoreinfovalue( var_1 );

                    foreach ( var_5 in level.ai_event._id_12662 )
                    {
                        var_5 thread scripts\mp\rank::giverankxp( var_1, var_2 );
                        var_5 thread scripts\mp\rank::scoreeventpopup( var_1 );

                        if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
                            var_5 scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_eliminate_enemies_arms_deal_for_s3_5_event_wz", 1 );
                    }
                }
            }

            break;
        case "assist":
            if ( isdefined( self._id_12D2A ) && !self.enemy_left_monitor )
            {
                var_1 = "br_soa_tower_reward_kill_agent_assist";
                var_2 = scripts\mp\rank::getscoreinfovalue( var_1 );

                if ( self._id_12D2A scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_origin() )
                    var_2 = 1;

                self._id_12D2A thread scripts\mp\rank::giverankxp( var_1, var_2 );
                self._id_12D2A thread scripts\mp\rank::scoreeventpopup( var_1 );

                if ( getdvarint( "MLNNMOPQOP", 0 ) == 6 )
                    self._id_12D2A scripts\cp\vehicles\vehicle_compass_cp::_id_12C3F( "t9_ch_global_eliminate_enemies_arms_deal_for_s3_5_event_wz", 1 );
            }

            break;
        case "killing_blow":
            if ( isdefined( self._id_12D29 ) && self.enemy_left_monitor )
            {
                var_1 = "br_soa_tower_reward_kill_brute_killing_blow";
                var_2 = scripts\mp\rank::getscoreinfovalue( var_1 );

                if ( self._id_12D29 scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_origin() )
                    var_2 = 1;

                self._id_12D29 thread scripts\mp\rank::giverankxp( var_1, var_2 );
                self._id_12D29 thread scripts\mp\rank::scoreeventpopup( var_1 );
            }

            break;
    }
}

_id_12D21( var_0 )
{
    switch ( var_0 )
    {
        case "most_agent_kills":
            var_1 = scripts\engine\utility::array_sort_with_func( level.ai_event._id_12662, ::_id_12D1F );

            foreach ( var_3 in var_1 )
            {
                if ( !isdefined( var_3.boardroomopen ) || var_3.boardroomopen == 0 )
                    var_1 = scripts\engine\utility::array_remove( var_1, var_3 );
            }

            var_5 = var_1[0];

            if ( !isdefined( var_5 ) )
                return;

            if ( !var_5 scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_set_hot() )
                return;

            var_6 = "br_soa_tower_reward_kill_agent_most_killed";
            var_7 = scripts\mp\rank::getscoreinfovalue( var_6 );
            var_5 thread scripts\mp\rank::giverankxp( var_6, var_7 );
            var_5 thread scripts\mp\rank::scoreeventpopup( var_6 );
            scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_locations_logic( var_5, "br_soa_tower_reward_splash_agent_most_killed", var_5.boardroomopen );
            break;
        case "most_brute_damage":
            var_8 = scripts\engine\utility::array_sort_with_func( level.ai_event._id_12662, ::_id_12D20 );

            foreach ( var_3 in var_8 )
            {
                if ( !isdefined( var_3.body0 ) || var_3.body0 == 0 )
                    var_8 = scripts\engine\utility::array_remove( var_8, var_3 );
            }

            var_5 = var_8[0];

            if ( !isdefined( var_5 ) )
                return;

            if ( !var_5 scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_set_hot() )
                return;

            var_6 = "br_soa_tower_reward_kill_brute_most_damage";
            var_7 = scripts\mp\rank::getscoreinfovalue( var_6 );
            var_5 thread scripts\mp\rank::giverankxp( var_6, var_7 );
            var_5 thread scripts\mp\rank::scoreeventpopup( var_6 );
            scripts\mp\gametypes\br_soa_tower_ai_event.gsc::objective_locations_logic( var_5, "br_soa_tower_reward_splash_brute_most_damage", var_5.body0 );
            break;
    }
}

_id_12D1F( var_0, var_1 )
{
    var_2 = var_0.boardroomopen;
    var_3 = var_1.boardroomopen;

    if ( !isdefined( var_2 ) || !isdefined( var_3 ) )
        return 1;

    return var_2 > var_3;
}

_id_12D20( var_0, var_1 )
{
    var_2 = var_0.body0;
    var_3 = var_1.body0;

    if ( !isdefined( var_2 ) || !isdefined( var_3 ) )
        return 1;

    return var_2 > var_3;
}
