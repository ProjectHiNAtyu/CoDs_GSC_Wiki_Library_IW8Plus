// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

claymore_blockdamageuntilframeend()
{
    level.br_pickups = spawnstruct();
    level.forcegivesuper = ::forcegivesuper;
    level.showuseresultsfeedback = ::showuseresultsfeedback;
    level._id_11C99 = ::_id_11C99;
    level.light_tank_watchprojectileexplosion = ::light_tank_watchmissileinputchange;
    level.light_tank_watchgameend = ::light_tank_update;
    initarrays();
    puddle_fx();
}

initarrays()
{
    level.brloottablename = getdvar( "RKMMNSQKO", "mp/loot/br/default/loot_item_defs.csv" );

    if ( !isdefined( level.br_pickups ) )
        level.br_pickups = spawnstruct();

    level.br_pickups.fx_thermal_end = [];
    level.br_pickups.hvtlist = [];
    _id_11BB6( "brloot_equip_gasmask", ::light_tank_initomnvars );
    _id_11BB6( "brloot_equip_gasmask_durable", ::light_tank_initomnvars );
    level.br_pickups.br_equipname = [];
    level.br_pickups.stackable = [];
    level.br_pickups.maxcounts = [];
    level.br_pickups.counts = [];
    level.br_pickups.br_itemtype = [];
    level.br_pickups.br_itemrow = [];
    level.br_pickups.choppersupport_issmallpatrolmap = [];
    level.br_pickups.br_equipnametoscriptable = [];
    level.br_pickups.br_weapontoscriptable = [];
    level.br_pickups.br_pickupsfx = [];
    level.br_pickups.br_killstreakreference = [];
    level.br_pickups.br_killstreaktoscriptable = [];
    level.br_pickups.br_superreference = [];
    level.br_pickups.choppergunner_refillmissiles = [];
    level.br_pickups._id_12D11 = [];
    level.br_pickups.br_allguns = [];
    level.br_pickups.br_lootguns = [];
    level.br_pickups.br_crateguns = [];
    level.br_pickups.br_crateitems = [];
    level.br_pickups.br_gulagpickups = [];
    level.br_lootiteminfo = [];
    level.br_weaponsprimary = [];
    level.br_weaponssecondary = [];
    level.br_throwables = [];
    level.br_usables = [];
    var_0 = [];
    var_1 = 0;
    var_2 = "+";

    if ( scripts\mp\utility\game::getgametype() == "br" )
    {
        var_3 = tablelookupgetnumrows( level.brloottablename );

        for ( var_4 = 0; var_4 < var_3; var_4++ )
        {
            var_5 = tablelookupbyrow( level.brloottablename, var_4, 0 );

            if ( !isdefined( var_5 ) )
                continue;

            if ( var_5 == "item" )
            {
                var_6 = tablelookupbyrow( level.brloottablename, var_4, 2 );

                if ( !isdefined( var_6 ) )
                    continue;

                if ( var_6 == "weapon" )
                {
                    var_7 = tablelookupbyrow( level.brloottablename, var_4, 1 );
                    var_8 = tablelookupbyrow( level.brloottablename, var_4, 3 );
                    var_9 = tablelookupbyrow( level.brloottablename, var_4, 5 );
                    var_10 = tablelookupbyrow( level.brloottablename, var_4, 15 );

                    if ( isdefined( var_9 ) && var_9.size > 0 )
                    {
                        var_11 = int( var_9 );
                        var_12 = tablelookup( "loot/weapon_ids.csv", 0, var_11, 1 );

                        if ( var_12 == "" )
                        {
                            scripts\mp\utility\script::getweaponrandomvariantid( "lootID not found in weapon_ids.csv - lootID: " + var_9 + " in row " + var_4 + " from table " + level.brloottablename );
                            continue;
                        }

                        var_13 = tablelookup( "loot/weapon_ids.csv", 0, var_11, 6 );
                        var_14 = scripts\mp\utility\weapon::getweaponvarianttablename( var_12 );
                        var_15 = int( tablelookup( var_14, 1, var_13, 0 ) );
                        var_16 = tablelookupbyrow( level.brloottablename, var_4, 10 );
                        var_17 = [];
                        var_18 = [];

                        if ( isdefined( var_16 ) && var_16.size )
                            var_17 = strtok( var_16, var_2 );

                        if ( isdefined( var_17 ) )
                        {
                            foreach ( var_20 in var_17 )
                            {
                                var_21 = strtok( var_20, "|" );

                                if ( var_21.size > 1 )
                                {
                                    var_18[var_21[0]] = int( var_21[1] );
                                    continue;
                                }

                                var_18[var_21[0]] = 0;
                            }
                        }

                        var_23 = var_12;
                        var_24 = undefined;

                        if ( getdvarint( "scr_br_alt_mode_gg", 0 ) )
                            var_24 = "camo_11a";

                        var_25 = undefined;

                        if ( !isdefined( var_18 ) )
                            var_25 = scripts\mp\class::deactivate_hacked_console( var_12, var_24, undefined, var_15 );
                        else
                            var_25 = scripts\mp\class::buildweapon_attachmentidmap( var_12, var_18, var_24, undefined, var_15 );

                        var_26 = createheadicon( var_25 );
                    }
                    else
                    {
                        var_23 = tablelookupbyrow( level.brloottablename, var_4, 8 );
                        var_16 = tablelookupbyrow( level.brloottablename, var_4, 10 );
                        var_17 = [];

                        if ( isdefined( var_16 ) && var_16.size )
                            var_17 = strtok( var_16, var_2 );

                        if ( getdvarint( "scr_br_alt_mode_gg", 0 ) )
                            var_25 = scripts\mp\class::buildweapon( var_23, var_17, "camo_11a", "none", -1 );
                        else
                            var_25 = scripts\mp\class::buildweapon( var_23, var_17, "none", "none", -1 );

                        var_26 = createheadicon( var_25 );
                    }

                    level.br_pickups.br_itemtype[var_7] = var_6;
                    level.br_pickups.br_pickupsfx[var_7] = var_10;
                    level.br_pickups.choppersupport_issmallpatrolmap[var_7] = int( var_8 );
                    level.br_pickups.br_lootguns[level.br_pickups.br_lootguns.size] = var_7;
                    level.br_lootiteminfo[var_7] = spawnstruct();
                    level.br_lootiteminfo[var_7].baseweapon = var_23;
                    level.br_lootiteminfo[var_7].laststandgiveloadoutonrevive = var_26;
                    level.br_lootiteminfo[var_7].laststandid = var_25;

                    if ( int( var_8 ) != 10 )
                        level.br_pickups.br_weapontoscriptable[var_26] = var_7;
                }
                else
                {
                    var_7 = tablelookupbyrow( level.brloottablename, var_4, 1 );
                    level.br_pickups.br_itemrow[var_7] = int( var_4 );
                    var_38 = tablelookupbyrow( level.brloottablename, var_4, 8 );

                    if ( isdefined( var_38 ) && var_38.size > 0 )
                    {
                        var_38 = tolower( var_38 );
                        level.br_pickups.br_equipname[var_7] = var_38;
                        level.br_pickups.br_equipnametoscriptable[var_38] = var_7;
                    }

                    level.br_pickups.choppergunner_refillmissiles[var_7] = int( tablelookupbyrow( level.brloottablename, var_4, 24 ) );
                    var_39 = tablelookupbyrow( level.brloottablename, var_4, 16 );

                    if ( var_39 != "" )
                    {
                        switch ( var_39 )
                        {
                            case "1":
                                if ( isdefined( var_38 ) && var_38.size > 0 )
                                    level.equipment.table[var_38].defaultslot = "primary";

                                level.br_throwables[level.br_throwables.size] = var_7;
                                break;
                            case "2":
                                if ( isdefined( var_38 ) && var_38.size > 0 )
                                    level.equipment.table[var_38].defaultslot = "secondary";

                                level.br_usables[level.br_usables.size] = var_7;
                                break;
                            case "3":
                                if ( isdefined( var_38 ) && var_38.size > 0 )
                                    level.equipment.table[var_38].defaultslot = "health";

                                break;
                            case "4":
                                if ( isdefined( var_38 ) && var_38.size > 0 )
                                    level.equipment.table[var_38].defaultslot = "super";

                                break;
                            default:
                                break;
                        }
                    }

                    if ( var_6 == "killstreak" || var_6 == "killstreak_nodrop" )
                    {
                        var_40 = tablelookupbyrow( level.brloottablename, var_4, 19 );
                        level.br_pickups.br_killstreakreference[var_7] = var_40;
                        level.br_pickups.br_killstreaktoscriptable[var_40] = var_7;
                    }
                    else if ( var_6 == "super" )
                    {
                        var_41 = tablelookupbyrow( level.brloottablename, var_4, 19 );
                        level.br_pickups.br_superreference[var_7] = var_41;
                    }

                    var_42 = int( tablelookupbyrow( level.brloottablename, var_4, 4 ) );
                    var_43 = int( tablelookupbyrow( level.brloottablename, var_4, 18 ) );

                    if ( var_6 == "ammo" )
                        level.br_ammo_max[var_7] = var_43;

                    level.br_pickups.maxcounts[var_7] = var_43;
                    level.br_pickups.stackable[var_7] = var_43 > 1;
                    level.br_pickups.counts[var_7] = var_42;
                    var_6 = tolower( var_6 );
                    level.br_pickups.br_itemtype[var_7] = var_6;
                    level.br_pickups.br_pickupsfx[var_7] = tablelookupbyrow( level.brloottablename, var_4, 15 );
                    var_44 = tablelookupbyrow( level.brloottablename, var_4, 3 );
                    level.br_pickups.choppersupport_issmallpatrolmap[var_7] = int( var_44 );
                }

                continue;
            }

            if ( var_5 == "crate" )
            {
                var_7 = tablelookupbyrow( level.brloottablename, var_4, 1 );
                var_45 = int( tablelookupbyrow( level.brloottablename, var_4, 2 ) );

                if ( var_45 > 0 )
                {
                    if ( isdefined( level.br_lootiteminfo[var_7] ) && isdefined( level.br_lootiteminfo[var_7].baseweapon ) )
                    {
                        for ( var_46 = 0; var_46 < var_45; var_46++ )
                        {
                            level.br_pickups.br_crateguns[level.br_pickups.br_crateguns.size] = var_7;
                            level.br_pickups.br_allguns[level.br_pickups.br_allguns.size] = var_7;
                        }
                    }
                    else
                    {
                        for ( var_46 = 0; var_46 < var_45; var_46++ )
                            level.br_pickups.br_crateitems[level.br_pickups.br_crateitems.size] = var_7;
                    }
                }

                continue;
            }

            if ( var_5 == "gulag" )
            {
                var_7 = tablelookupbyrow( level.brloottablename, var_4, 1 );
                var_47 = tablelookupbyrow( level.brloottablename, var_4, 2 );

                if ( !isdefined( level.br_pickups.br_gulagpickups[var_47] ) )
                    level.br_pickups.br_gulagpickups[var_47] = [];

                var_48 = level.br_pickups.br_gulagpickups[var_47].size;
                level.br_pickups.br_gulagpickups[var_47][var_48] = var_7;
            }
        }

        trial_radar_sweeps( "brloot_equip_gasmask", getdvarint( "scr_br_gasMask_health", 108 ) );
        trial_radar_sweeps( "brloot_equip_gasmask_durable", getdvarint( "scr_br_gasMask_health_durable", 216 ) );
    }

    setdvarifuninitialized( "scr_br_disableLootDropTrail", 0 );
    level.br_pickups.br_pickupdenyammonoroom = "MP/BR_AMMO_DENY_NO_ROOM";
    level.br_pickups.br_pickupdenyequipnoroom = "MP/BR_EQUIP_DENY_NO_ROOM";
    level.br_pickups.br_pickupdenyalreadyhaveweapon = "MP/BR_WEAPON_DENY_ALREADY_HAVE";
    level.br_pickups.br_pickupdenyarmornotbetter = "MP/BR_ARMOR_DENY_NOT_BETTER";
    level.br_pickups.br_pickupdenyalreadyhaveks = "MP/BR_KILLSTREAK_DENY_ALREADY_HAVE";
    level.br_pickups.br_pickupdenyalreadyhavetoken = "MP_BR_INGAME/ALREADY_HAVE_RESPAWN_TOKEN";
    level.br_pickups.circletimernext = "MP_BR_INGAME/ALREADY_HAVE_SELF_REVIVE_ITEM";
    level.br_pickups.circletimestruct = "MP/BR_ARMOR_DENY_ARMOR_FULL";
    level.br_pickups.circlesetup = "MP_BR_INGAME/ALREADY_HAVE_PLATE_POUCH_ITEM";
    level.br_pickups.civcontroller = "MP/BR_PICKUP_DENY_PARACHUTING";
    level.br_pickups.circletestaroundplayer = "MP_BR_INGAME/TABLET_PICKUP_FAILURE";
    level.br_pickups.civilians_killed_stat_row = "MP_BR_INGAME/PLUNDER_HELD_LIMIT_REACHED";
    level.br_pickups.civ_thread = "KILLSTREAKS/JUGG_CANNOT_BE_USED";
    level.br_pickups.civ_death = "KILLSTREAKS/JUGG_TEAM_MAX_REACHED";
    level.br_pickups.circleradius = "MP_BR_INGAME/ALREADY_HAVE_SPECIALIST_BONUS_ITEM";
    level.br_pickups.circlerunning = "MP_BR_INGAME/CIRCLE_PEEK_LIMIT";
    level.br_pickups.circlesettingsassert = "MP_BR_INGAME/CONTACT_ONLY_ITEM";
    level.br_pickups.classify_players_based_on_laststand = "MP_BR_INGAME/TABLET_WRONG_TEAM_FAILURE";
    level.br_pickups.clampstepbulletdamage = "MP_BR_INGAME/ARMOR_INSERT_IN_PROGRESS";
    level.br_pickups.br_dropoffsets = [ ( 24, 24, 6 ), ( -24, -24, 6 ), ( 24, -24, 6 ), ( -24, 24, 6 ), ( 48, 0, 6 ), ( -48, 0, 6 ), ( 0, -48, 6 ), ( 0, 48, 6 ), ( 72, 0, 6 ), ( -72, 0, 6 ), ( 0, -72, 6 ), ( 0, 72, 6 ), ( 72, -72, 6 ), ( -72, 72, 6 ), ( -72, -72, 6 ), ( 72, 72, 6 ) ];
    level.br_pickups._id_11D1D = getdvarint( "scr_br_respawn_token", 1 );
    level.br_pickups._id_11D1B = getdvarint( "scr_br_respawn_token_gulag", 0 );
    level.br_pickups.idflags_br_armor_hit = getdvarint( "scr_br_drop_specialist_pickup", 0 );
    scripts\engine\scriptable::scriptable_addusedcallback( ::lootused );
    scripts\engine\scriptable::_id_11F45( ::lootused );
}

trial_radar_sweeps( var_0, var_1 )
{
    if ( isdefined( level.br_pickups.counts[var_0] ) && isdefined( var_1 ) )
        level.br_pickups.counts[var_0] = var_1;
}

module_set_goal_radius( var_0, var_1, var_2, var_3 )
{
    var_4 = spawnstruct();
    var_4.origin = var_0;

    if ( isdefined( var_1 ) )
        var_4.angles = var_1;
    else
        var_4.angles = ( 0, 0, 0 );

    if ( isdefined( var_2 ) )
        var_4.turbopetchallengewatcher = var_2;
    else
        var_4.turbopetchallengewatcher = 0;

    var_4.oncontractend = var_3;
    return var_4;
}

getitemdroporiginandangles( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7 )
{
    var_8 = 1;
    var_9 = 1;
    var_10 = getdvarint( "br_loot_trace_debug", 0 );
    var_11 = 14;
    var_12 = 50.0;
    var_13 = 40.0;
    var_14 = -5.0;
    var_15 = 5.0;
    var_16 = 10.0;
    var_17 = 360.0 / var_11;
    var_18 = -5.0;
    var_19 = 5.0;
    var_20 = 40.0;
    var_21 = 20.0;
    var_22 = 60.0;
    var_23 = -6.0;
    var_24 = 16.0;
    var_25 = -18.0;
    var_26 = 0;
    var_27 = 0;
    var_28 = undefined;
    var_29 = var_24;

    if ( !isdefined( var_2 ) )
        var_2 = ( 0, 0, 0 );

    if ( isdefined( var_6 ) )
        var_29 = var_6;

    var_30 = int( var_0.hudnumtoconsume / var_11 );
    var_31 = var_0.hudnumtoconsume - var_30 * var_11;
    var_32 = var_2[1] + ( var_31 * var_17 + var_30 * var_16 ) + randomfloatrange( var_18, var_19 );
    var_33 = var_12 + var_30 * var_13 + randomfloatrange( var_14, var_15 );

    if ( isdefined( var_4 ) )
        var_32 = var_2[1] + var_4;

    if ( isdefined( var_5 ) )
        var_33 = var_5;

    var_34 = ( 0.0, var_32, 0.0 );
    var_35 = anglestoforward( var_34 );
    var_36 = var_1 + var_35 * var_33;

    if ( var_9 )
    {
        var_37 = tablesort( var_36, 500, 500 );

        if ( isdefined( var_3 ) )
            var_37[var_37.size] = var_3;

        var_38 = var_1 + ( 0.0, 0.0, var_21 );
        var_39 = var_36 + ( 0.0, 0.0, var_21 );
        var_40 = scripts\engine\trace::create_contents( 0, 1, 1, 1, 1, 1, 1, 0, 1 );
        var_41 = scripts\engine\trace::ray_trace( var_38, var_39, var_37, var_40 );

        if ( var_41["fraction"] < 1.0 )
        {
            var_36 = var_41["position"];
            var_36 = var_36 + var_35 * var_25;
        }
        else
            var_36 = var_39;

        var_38 = var_36;
        var_39 = var_36 + ( 0.0, 0.0, var_22 );
        var_41 = scripts\engine\trace::ray_trace( var_38, var_39, var_37, var_40 );

        if ( var_41["fraction"] < 1.0 )
            var_36 = var_41["position"] + ( 0.0, 0.0, var_23 );
        else
            var_36 = var_39;

        var_41 = undefined;

        if ( istrue( var_7 ) )
            var_41 = scripts\mp\gametypes\br_public::idle_sfx( var_36, 0.0, undefined, undefined, var_37 );
        else
        {
            var_38 = var_36;
            var_42 = -1 * getdvarfloat( "bg_maxLootDropHeight", 2000.0 );
            var_39 = var_36 + ( 0.0, 0.0, var_42 );
            var_41 = scripts\engine\trace::ray_trace( var_38, var_39, var_37, var_40 );
        }

        if ( var_41["fraction"] < 1.0 )
        {
            var_36 = var_41["position"] + ( 0.0, 0.0, var_29 );
            var_28 = var_41["entity"];
        }
        else
        {
            var_36 = ( 0, 0, 0 );
            var_26 = 1;
        }
    }
    else
        var_36 = var_36 + ( 0, 0, var_29 );

    if ( var_8 && !var_26 )
        var_27 = getscriptablereservedremaining( var_1 + ( 0, 0, var_20 ), var_36 );

    var_0.hudnumtoconsume++;
    return module_set_goal_radius( var_36, var_34, var_27, var_28 );
}

modelaststandallowed( var_0 )
{
    if ( isdefined( var_0 ) && isdefined( level.br_lootiteminfo[var_0] ) && isdefined( level.br_lootiteminfo[var_0].laststandid ) )
        return level.br_lootiteminfo[var_0].laststandid;

    return undefined;
}

model_parts( var_0 )
{
    if ( isdefined( var_0 ) && isdefined( var_0.scriptablename ) )
        return modelaststandallowed( var_0.scriptablename );

    return undefined;
}

getpickupweaponquality( var_0 )
{
    if ( isdefined( var_0 ) && isdefined( var_0.scriptablename ) && isdefined( level.br_pickups.choppersupport_issmallpatrolmap[var_0.scriptablename] ) )
        return level.br_pickups.choppersupport_issmallpatrolmap[var_0.scriptablename];

    return undefined;
}

getgulagpickupsforclass( var_0 )
{
    var_1 = [ "none" ];

    if ( isdefined( var_0 ) && isdefined( level.br_pickups.br_gulagpickups[var_0] ) )
        var_1 = level.br_pickups.br_gulagpickups[var_0];

    return var_1;
}

setuphelilandingposition( var_0 )
{
    return var_0.count >> 0 & 2047;
}

setuphqs( var_0 )
{
    return var_0.count >> 11 & 2047;
}

setuphelitimer( var_0 )
{
    return var_0.count >> 22 & 31;
}

setupinfectedairdroppositions( var_0, var_1, var_2, var_3 )
{
    var_4 = 0;
    var_4 = var_4 + ( ( var_1 & 2047 ) << 0 );

    if ( isdefined( var_2 ) )
        var_4 = var_4 + ( ( var_2 & 2047 ) << 11 );

    if ( isdefined( var_3 ) )
        var_4 = var_4 + ( ( var_3 & 31 ) << 22 );

    var_0.count = var_4;
}

should_do_vo_call( var_0 )
{
    if ( var_0.type == "br_plunder_box" )
        return 1;

    if ( istrue( scripts\mp\gametypes\br_gametypes::_id_11E4F( "lootUsedIgnore", var_0 ) ) )
        return 1;

    if ( istrue( var_0.should_do_vo_call ) )
        return 1;

    return 0;
}

lootused( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !isdefined( var_0 ) )
        return;

    if ( istrue( var_3 scripts\mp\gametypes\br_gametypes::_id_11E4F( "playerSkipLootPickup", var_0 ) ) || istrue( level.playerstarttimetracking ) )
        return;

    if ( var_0 getscriptableisloot() && !should_do_vo_call( var_0 ) )
    {
        var_5 = spawnstruct();
        var_5.scriptablename = var_0.type;
        var_5.origin = var_0.origin;
        var_5.count = setuphelilandingposition( var_0 );
        var_5.floor1lights = setuphqs( var_0 );
        var_5.flickerlights = setuphelitimer( var_0 );
        var_5.questbasetimer = var_0;
        var_5.customweaponname = var_0.customweaponname;
        var_5.maxcount = level.br_pickups.maxcounts[var_5.scriptablename];
        var_5.stackable = level.br_pickups.stackable[var_5.scriptablename];

        if ( !var_5.count && isdefined( level.br_pickups.counts[var_5.scriptablename] ) )
            var_5.count = level.br_pickups.counts[var_5.scriptablename];

        var_5.isweaponfromcrate = var_0.isweaponfromcrate;
        var_5.register_disabled_seats_for_vehicle = var_4;
        var_6 = var_3 cantakepickup( var_5 );

        if ( var_6 == 1 )
        {
            var_7 = var_3 onusecompleted( var_5, undefined, var_4 );

            if ( isdefined( var_0 ) && var_7 )
                setupinfectedairdroppositions( var_0, var_5.count, var_5.floor1lights, var_5.flickerlights );

            if ( !isdefined( var_0 ) || var_7 )
                return;

            sg_playerdisconnect( var_0 );
        }
        else
        {
            var_8 = 1;
            var_9 = level.br_pickups.choppergunner_refillmissiles[var_5.scriptablename];

            if ( var_4 && istrue( var_9 ) && var_2 == "visible" )
                var_8 = 0;

            if ( var_6 == 17 || var_6 == 21 )
                var_8 = 0;

            if ( var_8 )
            {
                if ( var_6 == 3 )
                    var_3 playlocalsound( "weap_ammo_full" );
                else
                    var_3 playlocalsound( "br_pickup_deny" );

                var_3 showuseresultsfeedback( var_6 );
            }
        }
    }
}

sg_playerdisconnect( var_0, var_1 )
{
    if ( var_0 getscriptableislinked() )
        return;

    if ( !isdefined( var_1 ) )
        var_1 = var_0.type;

    if ( remove_punchcard( var_0.type ) )
    {
        if ( scripts\mp\flags::gameflag( "prematch_done" ) )
            level notify( "tablethide_kill_callout_" + var_0.origin );

        scripts\mp\gametypes\br_quest_util::tracknonoobplayerlocation( var_0 );
    }

    if ( var_0 getscriptableisreserved() && !istrue( var_0.keepinmap ) )
    {
        give_periodic_jugg_pulses( var_0 );
        var_0 freescriptable();
    }
    else
        var_0 setscriptablepartstate( var_1, "hidden" );
}

br_forcegivecustompickupitem( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    if ( istrue( var_5 ) )
    {
        var_0 hud_set_progress( var_1, var_3, var_4, var_5 );
        return 1;
    }

    var_6 = spawnstruct();
    var_6.scriptablename = var_1;
    var_6.origin = var_0.origin;
    var_6.count = 0;
    var_6.maxcount = level.br_pickups.maxcounts[var_6.scriptablename];
    var_6.stackable = level.br_pickups.stackable[var_6.scriptablename];

    if ( isdefined( var_3 ) )
        var_6.count = var_3;

    if ( !var_6.count && isdefined( level.br_pickups.counts[var_6.scriptablename] ) )
        var_6.count = level.br_pickups.counts[var_6.scriptablename];

    var_7 = var_0 cantakepickup( var_6 );

    if ( var_7 == 1 )
    {
        var_0 onusecompleted( var_6, var_2, undefined, var_4 );
        return 1;
    }

    return 0;
}

resetplayerinventorywithdelay( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "death" );
    self endon( "disconnect" );
    wait( var_0 );
    resetplayerinventory( var_1 );
}

resetplayerinventory( var_0 )
{
    var_1 = scripts\mp\utility\game::namehud() == "kingslayer";
    self.br_inventory_slots = [];

    if ( !scripts\mp\gametypes\br_gametypes::relic_amped_explosion_time( "armor" ) )
        scripts\mp\gametypes\br_armor::closedangles();

    closeelevatordoors();

    if ( isdefined( self.streakdata ) && !var_1 && !istrue( level._id_1233A ) )
        scripts\mp\killstreaks\killstreaks::clearkillstreaks();

    if ( !level.allowsupers )
        _id_11CEC();

    if ( !istrue( var_0 ) )
    {
        scripts\mp\gametypes\br_weapons::stripweaponsfromplayer();
        scripts\mp\equipment::takeequipment( "primary" );
        scripts\mp\equipment::takeequipment( "secondary" );
        scripts\mp\weapons::_id_1212C( getcompleteweaponname( "iw8_fists_mp" ) );
    }

    if ( scripts\mp\gametypes\br_public::pavelow_boss_destroyed_watch() )
        _id_11C99();
}

_id_11CEC()
{
    scripts\mp\supers::clearsuper();
    self setclientomnvar( "ui_perk_package_state", 0 );
    self setclientomnvar( "ui_super_progress", 0 );
}

resetdefaultweaponammo( var_0 )
{
    var_1 = self getweaponslistall();

    for ( var_2 = 0; var_2 < var_1.size; var_2++ )
    {
        var_3 = var_1[var_2];
        var_4 = 0;

        if ( var_3.inventorytype == "primary" )
        {
            if ( isdefined( var_0 ) )
            {
                var_5 = var_3.clipsize;
                var_4 = var_5 * ( var_0 - 1 );
            }
            else if ( level.magcount > 0 )
            {
                var_5 = var_3.clipsize;
                var_4 = var_5 * ( level.magcount - 1 );
            }
            else
                var_5 = 0;

            self setweaponammoclip( var_3, var_5 );
        }
    }
}

initplayer( var_0 )
{
    scripts\mp\gametypes\br_weapons::br_ammo_player_clear();
    resetplayerinventory( var_0 );
}

spawndebugpickupfromdevgui( var_0 )
{
    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) && isalive( var_2 ) )
        {
            var_3 = var_2.origin + anglestoforward( var_2.angles ) * 100 + ( 0, 0, 12 );
            var_4 = 0;

            if ( isdefined( level.br_pickups.counts[var_0] ) )
                var_4 = level.br_pickups.counts[var_0];

            var_5 = module_set_goal_radius( var_3 );
            var_6 = spawnpickup( var_0, var_5, var_4 );

            if ( isdefined( var_6 ) )
            {
                var_7 = scripts\engine\trace::create_contents( 0, 1, 0, 0, 0, 1, 1, 0, 0 );
                var_8 = [ var_6 ];
                var_9 = var_6.origin + ( 0, 0, 50 );
                var_10 = var_9 + ( 0, 0, -200 );
                var_11 = scripts\engine\trace::ray_trace( var_9, var_10, var_8, var_7 );

                if ( isdefined( var_11["entity"] ) && isdefined( var_11["entity"].targetname ) && var_11["entity"].targetname == "train_wz" )
                {
                    var_12 = var_11["entity"];
                    var_13 = rotatevectorinverted( var_6.origin - var_12.origin, var_12.angles );
                    var_14 = combineangles( invertangles( var_12.angles ), var_6.angles );
                    var_6 scriptablesetparententity( var_12, var_13, var_14 );
                }
            }
        }
    }
}

isweaponpickup( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "weapon";
}

isweaponpickupitem( var_0 )
{
    if ( !isdefined( var_0 ) )
        return 0;

    if ( isdefined( var_0.weapon ) )
        return istrue( var_0.weapon.iscustomweapon );
    else if ( isdefined( var_0.scriptablename ) )
        return isweaponpickup( var_0.scriptablename );

    return 0;
}

takearmorpickup( var_0 )
{
    var_1 = level.br_pickups.br_equipname[var_0.scriptablename];
    var_2 = scripts\mp\gametypes\br_armor::isarmorbetterthanequipped( var_1 );

    if ( var_2 )
        tryequiparmor( var_0 );
}

takeequipmentpickup( var_0, var_1 )
{
    var_2 = level.br_pickups.br_equipname[var_0.scriptablename];
    var_3 = level.equipment.table[var_2].defaultslot;
    var_4 = 0;

    if ( pickupissameasequipmentslot( var_2, var_3 ) )
    {
        if ( equipmentslothasroom( var_2, var_3 ) )
        {
            if ( var_3 != "health" )
                scripts\mp\damagefeedback::hudicontype( "br_ammo" );

            var_5 = scripts\mp\equipment::getequipmentslotammo( var_3 );
            var_6 = scripts\mp\equipment::getequipmentmaxammo( var_2 );

            if ( var_5 + var_0.count > var_6 )
            {
                var_7 = var_6 - var_5;
                scripts\mp\equipment::setequipmentammo( var_2, var_6 );
                var_0.count = var_0.count - var_7;
                var_4 = 1;
            }
            else
                scripts\mp\equipment::incrementequipmentslotammo( var_3, var_0.count );
        }
        else if ( !getdvarint( "scr_br_no_inventory", 1 ) )
            trypickupitem( var_0.scriptablename, var_0.count );
    }
    else if ( !isdefined( self.equipment[var_3] ) || scripts\mp\equipment::getequipmentslotammo( var_3 ) == 0 )
    {
        scripts\mp\equipment::giveequipment( var_2, var_3 );
        scripts\mp\equipment::setequipmentammo( var_2, var_0.count );
    }
    else if ( !getdvarint( "scr_br_no_inventory", 1 ) )
    {
        var_8 = 1;

        if ( isdefined( var_0.count ) )
            var_8 = var_0.count;

        trypickupitem( var_0.scriptablename, var_8 );
    }
    else
    {
        var_9 = project_to_line();
        dropequipmentinslot( var_9, var_3, var_1 );
        scripts\mp\equipment::giveequipment( var_2, var_3 );
        scripts\mp\equipment::setequipmentammo( var_2, var_0.count );
    }

    return var_4;
}

dropequipmentinslot( var_0, var_1, var_2, var_3 )
{
    var_4 = scripts\mp\equipment::getequipmentslotammo( var_1 );

    if ( isdefined( var_3 ) )
        var_4 = var_3;

    var_5 = scripts\engine\utility::array_find( level.br_pickups.br_equipname, self.equipment[var_1] );

    if ( isdefined( var_5 ) )
    {
        var_6 = undefined;

        if ( istrue( var_2 ) )
            var_6 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

        var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self, var_6 );
        var_8 = 0;
        var_9 = spawnpickup( var_5, var_7, var_4, 1 );

        if ( isdefined( var_9 ) )
            var_9 hvi_vehicle_rider_special_setup( self, var_5 );
    }
}

hvi_vehicle_rider_special_setup( var_0, var_1 )
{
    var_2 = self;

    if ( var_1 == "brloot_offhand_geigercounter" )
    {
        var_2.owner = var_0;
        var_0.hvt_waittill_pickup_players_gobackup = var_2;
    }
}

pickupissameasequipmentslot( var_0, var_1 )
{
    if ( isdefined( self.equipment[var_1] ) && self.equipment[var_1] == var_0 )
        return 1;

    return 0;
}

equipmentslothasroom( var_0, var_1 )
{
    if ( scripts\mp\equipment::getequipmentslotammo( var_1 ) < scripts\mp\equipment::getequipmentmaxammo( var_0 ) )
        return 1;

    return 0;
}

takerespawntokenpickup( var_0 )
{
    if ( !_id_11D1C() && !scripts\mp\gametypes\br_public::hasrespawntoken() )
    {
        addrespawntoken();
        return 1;
    }

    return 0;
}

addrespawntoken( var_0 )
{
    var_1 = self;
    var_1.hasrespawntoken = 1;
    var_1 scripts\mp\gametypes\br_public::_id_1211D( 1 );

    if ( !istrue( var_0 ) )
        var_1 thread scripts\mp\hud_message::showsplash( "br_respawn_token_pickup" );
}

removerespawntoken()
{
    var_0 = self;
    var_0.hasrespawntoken = 0;
    var_0 scripts\mp\gametypes\br_public::_id_1211D( 0 );
}

_id_128D2( var_0 )
{
    if ( !scripts\mp\gametypes\br_public::pavelow_boss_destroyed_watch() )
    {
        animatedprop_setanim();
        return 1;
    }

    return 0;
}

animatedprop_setanim( var_0 )
{
    var_1 = self;
    var_1.pavelow_boss_destroyed_watch = 1;
    var_1 scripts\mp\gametypes\br_public::_id_1211E( 1 );

    if ( !istrue( var_0 ) )
        var_1 thread scripts\mp\hud_message::showsplash( "br_self_revive_token_pickup" );

    var_2 = level.maxteamsize == 1;

    if ( var_2 && !var_1 scripts\mp\utility\perk::_hasperk( "specialty_pistoldeath" ) )
        var_1 scripts\mp\utility\perk::giveperk( "specialty_pistoldeath" );
}

_id_11C99()
{
    var_0 = self;
    var_0.pavelow_boss_destroyed_watch = 0;
    var_0 scripts\mp\gametypes\br_public::_id_1211E( 0 );
    var_1 = level.maxteamsize == 1;

    if ( var_1 && var_0 scripts\mp\utility\perk::_hasperk( "specialty_pistoldeath" ) )
        var_0 scripts\mp\utility\perk::removeperk( "specialty_pistoldeath" );
}

_id_11D1C()
{
    return getdvarint( "scr_br_all_assassin_version", 0 ) || !istrue( level.br_pickups._id_11D1D ) || istrue( level.br_pickups._id_11D1B ) && isdefined( level.gulag ) && istrue( level.gulag.shutdown );
}

angle_molotov_mortar( var_0 )
{
    var_1 = self;
    self playsoundtoplayer( "br_legendary_loot_pickup", self );
    var_1.pause_combat_logic = 1;
    var_1 setclientomnvar( "ui_br_has_plate_pouch", 1 );

    if ( !istrue( var_0 ) )
        var_1 thread scripts\mp\hud_message::showsplash( "br_plate_pouch_pickup" );
}

_id_11C93()
{
    var_0 = self;
    var_0 setclientomnvar( "ui_br_has_plate_pouch", 0 );
    var_0.pause_combat_logic = 0;
}

isteameliminated()
{
    var_0 = self;
    var_1 = spawnstruct();
    var_1.scriptablename = "brloot_armor_plate";
    var_1.inithelipropanims = level.br_pickups.br_equipname[var_1.scriptablename];
    var_1.origin = self.origin;
    var_1.maxcount = scripts\mp\equipment::getequipmentmaxammo( var_1.inithelipropanims );
    var_1.count = var_1.maxcount;
    var_1.stackable = level.br_pickups.stackable[var_1.scriptablename];
    var_0 takeequipmentpickup( var_1 );
}

_id_128CB( var_0 )
{
    if ( scripts\mp\gametypes\br_public::patchable_collision() )
    {
        var_1 = project_to_line();
        var_2 = undefined;
        var_3 = getitemdroporiginandangles( var_1, self.origin, self.angles, self, var_2 );
        spawnpickup( self.ai_semtex_swapp, var_3, 1, 1 );
    }

    ammobox_getbufferedattachmentweapon( var_0.scriptablename );
}

ammobox_getbufferedattachmentweapon( var_0 )
{
    var_1 = self;
    var_1.ai_semtex_swapp = var_0;
    var_2 = int( tablelookup( "mp/braccess_card.csv", 1, var_0, 0 ) );
    var_1 scripts\mp\gametypes\br_public::updatebrscoreboardstat( "bunkerKeycardType", var_2 );
    var_1 scripts\mp\gametypes\br_alt_mode_zai::tmtyl_vip_interactions( var_0 );
}

_id_11C7A()
{
    var_0 = self;

    if ( !getdvarint( "scr_br_bunkersNoKeycardRequired", 0 ) )
    {

    }

    var_0 scripts\mp\gametypes\br_alt_mode_zai::trackriotshield_grenadepullbackforc4( var_0.ai_semtex_swapp );
    var_0.ai_semtex_swapp = undefined;
    var_0 scripts\mp\gametypes\br_public::updatebrscoreboardstat( "bunkerKeycardType", 0 );
}

_id_128CD( var_0 )
{
    var_1 = var_0.scriptablename;

    if ( var_1 == "brloot_x1_map_fragment" )
        return;
}

takequestitem( var_0 )
{
    var_1 = var_0.scriptablename;

    if ( var_1 == "brloot_x2_stash_bomb" )
        var_0 scripts\mp\gametypes\br_x2_stash_quest::_id_13391( self );
}

animscripted_loop( var_0 )
{
    var_1 = self;
    self playsoundtoplayer( "br_legendary_loot_pickup", self );
    var_1.path_timeout = 1;
    var_1 scripts\mp\perks\perks::animscripted_clear();

    if ( !istrue( var_0 ) )
        var_1 thread scripts\mp\hud_message::showsplash( "specialist_perk_bonus" );
}

_id_11CA0()
{
    var_0 = self;
    var_0.path_timeout = 0;
    var_0 scripts\mp\perks\perks::_id_11C9F();
}

laser_show_position( var_0, var_1, var_2, var_3 )
{
    self notify( "cancel_all_killstreak_deployments" );

    if ( istrue( var_3 ) )
    {
        var_4 = project_to_line();
        hud_y_offset( var_4, var_2, var_3, var_0 );
        return;
    }

    if ( istrue( var_1 ) )
    {
        var_4 = project_to_line();
        hud_y_offset( var_4, var_2 );
    }
    else
        scripts\mp\killstreaks\killstreaks::clearkillstreaks();

    scripts\mp\killstreaks\killstreaks::awardkillstreak( var_0, "other", undefined, undefined, undefined, 1 );
}

takekillstreakpickup( var_0, var_1 )
{
    if ( isdefined( var_0 ) && isdefined( var_0.questbasetimer ) && isdefined( var_0.questbasetimer.playerhunterpostloadout ) )
        self.playeriscinematiclayeron = var_0.questbasetimer.playerhunterpostloadout;

    old_goalheight( var_0.scriptablename, var_1 );
}

old_goalheight( var_0, var_1 )
{
    var_2 = level.br_pickups.br_killstreakreference[var_0];

    if ( relic_amped_monitor_beeps( var_2 ) )
        laser_activate( var_2 );
    else
        laser_show_position( var_2, 1, var_1 );
}

path_data()
{
    if ( isdefined( self.streakdata ) && isdefined( self.streakdata.streaks ) && self.streakdata.streaks.size > 0 )
        return isdefined( self.streakdata.streaks[1] );

    return 0;
}

haskillstreak( var_0 )
{
    return path_data() && self.streakdata.streaks[1].streakname == var_0;
}

perks_suppressasserts()
{
    return haskillstreak( "explosive_bow" );
}

relic_amped_monitor_beeps( var_0 )
{
    var_1 = 0;

    switch ( var_0 )
    {
        case "circle_peek":
            var_1 = 1;
            break;
    }

    return var_1;
}

laser_activate( var_0 )
{
    var_1 = scripts\mp\killstreaks\killstreaks::getkillstreaksetupinfo( var_0 );

    if ( isdefined( var_1 ) && isdefined( var_1.gulagisspawnpositionwithindangercircle ) )
        self [[ var_1.gulagisspawnpositionwithindangercircle ]]();
}

forceusekillstreak( var_0 )
{
    if ( path_data() )
        scripts\mp\killstreaks\killstreaks::removekillstreak( 1 );

    scripts\mp\killstreaks\killstreaks::awardkillstreak( var_0, "other", undefined, undefined, undefined, 1 );
    var_1 = scripts\mp\killstreaks\killstreaks::getkillstreakinslot( 1 );
    var_2 = scripts\mp\killstreaks\killstreaks::triggerkillstreak( var_1, 1 );

    if ( !var_2 )
        scripts\mp\killstreaks\killstreaks::removekillstreak( 1 );

    return var_2;
}

_givebrsuper( var_0, var_1, var_2 )
{
    if ( level.allowsupers )
    {
        scripts\mp\perks\perkpackage::unset_relic_doomslayer( var_1 );
        var_2 = scripts\mp\supers::getcurrentsuperpoints() >= scripts\mp\supers::getsuperpointsneeded();
    }
    else
    {
        scripts\mp\perks\perkpackage::perkpackage_giveimmediate( var_1 );
        self setclientomnvar( "ui_perk_package_state", 3 );
        self setclientomnvar( "ui_perk_package_super1", scripts\mp\supers::getsuperid( var_1 ) );
        self setclientomnvar( "ui_super_progress", 1 );
    }

    if ( isdefined( var_0 ) )
    {
        scripts\mp\equipment::giveequipment( var_0, "super" );
        scripts\mp\equipment::setequipmentammo( var_0, var_2 );
    }
}

takesuperpickup( var_0, var_1 )
{
    var_2 = level.br_pickups.br_equipname[var_0.scriptablename];
    var_3 = level.br_pickups.br_superreference[var_0.scriptablename];

    if ( isdefined( self.equipment["super"] ) && ( scripts\mp\equipment::getequipmentslotammo( "super" ) > 0 || init_airlock_buttons() ) )
    {
        var_4 = project_to_line();
        dropequipmentinslot( var_4, "super", var_1 );
    }

    _givebrsuper( var_2, var_3, var_0.count );

    if ( level.allowsupers )
        scripts\mp\supers::givesuperpoints( scripts\mp\supers::getsuperpointsneeded() );
}

init_airlock_buttons()
{
    if ( istrue( self.regroup_trigger ) )
    {
        if ( isdefined( self.super ) && !self.super.usepercent )
            return 1;
    }

    return 0;
}

forcegivesuper( var_0, var_1, var_2, var_3 )
{
    var_4 = undefined;

    foreach ( var_7, var_6 in level.br_pickups.br_superreference )
    {
        if ( var_6 == var_0 )
        {
            var_4 = var_7;
            break;
        }
    }

    var_8 = undefined;

    if ( isdefined( var_4 ) )
    {
        var_8 = level.br_pickups.br_equipname[var_4];

        if ( istrue( var_3 ) )
        {
            var_9 = project_to_line();
            hud_set_timers( var_9, var_2, var_3, var_8 );
            return;
        }

        if ( istrue( var_1 ) )
        {
            if ( isdefined( self.equipment["super"] ) && scripts\mp\equipment::getequipmentslotammo( "super" ) > 0 )
            {
                var_9 = project_to_line();
                dropequipmentinslot( var_9, "super", var_2 );
            }
        }
    }

    _givebrsuper( var_8, var_0, 1 );
}

takegasmask( var_0, var_1 )
{
    if ( scripts\cp_mp\gasmask::hasgasmask( self ) )
    {
        var_2 = undefined;

        if ( istrue( var_1 ) )
            var_2 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

        var_3 = project_to_line();
        var_4 = getitemdroporiginandangles( var_3, self.origin, self.angles, self, var_2 );
        spawnpickup( self.light_target_init, var_4, int( self.gasmaskhealth ), 1 );
    }

    scripts\cp_mp\gasmask::init( var_0.count, var_0.scriptablename );
}

light_tank_watchmissileinputchange( var_0 )
{
    if ( !isdefined( self.light_target_desactivate_check ) )
        self.light_target_desactivate_check = [];

    if ( isdefined( self.light_target_desactivate_check[var_0] ) )
        return;

    self.light_target_desactivate_check[var_0] = 1;
    thread add_head_icon_on_allies();
}

light_tank_update( var_0 )
{
    if ( !isdefined( self.light_target_desactivate_check ) )
        self.light_target_desactivate_check = [];

    if ( !isdefined( self.light_target_desactivate_check[var_0] ) )
        return;

    self.light_target_desactivate_check[var_0] = undefined;
    thread add_head_icon_on_allies();
}

add_head_icon_on_allies()
{
    level endon( "game_ended" );
    self endon( "death_or_disconnect" );

    if ( istrue( self.gasmaskswapinprogress ) )
    {
        scripts\engine\utility::waittill_notify_or_timeout( "gas_mask_swap_complete", 2.0 );
        waitframe();
    }

    self notify( "gasMaskUpdateOnOff" );
    self endon( "gasMaskUpdateOnOff" );
    waittillframeend;

    if ( istrue( self.gasmaskequipped ) && ( !isdefined( self.light_target_desactivate_check ) || !self.light_target_desactivate_check.size ) )
        thread _id_11C82();
    else if ( !istrue( self.gasmaskequipped ) && isdefined( self.light_target_desactivate_check ) && self.light_target_desactivate_check.size )
        thread initevents();
}

desired_landing_spot()
{
    var_0 = self;
    var_1 = var_0 scripts\cp_mp\utility\player_utility::isinvehicle( 1 );
    var_2 = var_0 isinfreefall();
    var_3 = var_0 isparachuting();
    var_4 = var_0 isbasejumpavailable();
    return !( var_1 || var_2 || var_3 || var_4 );
}

initevents()
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );
    self playsoundtoplayer( "br_gas_mask_on_plr", self );
    self.gasmaskswapinprogress = 1;
    thread getplundernamebyamount( 0.2 );
    var_0 = self getgestureanimlength( "ges_magma_gas_mask_on" );

    if ( desired_landing_spot() )
        thread watchoverheat( "iw8_ges_plyr_gasmask_on", var_0 );

    self setclientomnvar( "ui_gas_mask", 2 );
    wait( var_0 );
    self.gasmaskswapinprogress = 0;
    self notify( "gas_mask_swap_complete" );
    self.gasmaskequipped = 1;
    scripts\cp_mp\killstreaks\white_phosphorus::enableloopingcoughaudiosupression();

    if ( isdefined( self.operatorcustomization.gender ) && self.operatorcustomization.gender == "female" )
        self _meth_87A8( "gasmask_female" );
    else
        self _meth_87A8( "gasmask_male" );

    if ( isdefined( self.gasmaskhealth ) && self.gasmaskhealth <= 0 )
        closeelevatordoors();
}

watchoverheat( var_0, var_1 )
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );
    var_2 = getcompleteweaponname( var_0 );
    self giveandfireoffhand( var_2 );

    while ( desired_landing_spot() && var_1 > 0 )
    {
        if ( var_1 > 1 )
        {
            var_3 = 1;
            var_1 = var_1 - 1;
        }
        else
        {
            var_3 = var_1;
            var_1 = 0;
        }

        wait( var_3 );
    }

    if ( self hasweapon( var_2 ) )
        self takeweapon( var_2 );
}

_id_11C82()
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );

    if ( !istrue( self.gasmaskequipped ) )
        return;

    self playsoundtoplayer( "br_gas_mask_off_plr", self );
    var_0 = self getgestureanimlength( "ges_magma_gas_mask_off" );
    thread getpresettruckspawns( 1.3 );

    if ( desired_landing_spot() )
        thread watchoverheat( "iw8_ges_plyr_gasmask_off", var_0 );

    self.gasmaskswapinprogress = 1;
    self setclientomnvar( "ui_gas_mask", 1 );
    wait( var_0 );
    self.gasmaskswapinprogress = 0;
    self setclientomnvar( "ui_gas_mask", 0 );
    self notify( "gas_mask_swap_complete" );
    scripts\cp_mp\killstreaks\white_phosphorus::disableloopingcoughaudiosupression();

    if ( isdefined( self.operatorcustomization.gender ) && self.operatorcustomization.gender == "female" )
        self _meth_87A8( "female" );
    else
        self _meth_87A8( "" );

    if ( !isdefined( self.gasmaskhealth ) || self.gasmaskhealth <= 0 )
        enter_numbers_start();
}

closeelevatordoors()
{
    if ( !istrue( self.gasmaskequipped ) )
        return;

    self playsoundtoplayer( "br_gas_mask_crack_plr", self );
    thread getpreviousplacement( 0.6 );

    if ( isdefined( self.operatorcustomization.gender ) && self.operatorcustomization.gender == "female" )
        self _meth_87A8( "female" );
    else
        self _meth_87A8( "" );

    self playsoundtoplayer( "br_gas_mask_depleted_plr", self );
    enter_numbers_start();
    var_0 = self getgestureanimlength( "ges_magma_gas_mask_break" );
    thread scripts\mp\gametypes\br_public::waitandunloadinfils( "iw8_ges_plyr_gasmask_break", var_0 );
    self.gasmaskswapinprogress = 1;
    self setclientomnvar( "ui_gas_mask", 3 );
    wait( var_0 );
    self.gasmaskswapinprogress = 0;
    self notify( "gas_mask_swap_complete" );
}

getplundernamebyamount( var_0 )
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );

    if ( isdefined( var_0 ) && var_0 > 0.0 )
        wait( var_0 );

    self attach( "hat_child_hadir_gas_mask_wm_br", "j_head" );
}

getpresettruckspawns( var_0 )
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );

    if ( isdefined( var_0 ) && var_0 > 0.0 )
        wait( var_0 );

    if ( self.gasmaskequipped )
    {
        self detach( "hat_child_hadir_gas_mask_wm_br", "j_head" );
        self.gasmaskequipped = 0;
    }
}

getpreviousplacement( var_0 )
{
    self endon( "game_ended" );
    self endon( "death_or_disconnect" );

    if ( isdefined( var_0 ) && var_0 > 0.1 )
        wait( var_0 - 0.1 );

    playfxontag( scripts\engine\utility::getfx( "vfx_gas_mask_break" ), self, "tag_weapon_left" );
    wait 0.1;

    if ( self.gasmaskequipped )
    {
        self detach( "hat_child_hadir_gas_mask_wm_br", "j_head" );
        self.gasmaskequipped = 0;
    }
}

canholdammobox( var_0 )
{
    if ( !isdefined( self.br_ammo[var_0] ) )
        return 1;

    return !scripts\mp\gametypes\br_weapons::br_ammo_type_player_full( self, var_0 );
}

isvest( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "armor" && issubstr( var_0, "vest" );
}

isgasmask( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "gear" && issubstr( var_0, "gasmask" );
}

removespecialistbonus( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "specialist" && issubstr( var_0, "specialist_bonus" );
}

isplunder( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "plunder";
}

remove_punchcard( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "tablet";
}

registerpuzzleinteractions( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "questitem_dogtag";
}

remove_player_rig_laser_panel( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "questitem_misc";
}

isperkpointpickup( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "perkpoint";
}

istokenpickup( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "token";
}

removeextracthelipad( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "revive";
}

iskillstreak( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && ( level.br_pickups.br_itemtype[var_0] == "killstreak" || level.br_pickups.br_itemtype[var_0] == "killstreak_nodrop" );
}

issuperpickup( var_0 )
{
    return !relic_squadlink_onsteppedfar( var_0 ) && ( isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "super" );
}

isplunderextract( var_0 )
{
    return var_0 == "brloot_plunder_extract";
}

relightingenabled( var_0 )
{
    return var_0 == "brloot_plate_pouch";
}

ref_angle_doors( var_0 )
{
    return issubstr( var_0, "access_card" );
}

relic_squadlink_onsteppedfar( var_0 )
{
    return var_0 == "br_loot_cache" || remove_punchcard( var_0 );
}

relic_squadlink_remove_visionset( var_0 )
{
    return isdefined( level.br_pickups.br_itemtype[var_0] ) && level.br_pickups.br_itemtype[var_0] == "objective";
}

cantakepickup( var_0 )
{
    if ( self isskydiving() )
        return 9;

    var_1 = scripts\mp\gametypes\br_gametypes::_id_11E4F( "canTakePickupLoot", var_0 );

    if ( isdefined( var_1 ) )
        return var_1;

    if ( scripts\mp\gametypes\br_public::isammo( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) && !scripts\mp\juggernaut::restartwrapper() )
            return 16;

        if ( !canholdammobox( var_0.scriptablename ) )
            return 3;
        else
            return 1;
    }

    if ( isweaponpickupitem( var_0 ) )
    {
        if ( istrue( self.isjuggernaut ) && !scripts\mp\juggernaut::restartwrapper() )
            return 16;

        if ( istrue( self.quest_scavdistmin ) )
            return 13;

        if ( scripts\cp_mp\utility\player_utility::isinvehicle() )
            return 17;

        if ( _attachmentblocks::callback_subscribe() )
            return 21;

        return 1;
    }

    if ( scripts\mp\gametypes\br_public::isequipment( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( var_0.scriptablename == "brloot_offhand_geigercounter" )
        {
            if ( self != var_0.questbasetimer.owner )
                return 20;
            else
                self.hvt_waittill_pickup_players_gobackup = undefined;
        }

        var_2 = level.br_pickups.br_equipname[var_0.scriptablename];
        var_3 = level.equipment.table[var_2].defaultslot;
        var_4 = istrue( var_0.register_disabled_seats_for_vehicle );
        var_5 = 1;

        if ( isdefined( var_0.count ) )
            var_5 = var_0.count;

        if ( var_4 && ( var_3 == "primary" || var_3 == "secondary" ) )
        {
            if ( isdefined( self.equipment[var_3] ) && pickupissameasequipmentslot( var_2, var_3 ) && equipmentslothasroom( var_2, var_3 ) )
                return 1;

            return 12;
        }

        if ( !isdefined( self.equipment[var_3] ) || scripts\mp\equipment::getequipmentslotammo( var_3 ) == 0 )
            return 1;

        if ( pickupissameasequipmentslot( var_2, var_3 ) )
        {
            if ( equipmentslothasroom( var_2, var_3 ) )
                return 1;
            else if ( getdvarint( "scr_br_no_inventory", 1 ) )
                return 4;
        }

        if ( getdvarint( "scr_br_no_inventory", 1 ) )
            return 1;

        if ( !canslotitem( var_0.scriptablename, var_5 ) )
            return 4;
        else
            return 1;
    }

    if ( isplunder( var_0.scriptablename ) )
    {
        if ( isdefined( level.br_plunder ) && isdefined( level.br_plunder.weapons_that_can_stun ) && self.plundercount >= level.br_plunder.weapons_that_can_stun )
            return 11;

        return 1;
    }

    if ( isgasmask( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        return 1;
    }

    if ( remove_punchcard( var_0.scriptablename ) )
    {
        if ( var_0.scriptablename == "brloot_blueprintextract_tablet" || var_0.scriptablename == "brloot_blueprintextract_tablet_easterevent" )
            return 1;
        else if ( level.questinfo.shouldapplytosquad && scripts\engine\utility::array_contains( level.questinfo.squadsonquests, self.squadindex ) || scripts\engine\utility::array_contains( level.questinfo.teamsonquests, self.team ) )
            return 10;
        else
            return 1;
    }

    if ( isperkpointpickup( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        return 1;
    }

    if ( istokenpickup( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( var_0.scriptablename == "brloot_respawn_token" )
        {
            if ( scripts\mp\gametypes\br_public::hasrespawntoken() )
                return 8;
            else
                return 1;
        }

        return 1;
    }

    if ( removeextracthelipad( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( var_0.scriptablename == "brloot_self_revive" )
        {
            if ( scripts\mp\gametypes\br_public::pavelow_boss_destroyed_watch() )
                return 14;
            else
                return 1;
        }

        return 1;
    }

    if ( iskillstreak( var_0.scriptablename ) )
    {
        var_6 = level.br_pickups.br_killstreakreference[var_0.scriptablename];

        if ( var_0.scriptablename == "brloot_specialist_bonus" && scripts\mp\gametypes\br_public::pavelow_boss_health_bar() )
            return 18;

        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( relic_amped_monitor_beeps( var_6 ) )
        {
            if ( var_6 == "circle_peek" )
            {
                if ( !isdefined( level._id_12952[self.team] ) )
                    level._id_12952[self.team] = 0;

                var_7 = level._id_12952[self.team] + level.br_circle.circleindex + 1;

                if ( var_7 >= level.endofmatchdatasent.size )
                    return 19;
            }

            return 1;
        }

        if ( scripts\mp\utility\weapon::iskillstreakweapon( self getcurrentweapon() ) )
            return 7;

        if ( isdefined( self.streakdata ) && isdefined( self.streakdata.streaks ) && self.streakdata.streaks.size > 0 && self.streakdata.streaks[1].streakname == level.br_pickups.br_killstreakreference[var_0.scriptablename] )
            return 7;
        else
            return 1;
    }

    if ( issuperpickup( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( scripts\mp\supers::issuperinuse() )
            return 4;

        return 1;
    }

    if ( scripts\mp\gametypes\br_public::isarmor( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( scripts\mp\gametypes\br_armor::isarmorbetterthanequipped( level.br_pickups.br_equipname[var_0.scriptablename] ) )
            return 1;
        else
            return 6;
    }

    if ( relightingenabled( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( scripts\mp\gametypes\br_public::pause_combat_logic() )
            return 15;
        else
            return 1;
    }

    if ( ref_angle_doors( var_0.scriptablename ) )
        return 1;

    if ( remove_player_rig_laser_panel( var_0.scriptablename ) )
    {
        if ( isdefined( var_0.questbasetimer.team ) && self.team == var_0.questbasetimer.team )
            return 1;
        else
            return 4;
    }

    if ( removespecialistbonus( var_0.scriptablename ) )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        if ( scripts\mp\gametypes\br_public::pavelow_boss_health_bar() )
            return 18;

        return 1;
    }

    if ( var_0.scriptablename == "brloot_ammo_grenade" )
    {
        if ( istrue( self.isjuggernaut ) )
            return 16;

        var_8 = scripts\mp\equipment::getequipmentslotammo( "primary" );
        var_9 = scripts\mp\equipment::getequipmentslotammo( "secondary" );

        if ( isdefined( var_8 ) && var_8 < 2 || isdefined( var_9 ) && var_9 < 2 )
            return 1;
        else
            return 3;
    }

    if ( var_0.scriptablename == "Pillage_Cache" )
        return 1;

    if ( relic_squadlink_remove_visionset( var_0.scriptablename ) )
        return 1;

    return 2;
}

regroup_all_alive_players_to_plane( var_0 )
{
    if ( scripts\mp\weapons::isfistweapon( var_0 ) || scripts\mp\utility\weapon::relic_bang_and_boom( var_0 ) || scripts\mp\utility\weapon::relic_nuketimer_timer_init( var_0 ) )
        return 0;

    return 1;
}

registerhandlecommand( var_0 )
{
    if ( !isdefined( var_0 ) )
        return 0;

    switch ( var_0 )
    {
        case "brloot_tactical_device":
        case "brloot_x1_stash_cypher":
        case "brloot_x2_stash_bomb":
        case "brloot_offhand_geigercounter":
            return 1;
        default:
            return 0;
    }
}

spawnpickup( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7 )
{
    if ( !isdefined( var_1 ) )
        return;

    if ( var_1.origin == ( 0, 0, 0 ) )
        return;

    var_8 = 0;
    var_9 = undefined;

    if ( isdefined( level.br_pickups.br_weapontoscriptable[var_0] ) )
        var_9 = level.br_pickups.br_weapontoscriptable[var_0];
    else if ( scripts\mp\gametypes\br_weapons::reset_totals_keep_type( var_4 ) )
    {
        var_10 = getsubstr( var_4.basename, 4, 6 );

        if ( var_10 != "me" && var_10 != "pi" && var_10 != "sh" && var_10 != "sm" && var_10 != "ar" && var_10 != "lm" && var_10 != "dm" && var_10 != "sn" && var_10 != "la" && var_10 != "kn" )
            return;

        var_8 = 1;
        var_9 = "brloot_weapon_generic_" + var_10;
    }
    else if ( regroup_all_alive_players_to_plane( var_0 ) )
        var_9 = var_0;

    if ( !isdefined( var_9 ) )
        return;

    if ( var_9 == "brloot_weapon_me_riotshield_epic" || scripts\mp\gametypes\br_weapons::reset_totals_keep_type( var_4 ) && scripts\mp\riotshield::isriotshield( var_4 ) )
        var_1.angles = ( var_1.angles[0] - 90, var_1.angles[1], var_1.angles[2] );

    expiredlootleaderinstance();

    if ( var_8 )
    {
        var_11 = getnodecount( var_9, var_1.origin, var_1.angles, var_1.turbopetchallengewatcher, var_4 );

        if ( isdefined( var_11 ) )
            var_11.customweaponname = createheadicon( var_4 );
    }
    else
        var_11 = easepower( var_9, var_1.origin, var_1.angles, var_1.turbopetchallengewatcher );

    if ( !isdefined( var_11 ) )
        return;

    if ( isdefined( var_1.oncontractend ) )
    {
        var_12 = rotatevectorinverted( var_1.origin - var_1.oncontractend.origin, var_1.oncontractend.angles );
        var_13 = combineangles( invertangles( var_1.oncontractend.angles ), var_1.angles );
        var_11 scriptablesetparententity( var_1.oncontractend, var_12, var_13 );
        var_11.oncontractend = var_1.oncontractend;
    }

    _id_11BBC( var_11 );

    if ( isdefined( var_2 ) )
        setupinfectedairdroppositions( var_11, var_2, var_6, var_7 );
    else
        setupinfectedairdroppositions( var_11, 0 );

    if ( !isdefined( var_5 ) )
        var_5 = 1;

    if ( !istrue( level.br_pickups.choppergunner_refillmissiles[var_9] ) )
        var_5 = 1;

    if ( registerhandlecommand( var_0 ) )
        var_11.gatherstadiumlocs = 1;

    if ( !getdvarint( "scr_br_disableLootDropTrail" ) )
    {
        if ( istrue( var_3 ) )
        {
            if ( var_5 )
                var_11 setscriptablepartstate( var_9, "dropped" );
            else
                var_11 setscriptablepartstate( var_9, "droppedNoAuto" );
        }
    }

    var_14 = level.br_pickups.fx_thermal_end[var_9];

    if ( isdefined( var_14 ) )
        var_11 [[ var_14 ]]();

    return var_11;
}

_id_11BB6( var_0, var_1 )
{
    level.br_pickups.fx_thermal_end[var_0] = var_1;
}

showuseresultsfeedback( var_0 )
{
    switch ( var_0 )
    {
        case 5:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyalreadyhaveweapon );
            return;
        case 3:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyammonoroom );
            return;
        case 4:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyequipnoroom );
            return;
        case 6:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyarmornotbetter );
            return;
        case 7:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyalreadyhaveks );
            return;
        case 8:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.br_pickupdenyalreadyhavetoken );
            return;
        case 14:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circletimernext );
            return;
        case 9:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.civcontroller );
            return;
        case 10:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circletestaroundplayer );
            return;
        case 11:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.civilians_killed_stat_row );
            return;
        case 13:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.clampstepbulletdamage );
            return;
        case 15:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circlesetup );
            return;
        case 16:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.civ_thread );
            return;
        case 23:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.civ_death );
            return;
        case 18:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circleradius );
            return;
        case 19:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circlerunning );
            return;
        case 20:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.circlesettingsassert );
            return;
        case 22:
            scripts\mp\hud_message::showerrormessage( level.br_pickups.classify_players_based_on_laststand );
            return;
        case 2:
            break;
    }
}

_removecashstateforplayer( var_0, var_1 )
{
    var_0 notify( "reset_cash_wait" );
    var_0 endon( "reset_cash_wait" );
    wait( var_1 );
    var_0.br_cash_count = undefined;
    var_0.br_cash_time = undefined;
}

getcashsoundaliasforplayer( var_0, var_1 )
{
    var_2 = "br_pickup_cash";
    var_3 = 5000.0;
    var_4 = var_3 / 1000.0;
    var_5 = gettime();

    if ( isplayer( var_0 ) )
    {
        if ( !isdefined( var_0.br_cash_count ) )
            var_0.br_cash_count = 0;

        if ( !isdefined( var_0.br_cash_time ) )
            var_0.br_cash_time = var_5;

        var_6 = var_5 - var_0.br_cash_time;
        var_0.br_cash_time = var_5;

        if ( var_6 < var_3 )
            var_0.br_cash_count = var_0.br_cash_count + 1;

        var_0 thread _removecashstateforplayer( var_0, var_4 );

        switch ( var_1 )
        {
            case "brloot_plunder_cash_common_1":
            case "brloot_plunder_cash_uncommon_2":
            case "brloot_plunder_cash_uncommon_1":
            default:
                switch ( var_0.br_cash_count )
                {
                    case 1:
                    case 0:
                        var_2 = "br_pickup_cash_01";
                        break;
                    case 2:
                        var_2 = "br_pickup_cash_02";
                        break;
                    case 3:
                        var_2 = "br_pickup_cash_03";
                        break;
                    case 4:
                        var_2 = "br_pickup_cash_04";
                        break;
                    case 5:
                    default:
                        var_2 = "br_pickup_cash_05";
                        break;
                }

                break;
            case "brloot_plunder_cash_rare_1":
            case "brloot_plunder_cash_uncommon_3":
                switch ( var_0.br_cash_count )
                {
                    case 1:
                    case 0:
                        var_2 = "br_pickup_cash_med_01";
                        break;
                    case 2:
                        var_2 = "br_pickup_cash_med_02";
                        break;
                    case 3:
                        var_2 = "br_pickup_cash_med_03";
                        break;
                    case 4:
                        var_2 = "br_pickup_cash_med_04";
                        break;
                    case 5:
                    default:
                        var_2 = "br_pickup_cash_med_05";
                        break;
                }

                break;
            case "brloot_plunder_cash_epic_2":
            case "brloot_plunder_cash_epic_1":
            case "brloot_plunder_cash_rare_2":
                switch ( var_0.br_cash_count )
                {
                    case 1:
                    case 0:
                        var_2 = "br_pickup_cash_lrg_01";
                        break;
                    case 2:
                        var_2 = "br_pickup_cash_lrg_02";
                        break;
                    case 3:
                        var_2 = "br_pickup_cash_lrg_03";
                        break;
                    case 4:
                        var_2 = "br_pickup_cash_lrg_04";
                        break;
                    case 5:
                    default:
                        var_2 = "br_pickup_cash_lrg_05";
                        break;
                }

                break;
            case "brloot_plunder_cash_legendary_1":
                switch ( var_0.br_cash_count )
                {
                    case 1:
                    case 0:
                        var_2 = "br_pickup_cash_vlrg_01";
                        break;
                    case 2:
                        var_2 = "br_pickup_cash_vlrg_02";
                        break;
                    case 3:
                        var_2 = "br_pickup_cash_vlrg_03";
                        break;
                    case 4:
                        var_2 = "br_pickup_cash_vlrg_04";
                        break;
                    case 5:
                    default:
                        var_2 = "br_pickup_cash_vlrg_05";
                        break;
                }

                break;
        }
    }

    return var_2;
}

onusecompleted( var_0, var_1, var_2, var_3 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    var_4 = 0;

    if ( !isdefined( var_0.count ) )
        var_0.count = 0;

    if ( !istrue( var_1 ) )
    {
        var_5 = "br_pickup_generic";
        var_6 = undefined;

        if ( isdefined( var_0.scriptablename ) )
        {
            if ( isplunder( var_0.scriptablename ) )
                var_5 = getcashsoundaliasforplayer( self, var_0.scriptablename );
            else if ( isdefined( level.br_pickups.br_pickupsfx[var_0.scriptablename] ) && level.br_pickups.br_pickupsfx[var_0.scriptablename].size > 0 )
                var_5 = level.br_pickups.br_pickupsfx[var_0.scriptablename];
            else if ( isweaponpickupitem( var_0 ) )
                var_5 = "br_pickup_weap";
            else
                var_5 = "br_pickup_ammo";

            if ( isplunder( var_0.scriptablename ) )
                var_6 = "br_plunder";
            else if ( scripts\mp\gametypes\br_public::isammo( var_0.scriptablename ) )
                var_6 = "br_ammo";
            else if ( scripts\mp\gametypes\br_public::isarmorplate( var_0.scriptablename ) )
                var_6 = "br_armor";
        }

        self playsoundtoplayer( var_5, self );
        var_7 = var_5 + "_3d";

        if ( soundexists( var_7 ) )
            self playsoundtoteam( var_7, self.team, self, self );

        if ( isdefined( var_6 ) )
            scripts\mp\damagefeedback::hudicontype( var_6 );

        if ( !istrue( var_2 ) )
            thread playerplaypickupanim( var_0 );
    }

    level notify( "pickedupweapon_kill_callout_" + var_0.scriptablename + var_0.origin );

    if ( isplunder( var_0.scriptablename ) )
        self notify( "self_pickedupitem_plunder" );
    else if ( isweaponpickupitem( var_0 ) )
        self notify( "self_pickedupitem_weapon" );
    else
        self notify( "self_pickedupitem_" + var_0.scriptablename );

    if ( istrue( scripts\mp\gametypes\br_gametypes::_id_11E4F( "onUseCompleted", var_0 ) ) )
    {

    }
    else if ( isweaponpickupitem( var_0 ) )
    {
        scripts\mp\javelin::respawn_waits();
        denyascendmessagelaststand();
        scripts\mp\gametypes\br_weapons::takeweaponpickup( var_0 );
        var_8 = getpickupweaponquality( var_0 );
        var_9 = 0;

        if ( isdefined( var_8 ) )
            var_9 = 1 << var_8;

        scripts\cp\helicopter\chopper_boss::track_consecutive_kills( "weapon", var_9 );
        var_10 = isdefined( var_0.scriptablename ) && var_0.scriptablename == "brloot_weapon_lm_dblmg_lege";

        if ( var_10 )
            showplayerlowermessagehint();
    }
    else if ( scripts\mp\gametypes\br_public::isammo( var_0.scriptablename ) )
        var_4 = scripts\mp\gametypes\br_weapons::takeammopickup( var_0 );
    else if ( scripts\mp\gametypes\br_public::isequipment( var_0.scriptablename ) )
    {
        var_4 = takeequipmentpickup( var_0, var_3 );
        var_11 = 0;

        if ( level.br_pickups.br_itemtype[var_0.scriptablename] == "lethal" )
            var_11 = 1;
        else if ( level.br_pickups.br_itemtype[var_0.scriptablename] == "tactical" )
            var_11 = 2;
        else if ( scripts\mp\gametypes\br_public::isarmorplate( var_0.scriptablename ) )
            var_11 = 4;
        else if ( scripts\mp\gametypes\br_public::ishealitem( var_0.scriptablename ) )
            var_11 = 8;

        scripts\cp\helicopter\chopper_boss::track_consecutive_kills( "equipment", var_11 );
    }
    else if ( scripts\mp\gametypes\br_public::isarmor( var_0.scriptablename ) )
        takearmorpickup( var_0 );
    else if ( var_0.scriptablename == "Pillage_Cache" && isdefined( level.givetagsfromcache ) )
        self [[ level.givetagsfromcache ]]();
    else if ( isplunder( var_0.scriptablename ) )
    {
        scripts\mp\gametypes\br_plunder::takeplunderpickup( var_0 );
        scripts\cp\helicopter\chopper_boss::track_consecutive_kills( "plunder", 0 );
    }
    else if ( istokenpickup( var_0.scriptablename ) )
        takerespawntokenpickup( var_0 );
    else if ( removeextracthelipad( var_0.scriptablename ) )
        _id_128D2( var_0 );
    else if ( iskillstreak( var_0.scriptablename ) )
    {
        if ( var_0.scriptablename == "brloot_specialist_bonus" )
            animscripted_loop();
        else
        {
            takekillstreakpickup( var_0, var_3 );

            if ( isdefined( var_0.questbasetimer ) && isdefined( var_0.questbasetimer.should_damage_pavelow_boss ) && issubstr( var_0.questbasetimer.should_damage_pavelow_boss, "cache" ) || istrue( var_3 ) )
                scripts\cp\helicopter\chopper_boss::track_consecutive_kills( "killstreak", 0 );
        }
    }
    else if ( issuperpickup( var_0.scriptablename ) )
    {
        takesuperpickup( var_0, var_3 );
        scripts\cp\helicopter\chopper_boss::track_consecutive_kills( "equipment", 16 );
    }
    else if ( isgasmask( var_0.scriptablename ) )
        takegasmask( var_0, var_3 );
    else if ( remove_punchcard( var_0.scriptablename ) )
        scripts\mp\gametypes\br_quest_util::_id_128D1( var_0.questbasetimer );
    else if ( relightingenabled( var_0.scriptablename ) )
    {
        angle_molotov_mortar();
        isteameliminated();
    }
    else if ( var_0.scriptablename == "brloot_ammo_grenade" )
        takegenericgrenadepickup( var_0 );
    else if ( ref_angle_doors( var_0.scriptablename ) )
        _id_128CB( var_0 );
    else if ( registerpuzzleinteractions( var_0.scriptablename ) )
        _id_128CD( var_0 );
    else if ( remove_player_rig_laser_panel( var_0.scriptablename ) )
        takequestitem( var_0 );
    else if ( removespecialistbonus( var_0.scriptablename ) )
        animscripted_loop();
    else if ( relic_squadlink_remove_visionset( var_0.scriptablename ) )
    {
        if ( var_0.scriptablename == "brloot_escape_radio" )
        {
            if ( scripts\mp\gametypes\br_gametypes::register_script_model_animation( "onPickupExfilRadio" ) && isdefined( var_0.questbasetimer ) )
                var_0.questbasetimer thread scripts\mp\gametypes\br_gametypes::_id_11E4F( "onPickupExfilRadio", self );
            else
                var_0 thread scripts\mp\gametypes\br_alt_mode_escape::initleaderboardstat( self );
        }
        else if ( var_0.scriptablename == "brloot_tactical_device" )
            thread scripts\mp\gametypes\br_gametype_reveal_2::_id_128BA( self );
    }
    else
    {
        var_12 = 1;

        if ( isdefined( var_0.count ) )
            var_12 = var_0.count;

        trypickupitem( var_0.scriptablename, var_12 );
    }

    var_12 = 1;

    if ( isdefined( var_0.count ) )
        var_12 = var_0.count;

    if ( isdefined( var_0.questbasetimer ) && isdefined( var_0.questbasetimer._id_12D12 ) )
        _id_11980( var_0.questbasetimer._id_12D12, self );

    scripts\mp\gametypes\br_analytics::branalytics_lootpickup( self, var_0.scriptablename, var_12 );
    return var_4;
}

playerplaypickupanim( var_0 )
{
    self notify( "playerPlayPickupAnim" );
    self endon( "playerPlayPickupAnim" );
    self endon( "death" );
    self endon( "disconnect" );

    if ( isweaponpickupitem( var_0 ) || !scripts\mp\gametypes\br_public::vehicle_showteamtanks() )
        return;

    if ( istrue( scripts\mp\gametypes\br_gametypes::_id_11E4F( "skipLootPickupAnim", var_0 ) ) )
        return;

    var_1 = getcompleteweaponname( "iw8_ges_plyr_loot_pickup" );

    if ( self hasweapon( var_1 ) )
    {
        if ( self isgestureplaying( "iw8_ges_pickup_br" ) )
            self stopgestureviewmodel( "iw8_ges_pickup_br", 0, 1 );

        self takeweapon( var_1 );
        waitframe();
    }

    scripts\mp\gametypes\br_public::waitandunloadinfils( "iw8_ges_plyr_loot_pickup", 1.17 );
}

project_to_line()
{
    var_0 = spawnstruct();
    var_0.hudnumtoconsume = 0;
    return var_0;
}

droponplayerdeath( var_0 )
{
    if ( istrue( scripts\mp\gametypes\br_gametypes::_id_11E4F( "dropOnPlayerDeath", var_0 ) ) )
        return;

    if ( istrue( level.usegulag ) && ( scripts\mp\gametypes\br_public::isplayeringulag() || scripts\mp\gametypes\br_public::_id_131BE() ) )
        return;

    var_1 = project_to_line();
    scripts\mp\gametypes\br_gametypes::_id_11E4F( "addDropOnPlayerDeath", var_1, var_0 );

    if ( scripts\mp\utility\killstreak::isjuggernaut() )
        scripts\mp\gametypes\br_jugg_common::droponplayerdeath( var_1 );

    var_2 = scripts\mp\gametypes\br_gametypes::_id_11E4F( "skipPrimaryWeaponDrop" );
    hud_lap_scoreboard( var_1 );

    if ( !istrue( level._id_12346 ) && !istrue( var_2 ) )
        hudelementsetupandposition( var_1 );

    if ( !istrue( level._id_12330 ) )
        hud_set_timers( var_1 );

    hud_x_offset( var_1 );
    scripts\mp\gametypes\br_plunder::playerdropplunderondeath( var_1, var_0 );
    hud_timer_reward_tiers( var_1 );

    if ( !istrue( level._id_1233A ) && scripts\mp\utility\game::namehud() != "kingslayer" )
        hud_y_offset( var_1 );

    if ( !istrue( level._id_12343 ) )
        hudextractnum( var_1 );

    huddopulse( var_1 );
    hudcoststring( var_1 );
    hover_pattern_internal( var_1 );
    idflags_br_armor_break( var_1 );
    hudzombie( var_1 );
    idflags_hyper_burst_round();
    var_0 = self.lastkilledby;

    if ( isdefined( var_0 ) )
        hud_racetrack_info( var_1, var_0 );
}

hud_lap_scoreboard( var_0 )
{
    foreach ( var_2 in level.br_ammo_types )
    {
        if ( self.br_ammo[var_2] > 0 && isdefined( level.br_pickups.br_itemrow[var_2] ) )
        {
            var_3 = var_2;
            var_4 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
            spawnpickup( var_3, var_4, self.br_ammo[var_2], 1 );
        }
    }
}

hudelementsetupandposition( var_0 )
{
    foreach ( var_2 in self.equippedweapons )
    {
        if ( _id_1227E( var_2, self ) )
            hudglobalkillcountmax( var_2, var_0 );
    }
}

hudglobalkillcountmax( var_0, var_1 )
{
    var_2 = undefined;
    var_3 = 1;
    var_4 = 0;
    var_5 = 0;

    if ( isdefined( var_0 ) )
    {
        if ( issameweapon( var_0 ) )
        {
            var_2 = var_0;
            var_3 = self getweaponammoclip( var_2 );
            var_4 = self getweaponammoclip( var_2, "left" );

            if ( var_2.hasalternate )
            {
                var_6 = var_2 getaltweapon();

                if ( !scripts\mp\gametypes\br_weapons::chopper_boss_explosion( var_2, var_6 ) )
                    var_5 = self getweaponammoclip( var_6 );
            }
        }
        else if ( isstring( var_0 ) )
        {
            var_2 = modeloadoutupdateammo( var_0 );

            if ( isdefined( var_2 ) )
                var_3 = var_2.clipsize;
            else if ( isdefined( level.br_ammo_clipsize[var_0] ) )
                var_3 = level.br_ammo_clipsize[var_0];
        }
    }

    if ( !isdefined( var_2 ) )
        return;

    var_7 = getitemdroporiginandangles( var_1, self.origin, self.angles, self );
    var_8 = scripts\mp\gametypes\br_weapons::weaponspawn( var_2, self, var_7, 0, 1 );

    if ( isdefined( var_8 ) )
        setupinfectedairdroppositions( var_8, var_3, var_4, var_5 );

    return var_8;
}

modeloadoutupdateammo( var_0 )
{
    var_1 = undefined;

    if ( !isdefined( level.br_lootiteminfo ) && !isdefined( level.br_lootiteminfo[var_0] ) )
        return;

    return level.br_lootiteminfo[var_0].laststandid;
}

_id_1227E( var_0, var_1 )
{
    var_2 = scripts\mp\utility\weapon::getweaponrootname( var_0.basename );

    if ( var_2 == "iw8_fists" || var_2 == "iw8_knifestab" || var_2 == "iw8_gunless" )
        return 0;

    if ( var_2 == "ks_use_crate_mp" )
        return 0;

    if ( !issameweapon( var_0 ) )
        return 0;

    if ( var_0.inventorytype != "primary" )
        return 0;

    if ( var_1 scripts\mp\gametypes\br_extract_quest::is_using_stealth_debug( var_0 ) )
        return 0;

    return 1;
}

hud_set_timers( var_0, var_1, var_2, var_3 )
{
    var_4 = istrue( var_2 ) && isdefined( var_3 );

    if ( var_4 )
    {
        var_5 = scripts\engine\utility::array_find( level.br_pickups.br_equipname, var_3 );

        if ( isdefined( var_5 ) )
        {
            var_6 = undefined;

            if ( istrue( var_1 ) )
                var_6 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

            var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self, var_6 );
            spawnpickup( var_5, var_7, 1, 1 );
        }

        return;
    }

    if ( isdefined( self.equipment["primary"] ) )
    {
        var_8 = scripts\mp\equipment::getequipmentslotammo( "primary" );

        if ( var_8 > 0 )
        {
            var_9 = scripts\engine\utility::array_find( level.br_pickups.br_equipname, self.equipment["primary"] );

            if ( isdefined( var_9 ) )
            {
                var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
                spawnpickup( var_9, var_7, var_8, 1 );
            }
        }
    }

    if ( isdefined( self.equipment["secondary"] ) )
    {
        var_8 = scripts\mp\equipment::getequipmentslotammo( "secondary" );

        if ( var_8 > 0 )
        {
            var_9 = scripts\engine\utility::array_find( level.br_pickups.br_equipname, self.equipment["secondary"] );

            if ( isdefined( var_9 ) )
            {
                var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
                var_10 = spawnpickup( var_9, var_7, var_8, 1 );

                if ( isdefined( var_10 ) )
                    var_10 hvi_vehicle_rider_special_setup( self, var_9 );
            }
        }
    }
}

hudextractnum( var_0, var_1, var_2, var_3 )
{
    var_4 = istrue( var_2 ) && isdefined( var_3 );

    if ( var_4 )
    {
        var_5 = scripts\engine\utility::array_find( level.br_pickups.br_equipname, var_3 );

        if ( isdefined( var_5 ) )
        {
            var_6 = undefined;

            if ( istrue( var_1 ) )
                var_6 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

            [var_8, var_9, var_10] = getitemdroporiginandangles( var_0, self.origin, self.angles, self, var_6 );
            spawnpickup( var_5, var_8, var_9, 1, 1, var_10 );
        }

        return;
    }

    if ( isdefined( self.equipment["super"] ) )
    {
        var_11 = int( max( scripts\mp\equipment::getequipmentslotammo( "super" ), scripts\mp\gametypes\br::need_respawn() ) );

        if ( var_11 > 0 )
        {
            var_3 = scripts\mp\supers::getcurrentsuperref();

            if ( isdefined( var_3 ) && var_3 == "super_fulton" )
            {
                if ( !istrue( level.bisdeaf ) )
                    return;
            }

            dropequipmentinslot( var_0, "super", var_1, var_11 );
        }
    }
}

hudcoststring( var_0 )
{
    if ( isdefined( self.iscacsecondaryweapongroup ) && isdefined( self.iscash ) )
    {
        var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        var_2 = spawnpickup( self.iscacsecondaryweapongroup, var_1, 1, 1 );

        if ( isdefined( var_2 ) )
            var_2 scripts\mp\gametypes\br_blueprint_extract_spawn::canplaycircleopendialog( self.iscash );
    }
}

hud_x_offset( var_0 )
{
    var_1 = 0;
    var_2 = undefined;

    if ( isdefined( self.equipment["health"] ) )
    {
        var_2 = level.br_pickups.br_equipnametoscriptable[self.equipment["health"]];
        var_1 = scripts\mp\equipment::getequipmentslotammo( "health" );
    }
    else if ( istrue( level.landing_damage_watcher ) )
    {
        var_2 = level.br_pickups.br_equipnametoscriptable["equip_armorplate"];
        var_1 = level.landing_damage_watcher;
    }

    if ( istrue( level.spawn_jugg_backup_trigger ) && var_1 < level.spawn_jugg_backup_trigger )
    {
        var_1 = level.spawn_jugg_backup_trigger;

        if ( !isdefined( var_2 ) )
            var_2 = level.br_pickups.br_equipnametoscriptable["equip_armorplate"];
    }

    if ( var_1 > 0 && isdefined( var_2 ) )
    {
        if ( var_1 > level.br_pickups.maxcounts[var_2] )
        {
            var_1 = var_1 - level.br_pickups.maxcounts[var_2];
            var_3 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
            spawnpickup( var_2, var_3, level.br_pickups.maxcounts[var_2], 1 );
        }

        var_3 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( var_2, var_3, var_1, 1 );
    }
}

hud_timer_reward_tiers( var_0 )
{
    if ( scripts\cp_mp\gasmask::hasgasmask( self ) )
    {
        var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        var_2 = spawnpickup( self.light_target_init, var_1, int( self.gasmaskhealth ), 1 );

        if ( isdefined( var_2 ) )
            var_2.light_tank_stopwatchingmissileinputchange = self.light_tank_stopwatchingmissileinputchange;

        entercodenumber();
    }
}

hud_y_offset( var_0, var_1, var_2, var_3 )
{
    var_4 = scripts\mp\gametypes\br_gametypes::_id_11E51( "dropBRKillstreak", var_0, var_1, var_2, var_3 );

    if ( istrue( var_4 ) )
        return;

    var_5 = istrue( var_2 ) && isdefined( var_3 );

    if ( var_5 )
    {
        var_6 = undefined;

        if ( istrue( var_1 ) )
            var_6 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

        var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self, var_6 );
        spawnpickup( level.br_pickups.br_killstreaktoscriptable[var_3], var_7 );
        return;
    }

    if ( path_data() )
    {
        var_6 = undefined;

        if ( istrue( var_1 ) )
            var_6 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

        var_7 = getitemdroporiginandangles( var_0, self.origin, self.angles, self, var_6 );
        var_8 = spawnpickup( level.br_pickups.br_killstreaktoscriptable[self.streakdata.streaks[1].streakname], var_7 );

        if ( perks_suppressasserts() && isdefined( self.playeriscinematiclayeron ) )
        {
            var_8.playerhunterpostloadout = self.playeriscinematiclayeron;
            self.playeriscinematiclayeron = undefined;
        }

        scripts\mp\killstreaks\killstreaks::removekillstreak( 1 );
    }
}

hud_racetrack_info( var_0, var_1 )
{
    if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_br_ammoscavenger" ) )
    {
        var_2 = scripts\mp\gametypes\br_weapons::br_ammo_type_for_weapon( var_1.currentweapon );
        var_3 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        var_3.scavengerammo = 1;
        spawnpickup( var_2, var_3, var_1.currentweapon.startammo, 1 );
    }

    if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_br_armorscavenger" ) )
    {
        var_3 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( "Armor_Plate", var_3, 1, 1 );
    }

    if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_br_medicscavenger" ) )
    {
        var_3 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( "First_Aid", var_3, 1, 1 );
    }

    if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_br_plunderscavenger" ) )
        scripts\mp\gametypes\br_plunder::dropplunderbyrarity( 50, var_0 );
}

huddopulse( var_0 )
{
    if ( scripts\mp\gametypes\br_public::pause_combat_logic() )
    {
        var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( "brloot_plate_pouch", var_1 );
        _id_11C93();
    }
}

hover_pattern_internal( var_0 )
{
    if ( scripts\mp\gametypes\br_public::patchable_collision() )
    {
        var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( self.ai_semtex_swapp, var_1 );
        _id_11C7A();
    }
}

hudextractmax( var_0 )
{
    if ( scripts\mp\gametypes\br_public::pavelow_boss_destroyed_watch() )
    {
        var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
        spawnpickup( "brloot_self_revive", var_1 );
        _id_11C99();
    }
}

hud_set_progress( var_0, var_1, var_2, var_3 )
{
    var_4 = istrue( var_3 ) && isdefined( var_0 );

    if ( var_4 )
    {
        var_5 = undefined;

        if ( istrue( var_2 ) )
            var_5 = scripts\mp\gametypes\br_armory_kiosk::molotov_crate_use();

        var_6 = project_to_line();
        var_7 = getitemdroporiginandangles( var_6, self.origin, self.angles, self, var_5 );
        spawnpickup( var_0, var_7, var_1 );
    }
}

idflags_br_armor_break( var_0 )
{
    if ( scripts\mp\gametypes\br_public::pavelow_boss_health_bar() )
    {
        if ( level.br_pickups.idflags_br_armor_hit )
        {
            var_1 = getitemdroporiginandangles( var_0, self.origin, self.angles, self );
            spawnpickup( "brloot_specialist_bonus", var_1 );
        }

        _id_11CA0();
    }
}

hudzombie( var_0 )
{
    if ( isdefined( level.initial_forward ) && isdefined( level.initial_forward.radio ) && isdefined( level.initial_forward.radio.owner ) && level.initial_forward.radio.owner == self )
        thread scripts\mp\gametypes\br_alt_mode_escape::hudzombie( var_0 );
    else
        thread scripts\mp\gametypes\br_gametypes::_id_11E4F( "onDropExfilRadio", var_0 );
}

idflags_hyper_burst_round()
{
    if ( isdefined( level._id_11D48 ) && isdefined( level._id_11D48._id_128B3 ) && isdefined( level._id_11D48._id_128B3.owner ) && level._id_11D48._id_128B3.owner == self )
        thread scripts\mp\gametypes\br_gametype_reveal_2::idflags_hyper_burst_round();
}

ispickupstackable( var_0 )
{
    return istrue( level.br_pickups.stackable[var_0] );
}

isitemslotopen()
{
    for ( var_0 = 0; var_0 < 8; var_0++ )
    {
        if ( !isdefined( self.br_inventory_slots[var_0] ) )
            return 1;
    }

    return 0;
}

isitemfull( var_0, var_1 )
{
    return var_1 + var_0.count > var_0.maxcount;
}

canstackpickup( var_0, var_1 )
{
    foreach ( var_3 in self.br_inventory_slots )
    {
        if ( isdefined( var_3.scriptablename ) && var_3.scriptablename == var_0 )
        {
            if ( !isitemfull( var_3, var_1 ) )
                return 1;
        }
    }

    return 0;
}

canslotitem( var_0, var_1 )
{
    if ( ispickupstackable( var_0 ) )
    {
        if ( canstackpickup( var_0, var_1 ) )
            return 1;
    }

    return isitemslotopen();
}

getfirstopenslot()
{
    for ( var_0 = 0; var_0 < 8; var_0++ )
    {
        if ( !isdefined( self.br_inventory_slots[var_0] ) )
            return var_0;
    }

    return -1;
}

pickupitemintoinventory( var_0 )
{
    if ( ispickupstackable( var_0.scriptablename ) )
    {
        if ( canstackpickup( var_0.scriptablename, var_0.count ) )
        {
            foreach ( var_3, var_2 in self.br_inventory_slots )
            {
                if ( isdefined( var_2.scriptablename ) && var_2.scriptablename == var_0.scriptablename )
                {
                    if ( !isitemfull( var_2, var_0.count ) )
                    {
                        var_2.count = var_2.count + var_0.count;
                        var_2.count = int( min( var_2.count, var_0.maxcount ) );
                        return;
                    }
                }
            }
        }
    }

    var_4 = getfirstopenslot();

    if ( var_4 == -1 )
        return;

    self.br_inventory_slots[var_4] = var_0;
}

dropitemfrominventory( var_0 )
{
    if ( isdefined( self.br_inventory_slots[var_0] ) )
    {
        var_1 = self.br_inventory_slots[var_0];
        var_2 = module_set_goal_radius( self.origin + level.br_pickups.br_dropoffsets[0], self.angles );
        var_3 = spawnpickup( var_1.scriptablename, var_2, var_1.count );

        if ( isdefined( var_1.armorhealth ) )
            var_3.armorhealth = var_1.armorhealth;
        else if ( isdefined( var_1.helmethealth ) )
            var_3.helmethealth = var_1.helmethealth;
        else if ( isdefined( var_1.gasmaskhealth ) )
            var_3.gasmaskhealth = var_1.gasmaskhealth;

        scripts\mp\gametypes\br_analytics::branalytics_lootdrop( self, var_1.scriptablename );
        scripts\mp\gametypes\br_public::removeitemfrominventory( var_0 );
    }
}

useitemfrominventory( var_0 )
{
    if ( isdefined( self.br_inventory_slots[var_0] ) )
        tryuseitemfrominventory( self.br_inventory_slots[var_0], var_0 );
    else
    {

    }
}

watch_for_player_going_belowmap_or_oob( var_0 )
{
    self endon( "disconnect" );
    self notify( "try_use_heal_slot" );

    if ( scripts\mp\gametypes\br_gametypes::relic_amped_explosion_time( "armor" ) )
        return;

    if ( !isalive( self ) || scripts\mp\utility\player::isusingremote() || istrue( self.isdeploying ) || self.br_armorhealth >= self.br_maxarmorhealth )
        return;

    var_1 = self.equipment["health"];
    var_2 = scripts\mp\equipment::getequipmentslotammo( "health" );
    var_3 = self.br_maxarmorhealth;
    var_4 = 1;

    if ( isdefined( var_3 ) && var_0 )
        var_4 = var_3;

    if ( istrue( self.quest_scavdistmin ) )
    {
        if ( isdefined( self.bot_thanks ) && destprogress() )
            self.bot_thanks = self.bot_thanks + var_4;
    }
    else
    {
        self.bot_thanks = var_4;

        if ( isdefined( var_1 ) && isdefined( var_2 ) && var_2 > 0 )
            thread scripts\mp\equipment\bandage::usequickslothealitem( var_1, var_2 );
    }
}

destprogress()
{
    return !scripts\engine\utility::is_player_gamepad_enabled();
}

takegenericgrenadepickup( var_0 )
{
    var_1 = scripts\mp\equipment::getequipmentslotammo( "primary" );

    if ( isdefined( var_1 ) && var_1 < 2 )
        scripts\mp\equipment::incrementequipmentslotammo( "primary" );

    var_1 = scripts\mp\equipment::getequipmentslotammo( "secondary" );

    if ( isdefined( var_1 ) && var_1 < 2 )
        scripts\mp\equipment::incrementequipmentslotammo( "secondary" );
}

trypickupitemfroment( var_0 )
{
    if ( canslotitem( var_0.scriptablename, var_0.count ) )
        pickupitemintoinventory( var_0 );
    else
    {
        self iprintlnbold( "No room in inventory" );
        self playlocalsound( "br_pickup_deny" );
    }
}

trypickupitem( var_0, var_1 )
{
    if ( !isdefined( var_0 ) || !isdefined( level.br_pickups.maxcounts[var_0] ) || !isdefined( level.br_pickups.stackable[var_0] ) )
        return;

    var_2 = spawnstruct();
    var_2.scriptablename = var_0;
    var_2.count = var_1;
    var_2.maxcount = level.br_pickups.maxcounts[var_0];
    var_2.stackable = level.br_pickups.stackable[var_0];
    var_2.itemtype = level.br_pickups.br_itemtype[var_0];

    if ( canslotitem( var_2.scriptablename, var_2.count ) )
        pickupitemintoinventory( var_2 );
    else
    {
        self iprintlnbold( "No room in inventory" );
        self playlocalsound( "br_pickup_deny" );
    }
}

tryequipmentfrominventory( var_0, var_1 )
{
    var_2 = level.br_pickups.br_equipname[var_0.scriptablename];
    var_3 = level.equipment.table[var_2].defaultslot;

    if ( isdefined( self.equipment[var_3] ) && self.equipment[var_3] == var_2 )
    {
        if ( equipmentslothasroom( var_2, var_3 ) )
        {
            scripts\mp\equipment::incrementequipmentslotammo( var_3, level.br_pickups.counts[var_0.scriptablename] );
            self.br_inventory_slots[var_1] = undefined;
        }
    }
    else if ( !isdefined( self.equipment[var_3] ) || scripts\mp\equipment::getequipmentslotammo( var_3 ) == 0 )
    {
        scripts\mp\equipment::giveequipment( var_2, var_3 );
        scripts\mp\equipment::setequipmentslotammo( var_3, var_0.count );
        self.br_inventory_slots[var_1] = undefined;
    }
    else
    {
        var_4 = self.equipment[var_3];
        var_5 = scripts\mp\equipment::getequipmentslotammo( var_3 );
        scripts\mp\equipment::giveequipment( var_2, var_3 );
        scripts\mp\equipment::setequipmentslotammo( var_3, var_0.count );
        self.br_inventory_slots[var_1] = undefined;
        var_6 = level.br_pickups.br_equipnametoscriptable[var_4];
        trypickupitem( var_6, var_5 );
    }
}

droparmor( var_0, var_1 )
{
    var_2 = module_set_goal_radius( self.origin + level.br_pickups.br_dropoffsets[0], self.angles );
    var_3 = spawnpickup( var_0, var_2 );
    var_3.count = 1;
    var_3.helmethealth = 0;
    var_3.armorhealth = 0;
    var_3.gasmaskhealth = 0;

    if ( issubstr( var_0, "helmet" ) )
    {
        var_3.helmethealth = var_1;

        if ( var_0 == "brloot_armor_helmet_3" )
            scripts\mp\utility\perk::removeperk( "specialty_stun_resistance" );
    }

    scripts\mp\gametypes\br_analytics::branalytics_lootdrop( self, var_0 );
}

trydroparmorfornewarmor( var_0 )
{
    if ( scripts\mp\gametypes\br_public::ishelmet( var_0 ) )
    {
        if ( isdefined( self.br_helmetlevel ) )
        {
            var_1 = scripts\mp\gametypes\br_armor::helmetitemtypeforlevel( self.br_helmetlevel );

            if ( isdefined( var_1 ) )
                droparmor( var_1, self.br_helmethealth );
        }
    }
}

tryequiparmor( var_0, var_1 )
{
    if ( isdefined( var_1 ) )
        self.br_inventory_slots[var_1] = undefined;

    trydroparmorfornewarmor( var_0.scriptablename );

    if ( var_0.scriptablename == "brloot_armor_helmet_1" )
        scripts\mp\gametypes\br_armor::takehelmet( var_0, 1 );
    else if ( var_0.scriptablename == "brloot_armor_helmet_2" )
        scripts\mp\gametypes\br_armor::takehelmet( var_0, 2 );
    else if ( var_0.scriptablename == "brloot_armor_helmet_3" )
        scripts\mp\gametypes\br_armor::takehelmet( var_0, 3 );
}

tryuseitemfrominventory( var_0, var_1 )
{
    if ( scripts\mp\gametypes\br_public::isequipment( var_0.scriptablename ) )
        tryequipmentfrominventory( var_0, var_1 );
}

initpickupusability()
{
    scripts\common\interactive::interactive_addusedcallback( ::brpickupsusecallback, "br_pickups" );
}

brpickupsusecallback( var_0, var_1 )
{
    var_2 = var_1 cantakepickup( var_0 );
    var_1 showuseresultsfeedback( var_2 );

    if ( var_2 != 1 )
        return;

    var_1 onusecompleted( var_0 );
    give_periodic_jugg_pulses( var_0 );

    if ( var_0 isscriptable() )
        var_0 freescriptable();
    else
        var_0 delete();
}

outofboundstriggersplanetrace( var_0, var_1 )
{
    if ( isdefined( self.equipment[var_1] ) && scripts\mp\equipment::getequipmentslotammo( var_1 ) > 0 )
    {
        var_2 = project_to_line();
        dropequipmentinslot( var_2, var_1 );
    }

    scripts\mp\equipment::giveequipment( var_0, var_1 );
    scripts\mp\equipment::setequipmentammo( var_0, 1 );
}

_id_12840( var_0 )
{
    if ( scripts\mp\utility\game::getgametype() == "br" && !level.allowsupers )
        var_0 scripts\mp\equipment::takeequipment( "super" );
}

entercodenumber()
{
    if ( istrue( self.gasmaskequipped ) )
    {
        self detach( "hat_child_hadir_gas_mask_wm_br", "j_head" );
        self.gasmaskequipped = 0;
    }

    self.gasmaskswapinprogress = 0;
    enter_numbers_start();
}

enter_numbers_start()
{
    self.light_tank_stopwatchingmissileinputchange = undefined;
    self.gasmaskhealth = undefined;
    self.light_target_desactivate_check = undefined;
    self setclientomnvar( "ui_gas_mask", 0 );
    self setclientomnvar( "ui_head_equip_class", 0 );
    self setclientomnvar( "ui_gasmask_damage", 0 );
}

movingplatform_playerlink( var_0 )
{
    var_1 = "brloot_armor_plate";
    var_2 = level.br_pickups.br_equipname[var_1];
    var_3 = level.equipment.table[var_2].defaultslot;

    if ( isdefined( self.equipment[var_3] ) )
    {
        var_4 = scripts\mp\equipment::getequipmentslotammo( var_3 );

        if ( var_4 > 0 )
        {
            if ( istrue( var_0 ) )
                return var_4;
            else
                return 1;
        }
    }

    return 0;
}

moving_platform_angles_offset( var_0, var_1 )
{
    var_2 = self.br_ammo[var_0];
    var_3 = level.br_ammo_clipsize[var_0];

    if ( !isdefined( var_2 ) || !isdefined( var_3 ) )
        return 0;

    if ( istrue( var_1 ) )
        return int( var_2 );

    return int( min( var_3, var_2 ) );
}

movingplatforment( var_0 )
{
    var_1 = 5;

    if ( istrue( var_0 ) )
        return int( self.plundercount );

    return int( min( self.plundercount, var_1 ) );
}

moving_platform_offset( var_0 )
{
    switch ( var_0 )
    {
        case 3:
            return "brloot_ammo_762";
        case 5:
            return "brloot_ammo_919";
        case 7:
            return "brloot_ammo_50cal";
        case 4:
            return "brloot_ammo_12g";
        case 6:
            return "brloot_ammo_rocket";
        default:
    }
}

mp_aniyah_patch( var_0 )
{
    var_1 = self.lastdroppableweaponobj;
    var_2 = createheadicon( var_1 );
    return var_2;
}

movingplatform_playerunlink( var_0, var_1 )
{
    var_2 = 1;
    var_3 = 0;
    var_4 = 0;
    var_5 = 0;
    var_6 = undefined;

    switch ( var_0 )
    {
        case 2:
            var_3 = movingplatform_playerlink( var_1 );
            var_2 = var_3 > 0;
            break;
        case 7:
        case 6:
        case 5:
        case 4:
        case 3:
            var_7 = moving_platform_offset( var_0 );
            var_3 = moving_platform_angles_offset( var_7, var_1 );
            var_2 = var_3 > 0;
            break;
        case 0:
            if ( istrue( self.iszombie ) )
            {
                var_2 = 0;
                break;
            }

            var_3 = movingplatforment( var_1 );
            var_2 = var_3 > 0;
            break;
        case 1:
            var_3 = scripts\engine\utility::ter_op( istrue( self.hasrespawntoken ), 1, 0 );
            var_2 = var_3 > 0;
            break;
        case 8:
            var_3 = scripts\engine\utility::ter_op( istrue( self.pavelow_boss_destroyed_watch ), 1, 0 );
            var_2 = var_3 > 0;
            break;
        case 9:
            var_8 = self.lastdroppableweaponobj;

            if ( !isdefined( var_8 ) || nullweapon( var_8 ) || !self hasweapon( var_8 ) || var_8 == getcompleteweaponname( "iw8_fists_mp" ) || self isskydiving() || istrue( self.usingascender ) )
                var_2 = 0;
            else
            {
                var_3 = self getweaponammoclip( var_8 );
                var_4 = self getweaponammoclip( var_8, "left" );

                if ( var_8.hasalternate )
                {
                    var_9 = var_8 getaltweapon();

                    if ( !scripts\mp\gametypes\br_weapons::chopper_boss_explosion( var_8, var_9 ) )
                        var_5 = self getweaponammoclip( var_9 );
                }

                var_6 = var_8;
            }

            break;
        default:
            var_2 = 0;
            break;
    }

    return [ var_2, var_3, var_4, var_5, var_6 ];
}

_id_11A50( var_0, var_1 )
{
    var_2 = "brloot_armor_plate";
    var_3 = level.br_pickups.br_equipname[var_2];
    var_4 = level.equipment.table[var_3].defaultslot;
    scripts\mp\equipment::decrementequipmentslotammo( var_4, var_1 );

    if ( istrue( self.quest_scavdistmin ) )
    {
        var_5 = scripts\mp\equipment::getcurrentequipment( var_4 );
        var_6 = scripts\mp\equipment::getequipmentammo( var_5 );

        if ( var_6 < 1 )
            self notify( "br_try_armor_cancel" );
    }
}

_id_11A4F( var_0, var_1 )
{
    var_2 = moving_platform_offset( var_0 );
    scripts\mp\gametypes\br_weapons::br_ammo_take_type( self, var_2, var_1 );
}

_id_11A52( var_0, var_1 )
{
    scripts\mp\gametypes\br_plunder::waitformeleedamage( var_1 );
}

_id_11A53( var_0, var_1 )
{
    removerespawntoken();
}

_id_11A54( var_0, var_1 )
{
    _id_11C99();
}

_id_11A55( var_0, var_1 )
{
    var_2 = self.lastdroppableweaponobj;
    var_3 = getcompleteweaponname( "iw8_fists_mp" );
    var_4 = var_3;
    var_5 = self getweaponslistprimaries();

    foreach ( var_7 in var_5 )
    {
        if ( var_7.inventorytype != "primary" )
            continue;

        if ( var_7 != var_3 && var_7 != var_2 && !scripts\mp\utility\weapon::relic_nuketimer_timer_init( var_7 ) )
        {
            var_4 = var_7;
            break;
        }
    }

    if ( !scripts\mp\riotshield::isriotshield( var_2 ) )
    {
        var_9 = self getweaponammostock( var_2 );
        var_10 = scripts\mp\gametypes\br_weapons::br_ammo_type_for_weapon( var_2 );

        if ( isdefined( var_10 ) )
            self.br_ammo[var_10] = var_9;
    }

    if ( scripts\mp\utility\weapon::relic_nuketimer_waitforcompleteobjectives( var_2 ) )
        self notify( "dropped_minigun" );

    scripts\cp_mp\utility\inventory_utility::_takeweapon( var_2 );
    scripts\mp\gametypes\br_public::waittill_any_return_5();

    if ( !self hasweapon( var_3 ) )
        self giveweapon( var_3 );

    scripts\mp\gametypes\br_weapons::br_ammo_update_weapons( self );
    self switchtoweaponimmediate( var_4 );
    scripts\mp\javelin::respawn_waits();
    denyascendmessagelaststand();
}

_id_11A51( var_0, var_1 )
{
    switch ( var_0 )
    {
        case 2:
            _id_11A50( var_0, var_1 );
            break;
        case 7:
        case 6:
        case 5:
        case 4:
        case 3:
            _id_11A4F( var_0, var_1 );
            break;
        case 0:
            _id_11A52( var_0, var_1 );
            break;
        case 1:
            _id_11A53( var_0, var_1 );
            break;
        case 8:
            _id_11A54( var_0, var_1 );
            break;
        case 9:
            _id_11A55( var_0, var_1 );
            break;
        default:
            return;
    }
}

_id_11A4B( var_0, var_1 )
{
    switch ( var_0 )
    {
        case 2:
            return "brloot_armor_plate";
        case 7:
        case 6:
        case 5:
        case 4:
        case 3:
            return moving_platform_offset( var_0 );
        case 0:
            for ( var_2 = level.br_plunder._id_11A13.size - 1; var_2 >= 0; var_2-- )
            {
                if ( var_1 > level.br_plunder._id_11A13[var_2] )
                    return level.br_plunder.names[var_2];
            }

            return level.br_plunder.names[0];
        case 8:
            return "brloot_self_revive";
        case 1:
            return "brloot_respawn_token";
        case 9:
            return mp_aniyah_patch( var_0 );
        default:
    }
}

_id_11A49()
{
    var_0 = 120;
    self notify( "quickDropCleanupCache" );
    self endon( "quickDropCleanupCache" );
    wait( var_0 );
    self._id_11A46 = undefined;
}

_id_11A43( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !isdefined( self._id_11A46 ) )
        self._id_11A46 = [];

    var_5 = spawnstruct();
    var_5.respawn_index = var_0;
    var_5.slot = var_1;
    var_5.ent = var_2;
    var_5.hvt_key_dropped = var_3;
    var_5.hover_speed = var_4;
    var_5.wait_until_truck_arrives_at_station = self.origin;
    var_5.watch_minigun_ammo_depleted = self.angles[1];
    self._id_11A46[self._id_11A46.size] = var_5;
    thread _id_11A49();
}

_id_11A48( var_0 )
{
    var_1 = 60.0;
    var_2 = squared( var_1 );
    var_3 = 45.0;
    var_4 = distancesquared( self.origin, var_0.wait_until_truck_arrives_at_station );

    if ( var_4 > var_2 )
        return 0;

    var_5 = abs( self.angles[1] - var_0.watch_minigun_ammo_depleted );

    if ( var_5 > var_3 )
        return 0;

    return 1;
}

_id_11A4A( var_0 )
{
    if ( !isdefined( self._id_11A46 ) )
        return;

    foreach ( var_2 in self._id_11A46 )
    {
        if ( isdefined( var_2.ent ) && var_2.respawn_index == var_0 )
        {
            if ( !_id_11A48( var_2 ) )
                continue;

            return var_2;
        }
    }
}

_id_11A47()
{
    if ( !isdefined( self._id_11A46 ) )
        return 0;

    var_0 = [];

    foreach ( var_2 in self._id_11A46 )
    {
        if ( isdefined( var_2.ent ) )
        {
            if ( !_id_11A48( var_2 ) )
                continue;

            var_0[var_2.slot] = 1;
        }
    }

    var_4 = undefined;
    var_5 = 0;
    var_6 = 0;
    var_7 = [ 0, 13, 1 ];

    for (;;)
    {
        var_4 = var_6 * 14 + var_7[var_5];

        if ( !istrue( var_0[var_4] ) )
            break;

        var_5++;

        if ( var_5 >= var_7.size )
        {
            var_5 = 0;
            var_6++;
        }
    }

    return var_4;
}

_id_11A4E( var_0, var_1, var_2 )
{
    var_3 = undefined;

    switch ( var_0 )
    {
        case 2:
            var_3 = "br_inventory_drop_armor";
            break;
        case 7:
        case 6:
        case 5:
        case 4:
        case 3:
            var_3 = "br_inventory_drop_ammo";
            break;
        case 0:
            if ( var_2 == "brloot_plunder_cash_uncommon_1" )
                var_3 = "br_inventory_drop_plunder_sm";
            else if ( var_2 == "brloot_plunder_cash_uncommon_2" )
                var_3 = "br_inventory_drop_plunder_sm";
            else if ( var_2 == "brloot_plunder_cash_uncommon_3" )
                var_3 = "br_inventory_drop_plunder_sm";
            else if ( var_2 == "brloot_plunder_cash_rare_1" )
                var_3 = "br_inventory_drop_plunder_med";
            else if ( var_2 == "brloot_plunder_cash_rare_2" )
                var_3 = "br_inventory_drop_plunder_med";
            else if ( var_2 == "brloot_plunder_cash_epic_1" )
                var_3 = "br_inventory_drop_plunder_lrg";
            else if ( var_2 == "brloot_plunder_cash_epic_2" )
                var_3 = "br_inventory_drop_plunder_lrg";
            else if ( var_2 == "brloot_plunder_cash_legendary_1" )
                var_3 = "br_inventory_drop_plunder_extra_lrg";
            else
                var_3 = "br_inventory_drop_plunder";

            break;
        case 1:
            break;
        case 8:
            var_3 = "br_inventory_drop_self_revive";
            break;
        case 9:
            var_3 = "br_inventory_drop_weap";
            break;
        default:
    }

    if ( isdefined( var_3 ) )
        playsoundatpos( var_1, var_3 );
}

_id_11A44( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = _id_11A4A( var_0 );

    if ( isdefined( var_5 ) )
    {
        var_6 = var_5.ent;
        var_7 = var_5.hvt_key_dropped;
        var_8 = var_5.hover_speed;
        var_9 = setuphelilandingposition( var_6 );
        var_10 = setuphqs( var_6 );
        var_11 = setuphelitimer( var_6 );

        if ( !ispickupstackable( var_5.ent.type ) && !issubstr( var_5.ent.type, "_cash" ) )
            return 0;

        var_12 = undefined;

        if ( isdefined( var_6.oncontractend ) )
            var_12 = var_6.oncontractend;

        var_13 = var_9 + var_1;
        var_14 = var_10 + var_2;
        var_15 = var_11 + var_3;
        var_16 = _id_11A4B( var_0, var_13 );
        var_17 = getscriptablereservedremaining( var_7 + ( 0, 0, 12 ), var_7 );
        var_18 = module_set_goal_radius( var_7, var_8, var_17, var_12 );
        var_19 = spawnpickup( var_16, var_18, var_13, 1, var_4, 0, var_14, var_15 );
        scripts\mp\gametypes\br_analytics::branalytics_lootdrop( self, var_16, undefined, var_1 );

        if ( isdefined( var_4 ) )
            level.train_play_anim scripts\mp\trials\trial_target_utility::delay_end_common_combat( var_19, self, var_4 );

        _id_11A4E( var_0, var_7, var_16 );
        var_5.ent = var_19;
        thread _id_11A49();
        give_periodic_jugg_pulses( var_6 );

        if ( isent( var_6 ) )
            var_6 delete();
        else
            var_6 freescriptable();

        return 1;
    }

    return 0;
}

_id_11A4D( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = _id_11A4B( var_0, var_1 );

    if ( !isdefined( var_5 ) )
        return;

    var_6 = _id_11A47();
    var_7 = project_to_line();
    var_7.hudnumtoconsume = var_6;
    var_8 = getitemdroporiginandangles( var_7, self.origin, self.angles, self );
    var_9 = scripts\mp\gametypes\br_extract_quest::is_using_stealth_debug( var_4 );
    var_10 = destroy_bad_traversals( var_4 );

    if ( !var_9 && var_10 )
    {
        var_11 = spawnpickup( var_5, var_8, var_1, 1, var_4, 0, var_2, var_3 );
        _id_11A43( var_0, var_6, var_11, var_8.origin, var_8.angles );
        scripts\mp\gametypes\br_analytics::branalytics_lootdrop( self, var_5, undefined, var_1 );

        if ( isdefined( var_4 ) )
            level.train_play_anim scripts\mp\trials\trial_target_utility::delay_end_common_combat( var_11, self, var_4 );
    }

    _id_11A4E( var_0, var_8.origin, var_5 );
}

destroy_bad_traversals( var_0 )
{
    if ( scripts\mp\utility\weapon::relic_amped_debug_explode_after_reviving( var_0 ) )
        return 0;

    return 1;
}

_id_11A4C( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self endon( "death" );
    packsplashparambits( var_0 );
    [var_2, var_3, var_4, var_5, var_6] = movingplatform_playerunlink( var_0 );

    if ( !var_2 )
        return;

    _id_11A51( var_0, var_3 );
    scripts\mp\class::disableclassswapallowed();
    var_7 = _id_11A44( var_0, var_3, var_4, var_5, var_6 );

    if ( var_7 )
        return;

    _id_11A4D( var_0, var_3, var_4, var_5, var_6 );
}

_id_11A45( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self endon( "death" );
    packsplashparambits( var_0 );
    var_1 = 1;
    [var_3, var_4, var_5, var_6, var_7] = movingplatform_playerunlink( var_0, 1 );

    if ( !var_3 )
        return;

    _id_11A51( var_0, var_4 );
    scripts\mp\class::disableclassswapallowed();
    var_8 = _id_11A44( var_0, var_4, var_5, var_6, var_7 );

    if ( !var_8 )
        _id_11A4D( var_0, var_4, var_5, var_6, var_7 );
}

doreturnvo( var_0 )
{
    switch ( var_0 )
    {
        case 7:
        case 6:
        case 5:
        case 4:
        case 3:
            return 1;
        default:
            return 0;
    }
}

packsplashparambits( var_0 )
{
    if ( doreturnvo( var_0 ) )
    {
        var_1 = undefined;

        while ( self isreloading() )
        {
            if ( !istrue( var_1 ) )
            {
                var_1 = 1;
                self disableautoreload();
            }

            self cancelreload();
            waitframe();
        }

        if ( istrue( var_1 ) )
            self enableautoreload();

        waitframe();
    }
}

dangercircletick( var_0, var_1 )
{
    if ( scripts\mp\gametypes\br_gametypes::relic_amped_explosion_time( "loot" ) )
        return;

    var_2 = var_1 * var_1;
    var_3 = level.br_circle.circleindex;

    if ( var_3 > level.br_circle.damagetick.size - 1 )
        var_3 = level.br_circle.damagetick.size - 1;

    var_4 = level.br_circle.damagetick[var_3];

    if ( isdefined( level.circledamagemultiplier ) )
        var_4 = var_4 * level.circledamagemultiplier;

    level.br_pickups.hvtlist = scripts\engine\utility::array_removeundefined( level.br_pickups.hvtlist );

    for ( var_5 = level.br_pickups.hvtlist.size - 1; var_5 >= 0; var_5-- )
    {
        var_6 = level.br_pickups.hvtlist[var_5];

        if ( distance2dsquared( var_6.origin, var_0 ) > var_2 )
        {
            var_7 = var_6.count;
            var_8 = int( var_7 - var_4 );

            if ( var_8 <= 0 )
            {
                var_6 setscriptablepartstate( var_6.type, "death" );
                var_6 getthirdpersonrangeforsize( 1.0 );
                level thread give_operator_based_on_task( var_5 );
            }
            else if ( var_6 scripts\cp_mp\gasmask::grouptorewards( var_7, var_8 ) )
            {
                var_9 = getscriptablereservedremaining( var_6.origin + ( 0, 0, 12 ), var_6.angles );
                var_10 = module_set_goal_radius( var_6.origin, var_6.angles, var_9 );
                var_11 = var_6.type;
                var_6 getthirdpersonheightoffsetforsize();
                var_12 = spawnpickup( var_11, var_10, var_8, 1, undefined, 0 );
            }
            else
            {
                var_6 setscriptablepartstate( var_6.type, "damage" );
                var_6.count = var_8;
            }
        }
    }
}

light_tank_initomnvars()
{
    level.br_pickups.hvtlist[level.br_pickups.hvtlist.size] = self;
}

give_operator_based_on_task( var_0 )
{
    waittillframeend;

    if ( isdefined( level.br_pickups.hvtlist ) )
        level.br_pickups.hvtlist[var_0] = undefined;
}

puddle_fx()
{
    var_0 = level.br_pickups;
    var_0.scriptables = [];
    var_0._id_11F67 = 0;
    var_0._id_11F65 = 0;
    var_0._id_11F66 = monitor_balloon_marker_throw();
    var_0._id_11F64 = getdvarint( "scr_br_pickupScriptablesCleanupBatchSize", 10 );
}

monitor_balloon_marker_throw()
{
    var_0 = _func_0430();
    var_1 = getdvarint( "scr_br_loot_override", 0 );

    if ( var_1 > 0 && var_1 < var_0 )
        var_2 = var_1;
    else
    {
        var_3 = getdvarint( "OOTQKOTRM", 150 );
        var_4 = getdvarint( "scr_br_loot_player_multi", 5 );
        var_2 = var_3 * var_4;
    }

    if ( var_2 > var_0 )
        var_2 = int( var_0 / 2 );

    return var_2;
}

_id_11BBC( var_0 )
{
    var_1 = level.br_pickups._id_11F65;
    var_0.courtyard_intel_sequence = var_1;
    level.br_pickups.scriptables[var_1] = var_0;
    level.br_pickups._id_11F65++;
}

give_periodic_jugg_pulses( var_0 )
{
    level.br_pickups.scriptables[var_0.courtyard_intel_sequence] = undefined;
    var_0.courtyard_intel_sequence = undefined;
}

expiredlootleaderinstance()
{
    var_0 = level.br_pickups;

    if ( var_0.scriptables.size < var_0._id_11F66 && enabledismembermenttag() > 0 )
        return;

    var_1 = 0;

    for ( var_2 = var_0._id_11F67; var_2 < var_0._id_11F65; var_2++ )
    {
        if ( var_1 == var_0._id_11F64 )
            break;

        var_3 = var_0.scriptables[var_2];

        if ( isdefined( var_3 ) )
        {
            if ( istrue( var_3.gatherstadiumlocs ) )
                continue;

            var_0.scriptables[var_2] = undefined;

            if ( isent( var_3 ) )
                var_3 delete();
            else
                var_3 freescriptable();

            var_1++;
        }
        else
            var_0.scriptables[var_2] = undefined;

        var_0._id_11F67++;
    }
}

getthirdpersonheightoffsetforsize()
{
    give_periodic_jugg_pulses( self );

    if ( isent( self ) )
        self delete();
    else
        self freescriptable();
}

getthirdpersonrangeforsize( var_0 )
{
    thread gettimetogulagclosed( var_0 );
}

gettimetogulagclosed( var_0 )
{
    self endon( "death" );
    wait( var_0 );

    if ( isdefined( self ) )
        getthirdpersonheightoffsetforsize();
}

_id_11BC1( var_0, var_1 )
{
    while ( !isdefined( level.br_pickups ) )
        waitframe();

    level.br_pickups._id_12D11["uniqueLootItem_" + var_0] = var_1;
}

_id_11980( var_0, var_1 )
{
    if ( isdefined( [[ level.br_pickups._id_12D11[var_0] ]]( var_1 ) ) )
        return;
    else
    {

    }
}

showplayerlowermessagehint()
{
    thread _id_131FC();
    thread _id_1324E();
    thread _id_13249();
}

bot_gametype_allowed_to_switch_to_defender()
{
    self.playerstreakspeedscale = scripts\mp\juggernaut::jugg_getmovespeedscalar();
    scripts\mp\weapons::updatemovespeedscale();
    scripts\mp\playeractions::allowactionset( "fakeJugg", 0 );

    if ( !istrue( level.handlecommand_br ) )
    {
        scripts\common\utility::allow_mount_top( 0, "fakeJugg" );
        scripts\common\utility::allow_mount_side( 0, "fakeJugg" );
    }
}

_id_11C8F()
{
    self.playerstreakspeedscale = undefined;
    scripts\mp\weapons::updatemovespeedscale();
    scripts\mp\playeractions::allowactionset( "fakeJugg", 1 );

    if ( !istrue( level.handlecommand_br ) )
    {
        scripts\common\utility::allow_mount_top( 1, "fakeJugg" );
        scripts\common\utility::allow_mount_side( 1, "fakeJugg" );
    }
}

_id_131FC()
{
    self endon( "death_or_disconnect" );
    self endon( "dropped_minigun" );
    self endon( "juggernaut_start" );
    level endon( "game_ended" );

    for (;;)
    {
        self waittill( "switched_to_minigun" );
        bot_gametype_allowed_to_switch_to_defender();
    }
}

_id_1324E()
{
    self endon( "death_or_disconnect" );
    self endon( "juggernaut_start" );
    level endon( "game_ended" );

    for (;;)
    {
        var_0 = scripts\engine\utility::_id_1313C( "switched_from_minigun", "dropped_minigun" );

        if ( isdefined( var_0 ) )
        {
            _id_11C8F();

            if ( var_0 == "dropped_minigun" )
                break;
        }
    }
}

_id_13249()
{
    self endon( "death_or_disconnect" );
    self endon( "dropped_minigun" );
    self endon( "juggernaut_start" );
    level endon( "game_ended" );
    var_0 = 0;

    for (;;)
    {
        if ( !scripts\mp\utility\weapon::relic_nuketimer_waitforcompleteobjectives( self getcurrentweapon() ) )
        {
            if ( istrue( var_0 ) )
            {
                var_0 = 0;
                self notify( "switched_from_minigun" );
            }
        }
        else if ( !istrue( var_0 ) )
        {
            var_0 = 1;
            self notify( "switched_to_minigun" );
        }

        waitframe();
    }
}

heli_convertforplayerfunc( var_0 )
{
    if ( !isdefined( var_0 ) )
        return 0;

    if ( !isdefined( self.streakdata ) )
        return 0;

    if ( !isdefined( self.streakdata.streaks ) || !isdefined( self.streakdata.streaks[1] ) )
        return 0;

    var_1 = self.streakdata.streaks[1];

    if ( !isdefined( var_0.streakname ) || !isdefined( var_1.streakname ) || var_0.streakname != var_1.streakname )
        return 0;

    if ( !isdefined( var_0.id ) || !isdefined( var_1.uniqueid ) || var_0.id != var_1.uniqueid )
        return 0;

    return 1;
}

activate_destructible_cinderblocks()
{
    self endon( "death_or_disconnect" );
    self notify( "cancelOffhandADS" );
    self endon( "cancelOffhandADS" );
    self notify( "offhand_ads_off" );
    wait 0.5;
    self notify( "offhand_ads_off" );
}

denyascendmessagelaststand()
{
    thread activate_destructible_cinderblocks();
}
