// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_1215F( var_0, var_1, var_2, var_3 )
{
    if ( istrue( self.noturnanims ) )
        return 0;

    var_4 = scripts\asm\asm::asm_geteventtime( var_0, "sharp_turn" );

    if ( !isdefined( var_4 ) )
        return 0;

    var_5 = 50;
    var_6 = gettime();

    if ( var_6 - var_4 > var_5 )
        return 0;

    var_7 = scripts\asm\asm::asm_geteventdata( var_0, "sharp_turn" );
    var_8 = var_7[1];
    var_9 = var_7[2];
    var_10 = var_7[3];
    var_11 = 22500;

    if ( var_9 && self pathdisttogoal() > 90 || lengthsquared( self.velocity ) > var_11 )
    {
        var_12 = 0;
        var_13 = undefined;

        if ( !isarray( var_3 ) )
            var_14 = var_3;
        else
        {
            var_14 = var_3[0];

            if ( var_3.size > 1 && var_3[1] == 1 )
                var_12 = 1;

            if ( var_3.size > 2 )
                var_13 = scripts\asm\asm_bb::bb_getprefixstring( var_3[2] );
        }

        var_15 = "";

        if ( scripts\asm\shared\utility::demeanorhasblendspace() && scripts\asm\shared\utility::isentnotabomber() )
        {
            var_15 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();
            var_16 = scripts\asm\shared\utility::getbasearchetype();
            self.turnspeedtarget = getnearestspeedthresholdname( var_16, var_15 );
        }
        else
            self.turnspeedtarget = undefined;

        var_17 = _id_1213B( var_0, var_14, var_10, var_8, var_9, var_12, var_13, var_15 );

        if ( !isdefined( var_17 ) )
            return 0;

        if ( self.a.sharpturnnumberindex > 2 && self.a.sharpturnnumberindex < 6 )
            return 0;

        self.a.sharpturnindex = var_17;
        self.a.sharpturncorner = var_10;
        self.a.sharpturnnextpathpoint = var_8;
        return 1;
    }

    return 0;
}

_id_1213B( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7 )
{
    var_8 = 22.5;

    if ( !isdefined( var_6 ) )
        var_6 = "";

    if ( !isdefined( var_7 ) )
        var_7 = "";

    if ( var_5 )
    {
        if ( scripts\asm\asm::asm_eventfiredrecently( var_0, "pass_left" ) )
            var_9 = var_6 + "left";
        else if ( scripts\asm\asm::asm_eventfiredrecently( var_0, "pass_right" ) )
            var_9 = var_6 + "right";
        else if ( self.asm.footsteps.foot == "right" )
            var_9 = var_6 + "right";
        else
            var_9 = var_6 + "left";
    }
    else
        var_9 = var_6;

    [var_11, var_12] = self actorcalcsharpturnanim( var_1, var_2, var_3, var_8, var_9, var_6, var_7 );
    self.a.sharpturnnumberindex = var_12;
    return var_11;
}

_id_12144( var_0, var_1, var_2 )
{
    return self.a.sharpturnindex;
}

_id_1213F( var_0, var_1, var_2 )
{
    var_3 = "left";

    if ( scripts\asm\asm::asm_eventfiredrecently( var_0, "pass_left" ) )
        var_3 = "left";
    else if ( scripts\asm\asm::asm_eventfiredrecently( var_0, "pass_right" ) )
        var_3 = "right";
    else if ( self.asm.footsteps.foot == "right" )
        var_3 = "right";

    var_4 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();
    var_5 = 0;
    var_6 = scripts\asm\shared\utility::getarrivalnode();
    var_7 = scripts\asm\shared\utility::nodeshouldfaceangles( var_6 );
    var_8 = 6400.0;

    if ( scripts\anim\utility_common::recentlysawenemy() || !isdefined( self.enemy ) )
        var_5 = scripts\asm\soldier\script_funcs::getturndesiredyaw();
    else if ( var_7 && length2dsquared( var_6.origin - self.origin ) < var_8 )
        var_5 = scripts\asm\shared\utility::getnodeforwardyaw( var_6 ) - self.angles[1];
    else if ( istrue( self.binoculars_getmaxrange ) )
    {
        var_9 = 0;

        if ( issentient( self.enemy ) )
            var_9 = self hastacvis( self.enemy );
        else
            var_9 = enablegroundwarspawnlogic( self.origin, self.enemy.origin );

        if ( var_9 )
            var_5 = vectortoyaw( self.enemy.origin - self.origin );
    }

    var_5 = angleclamp180( var_5 );
    var_10 = [ 8, 9, 6, 3, 2, 1, 4, 7, 8 ];
    var_11 = getangleindex( var_5, 22.5 );
    var_12 = var_3 + var_10[var_11] + var_4;
    return scripts\asm\asm::asm_lookupanimfromalias( var_1, var_12 );
}

_id_12162( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( self.asm.strafe_foot ) )
        return 0;

    if ( !isdefined( self.pathgoalpos ) )
        return 0;

    if ( self getreacquirestate() == "enabled" )
        return 0;

    var_4 = scripts\asm\soldier\move::getstairsenterdist();
    var_5 = self getstairsstateatdist( var_4 );

    if ( var_5 != "none" )
        return 0;

    var_6 = self aigettargetspeed();

    if ( self.lookaheaddist < 90 )
        return 0;

    var_7 = vectortoyaw( self.lookaheaddir );

    if ( vectordot( vectornormalize( self.velocity ), vectornormalize( self.lookaheaddir ) ) < 0.9 )
        return 0;

    var_8 = self asmeventfiredwithin( var_0, "sharp_turn", 50 );

    if ( var_8 )
    {
        var_9 = angleclamp180( var_7 - self.angles[1] );
        var_10 = angleclamp180( vectortoyaw( self.velocity ) - self.angles[1] );

        if ( abs( angleclamp180( var_10 - var_9 ) ) > 45 )
            return 0;
    }
    else
        var_10 = angleclamp180( var_7 - self.angles[1] );

    var_11 = scripts\asm\shared\utility::getshootfrompos();
    var_12 = scripts\asm\track::getshootpos( var_11 );

    if ( self.facemotion || self.predictedfacemotion || self shouldcautiousstrafe() )
        var_13 = 0;
    else if ( isdefined( var_12 ) || self iscurrentenemyvalid() )
    {
        if ( isdefined( var_12 ) )
            var_14 = var_12.shootpos;
        else
        {
            if ( issentient( self.enemy ) && gettime() - self lastknowntime( self.enemy ) > 2000 )
                return 0;

            var_14 = self lastknownpos( self.enemy );
        }

        if ( distance2dsquared( var_14, self.origin ) < 22500 )
            return 0;

        var_15 = var_14 - self getposonpath( 32 );
        var_16 = vectortoyaw( var_15 );

        if ( abs( angleclamp180( var_16 - self.angles[1] ) ) < 45 )
            return 0;

        var_13 = angleclamp180( var_7 - var_16 );
    }
    else if ( istrue( self._blackboard.forcestrafe ) )
        return 0;
    else
    {
        if ( var_8 || self pathdisttogoal() < 64 )
            return 0;

        var_13 = angleclamp180( var_7 - self.desiredangle );
    }

    if ( abs( angleclamp180( var_10 - var_13 ) ) < 45 )
        return 0;

    var_17 = scripts\asm\soldier\move::yawdiffto2468( var_10 );
    var_18 = scripts\asm\soldier\move::yawdiffto2468( var_13 );

    if ( var_17 == var_18 )
        return 0;

    var_19 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();

    if ( scripts\asm\shared\utility::isentasoldier() && scripts\asm\shared\utility::demeanorhasblendspace() )
    {
        var_20 = scripts\asm\shared\utility::getbasearchetype();
        var_19 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();
        self.strafepoispeedtarget = getnearestspeedthresholdname( var_20, var_19 );
    }
    else
        self.strafepoispeedtarget = undefined;

    var_21 = var_19 + "_" + self.asm.strafe_foot + "_" + var_17 + "_to_" + var_18;

    if ( !scripts\asm\asm::asm_hasalias( var_2, var_21 ) )
    {
        if ( var_17 == "4" || var_17 == "6" )
            var_21 = var_19 + "_feet_together_" + var_17 + "_to_" + var_18;
        else
            var_21 = var_19 + "_foot_l_forward_" + var_17 + "_to_" + var_18;

        if ( !scripts\asm\asm::asm_hasalias( var_2, var_21 ) )
            return 0;
    }

    self.asm.strafeaimchangealias = var_21;
    return 1;
}

_id_12163( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\asm\soldier\arrival::shoulddoarrival() )
        return 0;

    if ( self.facemotion )
        return 0;

    if ( !isdefined( self.pathgoalpos ) )
        return 0;

    if ( isdefined( self.node ) && isdefined( self.node.angles ) )
        return 0;

    var_4 = scripts\asm\asm_bb::bb_getrequestedsmartobject();

    if ( isdefined( var_4 ) )
    {
        if ( scripts\engine\utility::absangleclamp180( var_4.angles[1] - self.angles[1] ) > 15 )
            return 0;
    }

    if ( self getreacquirestate() == "enabled" && self._blackboard.reacquiresteptime >= gettime() - 50 )
        return 0;

    var_5 = self.requestedgoalpos - self.origin;
    var_6 = length( var_5 );

    if ( var_6 > 96 )
        return 0;

    if ( var_6 < self pathdisttogoal() * 0.8 )
        return 0;

    var_7 = vectortoyaw( var_5 );
    var_8 = angleclamp180( var_7 - self.angles[1] );
    var_9 = getangleindex( var_8, 22.5 );
    var_10 = [ "2", "3", "6", "9", "8", "7", "4", "1", "2" ];
    var_11 = scripts\asm\shared\utility::getbasearchetype();
    var_12 = length( self.velocity );
    var_13 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();
    var_14 = getanimspeedthreshold( var_11, "walk" );
    var_15 = getanimspeedthreshold( var_11, "shuffle" );
    var_16 = getanimspeedthreshold( var_11, "fast" );

    if ( !var_14 && !var_15 && !var_16 )
        return 0;

    var_17 = "l";

    if ( self.asm.footsteps.foot == "right" )
        var_17 = "r";

    var_18 = var_13 + var_10[var_9] + var_17;
    var_19 = scripts\asm\asm::asm_lookupanimfromalias( var_2, var_18 );
    var_20 = scripts\asm\asm::asm_getxanim( var_2, var_19 );
    var_21 = getmovedelta( var_20 );
    var_22 = length( var_21 );

    if ( var_22 < 0.75 * var_6 || var_22 > 1.5 * var_6 )
        return 0;

    var_23 = length2d( self.velocity ) * level.framedurationseconds;
    var_24 = self getposonpath( var_23 );

    if ( var_22 < length( self.requestedgoalpos - var_24 ) )
        return 0;

    var_25 = 0.7;
    var_26 = 1.3;

    if ( var_13 == "shuffle" )
        var_25 = 0.9;
    else if ( var_13 == "fast" )
        var_26 = 1.2;

    self.asm.strafearrival_animindex = var_19;
    self.asm.strafearrival_idealstartpos = self.requestedgoalpos - rotatevector( var_21, self.angles );
    self.asm.strafearrival_rate = clamp( var_12 / getnearestspeedthresholdname( var_11, var_13 ), var_25, var_26 );
    self.asm.strafearrival_duration = int( getanimlength( var_20 ) * self.asm.strafearrival_rate * 750 );
    return 1;
}

_id_1213E( var_0, var_1, var_2 )
{
    var_3 = "";

    if ( scripts\asm\shared\utility::isentasoldier() && scripts\asm\shared\utility::demeanorhasblendspace() )
    {
        var_4 = scripts\asm\soldier\move::determinedesiredexitspeed();
        var_5 = scripts\asm\shared\utility::getbasearchetype();
        var_3 = scripts\cp_mp\utility\omnvar_utility::_id_1214F();
        self.exitspeedtarget = getnearestspeedthresholdname( var_5, var_3 );
    }
    else
        self.exitspeedtarget = undefined;

    if ( !scripts\asm\soldier\move::checktransitionpreconditions() )
        return undefined;

    var_6 = undefined;
    var_7 = 0;

    if ( isdefined( var_2 ) )
        var_7 = var_2;

    var_6 = scripts\asm\soldier\move::determinestartanim( var_1, var_7, var_3 );
    return var_6;
}

_id_12155( var_0, var_1, var_2, var_3 )
{
    var_4 = undefined;

    if ( scripts\asm\asm_bb::bb_shootparamsvalid() )
    {
        if ( isdefined( self._blackboard.shootparams_pos ) )
            var_4 = self._blackboard.shootparams_pos;
        else if ( isdefined( self._blackboard.shootparams_ent ) )
            var_4 = self._blackboard.shootparams_ent.origin;
    }

    if ( !isdefined( var_4 ) )
    {
        if ( isdefined( self.smartfacingpos ) )
            var_4 = self.smartfacingpos;
    }

    if ( !isdefined( var_4 ) )
    {
        var_5 = scripts\cp_mp\utility\omnvar_utility::_id_1214C();

        if ( isdefined( var_5 ) && isalive( var_5 ) )
            var_4 = var_5.origin;
    }

    if ( !isdefined( var_4 ) && isdefined( self.node ) && self.node.type == "Exposed" && distancesquared( self.node.origin, self.origin ) < 36 && self.combatmode != "no_cover" )
        var_4 = self.node.origin + anglestoforward( self.node.angles ) * 384;

    if ( !isdefined( var_4 ) )
        return 0;

    var_6 = self.angles[1] - vectortoyaw( var_4 - self.origin );
    var_7 = distancesquared( self.origin, var_4 );

    if ( var_7 < 65536 )
    {
        var_8 = sqrt( var_7 );

        if ( var_8 > 3 )
            var_6 = var_6 + asin( -3 / var_8 );
    }

    return abs( angleclamp180( var_6 ) ) > self.turnthreshold;
}
