// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_12159( var_0, var_1, var_2 )
{
    var_3 = self._blackboard.throwdata;
    self.ispreppinggrenade = 1;
    var_4 = _id_12167( var_0, var_1, var_3 );

    if ( !var_4 )
    {
        self endon( var_1 + "_finished" );
        wait 0.2;
        scripts\asm\asm::asm_fireevent( var_0, "end" );
    }
}

_id_12167( var_0, var_1, var_2, var_3 )
{
    var_4 = var_2.destination;
    var_5 = var_2.target;
    var_6 = var_2.withbounce;

    if ( !isdefined( var_6 ) )
        var_6 = 1;

    if ( isdefined( var_4 ) )
    {
        var_7 = scripts\asm\soldier\throwgrenade::getgrenadethrowoffset( var_1, var_2.xanim );

        if ( !isdefined( var_2.fastthrow ) )
            var_8 = self checkgrenadethrowpos( var_7, var_4, var_6, "min energy", "min time", "max time" );
        else
            var_8 = self checkgrenadethrowpos( var_7, var_4, var_6, "min time", "min energy" );
    }
    else
        var_8 = var_2.vel;

    var_5 = var_2.target;

    if ( isdefined( var_8 ) )
    {
        if ( !isdefined( self.oldgrenawareness ) )
            self.oldgrenawareness = self.grenadeawareness;

        self.grenadeawareness = 0;
        var_9 = max_dist_sq_from_node();
        scripts\asm\soldier\throwgrenade::setgrenadetimer( self.activegrenadetimer, min( gettime() + 3000, var_9 ) );
        var_10 = 0;

        if ( scripts\asm\soldier\throwgrenade::usingplayergrenadetimer() )
        {
            var_5.numgrenadesinprogresstowardsplayer++;
            thread scripts\asm\soldier\throwgrenade::reducegiptponkillanimscript( var_1, var_5 );

            if ( var_5.numgrenadesinprogresstowardsplayer > 1 )
                var_10 = 1;

            if ( self.activegrenadetimer.timername == "fraggrenade" )
            {
                if ( var_5.numgrenadesinprogresstowardsplayer <= 1 )
                    var_5.lastfraggrenadetoplayerstart = gettime();
            }
        }

        if ( isdefined( var_3 ) )
            thread scripts\asm\soldier\throwgrenade::dogrenadethrow( var_0, var_1, var_2.xanim, var_8, var_9, var_10 );
        else
            scripts\asm\soldier\throwgrenade::dogrenadethrow( var_0, var_1, var_2.xanim, var_8, var_9, var_10 );

        return 1;
    }
    else
    {

    }

    return 0;
}

max_dist_sq_from_node()
{
    var_0 = undefined;

    if ( scripts\asm\soldier\throwgrenade::usingplayergrenadetimer() )
    {
        var_1 = self.activegrenadetimer.player;
        var_0 = gettime() + var_1.gs.playergrenadebasetime + randomint( var_1.gs.playergrenaderangetime );
    }
    else if ( isdefined( self.mover_init ) && isdefined( self.mover_init[self.activegrenadetimer.timername] ) )
        var_0 = gettime() + 3000 + self.mover_init[self.activegrenadetimer.timername];
    else
        var_0 = gettime() + 30000 + randomint( 30000 );

    return var_0;
}
