// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_12580()
{
    level.exterior_goal_func = ::_id_12122;
    scripts\mp\flags::gameflaginit( "activate_cash_lzs", 0 );
    playerplunderlose();
    level thread player_damage_blood();
    level thread scripts\mp\gametypes\br_event_soa_tower_helipad::init();
    waittillframeend;
    level thread scripts\mp\gametypes\br_soa_tower_ai_event::init();
    level thread dropbrweapon();
    level thread _id_127A5();
    level thread scripts\mp\gametypes\br_heavy_weapon_drop::init();
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level thread player_waitfortacmapused();
    level thread playericonfilter();
    level thread player_give_infinite_rocks();
    level thread playericontriggerenter();
    scripts\mp\gametypes\br_gametypes::zombienumhitshuman( "modifyVehicleDamage", ::showintelinstancetoplayer );
}

playerplunderlose()
{
    level._id_11C08 = spawnstruct();
    level._id_11C08.initscriptablemanagement = getdvarfloat( "scr_soa_event_vault_door_rotate_duration", 15.0 );
    level._id_11C08.plant_add_zplanes_override = getdvarint( "scr_soa_event_vault_specialist_drops_max", 2 );
    level.plane_door_opened = getdvarint( "scr_i_soa_explosive_bows_to_spawn", 5 );
}

player_damage_blood()
{
    scripts\mp\gametypes\br_gametypes::zombienumhitshuman( "dangerCircleTick", ::dangercircletick );
    scripts\engine\scriptable::scriptable_addusedcallback( ::_id_12110 );
}

playericontriggerenter()
{
    level._id_12111 = spawnstruct();
    level._id_12111._id_12123 = scripts\mp\gametypes\br_analytics::circletimestruct;
    level._id_12111.init_trap_room_obj = scripts\mp\gametypes\br_analytics::circuitbreakerswitchesinit;
    level._id_12111.unset_bullet_shields = scripts\mp\gametypes\br_analytics::circle_back_to_combat;
    level._id_12111.usbs_pulled_out = scripts\mp\gametypes\br_analytics::circleclosestarttime;
    level._id_12111.update_focus_fire_objective = scripts\mp\gametypes\br_analytics::circle_speed;
    level._id_12111.unset_relic_aggressive_melee_params = scripts\mp\gametypes\br_analytics::circle_defaults;
    level._id_12111._id_1237C = scripts\mp\gametypes\br_analytics::circleorigin;
    level._id_12111._id_1237E = scripts\mp\gametypes\br_analytics::circleclosing;
    level._id_12111._id_13011 = scripts\mp\gametypes\br_analytics::circlepeekcleanup;
}

player_waitfortacmapused()
{
    scripts\mp\gametypes\br_gametypes::zombienumhitshuman( "onPlayerKilled", ::onplayerkilled );
}

playericonfilter()
{
    level waittill( "prematch_fade_done" );
    var_0 = [];
    var_0[var_0.size] = ( 37835, 11168, 869 );
    var_0[var_0.size] = ( 37010, -37468, -490 );
    var_0[var_0.size] = ( 11191, 37393, 1989 );
    var_0[var_0.size] = ( -21516, 56288, 3406 );
    var_0[var_0.size] = ( -36014, 33788, 1581 );
    var_0[var_0.size] = ( 5811, -4154, -81 );
    var_0[var_0.size] = ( -18258, -7437, 280 );
    var_0[var_0.size] = ( 39559, 43081, 2389 );
    var_0[var_0.size] = ( 23375, 15266, -121 );
    var_0[var_0.size] = ( -23164, -24840, -76 );

    if ( var_0.size )
    {
        foreach ( var_2 in var_0 )
        {
            var_3 = easepower( "brloot_soa_pow_dogtag", scripts\engine\utility::drop_to_ground( var_2, 0, -100, ( 0, 0, 1 ) ) + ( 0, 0, 25 ) );
            scripts\mp\gametypes\br_pickups::_id_11959( var_3 );
        }
    }
}

player_give_infinite_rocks()
{
    level waittill( "prematch_fade_done" );
    var_0 = [];
    var_0[var_0.size] = ( -23081, -24534, -70 );
    var_0[var_0.size] = ( 37091, -37568, -501 );
    var_0[var_0.size] = ( 6667, -4767, -82 );
    var_0[var_0.size] = ( 37611, 11364, 743 );
    var_0[var_0.size] = ( 39251, 42917, 2382 );
    var_0[var_0.size] = ( 23748, 14291, -222 );
    var_0[var_0.size] = ( 11198, 37448, 1998 );
    var_0[var_0.size] = ( -21618, 56541, 3381 );
    var_0[var_0.size] = ( -35763, 33656, 1559 );
    var_0[var_0.size] = ( -18569, -7431, 247 );
    var_0 = scripts\engine\utility::array_randomize( var_0 );

    for ( var_1 = 0; var_1 < level.plane_door_opened; var_1++ )
    {
        var_2 = easepower( "brloot_killstreak_explosive_bow", scripts\engine\utility::drop_to_ground( var_0[var_1], 0, -100, ( 0, 0, 1 ) ) + ( 0, 0, 25 ) );
        scripts\mp\gametypes\br_pickups::_id_11959( var_2 );
    }
}

_id_12108()
{
    var_0 = scripts\mp\gametypes\br_lootchopper::select_bunker_interior_two_spawners( self.origin + ( 0, 0, 500 ) );

    if ( isdefined( var_0 ) )
    {
        var_1 = scripts\cp_mp\killstreaks\airdrop::dropcrate( undefined, undefined, "heavy_weapon_crate", self.origin, ( 0, randomfloat( 360 ), 0 ), var_0 );
        var_1._id_120E7 = spawn( "script_model", var_0 );
        var_1._id_120E7 setmodel( "ks_airdrop_crate_br" );
        var_1._id_120E7 setscriptablepartstate( "smoke_signal", "on", 0 );
        var_1._id_1223C = self._id_1223C;

        if ( isdefined( var_1 ) )
            var_1 thread _id_1210B();

        var_2 = scripts\cp_mp\killstreaks\airdrop::gettriggerobject( var_1 );
        var_2._id_12B9F = 10;
    }
}

_id_1210B()
{
    self setscriptablepartstate( "objective", "heavy_weapon_public" );
}

_id_12122( var_0, var_1, var_2 )
{
    if ( distancesquared( var_0.origin, getent( "soa_tower_elevator", "targetname" ).origin + ( 0, 0, 75 ) ) < squared( 200 ) )
    {
        var_0 kill();
        return 1;
    }
    else
        return 0;
}

onplayerkilled( var_0 )
{
    var_1 = var_0.victim;
    var_2 = var_0.attacker;
    var_3 = var_0.objweapon;
    var_4 = var_0.meansofdeath;

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
        scripts\mp\gametypes\br_gametype_rebirth::concussionimmune( var_0 );
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "bodycount" )
    {
        if ( self.pitcher_lights <= 0 )
            self.attacker thread scripts\mp\utility\points::giveunifiedpoints( "br_gametype_bodycount_final_kill" );

        thread scripts\mp\gametypes\br_gametype_bodycount::get_player_aggro_score();
    }

    if ( isplayer( var_2 ) && ( isdefined( var_3.equipmentref ) && scripts\mp\equipment::isequipmentlethal( var_3.equipmentref ) || isdefined( var_4 ) && isexplosivedamagemod( var_4 ) ) )
    {
        if ( getdvarint( "seasonal_event_id_num", 0 ) == 6 )
            var_2 scripts\cp\helicopter\chopper_boss::_id_11A49( "t9_ch_global_explosive_weapons_lethal_kills_for_s3_5_event_wz", 1 );
    }

    if ( isplayer( var_2 ) && var_3.basename == "iw8_sn_t9explosivebow_mp" )
    {
        if ( isdefined( level._id_12111 ) )
            [[ level._id_12111.init_trap_room_obj ]]( self );

        if ( getdvarint( "seasonal_event_id_num", 0 ) == 6 )
            var_2 scripts\cp\helicopter\chopper_boss::_id_11A49( "t9_ch_global_kills_with_combat_bow_for_s3_5_event_wz", 1 );
    }

    if ( isplayer( var_2 ) && ( !isdefined( var_2.kills ) || var_2.kills == 0 ) )
    {
        var_5 = 1;
        var_6 = scripts\mp\utility\player::getteamarray( var_2.team );

        if ( var_6.size == 0 )
            return;

        foreach ( var_8 in var_6 )
        {
            if ( isdefined( var_8.kills ) && var_8.kills )
                var_5 = 0;
        }

        if ( var_5 )
        {
            if ( getdvarint( "seasonal_event_id_num", 0 ) == 6 )
                var_2 scripts\cp\helicopter\chopper_boss::_id_11A49( "t9_ch_global_first_blood_for_s3_5_event_wz", 1 );
        }
    }
}

_id_12110( var_0, var_1, var_2, var_3, var_4 )
{
    if ( var_0.type == "brloot_soa_pow_dogtag" )
    {
        if ( getdvarint( "seasonal_event_id_num", 0 ) == 6 )
        {
            foreach ( var_6 in scripts\mp\utility\teams::getteamdata( var_3.team, "players" ) )
                var_6 scripts\cp\helicopter\chopper_boss::_id_11A49( "t9_ch_global_collect_pow_tags_for_s3_5_event_wz", 1 );
        }
    }
}

dangercircletick( var_0, var_1 )
{
    var_2 = var_1 * var_1;

    foreach ( var_4 in level.omvar_code )
    {
        if ( !isdefined( var_4 ) )
            continue;

        if ( distance2dsquared( var_4.origin, var_0 ) > var_2 )
            var_4 scripts\mp\gametypes\br_heavy_weapon_drop::omnvardata();
    }

    foreach ( var_7 in level.vindia_assault3_check_size )
    {
        if ( !isdefined( var_7 ) )
            continue;

        if ( distance2dsquared( var_7.origin, var_0 ) > var_2 )
            var_7 vindia_assault3();
    }

    foreach ( var_10 in level._id_1211A.choppers )
    {
        if ( !isdefined( var_10 ) || var_10.play_death_sound_with_global_cooldown )
            continue;

        if ( distance2dsquared( var_10.origin, var_0 ) > var_2 )
        {
            var_10.lootfunc = undefined;
            var_10 dodamage( 5000, var_10.origin );
        }
    }

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "bodycount" )
        scripts\mp\gametypes\br_gametype_bodycount::dangercircletick( var_0, var_1 );
}

_maphint_cheesescriptableused()
{

}

_id_127A5()
{
    scripts\mp\flags::gameflagwait( "prematch_done" );
    level thread _id_127A6();
    level thread _id_127A7();
}

_id_127A6()
{
    var_0 = ( -196, 836, 3890 );

    if ( level.mapname == "mp_don4" )
        var_0 = ( 20270, -14587, 3731 );

    var_1 = scripts\mp\gameobjects::createhintobject( var_0, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_DOOR", undefined, undefined, undefined, 350, 360, 200, 120 );
    var_1 thread _id_127A3();
}

_id_127A3()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = getent( "e_vault_door", "targetname" );

    for (;;)
    {
        self waittill( "trigger", var_1 );

        if ( var_1 scripts\mp\gametypes\br_public::obj_a_behavior() )
        {
            if ( soundexists( "br_keypad_confirm" ) )
                playsoundatpos( self.origin, "br_keypad_confirm" );

            var_0 thread _id_127A4( var_1 );
            self delete();
        }
        else if ( soundexists( "br_keypad_deny" ) )
            playsoundatpos( self.origin, "br_keypad_deny" );

        wait 0.25;
    }
}

_id_127A4( var_0 )
{
    level endon( "game_ended" );
    self endon( "death" );
    var_1 = incrementpersistentstat( level.players, self.origin, 10000 );

    foreach ( var_3 in var_1 )
        var_3 scripts\mp\hud_message::showsplash( "br_soa_tower_event_vault_opening", undefined, var_0 );

    var_5 = ( -161, 752, 3972 );
    var_6 = ( -353, 873, 3970 );
    var_7 = ( -354, 644, 3970 );

    if ( level.mapname == "mp_don4" )
    {
        var_5 = ( 20330, -14534, 3816 );
        var_6 = ( 20218, -14734, 3816 );
        var_7 = ( 20440, -14734, 3816 );
    }

    playsoundatpos( var_5, "mx_soa_ode_to_joy" );
    playsoundatpos( var_6, "evt_soa_ode_to_joy_alarm_01" );
    playsoundatpos( var_7, "evt_soa_ode_to_joy_alarm_02" );
    self rotateyaw( -90, level._id_11C08.initscriptablemanagement, 0.25, 0.25 );
    playsoundatpos( self.origin, "evt_door_vault_open_start" );
    wait 0.5;
    self playloopsound( "evt_soa_door_vault_lp" );
    wait( level._id_11C08.initscriptablemanagement - 0.5 );
    playsoundatpos( self.origin, "evt_door_vault_open_stop" );
    self stoploopsound();
}

_id_127A7()
{
    var_0 = ( -73, 449, 3895 );
    var_1 = ( -73, 337, 3895 );
    var_2 = ( -73, 233, 3895 );
    var_3 = ( 0, 180, 0 );

    if ( level.mapname == "mp_don4" )
    {
        var_0 = ( 20675.3, -14460, 3726 );
        var_1 = ( 20746.3, -14460, 3726 );
        var_2 = ( 20882.5, -14460, 3726 );
        var_3 = ( 0, 90, 0 );
    }

    var_4 = spawnstruct();
    var_4.origin = var_0;
    var_4.angles = var_3;
    var_4.itemsdropped = 0;
    var_4._id_12520 = "soa_tower_vault_lockbox_right";
    var_5 = scripts\mp\gameobjects::createhintobject( var_4.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_1" );
    var_5 thread _id_127A8( "helipad", var_4 );
    var_6 = spawnstruct();
    var_6.origin = var_1;
    var_6.angles = var_3;
    var_6.itemsdropped = 0;
    var_6._id_12520 = "soa_tower_vault_lockbox_middle";
    var_7 = scripts\mp\gameobjects::createhintobject( var_6.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_2" );
    var_7 thread _id_127A8( "security", var_6 );
    var_8 = spawnstruct();
    var_8.origin = var_2;
    var_8.angles = var_3;
    var_8.itemsdropped = 0;
    var_8._id_12520 = "soa_tower_vault_lockbox_left";
    var_9 = scripts\mp\gameobjects::createhintobject( var_8.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/VAULT_KEYREADER_3" );
    var_9 thread _id_127A8( "arms_deal", var_8 );
}

_id_127A8( var_0, var_1 )
{
    level endon( "game_ended" );
    self endon( "death" );

    for (;;)
    {
        self waittill( "trigger", var_2 );
        var_3 = 0;

        switch ( var_0 )
        {
            case "helipad":
                var_3 = var_2 scripts\mp\gametypes\br_public::obj_a_behavior( "brloot_access_card_gold_vault_lockbox_1" );
                break;
            case "security":
                var_3 = var_2 scripts\mp\gametypes\br_public::obj_a_behavior( "brloot_access_card_gold_vault_lockbox_2" );
                break;
            case "arms_deal":
                var_3 = var_2 scripts\mp\gametypes\br_public::obj_a_behavior( "brloot_access_card_gold_vault_lockbox_3" );
                break;
        }

        if ( var_3 )
        {
            if ( soundexists( "br_keypad_confirm" ) )
                playsoundatpos( self.origin, "br_keypad_confirm" );

            var_4 = getent( var_1._id_12520, "targetname" );
            playsoundatpos( var_4.origin, "evt_door_lockbox_open" );
            var_4 rotateyaw( 80, 1.5, 0.5, 0.5 );
            wait 1.32;
            var_1 thread _id_127AA( var_0, var_2 );
            var_2 scripts\mp\gametypes\br_pickups::_id_11A15();
            self delete();
        }
        else if ( soundexists( "br_pickup_deny" ) )
            var_2 playlocalsound( "br_pickup_deny" );

        wait 0.25;
    }
}

_id_127AA( var_0, var_1 )
{
    var_2 = scripts\mp\utility\teams::getteamdata( var_1.team, "teamCount" );
    var_3 = _id_127A9( var_0, var_2 );
    scripts\mp\gametypes\br_lootcache::selfrevivethink( var_3, 0 );

    if ( var_0 == "arms_deal" )
    {
        var_4 = ( 15, 0, 0 );

        if ( level.mapname == "mp_don4" )
            var_4 = ( 0, 15, 0 );

        var_5 = scripts\mp\gametypes\br_quest_util::_id_1225E( "blueprintextract", scripts\engine\utility::drop_to_ground( self.origin + var_4, 0, -200, ( 0, 0, 1 ) ) + ( 0, 0, 25 ), 0 );
        var_6 = scripts\mp\gametypes\br_quest_util::mine_caves_turret_op_internal();
        var_5 scripts\mp\gametypes\br_blueprint_extract_spawn::calloutmarkerping_squadleaderbeaconkillforplayer( var_6 );
        scripts\mp\gametypes\br_pickups::_id_11959( var_5 );
    }
}

_id_127A9( var_0, var_1 )
{
    var_2 = [];

    switch ( var_0 )
    {
        case "helipad":
            var_2[0] = "brloot_super_stoppingpower";

            if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_extra_life";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
                var_2[4] = "brloot_bodycount_dogtag";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
                var_3 = min( level._id_11C08.plant_add_zplanes_override, var_1 );

                for ( var_4 = 0; var_4 < var_3; var_4++ )
                    var_2[var_2.size] = "brloot_specialist_bonus";
            }

            break;
        case "security":
            var_2[0] = "brloot_super_armorbox";

            if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_dogtag";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
                var_2[4] = "brloot_offhand_advancedsupplydrop";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
                var_2[4] = "brloot_killstreak_auav";
            }

            break;
        case "arms_deal":
            var_2[0] = "brloot_super_deadsilence";

            if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "bodycount" )
            {
                var_2[1] = "brloot_bodycount_dogtag";
                var_2[2] = "brloot_bodycount_dogtag";
                var_2[3] = "brloot_bodycount_dogtag";
            }
            else
            {
                var_2[1] = "brloot_plunder_cash_epic_1";
                var_2[2] = "brloot_plunder_cash_epic_1";
                var_2[3] = "brloot_plunder_cash_epic_1";
            }

            break;
    }

    return var_2;
}

_id_127AB( var_0, var_1, var_2 )
{
    var_3 = scripts\engine\utility::drop_to_ground( var_1, 0 ) + var_2;

    switch ( var_0 )
    {
        case "helipad":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_1", var_3 );
            scripts\mp\gametypes\br_pickups::_id_11959( var_4 );
            break;
        case "security":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_2", var_3 );
            scripts\mp\gametypes\br_pickups::_id_11959( var_4 );
            break;
        case "arms_deal":
            var_4 = easepower( "brloot_access_card_gold_vault_lockbox_3", var_3 );
            scripts\mp\gametypes\br_pickups::_id_11959( var_4 );
            break;
    }
}

runjoininprogresstimeout()
{
    var_0 = scripts\engine\utility::get_linked_ents();

    foreach ( var_2 in var_0 )
        var_2 linkto( self );
}

_handlevehiclerepair()
{

}

dropbrweapon()
{
    waitframe();
    scripts\mp\flags::gameflagwait( "prematch_fade_done" );
    level thread _id_1210D();
    level thread _id_1210F();
    level thread _id_1210C();
}

_id_1210D()
{
    var_0 = spawnstruct();
    var_0.origin = ( 9262, 49682, 1050 );
    var_0.angles = ( 0, 90, 0 );
    var_1 = scripts\mp\gametypes\br_pickups::playersetattractiontime();
    scripts\mp\gametypes\br_lootcache::selfrevivemonitorrevivebuttonpressed( "brloot_killstreak_explosive_bow", var_1, var_0.origin, var_0.angles, 0, 0 );
}

_id_1210F()
{
    level endon( "game_ended" );
    self endon( "death" );
    var_0 = ( 9083, 49848, 1083.5 );
    var_1 = [];
    var_1[0] = ( 6079, -4232, 0 );
    var_1[1] = ( 39449, 43127, 2473 );
    var_1[2] = ( -36348, 33833, 1643 );
    var_1[3] = ( 37142, -37391, -422 );
    var_1[4] = ( 37557, 11234, 865 );
    var_1[5] = ( -21286, 56351, 3495 );
    var_1[6] = ( -18442, -7252, 316 );
    var_1[7] = ( -23164, -24840, -76 );
    var_1[8] = ( 23563, 14610, -93 );
    var_1[9] = ( 11140, 37097, 2041 );
    var_2 = scripts\mp\gameobjects::createhintobject( var_0, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/CIA_OUTPOST_MAP" );

    if ( !isdefined( level.vindia_assault3_check_size ) )
        level.vindia_assault3_check_size = [];

    for (;;)
    {
        var_2 waittill( "trigger", var_3 );

        if ( var_1.size == 0 || isdefined( var_3.vip_completequest ) )
        {
            var_3 playlocalsound( "br_pickup_deny" );
            continue;
        }

        var_2 makeunusable();
        var_3 playlocalsound( "ui_intel_interact" );
        var_3.rear_minigun_shots_per_round = 1;
        var_3 thread _id_1210E();
        var_1 = scripts\engine\utility::array_randomize( var_1 );
        var_4 = scripts\mp\gametypes\br_public::minshotstostage3acc( var_3.team, var_3.squadindex );
        scripts\engine\utility::array_thread( var_4, ::viewmodel_demeanor, var_1 );
        scripts\engine\utility::array_thread( var_4, ::vip_bink_vo, var_1.size );
        wait 5;
        var_2 makeusable();
    }
}

viewmodel_demeanor( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self.vip_completequest = 1;
    var_1 = [];

    foreach ( var_3 in var_0 )
    {
        var_4 = spawnstruct();
        var_4.origin = var_3;
        var_4 scripts\mp\gametypes\br_quest_util::force_ai_to_drop_thermites( 2, 0, 0, var_3 );
        var_4 scripts\mp\gametypes\br_quest_util::_id_11EBE( 2000 );
        var_4 scripts\mp\gametypes\br_quest_util::_id_12056( self );
        level.vindia_assault3_check_size = scripts\engine\utility::array_add( level.vindia_assault3_check_size, var_4 );
        wait 0.5;
    }
}

vip_bink_vo( var_0 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    var_0 = var_0 * 0.5;
    var_1 = scripts\mp\hud_util::createprimaryprogressbar( undefined, 150 );
    var_2 = scripts\mp\hud_util::createprimaryprogressbartext( undefined, 150 );
    var_2 settext( &"BR_SOA_EVENT/CIA_OUTPOST_MAP_UPDATING" );
    var_1 scripts\mp\hud_util::updatebar( 0, 1 / var_0 );

    for ( var_3 = 0; var_3 < var_0 && isalive( self ) && !level.gameended; var_3 = var_3 + 0.05 )
        wait 0.05;

    self.rear_minigun_shots_per_round = 0;
    self playlocalsound( "ui_intel_splash_open" );
    var_1 scripts\mp\hud_util::destroyelem();
    var_2 scripts\mp\hud_util::destroyelem();
}

_id_1210E()
{
    while ( self.rear_minigun_shots_per_round == 1 )
    {
        self playlocalsound( "ui_intel_splash_close" );
        wait 1.5;
    }
}

_id_1210C()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    var_0 = spawnstruct();
    var_0.origin = ( 9452, 49671, 1208 );
    var_1 = scripts\mp\gameobjects::createhintobject( var_0.origin, "HINT_BUTTON", undefined, &"BR_SOA_EVENT/CIA_OUTPOST_COORDS" );
    var_1 waittill( "trigger", var_2 );
    level notify( "soa_bombardment_complete" );

    if ( !isdefined( level.secondsbeforeplacementupdates ) )
        scripts\mp\gametypes\br_lootchopper::init();

    var_3 = scripts\engine\utility::getstruct( "cia_outpost_patrol_org", "targetname" );
    var_4 = scripts\engine\utility::getstruct( "cia_outpost_path_node_1", "targetname" );
    var_5 = scripts\engine\utility::getstruct( "cia_outpost_path_node_2", "targetname" );
    var_6 = scripts\engine\utility::getstruct( "cia_outpost_path_node_3", "targetname" );
    var_7 = var_4.origin + ( 20500, 20500, 8000 );
    var_8 = [ var_4.origin, var_5.origin, var_6.origin ];
    var_1 delete();
    var_9 = scripts\mp\gametypes\br_lootchopper::select_mountain_three_spawners( var_3, undefined, 1, var_8, var_7 );
    var_9 thread calloutmarkerping_gettimeoutforpoolid();
    var_9.gametypeoverrideassassinsearchparams = scripts\mp\gametypes\br_event_soa_tower_helipad::_id_1210A;
    var_9.gametypeoverridedomsearchparams = scripts\mp\gametypes\br_event_soa_tower_helipad::_id_1210A;
    var_9.lootfunc = ::_id_12108;
    var_9._id_1223C = 1;
    var_9.race_init = 1;
    var_9.randomize_wires_on_bombs = 1;
    var_9 thread scripts\mp\gametypes\br_event_soa_tower_helipad::_id_1210A( var_4.origin );

    if ( !isdefined( level._id_1211A.choppers ) )
        level._id_1211A.choppers = [];

    level._id_1211A.choppers = scripts\engine\utility::array_add( level._id_1211A.choppers, var_9 );
    var_2 endon( "disconnect" );
    var_2 endon( "death" );
    var_2 thread scripts\mp\utility\dialog::leaderdialogonplayer( var_2.team + "_enemy_toma_strike_inbound" );
    var_2 thread can_support_mindia8_min_spawn();
    level thread spectatecommands( var_2.origin, 4000, var_2 );
    var_10 = var_2 scripts\cp_mp\utility\killstreak_utility::createstreakinfo( "toma_strike", var_2 );
    var_11 = anglestoforward( var_2 getplayerangles() );
    var_12 = anglestoforward( var_2.angles );
    var_13 = anglestoright( var_2.angles );

    for ( var_14 = 0; var_14 < 10; var_14 = var_14 + 0.1 )
    {
        var_15 = randomintrange( 2000, 4000 );
        var_16 = randomint( 360 );
        var_17 = var_15 * anglestoforward( ( 0, var_16, 0 ) );
        var_18 = var_2.origin + var_17;
        var_19 = var_2 scripts\cp_mp\killstreaks\toma_strike::findunobstructedfiringinfo( var_18, 500, var_11, var_12, var_13 );
        var_19 = var_2 can_station_be_selected( var_18, 500 );
        var_2 thread cancelchecklinktotrain( var_10, var_19 );
        wait 0.1;
    }

    level notify( "soa_bombardment_complete" );
}

calloutmarkerping_gettimeoutforpoolid()
{
    self.play_death_sound_with_global_cooldown = 1;
    self waittill( "near_goal" );
    self.play_death_sound_with_global_cooldown = 0;
}

showintelinstancetoplayer( var_0 )
{
    if ( istrue( self.randomize_wires_on_bombs ) && scripts\mp\utility\weapon::propremovefromlocation( var_0.objweapon ) )
        return getdvarint( "scr_br_soa_explosive_bow_vehicle_damage", 4500 );

    return var_0.damage;
}

spectatecommands( var_0, var_1, var_2 )
{
    var_3 = [];

    foreach ( var_5 in level.players )
    {
        if ( var_5 scripts\mp\gametypes\br_public::isplayeringulag() || !var_5 scripts\cp_mp\utility\player_utility::_isalive() )
            continue;

        if ( isdefined( var_2 ) && var_5.team == var_2.team )
        {
            var_3[var_3.size] = var_5;
            bomb_detonator_bomb_type( var_5, var_2 );
            continue;
        }

        if ( length2dsquared( var_5.origin - var_0 ) < var_1 * var_1 )
        {
            bomb_detonator_holder( var_5 );
            var_3[var_3.size] = var_5;
        }
    }

    var_7 = [ "ebr_alert_missile_10", "ebr_alert_missile_20", "ebr_alert_missile_30" ];
    scripts\mp\gametypes\br_public::brleaderdialog( var_7[randomintrange( 0, 3 )], 1, var_3 );
}

bomb_detonator_bomb_type( var_0, var_1 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_launch", undefined, var_1 );
}

bomb_detonator_holder( var_0 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_incoming" );
}

bomb_detonator_interact( var_0 )
{
    var_0 scripts\mp\hud_message::showsplash( "br_reveal_bombardment_launch_enemy" );
}

can_support_mindia8_min_spawn()
{
    var_0 = getmaxobjectivecount( self.origin[0], self.origin[1], 4000 );
    level waittill( "soa_bombardment_complete" );
    var_0 delete();
}

cancelchecklinktotrain( var_0, var_1 )
{
    var_2 = magicgrenademanual( "toma_proj_mp", var_1.sourcepos, var_1.initvelocity, 5 );
    var_2 setentityowner( self );
    var_2 setotherent( self );
    var_2.owner = self;
    var_2 setscriptablepartstate( "launch", "active", 0 );
    var_2 setscriptablepartstate( "trail", "active", 0 );
    var_2.explodeent = spawn( "script_model", var_2.origin );
    var_2.explodeent setmodel( "ks_toma_strike_missile_mp" );
    var_2.explodeent linkto( var_2 );
    var_2.explodeent dontinterpolate();
    var_2.explodeent setentityowner( self );
    var_3 = spawn( "script_model", var_1.sourcepos );
    var_3 linkto( var_2, "tag_origin", ( 10, 0, 10 ), ( 0, 0, 0 ) );
    var_2.killcament = var_3;
    var_2.streakinfo = var_0;
    var_4 = randomint( 360 );
    var_2.angles = ( 90, var_4, 0 );
    var_2 thread cancelgivequest( var_1.preexplpos, var_1.initpropcircles );
    var_2 thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_watch_stuck( vectortoangles( var_1.initvelocity ), gettime(), var_1.initvelocity );
}

can_station_be_selected( var_0, var_1 )
{
    var_2 = spawnstruct();
    var_3 = var_0 + ( 0, 0, 5000 );
    var_4 = vectornormalize( var_0 - ( var_3[0], var_3[1], 0 ) );
    var_5 = scripts\cp_mp\killstreaks\toma_strike::_id_12776( var_0, var_1, var_4 );
    var_6 = ( 0, 0, -1 * getdvarint( "NPOQPMP", 800 ) );
    var_7 = ( var_5.point - 0.5 * var_6 * squared( 4 ) - var_3 ) / 4;
    var_8 = 3.925 * randomfloatrange( 0.95, 1.0 );
    var_9 = var_3 + var_7 * var_8 + 0.5 * var_6 * squared( var_8 );
    var_2.sourcepos = var_3;
    var_2.infinite_chopper = var_5.infinite_chopper;
    var_2.ingame = var_5.ingame;
    var_2.goalpos = var_5.point;
    var_2.preexplpos = var_9;
    var_2.initvelocity = var_7;
    var_2.initpropcircles = var_8;
    return var_2;
}

cancelgivequest( var_0, var_1 )
{
    self endon( "death" );
    self endon( "missile_dest_failed" );
    self.killcament thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_move_killcam( 3.675, var_0 );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( var_1 );
    self setmissileminimapvisible( 0 );
    thread scripts\cp_mp\killstreaks\toma_strike::toma_strike_missile_explode( var_0 );
}

vindia_assault3()
{
    scripts\mp\gametypes\br_quest_util::getclosestplayerforreward();
    level.vindia_assault3_check_size = scripts\engine\utility::array_remove( level.vindia_assault3_check_size, self );
}
