// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _codephonescriptableused::get_recent_spawn_time_threshold();
    level.music_style = "middle_east";
    scripts\mp\maps\mp_m_speed\mp_m_speed_precache::main();
    scripts\mp\maps\mp_m_speed\gen\mp_m_speed_art::main();
    scripts\mp\maps\mp_m_speed\mp_m_speed_fx::main();
    scripts\mp\maps\mp_m_speed\mp_m_speed_lighting::main();
    scripts\mp\load::main();
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    scripts\mp\compass::setupminimap( "compass_map_mp_m_speed", "codcaster_compass_map_mp_m_speed" );
    level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    setdvar( "PKKMTTRQO", 8 );
    scripts\cp_mp\utility\game_utility::_id_1195A();
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    thread _id_125BB();
    level thread isattachmentvariantlocked();
    level thread _id_12308();
}

_id_125BB()
{
    var_0 = getent( "crane", "targetname" );
    var_1 = getentarray( "crane_bits", "targetname" );

    foreach ( var_3 in var_1 )
        var_3 linkto( var_0 );

    var_0.tacinsert_cachespawnposition = var_0.angles;
    thread _id_125BC( var_0 );
}

_id_125BC( var_0 )
{
    level endon( "game_ended" );
    var_1 = 0.75;

    for (;;)
    {
        var_2 = 4;
        var_1 = var_1 * -1;
        var_0.goalang = var_0.tacinsert_cachespawnposition + ( randomfloatrange( -0.5, 0.5 ), randomfloatrange( -4, 4 ), var_1 );
        var_0 rotateto( var_0.goalang, var_2, var_2 * 0.25, var_2 * 0.25 );
        wait( var_2 - 0.1 );
    }
}

_id_12308()
{
    var_0 = spawn( "trigger_radius", ( -20, 2235, 190 ), 0, 32, 100 );
    var_0 thread _id_12F6A( "window" );
    var_1 = spawn( "trigger_radius", ( -216, 2236, 190 ), 0, 32, 100 );
    var_1 thread _id_12F6A( "window" );
    var_2 = spawn( "trigger_radius", ( -700, 3040, 65 ), 0, 128, 100 );
    var_2 thread _id_12F6A( "spawn_wall" );
    var_3 = spawn( "trigger_radius", ( -450, 1375, 125 ), 0, 128, 100 );
    var_3 thread _id_12F6A( "mid_side" );
}

_id_12F6A( var_0 )
{
    for (;;)
    {
        self waittill( "trigger", var_1 );

        if ( !isplayer( var_1 ) )
            continue;

        if ( !isdefined( self.vehicle_collision_dvarinit ) )
            self.vehicle_collision_dvarinit = [];

        if ( scripts\engine\utility::array_contains( self.vehicle_collision_dvarinit, var_1.guid ) )
            continue;

        self.vehicle_collision_dvarinit = scripts\engine\utility::array_add( self.vehicle_collision_dvarinit, var_1.guid );

        switch ( var_0 )
        {
            case "window":
                var_1 thread _id_12F72( self );
                break;
            case "spawn_wall":
                var_1 thread _id_12F61( self );
                break;
            case "mid_side":
                var_1 thread _id_12F55( self );
                break;
        }
    }
}

_id_12F72( var_0 )
{
    self endon( "death_or_disconnect" );
    var_1 = self.team;
    var_2 = self.guid;
    var_3 = [];
    var_4 = spawnstruct();
    var_4.origin = ( -1022, 2190, 20 );
    var_4.radius = 64;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -1725, 2245, 20 );
    var_4.radius = 64;
    var_3[var_3.size] = var_4;
    var_5 = [];

    foreach ( var_7 in var_3 )
        var_5[var_5.size] = scripts\mp\spawnlogic::addspawndangerzone( var_7.origin, var_7.radius, 100, var_1, undefined, self, 0, self, 1 );

    while ( isdefined( self ) && self istouching( var_0 ) )
        waitframe();

    foreach ( var_10 in var_5 )
        scripts\mp\spawnlogic::removespawndangerzone( var_10 );

    var_0.vehicle_collision_dvarinit = scripts\engine\utility::array_remove( var_0.vehicle_collision_dvarinit, var_2 );
}

_id_12F61( var_0 )
{
    self endon( "death_or_disconnect" );
    var_1 = self.team;
    var_2 = self.guid;
    var_3 = [];
    var_4 = spawnstruct();
    var_4.origin = ( -790, 2850, 20 );
    var_4.radius = 256;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -760, 1290, 20 );
    var_4.radius = 220;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -770, 780, 20 );
    var_4.radius = 100;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -750, 1800, 20 );
    var_4.radius = 200;
    var_3[var_3.size] = var_4;
    var_5 = [];

    foreach ( var_7 in var_3 )
        var_5[var_5.size] = scripts\mp\spawnlogic::addspawndangerzone( var_7.origin, var_7.radius, 100, var_1, undefined, self, 0, self, 1 );

    while ( isdefined( self ) && self istouching( var_0 ) )
        waitframe();

    foreach ( var_10 in var_5 )
        scripts\mp\spawnlogic::removespawndangerzone( var_10 );

    var_0.vehicle_collision_dvarinit = scripts\engine\utility::array_remove( var_0.vehicle_collision_dvarinit, var_2 );
}

_id_12F55( var_0 )
{
    self endon( "death_or_disconnect" );
    var_1 = self.team;
    var_2 = self.guid;
    var_3 = [];
    var_4 = spawnstruct();
    var_4.origin = ( -1720, 1325, 20 );
    var_4.radius = 256;
    var_3[var_3.size] = var_4;
    var_5 = [];

    foreach ( var_7 in var_3 )
        var_5[var_5.size] = scripts\mp\spawnlogic::addspawndangerzone( var_7.origin, var_7.radius, 100, var_1, undefined, self, 0, self, 1 );

    while ( isdefined( self ) && self istouching( var_0 ) )
        waitframe();

    foreach ( var_10 in var_5 )
        scripts\mp\spawnlogic::removespawndangerzone( var_10 );

    var_0.vehicle_collision_dvarinit = scripts\engine\utility::array_remove( var_0.vehicle_collision_dvarinit, var_2 );
}

isattachmentvariantlocked()
{
    var_0 = getent( "nosight128x128x8", "targetname" );
    var_1 = spawn( "script_model", ( -151, 2496, 224 ) );
    var_1.angles = ( 0, 0, -90 );
    var_1 clonebrushmodeltoscriptmodel( var_0 );
    var_2 = getent( "nosight128x128x8", "targetname" );
    var_3 = spawn( "script_model", ( -279, 2496, 224 ) );
    var_3.angles = ( 0, 0, -90 );
    var_3 clonebrushmodeltoscriptmodel( var_2 );
    var_4 = getent( "player256x256x8", "targetname" );
    var_5 = spawn( "script_model", ( -216, 2496, 416 ) );
    var_5.angles = ( 0, 0, -90 );
    var_5 clonebrushmodeltoscriptmodel( var_4 );
    var_6 = getent( "nosight128x128x8", "targetname" );
    var_7 = spawn( "script_model", ( -840, 2230, 224 ) );
    var_7.angles = ( 0, 0, -90 );
    var_7 clonebrushmodeltoscriptmodel( var_6 );
    var_8 = getent( "nosight128x128x8", "targetname" );
    var_9 = spawn( "script_model", ( -712, 2230, 224 ) );
    var_9.angles = ( 0, 0, -90 );
    var_9 clonebrushmodeltoscriptmodel( var_8 );
    var_10 = getent( "player256x256x8", "targetname" );
    var_11 = spawn( "script_model", ( -776, 2230, 416 ) );
    var_11.angles = ( 0, 0, -90 );
    var_11 clonebrushmodeltoscriptmodel( var_10 );
    var_12 = getent( "nosight128x128x8", "targetname" );
    var_13 = spawn( "script_model", ( -879, 2705, 224 ) );
    var_13.angles = ( 0, 0, -90 );
    var_13 clonebrushmodeltoscriptmodel( var_12 );
    var_14 = getent( "player256x256x8", "targetname" );
    var_15 = spawn( "script_model", ( -815, 2705, 416 ) );
    var_15.angles = ( 0, 0, -90 );
    var_15 clonebrushmodeltoscriptmodel( var_14 );
    var_16 = getent( "mantle64", "targetname" );
    var_17 = spawn( "script_model", ( -1035, 1444.5, 74 ) );
    var_17.angles = ( 0, 270, 0 );
    var_17 clonebrushmodeltoscriptmodel( var_16, 1 );
}
