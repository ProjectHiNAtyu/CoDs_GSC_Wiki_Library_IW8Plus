// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    scripts\mp\maps\mp_escape3\mp_escape3_precache::main();
    scripts\mp\maps\mp_escape3\gen\mp_escape3_art::main();
    scripts\mp\maps\mp_escape3\mp_escape3_fx::main();
    scripts\mp\maps\mp_escape3\mp_escape3_lighting::main();
    scripts\mp\load::main();
    scripts\cp_mp\utility\game_utility::registerlargemap();
    scripts\cp_mp\utility\game_utility::_id_11958();
    setdvar( "NKPSNPTQMM", ( -16000, -16000, -50 ) );
    setdvar( "MSOOKLOQTQ", ( 16000, 16000, 1150 ) );
    scripts\mp\compass::setupminimap( "compass_map_mp_escape3" );
    level thread scripts\engine\scriptable_door::system_init();
    level thread scripts\mp\gametypes\br_ai_encounters::init();
    level thread scripts\mp\gametypes\br_maphints::init();
    setdvar( "PKKMTTRQO", 8 );
    setdvar( "SRQLQNLMK", 1.0 );

    if ( !isdefined( game["attackers"] ) )
        game["attackers"] = "allies";

    if ( !isdefined( game["defenders"] ) )
        game["defenders"] = "axis";

    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    level.flashpoint_usebigmapsettings = 1;
    level.c130spacing_usebigmapsettings = 1;
    level.groundspawning_usebigmapsettings = 1;
    level._id_12B8C = 1;
    level.mapsafecorners = [];
    level.mapsafecorners[0] = ( 5800, -12000, 200 );
    level.mapsafecorners[1] = ( -7000, 14000, 200 );
    level.checkmapflagangles = "veh8_mil_air_acharlie130_atlantis_rigid";
    level.checkpairs = "br_fx_rebirth";
    setdvar( "MMNMQTSOSP", 0 );

    if ( scripts\mp\utility\game::getgametype() == "br" )
    {
        brinit();
        level.strict_ff_enable = ::strict_ff_enable;
        level thread scripts\mp\maps\mp_escape2\mp_escape2_ee::playersetgulagdataomnvar();
    }

    if ( scripts\mp\utility\game::getgametype() == "arm" )
    {
        brinit();
        scripts\mp\gametypes\arm::arm_initoutofbounds();
    }
    else if ( getdvarint( "scr_br_outOfBounds", 1 ) != 0 )
    {
        level.tagtaken = getentarray( "OutOfBounds", "targetname" );
        level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
        level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    }

    if ( scripts\mp\utility\game::getgametype() == "war" )
        level.playerzombiemonitorinput = ::playerzombiepingoutofgas;

    if ( istrue( level.usegulag ) )
    {
        var_0 = scripts\engine\utility::getstructarray( "gulag_center", "script_noteworthy" );
        var_1 = var_0[0].radius;
        setdvar( "scr_br_fc_flag_radius", var_1 );
        thread bot_can_switch_to_attacker();
    }

    all_players_skip_last_stand();
    thread givepointsandxp();
    thread runmisteffects();
    thread mousetraplocs();
    thread playerzombielaststandrevive();
    thread _id_121C6();
    thread _id_12087();
}

all_players_skip_last_stand()
{
    var_0 = getentarray( "trigger_hurt_no_heli", "targetname" );

    foreach ( var_2 in var_0 )
        thread spawnropeandbag( var_2 );
}

spawnropeandbag( var_0 )
{
    for (;;)
    {
        var_0 waittill( "trigger", var_1 );

        if ( !isplayer( var_1 ) )
            continue;

        var_2 = scripts\mp\gametypes\br_vehicles::cp_friendlyfire_enabled();

        if ( isdefined( var_2 ) )
        {
            if ( scripts\engine\utility::array_contains( var_2, var_1 ) )
                continue;
        }

        var_1 dodamage( 10000, var_1.origin, var_0, var_0, "MOD_TRIGGER_HURT" );
    }
}

brinit()
{
    level.br_level = spawnstruct();
    level.br_level.br_corners = [];
    level.br_level.br_corners[0] = ( -16000, -16000, 200 );
    level.br_level.br_corners[1] = ( 16000, 16000, 200 );
    var_0 = 8000;

    if ( scripts\mp\utility\game::getgametype() == "arm" )
        var_0 = 8000;
    else if ( scripts\mp\utility\game::getgametype() == "br" )
    {
        var_1 = -1;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
            var_1 = getdvarint( "scr_dmz_c130HeightOverride", 18000 );
        else
            var_1 = getdvarint( "scr_dmz_c130HeightOverride", -1 );

        if ( var_1 != -1 )
            var_0 = var_1;
    }

    scripts\mp\gametypes\br_c130::setc130heightoverrides( var_0, 65 );
    level.br_level.c130_speedoverride = 2000;
    scripts\mp\gametypes\br_gametypes::hostdamagepercentmedium( "planeConstrainedFromMapCenter" );
    var_2 = min( level.br_level.br_corners[0][0], level.br_level.br_corners[1][0] );
    var_3 = max( level.br_level.br_corners[0][0], level.br_level.br_corners[1][0] );
    var_4 = min( level.br_level.br_corners[1][1], level.br_level.br_corners[0][1] );
    var_5 = max( level.br_level.br_corners[1][1], level.br_level.br_corners[0][1] );
    level.br_level.cheese = [];
    level.br_level.cheese[0] = ( var_3, var_5, 0 );
    level.br_level.cheese[1] = ( var_2, var_4, 0 );
    var_2 = level.br_level.br_corners[0][0] * 0.95;
    var_3 = level.br_level.br_corners[1][0] * 0.95;
    var_4 = level.br_level.br_corners[0][1] * 0.95;
    var_5 = level.br_level.br_corners[1][1] * 0.95;
    level.br_level.br_mapbounds = [];
    level.br_level.br_mapbounds[0] = ( var_3, var_5, 0 );
    level.br_level.br_mapbounds[1] = ( var_2, var_4, 0 );
    level.br_level.br_mapcenter = ( ( var_2 + var_3 ) / 2, ( var_4 + var_5 ) / 2, 0 );
    level.br_level.br_mapsize = ( abs( var_3 - var_2 ), abs( var_5 - var_4 ), abs( level.br_level.c130_heightoverride - level.br_level.c130_sealeveloverride ) );

    if ( getdvarint( "scr_br_alt_mode_nonstop", 0 ) )
    {
        level.br_level.br_circleclosetimes = [ 360, 270, 225, 135, 90, 60, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
    }
    else if ( getdvarint( "scr_br_alt_mode_rlh", 0 ) )
    {
        level.br_level.br_circleclosetimes = [ 270, 150, 120, 90, 60, 45, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 60, 10, 10, 10, 10, 10, 10, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" )
    {
        level.br_level.br_circleclosetimes = [ 0.055, 90, 75, 60, 60, 100 ];
        level.br_level.br_circledelaytimes = [ 0.055, 90, 90, 60, 45, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 0, 0, 0, 0, 0, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
    {
        level.br_level.br_circleclosetimes = [ 90, 75, 60, 60, 100 ];
        level.br_level.br_circledelaytimes = [ 150, 110, 75, 60, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 120, 0, 0, 0, 0 ];
    }
    else
    {
        level.br_level.br_circleclosetimes = [ 90, 75, 60, 60, 100 ];
        level.br_level.br_circledelaytimes = [ 120, 90, 60, 45, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 100, 0, 0, 0, 0 ];
    }

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" )
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 15000, 10500, 10500, 9000, 8000, 5500 ];
        var_6 = getdvarint( "scr_brmini_circle_setting", 0 );

        if ( var_6 == 1 )
            level.br_level.br_circleradii = [ 13000, 13000, 8500, 5500, 2750, 1250, 0 ];
        else
            level.br_level.br_circleradii = [ 15000, 15000, 9000, 6000, 3000, 1500, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 7500, 6500, 5500, 5000, 4500 ];
        level.br_level.br_circleradii = [ 18000, 12000, 8000, 4500, 1500, 0 ];
    }
    else
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 8000, 7000, 6000, 5000, 4500 ];
        level.br_level.br_circleradii = [ 15000, 9000, 6000, 3000, 1500, 0 ];
    }

    if ( isdefined( level.checkpoint_carepkg_spawns_func ) )
        [[ level.checkpoint_carepkg_spawns_func ]]();

    scripts\mp\gametypes\br_circle::bombs_setup();
    level.chopper_boss_player_monitor = [ scripts\mp\gametypes\br::createspawnlocation( ( 0, 400, 1000 ), 0, 1000 ), scripts\mp\gametypes\br::createspawnlocation( ( -2000, -5211, 1000 ), 0, 1000 ), scripts\mp\gametypes\br::createspawnlocation( ( 4542, -3893, 1000 ), 0, 1000 ), scripts\mp\gametypes\br::createspawnlocation( ( -1000, 10000, 1000 ), 0, 1000 ), scripts\mp\gametypes\br::createspawnlocation( ( -4000, 3000, 1000 ), 0, 1000 ), scripts\mp\gametypes\br::createspawnlocation( ( -1500, -11500, 1000 ), 0, 1000 ) ];
    level.checklinktotrain = [ scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -18691, 12376, 200 ), 15000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -19459, -12712, 200 ), 15000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 19261, -12712, 200 ), 15000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 18493, 12376, 200 ), 15000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -707, 20888, 200 ), 8000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -707, -22632, 200 ), 8000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 5255, -15805, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 8323, -9836, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 8642, 3052, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 7015, 9413, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 4349, 13144, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -7087, 13998, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -8292, 8684, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -9920, 2816, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -8292, 8684, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -9088, -5312, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -7424, -12800, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -1600, -17344, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 9923, -2860, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -1859, 16600, 200 ), 4500 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 2388, -11256, 200 ), 2400 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -4140, -8184, 200 ), 2000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -6085, 2857, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -92, 12848, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -4582, 10069, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 4957, 4374, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 4579, 6143, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -6700, -824, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -3820, -9656, 200 ), 1100 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 1556, -13880, 200 ), 1100 ) ];

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
        thread enemy_move_up_and_ignore();
}

strict_ff_enable()
{
    if ( !scripts\mp\gametypes\br::seq3_cleanup_leftovers() )
        return;

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" )
    {
        level.br_level.br_circleradii = [ 57000, 27500, 12500, 6500, 3000, 1250, 0 ];
        level.br_level.br_circleclosetimes = [ 1, 190, 120, 80, 40, 90 ];
        level.br_level.br_circledelaytimes = [ 1, 110, 65, 50, 35, 0 ];
    }
    else
    {
        level.br_level.br_circleradii = [ 81000, 50000, 30000, 15000, 7500, 3750, 1500, 0 ];
        level.br_level.br_circleclosetimes = [ 270, 180, 150, 60, 60, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 210, 60, 60, 60, 45, 30, 0 ];
    }

    scripts\mp\gametypes\br_circle::bombs_setup();
}

runmisteffects()
{
    level.nummistclusters = getdvarint( "scr_mist_cluster_num", 13 );

    if ( level.nummistclusters <= 0 )
        return;

    var_0 = [];
    var_0[0] = ( -17431, 26586, 500 );
    var_0[1] = ( -22668, 36629, 2600 );
    var_0[2] = ( -38816, 50972, 7200 );
    var_0[3] = ( -18276, 45104, 4285 );
    var_0[4] = ( 5900, 26084, 790 );
    var_0[5] = ( -41485, 338, 2100 );
    var_0[6] = ( 22452, -27194, 1500 );
    var_0[7] = ( 5050, 31027, 1300 );
    var_0[8] = ( -39730, 12701, 3115 );
    var_0[9] = ( 50871, -47452, 400 );
    var_0[10] = ( 57555, 3350, 1000 );
    var_0[11] = ( -3316, 30454, 3000 );
    var_0[12] = ( -48791, 46074, 11207 );
    var_0[13] = ( 100, 23546, 1800 );
    var_0[14] = ( -9558, -13090, 1100 );
    var_0[15] = ( 20953, 12360, 1800 );
    var_0[16] = ( 12220, 20486, 1600 );
    var_0[17] = ( -28397, -23638, 860 );
    var_0[18] = ( -31228, -52488, 1600 );
    var_0[19] = ( 5491, -41903, 800 );
    var_0[20] = ( 21263, -43266, 500 );
    var_0[21] = ( 34000, -45441, 100 );
    var_0[22] = ( 54616, -31712, 900 );
    var_0[23] = ( 34600, 7013, 1300 );
    var_0[24] = ( 57412, 29600, 4200 );
    var_0[25] = ( 11766, 45690, 2147 );
    var_0[26] = ( -4331, 40541, 2400 );
    var_0[27] = ( 34702, 18568, 1100 );
    var_0[28] = ( 5851, -14938, 1100 );
    var_0[29] = ( -14690, -26183, 400 );
    var_0[30] = ( -18244, -46482, 400 );
    var_0[31] = ( -39043, -25359, 400 );
    var_0[32] = ( 54615, 15943, 2500 );

    if ( level.nummistclusters > var_0.size )
        level.nummistclusters = var_0.size;

    level waittill( "prematch_started" );
    var_0 = scripts\engine\utility::array_randomize( var_0 );

    for ( var_1 = 0; var_1 < level.nummistclusters; var_1++ )
    {
        var_2 = var_0[var_1];
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 0, 90 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 90, 180 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 180, 270 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 270, 359 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        waitframe();
    }
}

playerzombiepingoutofgas()
{
    var_0 = "start_attackers";
    var_1 = "start_defenders";
    var_2 = "normal";
    var_3 = "fallback";
    level.spawnmins = ( 0, 0, 0 );
    level.spawnmaxs = ( 0, 0, 0 );

    if ( isdefined( scripts\cp_mp\utility\game_utility::getlocaleid() ) )
        scripts\mp\spawnlogic::setactivespawnlogic( "BigTDM", "Crit_Frontline" );
    else
        scripts\mp\spawnlogic::setactivespawnlogic( "Default", "Crit_Frontline" );

    scripts\mp\spawnlogic::addspawnpoints( game["attackers"], "mp_tdm_spawn_allies_start" );
    scripts\mp\spawnlogic::addspawnpoints( game["defenders"], "mp_tdm_spawn_axis_start" );
    var_4 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_allies_start" );
    var_5 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::registerspawnset( var_0, var_4 );
    scripts\mp\spawnlogic::registerspawnset( var_1, var_5 );
    scripts\mp\spawnlogic::addspawnpoints( "allies", "mp_tdm_spawn_allies_start" );
    scripts\mp\spawnlogic::addspawnpoints( "axis", "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::addspawnpoints( "allies", "mp_tdm_spawn_allies_start", 1, 1 );
    scripts\mp\spawnlogic::addspawnpoints( "axis", "mp_tdm_spawn_axis_start", 1, 1 );
    var_6 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_allies_start" );
    var_7 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::registerspawnset( var_2, var_6 );
    scripts\mp\spawnlogic::registerspawnset( var_3, var_7 );

    if ( istrue( level.testtdmanywhere ) )
    {
        var_8 = getdvarfloat( "scr_tdmAnywhere_centerX", randomfloatrange( -4096, 4096 ) );
        var_9 = getdvarfloat( "scr_tdmAnywhere_centerY", randomfloatrange( -4096, 4096 ) );
        var_10 = getdvarfloat( "scr_tdmAnywhere_centerZ", randomfloatrange( 0, 512 ) );
        level.mapcenter = ( var_8, var_9, var_10 );
        scripts\mp\gametypes\war::tdmanywhere_debugshowlocs();
    }
    else
    {
        level.mapcenter = scripts\mp\spawnlogic::findboxcenter( level.spawnmins, level.spawnmaxs );
        setmapcenter( level.mapcenter );
    }
}

givepointsandxp()
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    if ( getdvarint( "scr_br_hide_fx_names", 0 ) != 0 )
        return;

    level waittill( "prematch_started" );

    while ( !isdefined( level.br_ac130 ) )
        wait 0.1;

    wait 5;
    var_0 = level.br_ac130.angles;
    var_0 = var_0 + ( 0, -90, 0 );
    level.spawn_router_model = [];
    first_pressure_switch_triggered( "control_center", ( -3200, -2400, 1700 ), var_0 );
    first_pressure_switch_triggered( "quarantine_block", ( -360, 180, 2400 ), var_0 );
    first_pressure_switch_triggered( "decon_zone", ( -1875, 7200, 1400 ), var_0 );
    first_pressure_switch_triggered( "bioweapon_labs", ( -2150, 10400, 1500 ), var_0 );
    first_pressure_switch_triggered( "harbor", ( 3850, 3750, 1200 ), var_0 );
    first_pressure_switch_triggered( "headquarters", ( 1750, -3350, 2000 ), var_0 );
    first_pressure_switch_triggered( "living_quarters", ( -50, -5900, 1500 ), var_0 );
    first_pressure_switch_triggered( "chemical_engineering", ( 1375, 7475, 1600 ), var_0 );
    first_pressure_switch_triggered( "nova_6_factory", ( 4500, -2000, 1400 ), var_0 );
    first_pressure_switch_triggered( "security_area", ( -650, -10250, 1500 ), var_0 );
    first_pressure_switch_triggered( "shore", ( -6200, -1100, 1200 ), var_0 );
    level thread getanglesfromsurfacenormal();
}

first_pressure_switch_triggered( var_0, var_1, var_2 )
{
    first_switch( var_0, var_1, var_2, "name_fx_rebirth" );
}

first_switch( var_0, var_1, var_2, var_3 )
{
    var_4 = spawn( "script_model", var_1 );
    var_4 setmodel( "tag_origin_name_fx_rebirth" );
    var_4.angles = var_2;
    level.spawn_router_model[level.spawn_router_model.size] = var_4;
    var_4 setscriptablepartstate( var_3, var_0 );
    var_4 forcenetfieldhighlod( 1 );
}

getanglesfromsurfacenormal()
{
    level thread oscope_sign();

    while ( isdefined( level.br_ac130 ) )
        wait 0.1;

    wait 30;
    level notify( "stop_fx_hide_func" );

    foreach ( var_1 in level.spawn_router_model )
        var_1 delete();
}

oscope_sign()
{
    level endon( "game_ended" );
    level endon( "stop_fx_hide_func" );
    var_0 = 10;
    var_1 = 0.25;

    while ( level.spawn_router_model.size > 0 )
    {
        var_2 = level.players;

        for ( var_3 = 0; var_3 < var_2.size; var_3++ )
        {
            var_4 = var_2[var_3];

            if ( isdefined( var_4 ) && isalive( var_4 ) )
            {
                if ( isdefined( var_4.vehicle ) )
                {
                    for ( var_5 = 0; var_5 < level.spawn_router_model.size; var_5++ )
                        level.spawn_router_model[var_5] hidefromplayer( var_4 );
                }
            }

            if ( var_3 % var_0 == 0 )
                wait( var_1 );
        }

        wait 0.1;
    }
}

mousetraplocs()
{
    level endon( "game_ended" );
    waitframe();
    var_0 = 13;
    var_1 = 8;
    var_2 = 3;
    var_3 = 3;
    var_4 = spawn( "script_model", ( 4446, 311, 659 ) );
    var_4 setmodel( "rebirth_fx" );
    var_5 = getent( "gondola_lift", "targetname" );
    var_6 = getent( "gondola_lift_gears", "targetname" );
    var_7 = getent( "gondola_collision", "targetname" );
    var_8 = getent( "gondola_trigger", "targetname" );
    level._id_1303C = spawnstruct();
    level._id_1303C._id_12810 = [];
    level._id_1303C._id_12810[level._id_1303C._id_12810.size] = var_5;
    level._id_1303C._id_12810[level._id_1303C._id_12810.size] = var_6;
    level._id_1303C._id_12810[level._id_1303C._id_12810.size] = var_7;
    var_6 linkto( var_5 );
    var_7 linkto( var_5 );
    thread br_danger_circle_closing_music( var_5 );
    thread mousetrapwatcher( var_8, var_5 );
    var_8 move_door_to_pos();
    var_8 thread move_arena_startspawns();
    var_8 thread move_closest_chopper_boss_vandalize_node_down();
    var_9 = scripts\engine\utility::getstruct( "gondola_start", "targetname" );
    var_10 = scripts\engine\utility::getstruct( "gondola_end", "targetname" );

    for (;;)
    {
        level notify( "gondola_reset" );
        wait( var_1 );

        if ( level.script == "mp_escape2_pm" )
            var_5 setscriptablepartstate( "vfx", "pm_lights" );

        var_4 setscriptablepartstate( "sfx", "sfx_escape2_gondola_motor_start_UP" );
        var_6 setscriptablepartstate( "sfx", "sfx_escape2_gondola_UP" );
        var_5 moveto( var_10.origin, var_0, var_2, var_3 );
        wait( var_0 );
        var_5 setscriptablepartstate( "sfx", "sfx_escape2_gondola_arrived_UP" );
        wait( var_1 );
        var_4 setscriptablepartstate( "sfx", "sfx_escape2_gondola_motor_start_DOWN" );
        var_6 setscriptablepartstate( "sfx", "sfx_escape2_gondola_DOWN" );
        var_5 moveto( var_9.origin, var_0, var_2, var_3 );
        wait( var_0 );
        var_5 setscriptablepartstate( "sfx", "sfx_escape2_gondola_arrived_DOWN" );
    }
}

br_danger_circle_closing_music( var_0 )
{
    level endon( "game_ended" );
    level waittill( "infils_ready" );
    var_1 = easepower( "br_gondola", var_0.origin, var_0.angles );
    var_1 scriptablesetparententity( var_0, ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_1 setscriptablepartstate( "br_gondola", "visible" );
    var_1.forcegivekillstreak = 1;
}

mousetrapwatcher( var_0, var_1 )
{
    level endon( "game_ended" );
    var_0 endon( "death" );
    var_1 endon( "death" );
    var_2 = ( 0, 0, 112 );

    for (;;)
    {
        waitframe();
        var_0.origin = var_1.origin + var_2;
    }
}

move_door_to_pos()
{
    self.playersintrigger = [];
    level.disabledfeatures = ::mounttrig;
}

mounttrig( var_0 )
{
    return !istrue( var_0.proximity_explode );
}

move_arena_startspawns()
{
    self endon( "death" );

    for (;;)
    {
        self waittill( "trigger", var_0 );

        if ( isplayer( var_0 ) )
        {
            var_0.proximity_explode = 1;
            self.playersintrigger[var_0 getentitynumber()] = var_0;
        }
    }
}

move_closest_chopper_boss_vandalize_node_down()
{
    self endon( "death" );

    for (;;)
    {
        foreach ( var_2, var_1 in self.playersintrigger )
        {
            if ( !isdefined( var_1 ) )
            {
                self.playersintrigger[var_2] = undefined;
                continue;
            }

            if ( var_1 istouching( self ) && isalive( var_1 ) )
                continue;

            self.playersintrigger[var_1 getentitynumber()] = undefined;
            var_1.proximity_explode = undefined;
        }

        waitframe();
    }
}

_id_12087()
{
    level.wind_triggers = 0;
    level waittill( "br_c130_in_bounds" );
    wait 1;
    thread flag_num_players_on_team( 35 );
}

flag_num_players_on_team( var_0 )
{
    level notify( "create_siren" );
    var_1 = spawn( "script_model", ( 370, -2679, 3000 ) );
    var_1 setmodel( "rebirth_fx" );
    waitframe();
    var_1 setscriptablepartstate( "sfx", "cine_escape2_infil_siren" );
    level.wind_triggers = 1;
    level scripts\engine\utility::waittill_notify_or_timeout( "create_siren", var_0 );
    var_1 delete();
    level.wind_triggers = 0;
}

new_angles( var_0, var_1, var_2 )
{
    var_3 = spawn( "trigger_radius", var_0, 0, var_1, var_2 );

    for (;;)
    {
        var_3 waittill( "trigger", var_4 );

        if ( isplayer( var_4 ) )
            var_4 dodamage( 10000, var_4.origin, var_3, var_3, "MOD_TRIGGER_HURT" );
    }
}

bot_can_switch_to_attacker()
{
    level endon( "game_ended" );
    wait 1;
    var_0 = getentarray( "metal_detector", "targetname" );
    var_1 = getscriptablearray( "metal_detector_light", "script_noteworthy" );

    foreach ( var_3 in var_0 )
        var_3 thread bot_cache_entrances_to_zones( var_1 );
}

bot_cache_entrances_to_zones( var_0 )
{
    self endon( "death" );
    var_1 = undefined;

    if ( isdefined( var_0 ) && var_0.size > 0 )
        var_1 = scripts\engine\utility::getclosest( self.origin, var_0 );

    for (;;)
    {
        self waittill( "trigger", var_2 );

        if ( !isdefined( var_2 ) || !isplayer( var_2 ) )
        {
            waitframe();
            continue;
        }

        playsoundatpos( var_2.origin + ( 0, 0, 80 ), "emt_metal_detector_beep" );

        if ( isdefined( var_1 ) )
            var_1 setscriptablepartstate( "light", "on" );

        wait 1.5;

        if ( isdefined( var_1 ) )
            var_1 setscriptablepartstate( "light", "off" );
    }
}

playerzombielaststandrevive()
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    if ( istrue( getdvar( "scr_br_gametype", "" ) == "kingslayer" ) )
        return;

    waitframe();
    scripts\mp\gametypes\br_skydive_protection::init();
}

enemy_move_up_and_ignore()
{
    var_0 = scripts\mp\gametypes\br_gametype_rebirth::mini_map_origin_fix();
    var_1 = 0;

    for ( var_2 = 0; var_2 < var_0; var_2++ )
        var_1 = var_1 + ( level.br_level.br_circleclosetimes[var_2] + level.br_level.br_circledelaytimes[var_2] );

    level waittill( "infils_ready" );
    wait( var_1 );
    thread flag_num_players_on_team( 5 );
}

_id_121C6()
{
    var_0 = [];
    var_0[var_0.size] = _id_121C5( ( -798.73, -11359.7, 97.375 ), 700 );
    var_0[var_0.size] = _id_121C5( ( -1932.73, -11450.4, 114.375 ), 900 );
    var_0[var_0.size] = _id_121C5( ( -1349.75, -9363.25, 83.25 ), 1400 );
    var_0[var_0.size] = _id_121C5( ( -474, -9503, 83.25 ), 700 );
    var_0[var_0.size] = _id_121C5( ( 168.75, -9167.75, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( 466.75, -8609, 83.25 ), 700 );
    var_0[var_0.size] = _id_121C5( ( -2085.25, -8068.75, 83.25 ), 700 );
    var_0[var_0.size] = _id_121C5( ( -2923.5, -7025.75, 83.25 ), 700 );
    var_0[var_0.size] = _id_121C5( ( 645.25, -4352.5, 171 ), 4700 );
    var_0[var_0.size] = _id_121C5( ( 4971, -3084.5, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( 4854.5, -2240.5, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( 4316, -1600.25, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( 3327.5, -883, 892.75 ), 1200 );
    var_0[var_0.size] = _id_121C5( ( 2524.75, 987, 892.75 ), 1500 );
    var_0[var_0.size] = _id_121C5( ( -4706.25, -3455.75, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( -5197.5, -2455.25, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( -3880, -2480.5, 892.75 ), 1500 );
    var_0[var_0.size] = _id_121C5( ( -4888.25, -1054.75, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( -5106.5, 409.5, 83.25 ), 500 );
    var_0[var_0.size] = _id_121C5( ( -3294, 394.75, 892.75 ), 2000 );
    var_0[var_0.size] = _id_121C5( ( -4906.5, 3983.75, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -4888.25, 4565.75, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -455.75, 3821.25, 171 ), 4100 );
    var_0[var_0.size] = _id_121C5( ( 3224.5, 5129.75, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( 3188, 5912, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( 2933.25, 6657.75, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( 1787.25, 7458, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( 201.25, 8467.5, 1038.25 ), 1700 );
    var_0[var_0.size] = _id_121C5( ( -1504, 9740.75, 1038.25 ), 1700 );
    var_0[var_0.size] = _id_121C5( ( -1759.75, 7912.75, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -2796.5, 7894.5, 83.25 ), 600 );
    var_0[var_0.size] = _id_121C5( ( -3196.75, 6985, 83.25 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -3840, 7384, 0 ), 600 );
    var_0[var_0.size] = _id_121C5( ( -3572, 8180, 0 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -3932, 6508, 0 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -4288, 5764, 0 ), 400 );
    var_0[var_0.size] = _id_121C5( ( -4576, 5228, 0 ), 400 );
    level.heli_carrier_logic = var_0;
    level._id_12B74 = 1;
}

_id_121C5( var_0, var_1 )
{
    var_2 = spawn( "trigger_radius", var_0, 0, var_1, 8000 );
    var_2.radius = var_1;
    return var_2;
}
