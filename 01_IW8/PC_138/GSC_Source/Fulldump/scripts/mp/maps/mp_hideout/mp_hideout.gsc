// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _codecomputerscriptableused::get_recent_spawn_time_threshold();
    level.music_style = "middle_east";
    scripts\mp\maps\mp_hideout\mp_hideout_precache::main();
    scripts\mp\maps\mp_hideout\gen\mp_hideout_art::main();
    scripts\mp\maps\mp_hideout\mp_hideout_fx::main();
    scripts\mp\maps\mp_hideout\mp_hideout_lighting::main();
    scripts\mp\load::main();
    setdvar( "mantle_force_legacy_system", 1 );
    level thread scripts\engine\scriptable_door::system_init();
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    scripts\mp\compass::setupminimap( "compass_map_mp_hideout", "codcaster_compass_map_mp_hideout" );
    setdvar( "PKKMTTRQO", 8 );
    setdvar( "MTORLPNK", 0.9 );
    setdvar( "LTMPKRLLNM", 5000 );
    thread getlocationnameforpoint( "destructibleSedan01", "destructibleSedan01_edges", "destructibleSedan01_edges_dst" );
    thread getlocationnameforpoint( "destructibleSedan02", "destructibleSedan02_edges", "destructibleSedan02_edges_dst" );
    thread getlocationnameforpoint( "destructibleDecho01", "destructibleDecho02_edges", "destructibleDecho02_edges_dst" );
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    level thread managegate();
    level ammorestock_disableusefortime();
}

#using_animtree("script_model");

managegate()
{
    var_0 = getent( "infil_collision", "targetname" );
    var_0 notsolid();
    waittillframeend;
    var_0 connectpaths();
    level waittill( "infil_setup_complete" );

    if ( !scripts\mp\flags::gameflag( "infil_will_run" ) )
        return;

    scripts\mp\flags::gameflagwait( "infil_started" );
    level.scr_animtree["gate_left"] = #animtree;
    level.scr_anim["gate_left"]["close"] = %mp_trainyard_gatel_close;
    level.scr_animname["gate_left"]["close"] = "mp_trainyard_gateL_close";
    level.scr_anim["gate_left"]["open"] = %mp_trainyard_gatel_open;
    level.scr_animname["gate_left"]["open"] = "mp_trainyard_gateL_open";
    level.scr_animtree["gate_right"] = #animtree;
    level.scr_anim["gate_right"]["close"] = %mp_trainyard_gater_close;
    level.scr_animname["gate_right"]["close"] = "mp_trainyard_gateR_close";
    level.scr_anim["gate_right"]["open"] = %mp_trainyard_gater_open;
    level.scr_animname["gate_right"]["open"] = "mp_trainyard_gateR_open";
    var_1 = getent( "infil_door_left", "targetname" );
    var_2 = getent( "infil_door_right", "targetname" );
    var_3 = getent( "infil_door_chain", "targetname" );
    var_1.animname = "gate_left";
    var_1 scripts\common\anim::setanimtree();
    var_2.animname = "gate_right";
    var_2 scripts\common\anim::setanimtree();
    var_1 thread scripts\common\anim::anim_single_solo( var_1, "open" );
    var_2 thread scripts\common\anim::anim_single_solo( var_2, "open" );
    var_3 hide();
    var_4 = getent( "gate2Left", "targetname" );
    var_5 = getent( "gate2Right", "targetname" );
    var_6 = getentarray( "gate2LeftBits", "targetname" );

    foreach ( var_8 in var_6 )
        var_8 linkto( var_4 );

    var_10 = getentarray( "gate2RightBits", "targetname" );

    foreach ( var_8 in var_10 )
        var_8 linkto( var_5 );

    var_4.enemy_right_monitor = var_4.origin;
    var_13 = scripts\engine\utility::getstruct( "gate2LeftOpen", "targetname" );
    var_4.table_getaddblueprintattachments = var_13.origin;
    var_5.enemy_right_monitor = var_5.origin;
    var_14 = scripts\engine\utility::getstruct( "gate2RightOpen", "targetname" );
    var_5.table_getaddblueprintattachments = var_14.origin;
    var_15 = 4;
    var_16 = 8;
    var_5 moveto( var_5.table_getaddblueprintattachments, var_15, var_15 * 0.1, var_15 * 0.1 );
    var_4 moveto( var_4.table_getaddblueprintattachments, var_15, var_15 * 0.1, var_15 * 0.1 );
    level waittill( "prematch_countdown" );
    var_0 solid();
    waittillframeend;
    var_0 disconnectpaths();
    var_1 thread scripts\common\anim::anim_single_solo( var_1, "close" );
    var_2 thread scripts\common\anim::anim_single_solo( var_2, "close" );
    var_17[0] = "_left";
    var_17[1] = "_right";
    var_18 = randomint( 2 );

    if ( var_18 > 1 )
        var_18 = 1;

    if ( var_17[var_18] == "_left" )
    {

    }
    else
    {

    }

    wait 1.0;
    var_5 moveto( var_5.enemy_right_monitor, var_16, var_16 * 0.1, var_16 * 0.1 );
    var_4 moveto( var_4.enemy_right_monitor, var_16, var_16 * 0.1, var_16 * 0.1 );
    var_3 show();
}

getlocationnameforpoint( var_0, var_1, var_2 )
{
    level endon( "game_ended" );
    wait 5;
    var_3 = getscriptablearray( var_0, "targetname" );
    var_4 = getent( var_1, "targetname" );
    var_5 = getent( var_2, "targetname" );
    var_5 hide();

    if ( isdefined( var_3 ) && isdefined( var_3[0] ) )
    {
        var_6 = var_3[0];
        var_7 = 1;

        while ( var_7 )
        {
            var_6 waittill( "scriptableNotification", var_8, var_9 );

            switch ( var_8 )
            {
                case "vehicle_death":
                case "onfire":
                case "flareup":
                    var_7 = 0;
                    var_5 show();
                    var_4 hide();
                    return;
                case "anim_explosion":
                    var_7 = 0;
                    var_5 show();
                    var_4 hide();
                    return;
            }
        }
    }
}

ammorestock_disableusefortime()
{
    var_0 = [];

    switch ( scripts\mp\utility\game::getgametype() )
    {
        case "dd":
            if ( isdefined( game["roundsPlayed"] ) && game["roundsPlayed"] == 2 )
            {
                level.modifiedspawnpoints["-415 -2239"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-391 -2191"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-353 -2239"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-329 -2191"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-289 -2239"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-265 -2191"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-225 -2239"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-201 -2191"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-161 -2239"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                level.modifiedspawnpoints["-137 -2191"]["mp_dd_spawn_attacker_start"]["remove"] = 1;
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -389, -1455, 59 ), ( 0, 90, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -456, -1439, 61 ), ( 0, 80, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -535, -1423, 63 ), ( 0, 80, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -593, -1410, 61 ), ( 0, 75, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -355, -1503, 59 ), ( 0, 95, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -421, -1504, 61 ), ( 0, 85, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -499, -1496, 63 ), ( 0, 85, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -587, -1484, 60 ), ( 0, 80, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -371, -1574, 61 ), ( 0, 90, 0 ) );
                var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dd_spawn_attacker_start", ( -438, -1577, 63 ), ( 0, 90, 0 ) );
                break;
            }
    }

    if ( var_0.size > 0 )
        scripts\mp\spawnlogic::amped_wid( var_0 );
}
