// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _codecomputerscriptableused::get_recent_spawn_time_threshold();
    _calloutmarkerping_predicted_listenfornotifies::get_recent_spawn_time_threshold();
    level._id_128BA = 1;
    scripts\mp\maps\mp_m_cornfield\mp_m_cornfield_precache::main();
    scripts\mp\maps\mp_m_cornfield\gen\mp_m_cornfield_art::main();
    scripts\mp\maps\mp_m_cornfield\mp_m_cornfield_fx::main();
    scripts\mp\maps\mp_m_cornfield\mp_m_cornfield_lighting::main();
    scripts\mp\load::main();
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    scripts\mp\compass::setupminimap( "compass_map_mp_m_cornfield", "codcaster_compass_map_mp_m_cornfield" );
    scripts\cp_mp\utility\game_utility::_id_1195A();
    level.requiresminstartspawns = 0;
    setdvar( "PKKMTTRQO", 8 );
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    thread brush();
    thread hide_headicon();
}

_id_11B66( var_0 )
{
    var_0 setcandamage( 1 );

    for (;;)
    {
        var_0 waittill( "damage", var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12, var_13, var_14 );
        var_0 rotateto( ( 0, randomint( 360 ), 0 ), 1, 0, 0.5 );
        waitframe();
    }
}

brush()
{
    level.get_bomb_case_omnvar_value_based_on_color = 0;
    level.get_bomb_vest_id_vfx = 0;
    level.get_best_goal_position = 0;
    level.get_bombzone_node_to_defuse_on = 0;
    level.get_best_heli_struct = 0;
    level.get_bomb_interaction_ent_cut_hint = 0;
    level.brtruck_playerwelcomesplashes = getentarray( "bears", "script_noteworthy" );

    foreach ( var_1 in level.brtruck_playerwelcomesplashes )
    {
        if ( var_1.targetname == "bearRed" )
        {
            var_1 hide();
            continue;
        }

        thread brvictiminlaststand( var_1 );
    }
}

hide_headicon()
{
    var_0 = getentarray( "weatherVane", "targetname" );

    foreach ( var_2 in var_0 )
        thread _id_11B66( var_2 );

    level._id_11B2D = scripts\engine\utility::spawn_tag_origin();
    level._id_11B2D.origin = ( -472, -584, -1 );
    level._id_11B2D.angles = ( 0, 180, 0 );
    level._id_11B2D show();
    level._id_11B33 = getentarray( "candleRing", "targetname" );

    foreach ( var_5 in level._id_11B33 )
    {
        var_5.fx = scripts\engine\utility::spawn_tag_origin();
        var_5.fx.origin = var_5.origin;
        var_5.fx.angles = var_5.angles;
        var_5.fx show();
        var_5 hide();
    }

    level.defenderflagreset = getentarray( "candle", "targetname" );
    level.defenderflagreset = scripts\engine\utility::array_randomize( level.defenderflagreset );

    foreach ( var_8 in level.defenderflagreset )
    {
        var_8.fx = scripts\engine\utility::spawn_tag_origin();
        var_8.fx.origin = var_8.origin;
        var_8.fx.angles = var_8.angles;
        var_8.fx show();
        var_8 hide();
    }

    level.hide_found_intel = getentarray( "egg", "targetname" );

    foreach ( var_11 in level.hide_found_intel )
    {
        var_11.calculatehelitimetoflysec = getentarray( var_11.target, "targetname" );

        foreach ( var_13 in var_11.calculatehelitimetoflysec )
        {
            var_13 linkto( var_11 );
            var_13 hide();
        }

        var_11.fx = scripts\engine\utility::spawn_tag_origin();
        var_11.fx.origin = var_11.origin;
        var_11.fx.angles = var_11.angles;
        var_11.fx show();
        var_11.fx linkto( var_11 );
        var_11 hide();
    }
}

brvictiminlaststand( var_0 )
{
    var_0 setcandamage( 1 );
    var_0 waittill( "damage", var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12, var_13, var_14 );
    var_0 hide();

    switch ( var_0.targetname )
    {
        case "bearRed":
            level.get_bomb_vest_id_vfx++;
            do_player_rescued_anim();
            wait 2;
            level.get_bomb_vest_id_vfx--;
            break;
        case "bearBlue":
            level.get_best_goal_position++;
            disabledcurrstate();
            wait 2;
            level.get_best_goal_position--;
            break;
        case "bearGreen":
            level.get_bomb_case_omnvar_value_based_on_color++;
            display_already_have_weapon_message();
            wait 2;
            level.get_bomb_case_omnvar_value_based_on_color--;
            break;
        case "bearYellow":
            level.get_bombzone_node_to_defuse_on++;
            doesstreakinfomatchequippedstreak();
            wait 2;
            level.get_bombzone_node_to_defuse_on--;
            break;
        case "bearGray":
            level.get_best_heli_struct++;
            dismount_after_accum_damage_internal();
            wait 2;
            level.get_best_heli_struct--;
            break;
        default:
            break;
    }
}

do_player_rescued_anim()
{
    if ( level.get_bomb_vest_id_vfx == 2 )
        _id_12925();
}

disabledcurrstate()
{
    if ( level.get_best_goal_position == 2 )
    {
        level.get_bomb_interaction_ent_cut_hint++;
        display_ping_hint_with_radial_check();
    }
}

display_already_have_weapon_message()
{
    if ( level.get_bomb_case_omnvar_value_based_on_color == 2 )
    {
        level.get_bomb_interaction_ent_cut_hint++;
        display_ping_hint_with_radial_check();
    }
}

doesstreakinfomatchequippedstreak()
{
    if ( level.get_bombzone_node_to_defuse_on == 2 )
    {
        level.get_bomb_interaction_ent_cut_hint++;
        display_ping_hint_with_radial_check();
    }
}

dismount_after_accum_damage_internal()
{
    if ( level.get_best_heli_struct == 2 )
    {
        level.get_bomb_interaction_ent_cut_hint++;
        display_ping_hint_with_radial_check();
    }
}

display_ping_hint_with_radial_check()
{
    if ( level.get_bomb_interaction_ent_cut_hint == 4 )
    {
        level.brvalidatekillcam = getentarray( "bearRed", "targetname" );

        foreach ( var_1 in level.brvalidatekillcam )
        {
            var_1 show();
            thread brvictiminlaststand( var_1 );
        }
    }
}

helperdrone_watchscramblereffectdist()
{
    wait 5;
    level.brvalidatekillcam = getentarray( "bearRed", "targetname" );

    foreach ( var_1 in level.brvalidatekillcam )
    {
        var_1 show();
        thread brvictiminlaststand( var_1 );
    }
}

_id_12925()
{
    playfxontag( scripts\engine\utility::getfx( "vfx_goat_circle" ), level._id_11B2D, "tag_origin" );
    thread scripts\engine\utility::play_sound_in_space( "mp_cornfield_goats_lr", ( -666, -666, 60 ) );
    thread scripts\engine\utility::play_sound_in_space( "mp_cornfield_goats_lsrs", ( -300, -666, 60 ) );

    foreach ( var_1 in level.players )
    {
        var_1 visionsetnakedforplayer( "mp_m_cornfield_egg", 15 );
        var_1 playlocalsound( "mp_cornfield_goat_stinger" );
    }

    foreach ( var_4 in level._id_11B33 )
    {
        var_4 show();
        waittillframeend;
        playfxontag( scripts\engine\utility::getfx( "vfx_garden_candle_poof" ), var_4.fx, "tag_origin" );
        thread scripts\engine\utility::play_sound_in_space( "mp_cornfield_goat_candle", var_4.origin );
    }

    wait 2;

    foreach ( var_4 in level.defenderflagreset )
    {
        var_4 show();
        waittillframeend;
        playfxontag( scripts\engine\utility::getfx( "vfx_garden_candle_poof" ), var_4.fx, "tag_origin" );
        thread scripts\engine\utility::play_sound_in_space( "mp_cornfield_goat_candle", var_4.origin );
        wait 0.1;
    }

    wait 1;
    var_8 = ( 0, 0, -386.09 );
    var_9 = ( 0, 0, 100 );
    physics_setgravity( var_9 );

    foreach ( var_11 in level.hide_found_intel )
    {
        var_11 show();
        playfxontag( scripts\engine\utility::getfx( "vfx_goat_eyes" ), var_11.fx, "tag_origin" );

        foreach ( var_13 in var_11.calculatehelitimetoflysec )
            var_13 show();
    }

    wait 3;

    foreach ( var_11 in level.hide_found_intel )
    {
        var_17 = scripts\engine\utility::getstruct( var_11.target, "targetname" );

        if ( isdefined( var_17 ) )
        {
            var_11.origin = var_17.origin;
            var_11.angles = var_17.angles;
            var_11.spawndomplateflag = var_17.target;
        }
    }

    wait 2;

    foreach ( var_11 in level.hide_found_intel )
    {
        var_17 = scripts\engine\utility::getstruct( var_11.spawndomplateflag, "targetname" );

        if ( isdefined( var_17 ) )
        {
            waittillframeend;
            var_11.origin = var_17.origin;
            var_11.angles = var_17.angles;
            var_11.spawndomplateflag = var_17.target;
        }
    }

    wait 2;

    foreach ( var_11 in level.hide_found_intel )
    {
        var_17 = scripts\engine\utility::getstruct( var_11.spawndomplateflag, "targetname" );

        if ( isdefined( var_17 ) )
        {
            waittillframeend;
            var_11.origin = var_17.origin;
            var_11.angles = var_17.angles;
        }
    }

    wait 1.5;

    foreach ( var_1 in level.players )
        var_1 visionsetnakedforplayer( "mp_m_cornfield_egg2", 0.25 );

    wait 1;

    foreach ( var_11 in level.hide_found_intel )
    {
        killfxontag( scripts\engine\utility::getfx( "vfx_goat_eyes" ), var_11.fx, "tag_origin" );
        killfxontag( scripts\engine\utility::getfx( "vfx_goat_eyes" ), var_11.fx, "tag_origin" );
        var_11 hide();

        foreach ( var_13 in var_11.calculatehelitimetoflysec )
            var_13 hide();
    }

    physics_setgravity( var_8 );

    foreach ( var_1 in level.players )
        var_1 thread relic_mythic_should_bypass_pain_cooldown();

    foreach ( var_4 in level._id_11B33 )
        killfxontag( scripts\engine\utility::getfx( "vfx_garden_candle_poof" ), var_4.fx, "tag_origin" );

    foreach ( var_4 in level.defenderflagreset )
    {
        var_4 hide();
        killfxontag( scripts\engine\utility::getfx( "vfx_garden_candle_poof" ), var_4.fx, "tag_origin" );
    }
}

relic_mythic_should_bypass_pain_cooldown()
{
    self kill();
    self visionsetnakedforplayer( "mp_m_cornfield_egg2", 0 );
    waitframe();

    while ( !scripts\cp_mp\utility\player_utility::_isalive() )
        waitframe();

    self visionsetnakedforplayer( "", 0 );
}
