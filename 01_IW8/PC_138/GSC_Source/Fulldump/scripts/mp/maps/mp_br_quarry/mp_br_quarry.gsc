// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    level.chopper_boss_loc = 1;
    scripts\mp\maps\mp_br_quarry\mp_br_quarry_precache::main();
    scripts\mp\maps\mp_br_quarry\gen\mp_br_quarry_art::main();
    scripts\mp\maps\mp_br_quarry\mp_br_quarry_fx::main();
    scripts\mp\load::main();
    scripts\mp\compass::setupminimap( "compass_map_mp_donetsk", undefined, 16 );
    scripts\mp\gametypes\br_gametypes::zombienumhitshuman( "preCalcSafeCircleCenters", ::vo_nag_hangar );
    level.playanim_aibegindismountturret = 85;
    level thread scripts\engine\scriptable_door::system_init();
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    setdvar( "scr_br_fc_circle_disable", 0 );
    scripts\mp\gametypes\br_ai_encounters::init();

    if ( scripts\mp\utility\game::getgametype() == "br" || scripts\mp\utility\game::getgametype() == "arm" )
        brinit();

    if ( getdvarint( "scr_br_outOfBounds", 1 ) != 0 )
    {
        level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
        level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    }

    if ( getdvarint( "no_br_bots", 0 ) == 0 )
    {
        level thread _id_12EF5();
        level thread mp_hardhat_patch();
        level thread allowreuseofalldropbags();
    }

    level thread onplayerconnect();
    level thread onplayerspawned();
    level.strip_node_flag_wait = ::strip_node_flag_wait;
    level.subwave_progression = ::subwave_progression;
    level.hostvictimdefensefactormod = ::humanpowersenabled;
    level.run_debug_start_objective = ::run_debug_start_objective;
    level thread getrandompointinboundscircle();
    level.clean_up_rocket = 1;
    level.checkpoint_next_fx_play = 0;
    level._id_120B6 = 1;
    level.vo_ten_remain = ::vo_ten_remain;

    if ( getdvarint( "no_br_bots", 0 ) > 0 )
    {
        level._id_120B6 = 0;
        setdvar( "br_minplayers", 25 );
        setdvar( "scr_match_timer", 10 );
        setdvar( "OOTQKOTRM", 25 );
        setdvar( "scr_br_prematchffa", 1 );
    }

    var_0 = getentarray( "mp_global_intermission", "classname" );
    var_0[0].origin = ( 34641, 39718, 1909 );
    var_0[0].angles = ( 35, 85, 0 );
    level thread _id_1225F();
    level thread spawn_atvs();
    level thread givepointsandxp();
    level thread scripts\mp\maps\mp_br_quarry\mp_br_quarry_fx::runmisteffects();
    thread isbestplayertime();
    setdvar( "scr_br_lastStandWeapon", "iw8_gunless" );
    scripts\mp\utility\dvars::setoverridewatchdvar( "lastStandWeapon", "iw8_gunless" );
}

vo_nag_hangar()
{
    var_0 = level.br_level.checkpoint_create_carepackage[0];
    level.br_level.checkpoint_create_carepackage[1] = var_0;
    level.br_level.checkpoint_create_carepackage[2] = var_0;
    level.br_level.checkpoint_create_carepackage[3] = var_0;
    level.br_level.checkpoint_create_carepackage[4] = var_0;
    level.br_level.checkpoint_create_carepackage[5] = var_0;
}

brinit()
{
    checkammopickup();
    level.startingspawns = level.challengetrackerforjuggkills;
    level.prematchspawnorigins = level.challengetrackerforjuggkills;
    level.br_level = spawnstruct();
    var_0 = 12000;
    level.br_level.c130_speedoverride = 1000;
    scripts\mp\gametypes\br_c130::setc130heightoverrides( var_0, -200 );
    level.mapcorners[0].origin = ( 23618, 50842, 0 );
    level.mapcorners[1].origin = ( 43677, 30858, 0 );
    level.mapsafecorners = [];
    level.mapsafecorners[0] = ( 23618, 50842, 0 );
    level.mapsafecorners[1] = ( 43677, 30858, 0 );
    var_1 = level.mapcorners[0].origin[0];
    var_2 = level.mapcorners[1].origin[0];
    var_3 = level.mapcorners[1].origin[1];
    var_4 = level.mapcorners[0].origin[1];
    level.br_level.cheese = [];
    level.br_level.cheese[0] = ( var_1, var_3, 0 );
    level.br_level.cheese[1] = ( var_2, var_4, 0 );
    var_1 = level.mapcorners[0].origin[0];
    var_2 = level.mapcorners[1].origin[0];
    var_3 = level.mapcorners[1].origin[1];
    var_4 = level.mapcorners[0].origin[1];
    level.br_level.br_mapbounds = [];
    level.br_level.br_mapbounds[0] = ( var_1, var_3, 0 );
    level.br_level.br_mapbounds[1] = ( var_2, var_4, 0 );
    level.br_level.br_mapcenter = ( ( var_1 + var_2 ) / 2, ( var_3 + var_4 ) / 2, 0 );
    level.br_level.br_mapsize = ( abs( var_2 - var_1 ), abs( var_4 - var_3 ), abs( level.br_level.c130_heightoverride - level.br_level.c130_sealeveloverride ) );
    level.br_level.br_circleclosetimes = [ 28, 30, 30, 30, 30 ];
    level.br_level.br_circledelaytimes = [ 5, 120, 120, 80, 60 ];
    level.br_level.checkpoint_edit_loadout = [ 5, 0, 0, 0, 0 ];
    level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0 ];
    level.br_level.br_circleminimapradii = [ 10500, 10000, 6000, 3000, 1000 ];
    level.br_level.br_circleradii = [ 60000, 10000, 6000, 3000, 1000, 0 ];
    scripts\mp\gametypes\br_circle::bombs_setup();
    level.total_killed = 1;
}

checkammopickup()
{
    level.challengetrackerforjuggkills = [];
    level.carriable_inactive_delete_wait = [];
    cargo_truck_mg_cp_spawncallback( ( 29991.4, 41706.5, 701.032 ) );
    cargo_truck_mg_cp_spawncallback( ( 28364.5, 33257.2, 406.625 ) );
    cargo_truck_mg_cp_spawncallback( ( 31083.5, 33942.5, 630.712 ) );
    cargo_truck_mg_cp_spawncallback( ( 34961.7, 31645.3, 573.372 ) );
    cargo_truck_mg_cp_spawncallback( ( 26616.8, 36135.3, 710.936 ) );
    cargo_truck_mg_cp_spawncallback( ( 32087.4, 37431.2, 715.288 ) );
    cargo_truck_mg_cp_spawncallback( ( 29364.8, 40177.7, 709.1 ) );
    cargo_truck_mg_cp_spawncallback( ( 30356.7, 36310.8, 589.126 ) );
    cargo_truck_mg_cp_spawncallback( ( 31955.1, 45062.1, 815.008 ) );
    cargo_truck_mg_cp_spawncallback( ( 33504.2, 38688.7, 709.125 ) );
    cargo_truck_mg_cp_spawncallback( ( 35497.5, 39440, 774.558 ) );
    cargo_truck_mg_cp_spawncallback( ( 37338.2, 41658, 867.134 ) );
    cargo_truck_mg_cp_spawncallback( ( 37572.7, 43848.4, 436.301 ) );
    cargo_truck_mg_cp_spawncallback( ( 36667.7, 46102.8, 518.89 ) );
    cargo_truck_mg_cp_spawncallback( ( 35178.4, 46754.9, 700.955 ) );
    cargo_truck_mg_cp_spawncallback( ( 33926.4, 44027.2, 491.537 ) );
    cargo_truck_mg_cp_spawncallback( ( 27830.8, 43422.9, 1749.89 ) );
    cargo_truck_mg_cp_spawncallback( ( 39249.1, 46888.9, 960.639 ) );
    cargo_truck_mg_cp_spawncallback( ( 31907.6, 39565.9, 701.127 ) );
    cargo_truck_mg_cp_spawncallback( ( 34384.5, 35930.7, 1001.08 ) );
    cargo_truck_mg_cp_spawncallback( ( 36100.9, 38739.7, 817.712 ) );
    cargo_truck_mg_cp_spawncallback( ( 25669.3, 43452.3, 2179.34 ) );
    cargo_truck_mg_cp_spawncallback( ( 28936.4, 38299, 703.39 ) );
    cargo_truck_mg_cp_spawncallback( ( 32812.9, 41585.5, 706.683 ) );
    cargo_truck_mg_cp_initlate( ( 32357.5, 48053.4, 2133.01 ) );
    cargo_truck_mg_cp_initlate( ( 26301.1, 48160.7, 2618.73 ) );
    cargo_truck_mg_cp_initlate( ( 21545.9, 46365.1, 693.452 ) );
    cargo_truck_mg_cp_initlate( ( 21649.7, 46129, 852.021 ) );
    cargo_truck_mg_cp_initlate( ( 20316.4, 44334.7, 917.54 ) );
    cargo_truck_mg_cp_initlate( ( 20141.1, 44442.5, 1078.83 ) );
    cargo_truck_mg_cp_initlate( ( 20560.7, 48120.9, 708.41 ) );
    cargo_truck_mg_cp_initlate( ( 21700.6, 47330.2, 723.519 ) );
    cargo_truck_mg_cp_initlate( ( 19727.6, 40581, 953.88 ) );
    cargo_truck_mg_cp_initlate( ( 15302.5, 37555.3, 1440.13 ) );
    cargo_truck_mg_cp_initlate( ( 14454.4, 36551.5, 1440.13 ) );
    cargo_truck_mg_cp_initlate( ( 21943.4, 29889.8, 1136.51 ) );
    cargo_truck_mg_cp_initlate( ( 22577.8, 29502.5, 1089.51 ) );
    cargo_truck_mg_cp_initlate( ( 26015.1, 28905.2, 664.275 ) );
    cargo_truck_mg_cp_initlate( ( 36421.1, 28646.2, 393.727 ) );
    cargo_truck_mg_cp_initlate( ( 37433.8, 26955.4, 211.43 ) );
    cargo_truck_mg_cp_initlate( ( 34813.8, 29180.6, 519.346 ) );
    cargo_truck_mg_cp_initlate( ( 34567.5, 30955.6, 595 ) );
    cargo_truck_mg_cp_initlate( ( 19670.2, 34394.5, 1118.79 ) );
    cargo_truck_mg_cp_initlate( ( 18399.1, 36020.2, 1243.79 ) );
    cargo_truck_mg_cp_initlate( ( 25820.8, 36929, 842.166 ) );
    cargo_truck_mg_cp_initlate( ( 27006.8, 34198.9, 790.397 ) );
    cargo_truck_mg_cp_initlate( ( 28135.9, 34214, 533.893 ) );
    cargo_truck_mg_cp_initlate( ( 30895, 32876.4, 667.932 ) );
    cargo_truck_mg_cp_initlate( ( 34859.9, 28934.7, 581.088 ) );
    cargo_truck_mg_cp_initlate( ( 31306.9, 36292.5, 653.699 ) );
    cargo_truck_mg_cp_initlate( ( 29517.1, 37344.7, 772.978 ) );
    cargo_truck_mg_cp_initlate( ( 29681.7, 36901, 772.978 ) );
    cargo_truck_mg_cp_initlate( ( 30224.2, 38722.6, 792.626 ) );
    cargo_truck_mg_cp_initlate( ( 37111.2, 43226.8, 437.125 ) );
    cargo_truck_mg_cp_initlate( ( 36670.5, 42831.2, 437.125 ) );
    cargo_truck_mg_cp_initlate( ( 33826.5, 39239.4, 717.125 ) );
    cargo_truck_mg_cp_initlate( ( 32173, 41132.9, 717.125 ) );
    cargo_truck_mg_cp_initlate( ( 35784.8, 46408, 734.558 ) );
    cargo_truck_mg_cp_initlate( ( 34833.1, 45484, 587.406 ) );
    cargo_truck_mg_cp_initlate( ( 37041.4, 45857.4, 481.277 ) );
    cargo_truck_mg_cp_initlate( ( 39940.9, 45724.9, 1039.01 ) );
    cargo_truck_mg_cp_initlate( ( 39809.3, 47162.4, 992.695 ) );
    cargo_truck_mg_cp_initlate( ( 39442.3, 47496.5, 1119.63 ) );
    cargo_truck_mg_cp_initlate( ( 37519.3, 48534.1, 1024.16 ) );
    cargo_truck_mg_cp_initlate( ( 30923.7, 40184.4, 896.672 ) );
    cargo_truck_mg_cp_initlate( ( 31060.7, 39568.8, 737.289 ) );
    cargo_truck_mg_cp_initlate( ( 32263.5, 38783.6, 729.555 ) );
    cargo_truck_mg_cp_initlate( ( 32956.3, 37948.1, 729.555 ) );
    cargo_truck_mg_cp_initlate( ( 30044.5, 33850.7, 494.945 ) );
    cargo_truck_mg_cp_initlate( ( 31994.4, 33102.1, 904.669 ) );
    cargo_truck_mg_cp_initlate( ( 26997.4, 35262.3, 703.88 ) );
    cargo_truck_mg_cp_initlate( ( 35417, 37977.3, 773.282 ) );
}

cargo_truck_mg_cp_spawncallback( var_0 )
{
    var_1 = spawnstruct();
    var_1.origin = getclosestpointonnavmesh( var_0 );
    var_1.angles = ( 0, 0, 0 );
    var_1.radius = 256;
    var_1.index = -1;
    var_1.minradius = 256;
    level.challengetrackerforjuggkills[level.challengetrackerforjuggkills.size] = var_1;
}

cargo_truck_mg_cp_initlate( var_0 )
{
    var_1 = spawnstruct();
    var_1.origin = getclosestpointonnavmesh( var_0 );
    var_1.angles = ( 0, 0, 0 );
    level.carriable_inactive_delete_wait[level.carriable_inactive_delete_wait.size] = var_1;
}

_id_12EF5()
{
    level endon( "game_ended" );

    while ( !isdefined( level.players ) )
        wait 1;

    var_0 = scripts\mp\bots\bots_gametype_br::get_player();

    while ( !isdefined( var_0 ) || !var_0 scripts\mp\gametypes\br_public::isplayeringulag() )
    {
        var_0 = scripts\mp\bots\bots_gametype_br::get_player();
        wait 1;
    }

    wait 2;

    while ( !istrue( level.gulag.shutdown ) && isdefined( level.player.arena ) && ( !isdefined( var_0.arena.arenaplayers ) || var_0.arena.arenaplayers.size < 2 ) )
    {
        var_1 = undefined;

        foreach ( var_3 in level.players )
        {
            if ( var_3 == var_0 )
                continue;

            if ( isbot( var_3 ) && !var_3 scripts\mp\gametypes\br_public::questtypes() && isalive( var_3 ) )
                var_1 = var_3;

            if ( isdefined( var_1 ) )
                break;
        }

        if ( isdefined( var_1 ) )
        {
            var_1.gulaguses = 0;
            var_1 kill();
            wait 1;
            var_1 dodamage( var_1.health + 100, var_1.origin );
        }

        break;
    }

    while ( var_0 scripts\mp\gametypes\br_public::questtypes() )
        wait 1;
}

mp_hardhat_patch()
{
    level endon( "game_ended" );
    level waittill( "player_spawned" );
    wait 45;

    for (;;)
    {
        if ( isdefined( level.gulag ) && istrue( level.gulag.shutdown ) )
            return;

        var_0 = 0;

        foreach ( var_2 in level.players )
        {
            if ( isalive( var_2 ) && var_2.sessionstate == "playing" && !istrue( var_2.inlaststand ) )
                var_0++;
        }

        if ( var_0 < 5 )
        {
            scripts\mp\gametypes\br_gulag::shutdowngulag( "player_count", var_0 );
            return;
        }

        wait 1;
    }
}

allowreuseofalldropbags()
{
    level waittill( "player_spawned" );
    wait 1;
    var_0 = getdvarint( "br_bot_difficulty", 0 );
    var_1 = "recruit";

    switch ( var_0 )
    {
        case 1:
            var_1 = "regular";
            break;
        case 2:
            var_1 = "hardened";
            break;
        case 3:
            var_1 = "veteran";
            break;
        default:
            var_1 = "recruit";
            break;
    }

    level thread scripts\mp\bots\bots::spawn_bots( 24, "autoassign", undefined, undefined, "spawned_bots", var_1 );
}

_id_129E8( var_0 )
{
    if ( isdefined( self.revivent_watchfordeath_safety ) )
    {
        while ( turretsactive() )
            waitframe();
    }

    self.vehicle_damage_shouldskipburndown = 1;
    var_1 = tolower( var_0 );
    var_2 = lookupsoundlength( var_0 ) / 1000.0;
    self queuedialogforplayer( var_0, var_0, var_2 );
    wait( lookupsoundlength( var_0 ) / 1000.0 );
    self.vehicle_damage_shouldskipburndown = 0;
}

turretsactive()
{
    return gettime() - self.revivent_watchfordeath_safety < 400;
}

onplayerconnect()
{
    var_0 = 0;

    for (;;)
    {
        level waittill( "connected", var_1 );

        if ( isbot( var_1 ) )
            continue;

        level.unset_force_aitype_rpg = var_1;

        if ( getdvarint( "no_br_bots", 0 ) > 0 )
            return;

        var_1 thread _id_129E5();
        var_1 thread _id_12DD2();
        var_1 thread _id_12DD6();
        var_1 thread trial_other_team();
        return;
    }
}

onplayerspawned()
{
    for (;;)
    {
        level waittill( "player_spawned", var_0 );

        if ( isbot( var_0 ) )
            continue;

        if ( getdvarint( "no_br_bots", 0 ) == 0 )
        {
            var_0 player_used_munition();
            var_0 thread skipburndown();
            var_0 thread getrandompointinboundssafecircle();
            var_0 thread _id_12ACE();
            var_0 thread bot_default_class_random();
        }
    }
}

player_used_munition()
{
    if ( istrue( level.player_used_munition ) )
        return;

    self.maxhealth = 300;
    self.health = 300;
    level.player_used_munition = 1;
}

_id_129E5()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self waittill( "play_intro" );
    level.unset_force_aitype_rpg thread scripts\mp\utility\player::hideminimap( 1 );
    wait 20;
    thread _id_129E8( "dx_brm_uktl_brquarry_intro_10" );
    wait 10;
    thread _id_129EB();
    thread uav_isenemygettingnotified();
    _id_129E6();
    thread _id_129E9();
    thread uav_getenemyplayersinrange();
    thread _id_12DCC();
    thread _id_12DD7();
    thread mp_hideout_patch();
    level thread getrandomkeyfromweaponweightsarray();
}

_id_129EB()
{
    thread _id_129EA( &"MP_BR_QUARRY/OPEN_TAC_MAP", 8 );
    thread _id_129E8( "dx_brm_uktl_brquarry_jump_10" );
    thread _id_129E8( "dx_brm_uktl_brquarry_gasbeep_10" );
    thread _id_129E8( "dx_brm_uktl_brquarry_gasbeep_20" );
}

_id_129E6()
{
    level endon( "game_ended" );

    while ( !istrue( level.c130inbounds ) )
        wait 0.05;

    self clearhudtutorialmessage();
    wait 1;
    thread _id_129E8( "dx_brm_uktl_brquarry_jump_20" );
    thread _id_129EA( &"MP_BR_QUARRY/C130_JUMP", 8 );
    uavbestid();
    self clearhudtutorialmessage();
}

uavbestid()
{
    while ( isdefined( self.br_infil_type ) )
        wait 0.1;
}

_id_129EA( var_0, var_1 )
{
    self notify( "tut_txt" );
    self endon( "tut_txt" );

    if ( isdefined( level.revive_vo_time ) )
        var_2 = gettime() - level.revive_vo_time;
    else
        var_2 = 1000;

    if ( var_2 > 500 )
        var_3 = "text_box_new";
    else
        var_3 = "text_box_2";

    if ( soundexists( var_3 ) )
        self playlocalsound( var_3 );

    self sethudtutorialmessage( var_0 );
    level.revive_vo_time = gettime();

    if ( isdefined( var_1 ) )
    {
        wait( var_1 );
        self notify( "msg_timeout" );
    }
}

uav_isenemygettingnotified()
{
    while ( !tut_bot_nameplate() )
        wait 0.05;

    self clearhudtutorialmessage();
}

tut_bot_nameplate()
{
    return self istacmapactive();
}

_id_129E9()
{
    wait 1;
    self clearhudtutorialmessage();
    wait 1;
    thread _id_129E8( "dx_brm_uktl_brquarry_chute_10" );

    while ( !self isparachuting() )
        wait 0.1;

    thread _id_129EC();
}

_id_129EC()
{
    self endon( "disconnect" );
    self endon( "game_ended" );
    self clearhudtutorialmessage();
    wait 1;

    while ( self isskydiving() || self isparachuting() )
    {
        thread _id_129E8( "dx_brm_uktl_brquarry_chute_20" );

        if ( self isskydiving() || self isparachuting() )
            thread _id_129E8( "dx_brm_uktl_brquarry_chute_30" );

        return;
    }
}

uav_getenemyplayersinrange()
{
    self endon( "disconnect" );
    self endon( "game_ended" );
    level.vehicle_collision_getdamagefactor = 1;
    wait 3;

    while ( self isskydiving() || self isparachuting() )
        wait 1;

    thread select_back_door_spawners();
    wait 3;
    _id_12DD8();

    while ( self isskydiving() || self isparachuting() )
        wait 1;

    _id_12DD8();

    while ( self isskydiving() || self isparachuting() )
        wait 1;

    thread _id_129E8( "dx_brm_uktl_brquarry_loot_20" );
    _id_12DD8();

    while ( self isskydiving() || self isparachuting() )
        wait 1;

    _id_129E8( "dx_brm_uktl_brquarry_loot_30" );
    self notify( "start_loot_nag" );
}

select_back_door_spawners()
{
    self endon( "disconnect" );
    self endon( "got_weapon" );
    level endon( "game_ended" );
    self waittill( "start_loot_nag" );
    var_0 = [ "dx_brm_uktl_brquarry_loot_nags_10", "dx_brm_uktl_brquarry_loot_nags_20", "dx_brm_uktl_brquarry_loot_nags_30" ];
    var_1 = 0;
    var_2 = gettime() + 18000;

    while ( !tracking_obit() && !istrue( level.gameended ) )
    {
        wait 0.05;

        if ( gettime() < var_2 )
            continue;

        while ( istrue( self.inlaststand ) )
            wait 1;

        _id_12DD8();

        while ( self isskydiving() || self isparachuting() )
            wait 1;

        _id_129E8( var_0[var_1] );
        var_1++;

        if ( var_1 > 2 )
            var_1 = 0;

        var_2 = gettime() + 15000;
    }

    while ( scripts\mp\gametypes\br_public::questtypes() || istrue( self.inlaststand ) || self isparachuting() || self isskydiving() || !isalive( self ) )
        wait 1;

    wait 1;
    _id_129E8( "dx_brm_uktl_brquarry_newweapon_10" );
    wait 1;
    _id_129E8( "dx_brm_uktl_brquarry_newweapon_20" );
}

tracking_obit()
{
    if ( scripts\mp\gametypes\br_public::questtypes() || istrue( self.inlaststand ) || self isparachuting() || self isskydiving() || !isalive( self ) )
        return 0;

    var_0 = self getweaponslistprimaries();

    foreach ( var_2 in var_0 )
    {
        if ( scripts\mp\utility\weapon::ispickedupweapon( var_2 ) )
            return 1;
    }

    return 0;
}

_id_12DCC()
{
    self endon( "disconnect" );
    level endon( "game_ended" );
    var_0 = 0;
    level.relic_nuketimer_timer_init = 0;

    while ( !istrue( level.gameended ) )
    {
        self waittill( "killed_enemy" );
        var_0++;

        if ( var_0 > 1 )
        {
            wait 1;

            if ( istrue( self.inlaststand ) )
                continue;

            if ( !istrue( level.steve ) )
            {
                thread _id_129E8( "dx_brm_uktl_brquarry_doublekill_10" );
                level.steve = 1;
                thread trial_enemy_quota();
            }

            level.checkamorused = 1;

            if ( var_0 > 1 && last_attack_time() < 10 )
            {
                wait 2;

                while ( istrue( self.inlaststand ) )
                    wait 0.05;

                _id_129E8( "dx_brm_uktl_brquarry_extract_10" );
                wait 2;

                while ( istrue( self.inlaststand ) )
                    wait 0.05;

                _id_129E8( "dx_brm_uktl_brquarry_extract_20" );
                level.initbrc130airdropdropanims = 1;
                return;
            }
        }
    }
}

_id_12DD7()
{
    self endon( "disconnect" );
    level endon( "game_ended" );
    var_0 = [ "dx_brm_uktl_brquarry_gas_10", "dx_brm_uktl_brquarry_gas_20", "dx_brm_uktl_brquarry_gas_30" ];
    var_1 = 0;
    var_2 = gettime();

    for (;;)
    {
        wait 0.05;

        if ( istrue( self.oobimmunity ) )
            continue;

        if ( istrue( self.checkpointstruct ) )
            return;

        if ( postplunder() && !scripts\mp\gametypes\br_public::questtypes() )
        {
            if ( gettime() < var_2 )
                continue;

            _id_129E8( var_0[var_1] );
            var_1++;

            if ( var_1 == var_0.size )
                var_1 = 0;

            var_2 = gettime() + 7000;
        }
    }
}

postplunder()
{
    var_0 = scripts\mp\gametypes\br_circle::getdangercircleorigin();
    var_1 = scripts\mp\gametypes\br_circle::getdangercircleradius();
    return !scripts\engine\utility::quit_game_in( self.origin, var_0, var_1 );
}

mp_hideout_patch()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self waittill( "play_gulag_vo" );
    self.entergulagwait = 1;
    wait 8;
    _id_129E8( "dx_brm_uktl_brquarry_gulag_10" );
    wait 0.25;
    _id_129E8( "dx_brm_uktl_brquarry_gulag_20" );
    self.entergulagwait = 0;
}

last_attack_time()
{
    var_0 = 0;

    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) )
            continue;

        if ( isalive( var_2 ) && var_2.sessionstate != "spectator" )
            var_0++;
    }

    return var_0;
}

_id_12DD6()
{
    level endon( "game_ended" );
    self waittill( "respawn_from_gulag" );
    wait 1;

    while ( self isskydiving() || self isparachuting() )
        wait 1;

    scripts\mp\gametypes\br_gulag::shutdowngulag( "player_count", 0 );
    wait 2;
    thread _id_129E8( "dx_brm_uktl_brquarry_redeploy_10" );
}

_id_12DD8()
{
    while ( istrue( self.inlaststand ) )
        wait 1;

    if ( scripts\mp\gametypes\br_public::questtypes() )
    {
        self waittill( "respawn_from_gulag" );
        wait 2;
    }
}

subwave_progression( var_0 )
{
    if ( var_0 == "MOD_TRIGGER_HURT" && scripts\mp\gametypes\br_public::questtypes() )
        return 0;

    if ( isbot( self ) )
        return 1;

    if ( istrue( self.inlaststand ) )
        return 1;

    if ( isdefined( self.gamemodeoverriderestockrechargeperupdate ) && gettime() <= self.gamemodeoverriderestockrechargeperupdate )
        return 0;

    var_1 = level.generate_cypher;

    if ( self.health / self.maxhealth > var_1 )
        return 1;

    if ( isdefined( self.gamemodespawnprotectedcallback ) && gettime() <= self.gamemodespawnprotectedcallback )
        return 1;

    var_2 = level.generate_grenade_types_via_dvar;
    var_3 = level.generate_bomb_wire_list;
    self.gamemodeoverriderestockrechargeperupdate = gettime() + var_2 * 1000;
    self.gamemodespawnprotectedcallback = gettime() + var_3 * 1000;
    return 0;
}

subway_black_screen_fade_out()
{
    var_0 = undefined;

    foreach ( var_2 in level.players )
    {
        if ( var_2 == self )
            continue;

        if ( isalive( var_2 ) )
            var_0 = var_2;
    }

    if ( !isdefined( var_0 ) )
        var_0 = scripts\mp\bots\bots_gametype_br::get_player();

    foreach ( var_2 in level.players )
    {
        if ( var_2 == self || isdefined( var_0 ) && var_2 == var_0 )
            continue;

        var_2 playerhide();
    }

    thread was_seq3_gassed( var_0 );
}

_id_12DD2()
{
    self endon( "disconnect" );
    level endon( "game_ended" );

    if ( getdvarint( "br_player_skip_gulag" ) == 1 )
        self.gulaguses = 1;

    while ( !istrue( self.checkpointstruct ) )
        wait 1;

    wait 0;

    if ( !istrue( level.keyboard_make_usable ) )
    {
        level.chopper_carepackage_set_useable = 1;
        thread subway_black_screen_fade_out();
    }
}

was_seq3_gassed( var_0 )
{
    if ( !istrue( level.hudzombie ) )
    {
        level.hudzombie = 1;
        thread scripts\mp\gametypes\br::brendgame( var_0.team, game["end_reason"]["objective_failed"] );
    }
}

getrandompointinboundscircle()
{
    level.generate_cypher = 0.35;
    level.generate_bomb_wire_list = 12;
    level.generate_grenade_types_via_dvar = 1.5;
    level.tut_popup_listener = 300;
    level.old_health = 50;
    level.setup_wave_spawn_zone_disable = 100;
    level.gasgrenade_crate_use = 0.2;
    level.getrandompointincirclenearby = 60;
}

getrandompointinboundssafecircle()
{
    self endon( "disconnect" );
    level endon( "game_ended" );
    self endon( "death" );
    wait 1;

    if ( level.tut_popup_listener < level.setup_wave_spawn_zone_disable )
        level.tut_popup_listener = level.setup_wave_spawn_zone_disable;

    if ( !scripts\mp\gametypes\br_public::questtypes() && self.sessionstate == "playing" )
    {
        self.maxhealth = level.tut_popup_listener;
        self.health = level.tut_popup_listener;
    }

    self waittill( "enemy_in_laststand" );

    for (;;)
    {
        var_0 = scripts\engine\utility::waittill_any_ents_or_timeout_return( level.getrandompointincirclenearby, self, "enemy_in_laststand" );

        if ( var_0 == "timeout" )
        {
            self waittill( "enemy_in_laststand" );
            continue;
        }
        else
        {
            level.generate_grenade_types_via_dvar = level.generate_grenade_types_via_dvar - level.gasgrenade_crate_use;

            if ( level.generate_grenade_types_via_dvar < 0 )
                level.generate_grenade_types_via_dvar = 0;

            level.tut_popup_listener = level.tut_popup_listener - level.old_health;

            if ( level.tut_popup_listener < level.setup_wave_spawn_zone_disable )
                level.tut_popup_listener = level.setup_wave_spawn_zone_disable;

            if ( self.health > level.tut_popup_listener )
            {
                self.health = level.tut_popup_listener;
                self.maxhealth = level.tut_popup_listener;
                continue;
            }

            self.maxhealth = level.tut_popup_listener;
        }
    }
}

getrandomkeyfromweaponweightsarray()
{
    level endon( "game_ended" );

    for (;;)
    {
        if ( last_attack_time() <= 6 )
            level.checkamorused = 1;

        wait 1;
    }
}

humanpowersenabled()
{
    var_0 = [ "dx_bra_uktl_brquarry_win", "dx_bra_uktl_brquarry_win2", "dx_bra_uktl_brquarry_win3" ];
    thread _id_129E8( scripts\engine\utility::random( var_0 ) );
    thread _id_129E8( "dx_bra_uktl_brquarry_exfil" );
}

trial_other_team()
{
    self endon( "disconnect" );
    level endon( "game_ended" );

    while ( !istrue( level.gameended ) )
    {
        while ( !istrue( level.initbrc130airdropdropanims ) )
            wait 1;

        wait 360;
        _id_12DD8();
        _id_129E8( "dx_brm_uktl_brquarry_obj_nag_10" );
        _id_12DD8();
        _id_129E8( "dx_brm_uktl_brquarry_hud_enemy_nag_10" );
        thread trial_enemy_quota();
        _id_12DD8();
        _id_129E8( "dx_brm_uktl_brquarry_reddot_nag_10" );
        _id_12DD8();
        wait 60;
        _id_12DD8();
        _id_129E8( "dx_brm_uktl_brquarry_obj_nag_20" );
        return;
    }
}

_id_1225F()
{
    wait 5;
    var_0 = spawnstruct();
    var_0.origin = ( 33542.5, 38552, 767 );
    var_0.angles = ( 0, 135, 0 );
    var_1 = spawnstruct();
    var_1.origin = ( 34481, 41052, 625 );
    var_1.angles = ( 8, 185, 0 );
    scripts\cp_mp\vehicles\tac_rover::tac_rover_create( var_0 );
    scripts\cp_mp\vehicles\tac_rover::tac_rover_create( var_1 );
}

spawn_atvs()
{
    wait 6;
    var_0 = spawnstruct();
    var_0.origin = ( 28828.5, 35724, 626 );
    var_0.angles = ( 0, 135, 0 );
    var_1 = spawnstruct();
    var_1.origin = ( 39794, 46055, 1059 );
    var_1.angles = ( 15, 194, 0 );
    scripts\cp_mp\vehicles\atv::atv_create( var_0 );
    scripts\cp_mp\vehicles\atv::atv_create( var_1 );
}

trial_enemy_quota()
{
    wait 2;
    level.player setclientomnvar( "ui_br_bink_overlay_state", 4 );
    playcinematicforall( "player_count_tut" );
    wait 5;
    self setclientomnvar( "ui_br_bink_overlay_state", 0 );
    self stopcinematicforplayer();
}

skipburndown()
{
    level endon( "game_ended" );
    self endon( "death_or_disconnect" );
    self endon( "kiosk_used" );

    if ( !isdefined( self.stadiumpuzzleactive ) )
        self.stadiumpuzzleactive = 0;

    for (;;)
    {
        if ( !isdefined( self.plundercount ) )
        {
            wait 1;
            continue;
        }

        if ( scripts\mp\gametypes\br_public::questtypes() )
        {
            wait 1;
            continue;
        }

        if ( istrue( self.inlaststand ) )
        {
            wait 1;
            continue;
        }

        if ( self.plundercount > 15 )
        {
            thread scripts\mp\hud_message::showsplash( "br_plunder_first_pickup" );
            _id_129E8( "DX_BRA_UKTL_PLUNDER_SUPPLYSTATION_10" );
            wait 45;
            self.stadiumpuzzleactive++;

            if ( self.stadiumpuzzleactive == 3 )
                return;
        }

        wait 1;
    }
}

givepointsandxp()
{
    while ( !isdefined( level.br_ac130 ) )
        wait 0.1;

    wait 1;
    var_0 = level.br_ac130.angles;
    var_0 = var_0 + ( 0, -90, 0 );
    level.spawn_router_model = [];
    first_pressure_switch_triggered( "quarry", ( 34726.5, 44171.6, 2000.31 ), var_0 );
    var_1 = spawn( "script_model", ( 33647.5, 40850, 0 ) );
    var_1 setmodel( "tag_origin_br_gas" );
    var_1.angles = var_0;
    level thread getanglesfromsurfacenormal();
}

first_pressure_switch_triggered( var_0, var_1, var_2 )
{
    var_1 = var_1 + ( 0, 0, 2000 );
    var_3 = spawn( "script_model", var_1 );
    var_3 setmodel( "tag_origin_name_fx" );
    var_3.angles = var_2;
    level.spawn_router_model[level.spawn_router_model.size] = var_3;
    var_3 setscriptablepartstate( "name_fx", var_0 );
}

getanglesfromsurfacenormal()
{
    level thread oscope_sign();

    while ( isdefined( level.br_ac130 ) )
        wait 0.1;

    wait 90;
    level notify( "stop_fx_hide_func" );

    foreach ( var_1 in level.spawn_router_model )
        var_1 delete();
}

oscope_sign()
{
    level endon( "game_ended" );
    level endon( "stop_fx_hide_func" );
    var_0 = 10;
    var_1 = 0.25;

    while ( level.spawn_router_model.size > 0 )
    {
        var_2 = level.players;

        for ( var_3 = 0; var_3 < var_2.size; var_3++ )
        {
            var_4 = var_2[var_3];

            if ( isdefined( var_4 ) && isalive( var_4 ) )
            {
                if ( isdefined( var_4.vehicle ) )
                {
                    for ( var_5 = 0; var_5 < level.spawn_router_model.size; var_5++ )
                        level.spawn_router_model[var_5] hidefromplayer( var_4 );
                }
            }

            if ( var_3 % var_0 == 0 )
                wait( var_1 );
        }

        wait 0.1;
    }
}

strip_node_flag_wait()
{
    scripts\mp\gametypes\br::clean_up_func();
}

isbestplayertime()
{
    var_0 = getent( "clip64x64x8", "targetname" );
    var_1 = spawn( "script_model", ( 33370, 39459.7, 1020 ) );
    var_1.angles = ( 90, 316.141, 91.141 );
    var_1 clonebrushmodeltoscriptmodel( var_0 );
}

vo_ten_remain( var_0 )
{
    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) )
        {
            var_2 scripts\mp\gametypes\br_public::vandalize_internal( var_0.staticc130.origin );
            var_2 scripts\mp\gametypes\br_public::vehicle_collision_updateinstanceend();
            var_2 thread get_smallest_cumulative_damage();
            break;
        }
    }
}

get_smallest_cumulative_damage()
{
    self endon( "disconnect" );
    level endon( "game_ended" );
    wait 1;
    self setclientomnvar( "ui_br_extended_load_screen", 0 );
}

run_debug_start_objective()
{
    if ( !isbot( self ) )
        return;

    self endon( "death" );
    level endon( "game_ended" );
    wait( randomintrange( 5, 10 ) );
    self notify( "last_stand_bleedout" );
}

_id_12ACE()
{
    level endon( "game_ended" );
    self endon( "death_or_disconnect" );
    level._id_12D92 = 0;
    level._id_12D81 = 0;
    level._id_12D93 = 0;
    level._id_12D94 = 0;
    level._id_12D8E = 0;
    wait 30;

    for (;;)
    {
        _id_12DD8();

        while ( self isskydiving() || self isparachuting() )
            wait 1;

        var_0 = undefined;
        var_1 = little_bird_mg_enterend();

        if ( var_1 <= 9 && !istrue( level._id_12D92 ) )
        {
            var_0 = "dx_bra_uktl_gamestate_top_10";
            level._id_12D92 = 1;
        }
        else if ( var_1 <= 4 && !istrue( level._id_12D81 ) )
        {
            var_0 = "dx_bra_uktl_gamestate_top_5";
            level._id_12D81 = 1;
        }
        else if ( var_1 <= 3 && !istrue( level._id_12D93 ) )
        {
            var_0 = "dx_bra_uktl_gamestate_top_3";
            level._id_12D93 = 1;
        }
        else if ( var_1 == 1 && !istrue( level._id_12D8E ) )
        {
            var_0 = "dx_bra_uktl_gamestate_top_2";
            level._id_12D8E = 1;
        }
        else if ( var_1 == 0 )
        {
            var_2 = scripts\mp\bots\bots_gametype_br::get_player();
            var_2 subway_black_screen_fade_out();
        }

        if ( isdefined( var_0 ) )
            thread _id_129E8( var_0 );

        wait 3;
    }
}

little_bird_mg_enterend()
{
    var_0 = 0;

    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) )
            continue;

        if ( var_2.sessionstate != "playing" )
            continue;

        var_0++;
    }

    return var_0;
}

bot_default_class_random()
{
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );
    self waittill( "start_loot_nag" );
    wait 5;

    for (;;)
    {
        wait 1;

        if ( istrue( self.inlaststand ) || istrue( scripts\mp\gametypes\br_public::questtypes() ) )
            continue;

        if ( self.br_armorhealth == 0 )
        {
            thread _id_129E8( "dx_bra_uktl_intro_armor_pickup_nag_20" );
            wait 45;
        }
    }
}
