// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    scripts\mp\maps\mp_don4\mp_don4_precache::main();
    scripts\mp\maps\mp_don4\gen\mp_don4_art::main();
    scripts\mp\maps\mp_don4\mp_don4_fx::main();
    scripts\mp\maps\mp_don4\mp_don4_lighting::main();
    scripts\mp\load::main();
    scripts\cp_mp\utility\game_utility::zombiepowerscooldown();
    scripts\mp\compass::setupminimap( "compass_map_mp_don4", undefined, 16 );
    level thread scripts\engine\scriptable_door::system_init();
    level thread scripts\mp\gametypes\br_ai_encounters::init();
    level thread scripts\mp\gametypes\br_maphints::init();
    setdvar( "PKKMTTRQO", 8 );
    setdvar( "SRQLQNLMK", 1.0 );

    if ( !isdefined( game["attackers"] ) )
        game["attackers"] = "axis";

    if ( !isdefined( game["defenders"] ) )
        game["defenders"] = "allies";

    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    level thread isattachmentvariantlocked();
    thread new_angles( ( 16996, -18572, -352 ), 628, 56 );
    thread new_angles( ( 16996, -17316, -352 ), 628, 56 );
    thread new_angles( ( 17204, -16060, -352 ), 628, 56 );
    thread new_angles( ( 16996, -14836, -352 ), 628, 56 );
    thread new_angles( ( 16996, -13580, -352 ), 628, 56 );
    thread new_angles( ( 16996, -12324, -352 ), 628, 56 );
    level.flashpoint_usebigmapsettings = 1;
    level.c130spacing_usebigmapsettings = 1;
    level.groundspawning_usebigmapsettings = 1;
    level.mapsafecorners = [];
    level.mapsafecorners[0] = ( 26300, 22800, -96 );
    level.mapsafecorners[1] = ( -27650, -23400, -450 );
    setdvar( "MMNMQTSOSP", 0 );

    if ( scripts\mp\utility\game::getgametype() == "br" )
    {
        brinit();
        level.strict_ff_enable = ::strict_ff_enable;
        level thread playerpowerscleanup();

        if ( getdvarint( "scr_wztrain_enable", 0 ) > 0 )
            level thread scripts\mp\gametypes\br_movingtrain::main();
    }

    if ( scripts\mp\utility\game::getgametype() == "arm" )
    {
        brinit();
        scripts\mp\gametypes\arm::arm_initoutofbounds();
    }
    else if ( getdvarint( "scr_br_outOfBounds", 1 ) != 0 )
    {
        level.tagtaken = getentarray( "OutOfBounds", "targetname" );
        _id_122DB( ( 63974.3, 10857.1, -80 ), 3100, 24145 );
        level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
        level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    }

    if ( scripts\mp\utility\game::getgametype() == "war" )
        level.playerzombiemonitorinput = ::playerzombiepingoutofgas;

    scripts\cp_mp\utility\game_utility::registerlargemap();
    level thread givepointsandxp();
    level thread runmisteffects();
    level thread scripts\mp\gametypes\br_cdl_champion::init();
    level thread scripts\mp\gametypes\br_vista_cloud::init();
    level thread scripts\mp\gametypes\br_gondola::_id_12581();
    level thread scripts\mp\animation_suite::animationsuite();
    level.prepickupweapon = getdvarint( "scr_br_event_summer_of_action", 0 );

    if ( istrue( level.prepickupweapon ) )
        level thread scripts\mp\gametypes\br_summerofaction::_id_12580();

    level thread scripts\mp\gametypes\br_soa_tower::init();
    thread scripts\mp\gametypes\br_warp_door::init();
    level.cleanupallbutxcratesforteam = 1;
    level thread set_relic_laststand();
}

_id_122DB( var_0, var_1, var_2 )
{
    if ( getdvarint( "scr_br_spawnOOBKillswitch", 0 ) == 1 )
        return;

    if ( !isdefined( level.taillightleft ) )
        level.taillightleft = [];

    var_3 = spawn( "trigger_radius", var_0, 0, var_1, var_2 );
    var_3.targetname = "OutOfBounds";
    var_3.radius = var_1;
    level.taillightleft[level.taillightleft.size] = var_3;
}

brinit()
{
    level.br_level = spawnstruct();
    level.br_level.br_corners = [];
    level.br_level.br_corners[0] = ( 26300, -23400, -96 );
    level.br_level.br_corners[1] = ( -27650, 22800, -450 );
    var_0 = 19000;

    if ( scripts\mp\utility\game::getgametype() == "arm" )
        var_0 = 8000;
    else if ( scripts\mp\utility\game::getgametype() == "br" )
    {
        var_1 = -1;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
            var_1 = getdvarint( "scr_dmz_c130HeightOverride", 18000 );
        else
            var_1 = getdvarint( "scr_dmz_c130HeightOverride", -1 );

        if ( var_1 != -1 )
            var_0 = var_1;

        if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
            level.br_level.c130_speedoverride = 3000;
    }

    scripts\mp\gametypes\br_c130::setc130heightoverrides( var_0, -200 );
    var_2 = level.mapcorners[0].origin[0];
    var_3 = level.mapcorners[1].origin[0];
    var_4 = level.mapcorners[1].origin[1];
    var_5 = level.mapcorners[0].origin[1];
    level.br_level.cheese = [];
    level.br_level.cheese[0] = ( var_3, var_5, 0 );
    level.br_level.cheese[1] = ( var_2, var_4, 0 );
    var_2 = level.mapcorners[0].origin[0] * 0.8;
    var_3 = level.mapcorners[1].origin[0] * 0.8;
    var_4 = level.mapcorners[1].origin[1] * 0.8;
    var_5 = level.mapcorners[0].origin[1] * 0.8;
    level.br_level.br_mapbounds = [];
    level.br_level.br_mapbounds[0] = ( var_3, var_5, 0 );
    level.br_level.br_mapbounds[1] = ( var_2, var_4, 0 );
    level.br_level.br_mapcenter = ( ( var_2 + var_3 ) / 2, ( var_4 + var_5 ) / 2, 0 );
    level.br_level.br_mapsize = ( abs( var_3 - var_2 ), abs( var_5 - var_4 ), abs( level.br_level.c130_heightoverride - level.br_level.c130_sealeveloverride ) );

    if ( getdvarint( "scr_br_alt_mode_nonstop", 0 ) )
    {
        level.br_level.br_circleclosetimes = [ 360, 270, 225, 135, 90, 60, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
    }
    else if ( getdvarint( "scr_br_alt_mode_rlh", 0 ) )
    {
        level.br_level.br_circleclosetimes = [ 270, 150, 120, 90, 60, 45, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 60, 10, 10, 10, 10, 10, 10, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 60, 0, 0, 0, 0, 0, 0, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" || isdefined( level.cleanup_fake_ai_on_death ) && level.cleanup_fake_ai_on_death._id_12D46 == 3 )
    {
        level.br_level.br_circleclosetimes = [ 1, 200, 130, 90, 50, 100 ];
        level.br_level.br_circledelaytimes = [ 1, 120, 75, 60, 45, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 1, 0, 0, 0, 0, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
    {
        if ( getdvarint( "scr_br_alt_mode_rebirth_skip_initial_circle", 0 ) != 0 )
        {
            level.br_level.br_circleclosetimes = [ 1, 90, 75, 60, 60, 60 ];
            level.br_level.br_circledelaytimes = [ 1, 150, 110, 75, 60, 0 ];
            level.br_level.checkpoint_edit_loadout = [ 1, 0, 0, 0, 0, 0 ];
        }
        else
        {
            level.br_level.br_circleclosetimes = [ 235, 200, 150, 90, 50, 30, 20 ];
            level.br_level.br_circledelaytimes = [ 1, 60, 60, 60, 30, 30, 0 ];
            level.br_level.checkpoint_edit_loadout = [ 1, 0, 0, 0, 0, 0, 0 ];
        }
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "x2" )
    {
        level.br_level.br_circleclosetimes = [ 120 ];
        level.br_level.br_circledelaytimes = [ 900 ];
        level.br_level.checkpoint_edit_loadout = [ 1 ];
    }
    else
    {
        level.br_level.br_circleclosetimes = [ 270, 220, 170, 110, 70, 50, 50, 100 ];
        level.br_level.br_circledelaytimes = [ 220, 90, 75, 60, 60, 45, 30, 0 ];
        level.br_level.checkpoint_edit_loadout = [ 220, 0, 0, 0, 0, 0, 0, 0 ];
    }

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" || isdefined( level.cleanup_fake_ai_on_death ) && level.cleanup_fake_ai_on_death._id_12D46 == 3 )
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 10500, 10500, 10500, 9000, 8000, 5500 ];
        var_6 = getdvarint( "scr_brmini_circle_setting", 0 );

        if ( var_6 == 1 )
            level.br_level.br_circleradii = [ 75000, 45000, 20000, 7000, 3500, 1500, 0 ];
        else
            level.br_level.br_circleradii = [ 60000, 30000, 15000, 7000, 3500, 1500, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 10500, 10500, 10500, 9000, 8000, 5500 ];

        if ( getdvarint( "scr_br_alt_mode_rebirth_skip_initial_circle", 0 ) != 0 )
            level.br_level.br_circleradii = [ 27000, 18000, 12000, 8000, 4500, 1500, 0 ];
        else
            level.br_level.br_circleradii = [ 75000, 50000, 26000, 12000, 5000, 2500, 1200, 0 ];
    }
    else if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "x2" )
    {
        level.br_level.checkpoint_edit_munitions = [ 0 ];
        level.br_level.br_circleminimapradii = [ 10500 ];
        level.br_level.br_circleradii = [ 93000, 93000 ];
    }
    else
    {
        level.br_level.checkpoint_edit_munitions = [ 0, 0, 0, 0, 0, 0, 0, 0 ];
        level.br_level.br_circleminimapradii = [ 10500, 10500, 10500, 10500, 10500, 9000, 8000, 5500 ];
        level.br_level.br_circleradii = [ 81600, 57300, 37500, 22200, 12300, 6000, 3000, 1500, 0 ];
    }

    if ( isdefined( level.checkpoint_carepkg_spawns_func ) )
        [[ level.checkpoint_carepkg_spawns_func ]]();

    scripts\mp\gametypes\br_circle::bombs_setup();
    level.chopper_boss_player_monitor = [ scripts\mp\gametypes\br::createspawnlocation( ( -27000, -10000, 10 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( -25000, 7300, -262 ), 0, 5500 ), scripts\mp\gametypes\br::createspawnlocation( ( -12600, -14000, -249 ), 0, 5500 ), scripts\mp\gametypes\br::createspawnlocation( ( -22000, 21000, -358 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( -9000, 18000, 4 ), 0, 5000 ), scripts\mp\gametypes\br::createspawnlocation( ( 15000, 14200, 212 ), 500, 5500 ), scripts\mp\gametypes\br::createspawnlocation( ( 23000, -15000, -158 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( 36200, -26500, -507 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( 51000, -39000, 1401 ), 0, 4000 ), scripts\mp\gametypes\br::createspawnlocation( ( 50000, -17000, -295 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( 50200, 3500, 86 ), 0, 5500 ), scripts\mp\gametypes\br::createspawnlocation( ( 32000, 40000, 767 ), 0, 5500 ), scripts\mp\gametypes\br::createspawnlocation( ( 6000, 51000, 1094 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( -21500, 46200, -300 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( -14000, 7800, -334 ), 0, 5000 ), scripts\mp\gametypes\br::createspawnlocation( ( -19500, -30000, 152 ), 0, 6000 ), scripts\mp\gametypes\br::createspawnlocation( ( 8375, -11000, -222 ), 0, 5500 ) ];

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "rebirth" )
        level.checklinktotrain = [ scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -43389, -35126, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -51350, -9883, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -49326, 19017, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -46008, 40305, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -9603, -9603, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 20418, 64719, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 64203, 25677, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 69049, -7597, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 72505, -27299, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 50565, 54688, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -9102, -45164, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 15836, -46149, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 43170, -49075, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -38344, 71510, 500 ), 22000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -44534, 3871, 500 ), 12000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -26585, -36233, 500 ), 12000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 48891, 37864, 500 ), 12000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 59239, 12502, 500 ), 12000 ), scripts\mp\gametypes\br_circle::fntrapdeactivation( ( -3215, 61205, 1324 ), 12000 ) ];
    else
        level.checklinktotrain = [ scripts\mp\gametypes\br_circle::fntrapdeactivation( ( 27905.4, -34484.9, -360 ), 3300 ) ];
}

strict_ff_enable()
{
    if ( !scripts\mp\gametypes\br::seq3_cleanup_leftovers() )
        return;

    if ( scripts\mp\utility\game::missions_clearinappropriaterewards() == "mini" )
    {
        level.br_level.br_circleradii = [ 57000, 27500, 12500, 6500, 3000, 1250, 0 ];
        level.br_level.br_circleclosetimes = [ 1, 190, 120, 80, 40, 90 ];
        level.br_level.br_circledelaytimes = [ 1, 110, 65, 50, 35, 0 ];
    }
    else
    {
        level.br_level.br_circleradii = [ 81000, 50000, 30000, 15000, 7500, 3750, 1500, 0 ];
        level.br_level.br_circleclosetimes = [ 270, 180, 150, 60, 60, 45, 90 ];
        level.br_level.br_circledelaytimes = [ 210, 60, 60, 60, 45, 30, 0 ];
    }

    scripts\mp\gametypes\br_circle::bombs_setup();
}

runmisteffects()
{
    level.nummistclusters = getdvarint( "scr_mist_cluster_num", 13 );

    if ( level.nummistclusters <= 0 )
        return;

    var_0 = [];
    var_0[0] = ( -17431, 26586, 500 );
    var_0[1] = ( -22668, 36629, 2600 );
    var_0[2] = ( -38816, 50972, 7200 );
    var_0[3] = ( -18276, 45104, 4285 );
    var_0[4] = ( 5900, 26084, 790 );
    var_0[5] = ( -41485, 338, 2100 );
    var_0[6] = ( 22452, -27194, 1500 );
    var_0[7] = ( 5050, 31027, 1300 );
    var_0[8] = ( -39730, 12701, 3115 );
    var_0[9] = ( 50871, -47452, 400 );
    var_0[10] = ( 57555, 3350, 1000 );
    var_0[11] = ( -3316, 30454, 3000 );
    var_0[12] = ( -48791, 46074, 11207 );
    var_0[13] = ( 100, 23546, 1800 );
    var_0[14] = ( -9558, -13090, 1100 );
    var_0[15] = ( 20953, 12360, 1800 );
    var_0[16] = ( 12220, 20486, 1600 );
    var_0[17] = ( -28397, -23638, 860 );
    var_0[18] = ( -31228, -52488, 1600 );
    var_0[19] = ( 5491, -41903, 800 );
    var_0[20] = ( 21263, -43266, 500 );
    var_0[21] = ( 34000, -45441, 100 );
    var_0[22] = ( 54616, -31712, 900 );
    var_0[23] = ( 34600, 7013, 1300 );
    var_0[24] = ( 57412, 29600, 4200 );
    var_0[25] = ( 11766, 45690, 2147 );
    var_0[26] = ( -4331, 40541, 2400 );
    var_0[27] = ( 34702, 18568, 1100 );
    var_0[28] = ( 5851, -14938, 1100 );
    var_0[29] = ( -14690, -26183, 400 );
    var_0[30] = ( -18244, -46482, 400 );
    var_0[31] = ( -39043, -25359, 400 );
    var_0[32] = ( 54615, 15943, 2500 );

    if ( level.nummistclusters > var_0.size )
        level.nummistclusters = var_0.size;

    level waittill( "prematch_started" );
    var_0 = scripts\engine\utility::array_randomize( var_0 );

    for ( var_1 = 0; var_1 < level.nummistclusters; var_1++ )
    {
        var_2 = var_0[var_1];
        playfx( scripts\engine\utility::getfx( "vfx_br_distant_fog_main" ), var_2 );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 0, 90 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        playfx( scripts\engine\utility::getfx( "vfx_br_distant_fog_main" ), var_3 );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 90, 180 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        playfx( scripts\engine\utility::getfx( "vfx_br_distant_fog_main" ), var_3 );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 180, 270 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        playfx( scripts\engine\utility::getfx( "vfx_br_distant_fog_main" ), var_3 );
        var_3 = rotatepointaroundvector( ( 0, 0, 1 ), ( 1, 0, 0 ), randomfloatrange( 270, 359 ) );
        var_3 = var_3 * randomfloatrange( 2048, 9000 ) + var_2 + ( 0, 0, randomfloatrange( -500, 500 ) );
        playfx( scripts\engine\utility::getfx( "vfx_br_distant_fog_main" ), var_3 );
        waitframe();
    }
}

playerzombiepingoutofgas()
{
    var_0 = "start_attackers";
    var_1 = "start_defenders";
    var_2 = "normal";
    var_3 = "fallback";
    level.spawnmins = ( 0, 0, 0 );
    level.spawnmaxs = ( 0, 0, 0 );

    if ( isdefined( scripts\cp_mp\utility\game_utility::getlocaleid() ) )
        scripts\mp\spawnlogic::setactivespawnlogic( "BigTDM", "Crit_Frontline" );
    else
        scripts\mp\spawnlogic::setactivespawnlogic( "Default", "Crit_Frontline" );

    scripts\mp\spawnlogic::addspawnpoints( game["attackers"], "mp_tdm_spawn_allies_start" );
    scripts\mp\spawnlogic::addspawnpoints( game["defenders"], "mp_tdm_spawn_axis_start" );
    var_4 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_allies_start" );
    var_5 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::registerspawnset( var_0, var_4 );
    scripts\mp\spawnlogic::registerspawnset( var_1, var_5 );
    scripts\mp\spawnlogic::addspawnpoints( "allies", "mp_tdm_spawn_allies_start" );
    scripts\mp\spawnlogic::addspawnpoints( "axis", "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::addspawnpoints( "allies", "mp_tdm_spawn_allies_start", 1, 1 );
    scripts\mp\spawnlogic::addspawnpoints( "axis", "mp_tdm_spawn_axis_start", 1, 1 );
    var_6 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_allies_start" );
    var_7 = scripts\mp\spawnlogic::getspawnpointarray( "mp_tdm_spawn_axis_start" );
    scripts\mp\spawnlogic::registerspawnset( var_2, var_6 );
    scripts\mp\spawnlogic::registerspawnset( var_3, var_7 );

    if ( istrue( level.testtdmanywhere ) )
    {
        var_8 = getdvarfloat( "scr_tdmAnywhere_centerX", randomfloatrange( -4096, 4096 ) );
        var_9 = getdvarfloat( "scr_tdmAnywhere_centerY", randomfloatrange( -4096, 4096 ) );
        var_10 = getdvarfloat( "scr_tdmAnywhere_centerZ", randomfloatrange( 0, 512 ) );
        level.mapcenter = ( var_8, var_9, var_10 );
        scripts\mp\gametypes\war::tdmanywhere_debugshowlocs();
    }
    else
    {
        level.mapcenter = scripts\mp\spawnlogic::findboxcenter( level.spawnmins, level.spawnmaxs );
        setmapcenter( level.mapcenter );
    }
}

givepointsandxp()
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    if ( getdvarint( "scr_br_hide_fx_names", 0 ) != 0 )
        return;

    level waittill( "prematch_started" );

    while ( !isdefined( level.br_ac130 ) )
        wait 0.1;

    var_0 = level.br_ac130.angles;
    var_0 = var_0 + ( 0, -90, 0 );
    level.spawn_router_model = [];
    first_pressure_switch_triggered( "storagetown", ( -25750.9, 7713.93, 2440 ), var_0 );
    first_pressure_switch_triggered( "downtown", ( 23729.8, -15561.2, 2983.93 ), var_0 );
    first_pressure_switch_triggered( "farms", ( 47122.4, -11951.5, 3332.43 ), var_0 );
    first_pressure_switch_triggered( "lumber", ( 51383, 2863.92, 2534.51 ), var_0 );
    first_pressure_switch_triggered( "stadium", ( 28653.2, 2390.3, 2503.23 ), var_0 );
    first_pressure_switch_triggered( "prison", ( 51035.6, -39269.9, 3362.7 ), var_0 );
    first_pressure_switch_triggered( "port", ( 35574.6, -27004.9, 2434.4 ), var_0 );
    first_pressure_switch_triggered( "park", ( 20891.3, -29479.6, 2705.89 ), var_0 );
    first_pressure_switch_triggered( "promeast", ( 77.7617, -22879.3, 2409.92 ), var_0 );
    first_pressure_switch_triggered( "hills", ( -8926.96, -34700.6, 2603.08 ), var_0 );
    first_pressure_switch_triggered( "promwest", ( -17947.5, -25194.3, 2294.96 ), var_0 );
    first_pressure_switch_triggered( "boneyard", ( -27014.4, -10119.8, 2179.3 ), var_0 );
    first_pressure_switch_triggered( "trainstation", ( -12943.7, -12405.6, 2359.09 ), var_0 );
    first_pressure_switch_triggered( "superstore", ( -12996.2, 7554.31, 2513.61 ), var_0 );
    first_pressure_switch_triggered( "airport", ( -16686.4, 23429.6, 2152 ), var_0 );
    first_pressure_switch_triggered( "tvstation", ( 15042.8, 18344.7, 2956 ), var_0 );
    first_pressure_switch_triggered( "saltmine", ( 34726.5, 44171.6, 5078.31 ), var_0 );
    first_pressure_switch_triggered( "milbase", ( 8205.67, 51550.9, 5727.58 ), var_0 );
    first_pressure_switch_triggered( "summit", ( -20798.9, 45678.7, 5740 ), var_0 );
    first_pressure_switch_triggered( "hospital", ( 7935.62, -11312.7, 2733.95 ), var_0 );
    first_pressure_switch_triggered( "array", ( 27380, 21335, 5987 ), var_0 );
    first_pressure_switch_triggered( "factory", ( -4301, 6129, 3288 ), var_0 );
    level thread getanglesfromsurfacenormal();
}

first_pressure_switch_triggered( var_0, var_1, var_2 )
{
    first_switch( var_0, var_1, var_2, "name_fx" );
}

first_switch( var_0, var_1, var_2, var_3 )
{
    var_1 = var_1 + ( 0, 0, 500 );
    var_4 = spawn( "script_model", var_1 );
    var_4 setmodel( "tag_origin_name_fx" );
    var_4.angles = var_2;
    level.spawn_router_model[level.spawn_router_model.size] = var_4;
    var_4 setscriptablepartstate( var_3, var_0 );
    var_4 forcenetfieldhighlod( 1 );
}

getanglesfromsurfacenormal()
{
    level thread oscope_sign();

    while ( isdefined( level.br_ac130 ) )
        wait 0.1;

    wait 90;
    level notify( "stop_fx_hide_func" );

    foreach ( var_1 in level.spawn_router_model )
        var_1 delete();
}

oscope_sign()
{
    level endon( "game_ended" );
    level endon( "stop_fx_hide_func" );
    var_0 = 10;
    var_1 = 0.25;

    while ( level.spawn_router_model.size > 0 )
    {
        var_2 = level.players;

        for ( var_3 = 0; var_3 < var_2.size; var_3++ )
        {
            var_4 = var_2[var_3];

            if ( isdefined( var_4 ) && isalive( var_4 ) )
            {
                if ( isdefined( var_4.vehicle ) )
                {
                    for ( var_5 = 0; var_5 < level.spawn_router_model.size; var_5++ )
                        level.spawn_router_model[var_5] hidefromplayer( var_4 );
                }
            }

            if ( var_3 % var_0 == 0 )
                wait( var_1 );
        }

        wait 0.1;
    }
}

new_angles( var_0, var_1, var_2 )
{
    var_3 = spawn( "trigger_radius", var_0, 0, var_1, var_2 );

    for (;;)
    {
        var_3 waittill( "trigger", var_4 );

        if ( isplayer( var_4 ) )
            var_4 dodamage( 10000, var_4.origin, var_3, var_3, "MOD_TRIGGER_HURT" );
    }
}

isattachmentvariantlocked()
{

}

set_relic_laststand()
{
    level thread pavelow_boss_health_bar();
}

pavelow_boss_health_bar()
{
    level endon( "game_ended" );
    wait 5;
    var_0 = [ ( -10456, -10856, 24 ), ( -10040, -10560, 24 ), ( -10528, -10064, 24 ), ( -10768, -10216, 24 ) ];
    var_1 = 64;
    var_2 = [];

    foreach ( var_4 in var_0 )
    {
        var_5 = getentitylessscriptablearrayinradius( "scriptable_scriptable_door_glass_metal_01_mp_reinforced_glass", "classname", var_4, var_1 );

        if ( istrue( var_5.size ) )
            var_2 = scripts\engine\utility::array_combine( var_2, var_5 );
    }

    foreach ( var_8 in var_2 )
    {
        if ( var_8 scriptableisdoor() )
            var_8 scriptabledoorfreeze( 1 );
    }
}

playerpowerscleanup()
{
    if ( getdvarint( "scr_br_x2_anticipation", 0 ) == 1 )
        player_ammo_think();

    if ( getdvarint( "scr_br_x2_confirmation", 0 ) == 1 )
        player_equip_primary();

    if ( getdvarint( "scr_br_x2_hype", 0 ) == 1 )
        player_infil_already_played();
}

player_ammo_think()
{
    force_players_out_of_vehicle();
    flash_crate_spawn( ( -15748.1, 50345.5, 2721.82 ), ( 0, 251.97, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 5453.55, 51884.3, 1082.68 ), ( 0, 219.577, 0 ), "security_monitor_02_screens_static" );
    flash_crate_spawn( ( 36462.1, 28705.2, 403.859 ), ( 0, 318.836, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22464, 27284.3, 1256.24 ), ( 5.99934, 270, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22464, 27284.3, 1292.24 ), ( 6, 270, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22517.7, 27338, 1292.24 ), ( 6, 180, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22517.7, 27338, 1256.24 ), ( 6, 180, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22464, 27391.7, 1292.24 ), ( 6, 90, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22464, 27391.7, 1256.24 ), ( 6, 90, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22410.3, 27338, 1292.24 ), ( 6, 360, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -22410.3, 27338, 1256.24 ), ( 6, 360, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -2434.59, 5819.56, -131.485 ), ( 0, 50.2947, 0 ), "security_monitor_02_screens_static" );
    flash_crate_spawn( ( 21004.6, 10626.4, -396.812 ), ( 0, 255.4, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 22835.3, 23828.5, 1455.78 ), ( 0, 88.8682, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 26808, 222.149, -76 ), ( 0, 237.24, 0 ), "security_monitor_02_screens_static" );
    flash_crate_spawn( ( 55339.9, 8531.06, 214.001 ), ( 0, 273.179, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 47483.8, -15728.3, -92.778 ), ( 0, 244.613, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -27212, -2392, -212 ), ( 0, 188.355, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 9133.21, -22720.2, -184 ), ( 0, 314.975, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( -24352.2, -27128.9, -60.5 ), ( 0, 128.229, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 31013.1, -17478.8, -302 ), ( 0, 175.148, 0 ), "security_monitor_02_screens_static" );
    flash_crate_spawn( ( -2547.07, -30876, 327.25 ), ( 0, 295.438, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 17826.2, -34952.3, 360.488 ), ( 0, 178.494, 0 ), "equipment_tv_01_screen_static" );
    flash_crate_spawn( ( 50678.6, -33522.7, 1361.62 ), ( 0, 276.112, 0 ), "equipment_tv_01_screen_static" );
}

player_equip_primary()
{
    flash_crate_spawn( ( 46629.8, 19637.6, -274.5 ), ( 359, 25, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 16575.8, -23575, -138.75 ), ( 1, 270, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -6656, 20053.3, -254.25 ), ( 0, 90, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -18670, -22431.3, -157.5 ), ( 1, 33, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 22703.5, -2495.25, -441 ), ( 0, 135, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -12058.5, 3220.75, -262.75 ), ( 0, 360, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 8400.25, -9887.75, -216.25 ), ( 0, 90, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -21284.8, 1302.5, -246.75 ), ( 1, 90, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -33174, 32788.3, 809.75 ), ( 0, 75, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 1511.5, -29223.8, 108 ), ( 0, 360, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 37776, -14250.3, -482.25 ), ( 1, 270, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 9573.5, 14075.3, -256.75 ), ( 359, 105, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 13972.8, 32893.3, 1512.75 ), ( 1, 45, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -3214.25, 57176.3, 685.5 ), ( 0, 180, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( -28781.5, 46365, 2753.5 ), ( 360, 300, 90 ), "ee_poster_x2_01" );
    flash_crate_spawn( ( 51373.4, -37102.2, 2212.16 ), ( 360, 274, 0 ), "ee_schem_x2_01" );
    flash_crate_spawn( ( 3584.4, 48460.4, 1222.33 ), ( 3, 44.95, 90 ), "ee_schem_x2_01" );
    flash_crate_spawn( ( -26777.2, 52602, 2339.41 ), ( 358, 135, 90 ), "ee_schem_x2_01" );
    flash_crate_spawn( ( -28386, -17392.3, 11.25 ), ( 1, 0, 90 ), "ee_schem_x2_01" );
    flash_crate_spawn( ( -38542.3, -2171.25, -86 ), ( 357, 180, 90 ), "ee_schem_x2_01" );
}

player_infil_already_played()
{
    flash_crate_spawn( ( -4352, 5146.5, -118.75 ), ( 359, 0, 90 ), "ee_schem_x2_02" );
    flash_crate_spawn( ( -23358, 26407.5, -295.25 ), ( 0, 328, 0 ), "ee_schem_x2_02" );
    flash_crate_spawn( ( 26959.8, 20381.8, 1378.75 ), ( 0, 160, 0 ), "ee_schem_x2_02" );
    flash_crate_spawn( ( 45752.8, 17388.5, -288.5 ), ( 1, 205, 90 ), "ee_schem_x2_02" );
    flash_crate_spawn( ( 15990, -34535.6, 386 ), ( 359, 151.417, 90 ), "ee_schem_x2_02" );
}

flash_crate_spawn( var_0, var_1, var_2 )
{
    var_3 = spawn( "script_model", var_0 );
    var_3.angles = var_1;
    var_3 setmodel( var_2 );
}

_id_122FA( var_0, var_1, var_2 )
{
    var_3 = spawn( "script_model", var_0 );
    var_3.angles = var_1;
    var_3 setmodel( "ee_sign_train_station_schedule_board_x2_0_" + var_2 );
}

force_players_out_of_vehicle()
{
    _id_122FA( ( -14320.5, -15298.5, 40 ), ( 0, 304.999, 0 ), 90 );
    _id_122FA( ( -10646.5, -13192.3, -28 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -10545.5, -13336.5, -28 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -10444.3, -13481, -28 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -9918.25, -12893.3, -143 ), ( 0, 35, 0 ), 45 );
    _id_122FA( ( -9675, -12722.9, -143 ), ( 0, 215, 0 ), 45 );
    _id_122FA( ( -8866.5, -11567.8, 97.5 ), ( 0, 304.999, 0 ), 40 );
    _id_122FA( ( -9886.25, -11237.3, 118 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -10254, -10712.3, 118 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -10564.5, -10268.8, 118 ), ( 0, 215, 0 ), 50 );
    _id_122FA( ( -9875.75, -11231.5, 118 ), ( 0, 35, 0 ), 50 );
    _id_122FA( ( -10242.5, -10707.8, 118 ), ( 0, 35, 0 ), 50 );
    _id_122FA( ( -10554.5, -10261.5, 118 ), ( 0, 35, 0 ), 50 );
    _id_122FA( ( -7566.25, -11419.5, -202 ), ( 0, 214.959, 0 ), 50 );
    _id_122FA( ( -7553.25, -11417.3, -202 ), ( 0, 34.759, 0 ), 50 );
    _id_122FA( ( -7284.5, -11222, -202 ), ( 0, 214.999, 0 ), 50 );
    _id_122FA( ( -7271.5, -11219.8, -202 ), ( 0, 34.759, 0 ), 50 );
}
