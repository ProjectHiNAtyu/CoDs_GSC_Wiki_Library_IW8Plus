// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _dangercircledurationforplayer::get_recent_spawn_time_threshold();
    level.music_style = "middle_east";
    scripts\mp\maps\mp_aniyah\mp_aniyah_precache::main();
    scripts\mp\maps\mp_aniyah\gen\mp_aniyah_art::main();
    scripts\mp\maps\mp_aniyah\mp_aniyah_fx::main();
    scripts\mp\maps\mp_aniyah\mp_aniyah_lighting::main();
    scripts\mp\load::main();
    var_0 = scripts\mp\utility\game::getgametype();

    if ( scripts\mp\utility\game::getgametype() == "arm" || scripts\mp\utility\game::getgametype() == "infect" )
    {
        if ( !isdefined( level.localeid ) )
            setdvar( "scr_localeID", 17 );
    }
    else if ( var_0 == "dom" )
        setdvar( "scr_localeID", 0 );

    getscriptablelootspawnedcountbyname( 400, 1200 );
    scripts\mp\compass::setupminimap( "compass_map_mp_aniyah", "codcaster_compass_map_mp_aniyah" );
    level thread scripts\engine\scriptable_door::system_init();
    setdvar( "PKKMTTRQO", 3 );
    setdvar( "LRKPOKNKRM", 0 );
    setdvar( "NOSQLKNSQO", 45 );
    setdvar( "MMNMQTSOSP", 0 );
    setdvar( "NSSMQLPRNT", 0.01 );
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "desert";
    game["axis_outfit"] = "desert";
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    thread failsecretstashquest();
    thread deleteinfilclip();
    level thread isattachmentvariantlocked();
    level thread _id_11D0B();
    level thread _id_12308();
    level thread teamsplashbr();
}

failsecretstashquest()
{
    var_0 = spawn( "script_model", ( 6022.96, -1678.46, 260 ) );
    var_0.angles = ( 0, 280.098, 0 );
    var_0 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_1 = spawn( "script_model", ( 5644.9, -1745.78, 260 ) );
    var_1.angles = ( 0, 190.098, 0 );
    var_1 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_2 = spawn( "script_model", ( 5966.85, -1363.41, 260 ) );
    var_2.angles = ( 0, 10.098, 0 );
    var_2 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_3 = spawn( "script_model", ( 5588.8, -1430.74, 260 ) );
    var_3.angles = ( 0, 100.098, 0 );
    var_3 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_4 = spawn( "script_model", ( -605.51, 472.007, 314 ) );
    var_4.angles = ( 0, 80.0989, 0 );
    var_4 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_5 = spawn( "script_model", ( -227.229, 405.979, 314 ) );
    var_5.angles = ( 0, 350.099, 0 );
    var_5 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_6 = spawn( "script_model", ( -660.533, 156.772, 314 ) );
    var_6.angles = ( 0, 170.099, 0 );
    var_6 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_7 = spawn( "script_model", ( -282.252, 90.7446, 314 ) );
    var_7.angles = ( 0, 260.099, 0 );
    var_7 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_8 = spawn( "script_model", ( -2146.45, 101.041, 328 ) );
    var_8.angles = ( 0, 190.1, 0 );
    var_8 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_9 = spawn( "script_model", ( -2051.81, -256.525, 338 ) );
    var_9.angles = ( 0, 70.0987, 0 );
    var_9 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_10 = spawn( "script_model", ( -1881.63, -726.52, 338 ) );
    var_10.angles = ( 0, 250.099, 0 );
    var_10 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_11 = spawn( "script_model", ( -1750.92, -365.452, 338 ) );
    var_11.angles = ( 0, 340.099, 0 );
    var_11 setmodel( "building_wall_corner_brick_01_144_coverup" );
    var_12 = spawn( "script_model", ( -1353.8, 2143.24, 352 ) );
    var_12.angles = ( 0, 285, 0 );
    var_12 setmodel( "building_wall_corner_brick_01_128_coverup" );
    var_13 = spawn( "script_model", ( -3252.33, -1933.49, 284.5 ) );
    var_13.angles = ( 0, 270, 0 );
    var_13 setmodel( "building_wall_corner_brick_01_128_coverup" );
}

deleteinfilclip()
{
    level waittill( "prematch_countdown" );
    var_0 = getent( "infil_clip", "targetname" );
    var_0 moveto( var_0.origin + ( 0, 0, -8 ), 30, 10, 10 );
    wait 30;
    var_0 hide();
    var_0 notsolid();
}

isattachmentvariantlocked()
{
    var_0 = getent( "clip64x64x64", "targetname" );
    var_1 = spawn( "script_model", ( 2946, 854, 402 ) );
    var_1.angles = ( 0, 325, 0 );
    var_1 clonebrushmodeltoscriptmodel( var_0 );
    var_2 = getent( "clip64x64x64", "targetname" );
    var_3 = spawn( "script_model", ( 2955, 866, 401 ) );
    var_3.angles = ( 0, 325, 0 );
    var_3 clonebrushmodeltoscriptmodel( var_2 );
    var_4 = getent( "player256x256x8", "targetname" );
    var_5 = spawn( "script_model", ( 724, -815, 740 ) );
    var_5.angles = ( 90, 270, 0 );
    var_5 clonebrushmodeltoscriptmodel( var_4 );
    var_6 = getent( "player256x256x8", "targetname" );
    var_7 = spawn( "script_model", ( 716, 816, 748 ) );
    var_7.angles = ( 90, 270, 0 );
    var_7 clonebrushmodeltoscriptmodel( var_6 );
    var_8 = getent( "clip32x32x256", "targetname" );
    var_9 = spawn( "script_model", ( 2658, -675, 188 ) );
    var_9.angles = ( 0, 0, 0 );
    var_9 clonebrushmodeltoscriptmodel( var_8 );
    var_10 = getent( "clip512x512x8", "targetname" );
    var_11 = spawn( "script_model", ( 10071, 1247, 102 ) );
    var_11.angles = ( 270, 0, 0 );
    var_11 clonebrushmodeltoscriptmodel( var_10 );
    var_12 = getent( "nosight128x128x8", "targetname" );
    var_13 = spawn( "script_model", ( -4738, -326, 364 ) );
    var_13.angles = ( 270, 164, 176 );
    var_13 clonebrushmodeltoscriptmodel( var_12 );
    var_14 = getent( "clip64x64x64", "targetname" );
    var_15 = spawn( "script_model", ( 6412, -1156, 340 ) );
    var_15.angles = ( 0, 25, 0 );
    var_15 clonebrushmodeltoscriptmodel( var_14 );
    var_16 = getent( "clip64x64x64", "targetname" );
    var_17 = spawn( "script_model", ( 6472, -1128, 340 ) );
    var_17.angles = ( 0, 25, 0 );
    var_17 clonebrushmodeltoscriptmodel( var_16 );
    var_18 = getent( "clip32x32x32", "targetname" );
    var_19 = spawn( "script_model", ( -4367, -112, 347 ) );
    var_19.angles = ( 0, 335, 0 );
    var_19 clonebrushmodeltoscriptmodel( var_18 );
    var_20 = getent( "player32x32x256", "targetname" );
    var_21 = spawn( "script_model", ( 1652, -706, 604 ) );
    var_21.angles = ( 0, 0, 0 );
    var_21 clonebrushmodeltoscriptmodel( var_20 );
    var_22 = getent( "player32x32x256", "targetname" );
    var_23 = spawn( "script_model", ( 1918, 106, 626 ) );
    var_23.angles = ( 0, 0, 0 );
    var_23 clonebrushmodeltoscriptmodel( var_22 );
    var_24 = getent( "player256x256x8", "targetname" );
    var_25 = spawn( "script_model", ( 1670, -267, 458.5 ) );
    var_25.angles = ( 270, 0, 0 );
    var_25 clonebrushmodeltoscriptmodel( var_24 );
    var_26 = getent( "clip64x64x64", "targetname" );
    var_27 = spawn( "script_model", ( 6350, -1276, 234 ) );
    var_27.angles = ( 353, 344, 0 );
    var_27 clonebrushmodeltoscriptmodel( var_26 );
    var_28 = getent( "clip64x64x64", "targetname" );
    var_29 = spawn( "script_model", ( 6416, -1296, 248 ) );
    var_29.angles = ( 0, 344, 0 );
    var_29 clonebrushmodeltoscriptmodel( var_28 );
    var_30 = getent( "clip64x64x64", "targetname" );
    var_31 = spawn( "script_model", ( 6482, -1320, 230 ) );
    var_31.angles = ( 0, 342, 0 );
    var_31 clonebrushmodeltoscriptmodel( var_30 );
}

_id_11D0B()
{
    var_0 = [];

    switch ( scripts\mp\utility\game::getgametype() )
    {
        case "arm":
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( -940, 1828, 292 ), ( 0, 9.999, 0 ), "gw_fob_02_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( -647.569, 1606.59, 296 ), ( 0, 24.999, 0 ), "gw_fob_02_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( -852, 1220, 297.978 ), ( 0, 34.999, 0 ), "gw_fob_02_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 1951.16, 1587.07, 338 ), ( 0, 165, 0 ), "gw_fob_02_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 2376.06, 2046.75, 395.222 ), ( 0, 175, 0 ), "gw_fob_02_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 2519.16, 679.07, 426 ), ( 0, 150, 0 ), "gw_fob_02_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 2853.08, 1508.06, 393.357 ), ( 0, 22, 0 ), "gw_fob_04_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 2412.81, 2991.28, 282.907 ), ( 0, 342, 0 ), "gw_fob_04_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 2560.06, 3678.92, 269.357 ), ( 0, 297, 0 ), "gw_fob_04_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 4260, 2520, 488 ), ( 0, 242, 0 ), "gw_fob_04_safe_allies", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 6207.48, 1780.58, 268.711 ), ( 0, 198, 0 ), "gw_fob_04_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 5592.04, 1076.78, 268.711 ), ( 0, 97.9995, 0 ), "gw_fob_04_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 5956.4, 452.78, 277.464 ), ( 0, 118, 0 ), "gw_fob_04_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 4248, 2528, 488 ), ( 0, 243, 0 ), "gw_fob_04_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 4641.39, 968.198, 404.317 ), ( 0, 245, 0 ), "gw_fob_03_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 5360, 384, 408 ), ( 0, 180, 0 ), "gw_fob_03_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 5392, -168, 412 ), ( 0, 180, 0 ), "gw_fob_03_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 4892, -608, 414.2 ), ( 0, 180, 0 ), "gw_fob_03_safe_axis", "locale_17" );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn", ( 4244, -1092, 402.529 ), ( 0, 135, 0 ), "gw_fob_03_safe_axis", "locale_17" );
            break;
        case "war":
            level.modifiedspawnpoints["-3256 2796"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-3637 2049"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-2672 1464"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-3328 996"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-3956 797"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-4724 -26"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-4092 981"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["-3768 1116"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["8468 1500"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["8608 640"]["mp_tdm_spawn"]["remove"] = 1;
            level.modifiedspawnpoints["9452 252"]["mp_tdm_spawn"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -3256, 2796, 264 ), ( 0, 19, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -3637, 2049, 306 ), ( 0, 345, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -2672, 1464, 342 ), ( 0, 0, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -3328, 996, 322 ), ( 0, 356, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -3956, 797, 276 ), ( 0, 358, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -4724, -26, 300 ), ( 0, 343, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -4092, 981, 305 ), ( 0, 343, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( -3768, 1116, 322 ), ( 0, 356, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( 8468, 1500, 288 ), ( 0, 212, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( 8608, 640, 318 ), ( 0, 212, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_secondary", ( 9452, 252, 293 ), ( 0, 212, 0 ) );
            break;
    }

    if ( var_0.size > 0 )
        scripts\mp\spawnlogic::amped_wid( var_0 );
}

_id_12308()
{
    var_0 = spawn( "trigger_radius", ( -2010, 1930, 430 ), 0, 192, 100 );
    var_0 thread _id_12F6A();
}

_id_12F6A()
{
    for (;;)
    {
        self waittill( "trigger", var_0 );

        if ( !isdefined( self.vehicle_collision_dvarinit ) )
            self.vehicle_collision_dvarinit = [];

        if ( scripts\engine\utility::array_contains( self.vehicle_collision_dvarinit, var_0.guid ) )
            continue;

        self.vehicle_collision_dvarinit = scripts\engine\utility::array_add( self.vehicle_collision_dvarinit, var_0.guid );
        var_0 thread _id_12F15( self );
    }
}

_id_12F15( var_0 )
{
    self endon( "death_or_disconnect" );
    var_1 = self.team;
    var_2 = self.guid;
    var_3 = [];
    var_4 = spawnstruct();
    var_4.origin = ( -2271, 3199, 220 );
    var_4.radius = 512;
    var_3[var_3.size] = var_4;
    var_5 = [];

    foreach ( var_7 in var_3 )
        var_5[var_5.size] = scripts\mp\spawnlogic::addspawndangerzone( var_7.origin, var_7.radius, 200, var_1, undefined, self, 0, self, 1 );

    while ( isdefined( self ) && self istouching( var_0 ) )
        waitframe();

    foreach ( var_10 in var_5 )
        scripts\mp\spawnlogic::removespawndangerzone( var_10 );

    var_0.vehicle_collision_dvarinit = scripts\engine\utility::array_remove( var_0.vehicle_collision_dvarinit, var_2 );
}

teamsplashbr()
{
    if ( !isdefined( level.outofboundstriggers ) )
        level.outofboundstriggers = [];

    var_0 = ( 6426, -1140, 400 );
    var_1 = spawn( "trigger_radius", var_0, 0, 100, 128 );
    level.outofboundstriggers[level.outofboundstriggers.size] = var_1;
}
