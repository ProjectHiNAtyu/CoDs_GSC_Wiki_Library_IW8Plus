// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _calloutmarkerping_predicted_listenfornotifies::get_recent_spawn_time_threshold();
    scripts\mp\maps\mp_backlot2\mp_backlot2_precache::main();
    scripts\mp\maps\mp_backlot2\gen\mp_backlot2_art::main();
    scripts\mp\maps\mp_backlot2\mp_backlot2_fx::main();
    scripts\mp\maps\mp_backlot2\mp_backlot2_lighting::main();
    scripts\mp\load::main();
    level thread scripts\engine\scriptable_door::system_init();
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    scripts\mp\compass::setupminimap( "compass_map_mp_backlot2", "codcaster_compass_map_mp_backlot2" );
    level.kill_border_triggers = getentarray( "kill_border_trigger", "targetname" );
    setdvar( "NKLMONNPNN", 512 );
    setdvar( "PKKMTTRQO", 8 );
    setdvar( "NOSQLKNSQO", 30 );
    setdvar( "TSPOQPTMS", 256 );
    game["attackers"] = "allies";
    game["defenders"] = "axis";
    game["allies_outfit"] = "urban";
    game["axis_outfit"] = "woodland";
    var_0 = getent( "infil_van_col", "targetname" );

    if ( isdefined( var_0 ) )
    {
        var_0 hide();
        var_0 connectpaths();
    }

    level thread managegate();
    level thread spawnstaticvan();
    level.music_style = "middle_east";
    level _id_11A37();
    level ammorestock_disableusefortime();
    level thread isattachmentvariantlocked();
}

#using_animtree("script_model");

managegate()
{
    level waittill( "infil_setup_complete" );

    if ( !scripts\mp\flags::gameflag( "infil_will_run" ) )
        return;

    scripts\mp\flags::gameflagwait( "infil_started" );
    level.scr_animtree["gate_left"] = #animtree;
    level.scr_anim["gate_left"]["close"] = %mp_trainyard_gatel_close;
    level.scr_animname["gate_left"]["close"] = "mp_trainyard_gateL_close";
    level.scr_anim["gate_left"]["open"] = %mp_trainyard_gatel_open;
    level.scr_animname["gate_left"]["open"] = "mp_trainyard_gateL_open";
    level.scr_animtree["gate_right"] = #animtree;
    level.scr_anim["gate_right"]["close"] = %mp_trainyard_gater_close;
    level.scr_animname["gate_right"]["close"] = "mp_trainyard_gateR_close";
    level.scr_anim["gate_right"]["open"] = %mp_trainyard_gater_open;
    level.scr_animname["gate_right"]["open"] = "mp_trainyard_gateR_open";
    var_0 = getent( "infil_door_left", "targetname" );
    var_1 = getent( "infil_door_right", "targetname" );
    var_2 = getent( "infil_door_chain", "targetname" );
    var_0.animname = "gate_left";
    var_0 scripts\common\anim::setanimtree();
    var_1.animname = "gate_right";
    var_1 scripts\common\anim::setanimtree();
    var_0 thread scripts\common\anim::anim_single_solo( var_0, "open" );
    var_1 thread scripts\common\anim::anim_single_solo( var_1, "open" );
    var_2 hide();
    level waittill( "prematch_countdown" );
    var_0 thread scripts\common\anim::anim_single_solo( var_0, "close" );
    var_1 thread scripts\common\anim::anim_single_solo( var_1, "close" );
    var_3[0] = "_left";
    var_3[1] = "_right";
    var_4 = randomint( 2 );

    if ( var_4 > 1 )
        var_4 = 1;

    if ( var_3[var_4] == "_left" )
    {

    }
    else
    {

    }

    wait 1.0;
    var_2 show();
}

spawnstaticvan()
{
    level waittill( "infil_setup_complete" );

    if ( !scripts\cp_mp\utility\script_utility::issharedfuncdefined( "infil", "get_all_infils" ) )
        return;

    if ( !scripts\cp_mp\utility\script_utility::issharedfuncdefined( "infil", "spawnPersistentVan" ) )
        return;

    if ( !scripts\mp\flags::gameflag( "infil_will_run" ) )
    {
        foreach ( var_1 in [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "infil", "get_all_infils" ) ]]() )
        {
            if ( var_1.script_noteworthy != "infil_van_hackney" )
                continue;

            if ( var_1.name != "alpha" )
                continue;

            game["infil"]["types"]["infil_van_hackney"]["alpha"]["vehicleOrg"] = ( -128, 2241, 60 );
            game["infil"]["types"]["infil_van_hackney"]["alpha"]["vehicleAng"] = ( 0, 90, 0 );
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "infil", "spawnPersistentVan" ) ]]( "infil_van_hackney", "alpha" );
            break;
        }
    }
}

_id_11A37()
{
    level.modifiedspawnpoints["1896 624"]["mp_dm_spawn"]["remove"] = 1;
}

ammorestock_disableusefortime()
{
    var_0 = [];

    switch ( scripts\mp\utility\game::getgametype() )
    {
        case "dm":
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( -611, -2560, 73 ), ( 0, 60, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 1474, -2101, 64 ), ( 0, 135, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 456, -1486, 65 ), ( 0, 5, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( -488, -1336, 71 ), ( 0, 0, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( -1262, -746, 62.5 ), ( 0, 0, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 1910, -463, 64 ), ( 0, 180, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 1896, 672, 64 ), ( 0, 180, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 1274, 1640, 64 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 656, 1640, 64 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( 77, 2498, 62 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( -753.431, 2209.12, 60.5 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn_start", ( -1207.5, 1071, 60.5 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dm_spawn", ( 1897, 625, 96 ), ( 0, 180, 0 ) );
            break;
    }

    if ( var_0.size > 0 )
        scripts\mp\spawnlogic::amped_wid( var_0 );
}

isattachmentvariantlocked()
{
    var_0 = getent( "clip128x128x128", "targetname" );
    var_1 = spawn( "script_model", ( 289, 529, 309 ) );
    var_1.angles = ( 0, 0, 0 );
    var_1 clonebrushmodeltoscriptmodel( var_0 );
    var_2 = getent( "clip128x128x128", "targetname" );
    var_3 = spawn( "script_model", ( 289, 657, 309 ) );
    var_3.angles = ( 0, 0, 0 );
    var_3 clonebrushmodeltoscriptmodel( var_2 );
}
