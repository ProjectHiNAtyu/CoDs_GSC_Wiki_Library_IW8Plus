// IW8 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    _calloutmarkerping_predicted_log::get_recent_spawn_time_threshold();
    level.music_style = "middle_east";
    scripts\mp\maps\mp_crash2\mp_crash2_precache::main();
    scripts\mp\maps\mp_crash2\gen\mp_crash2_art::main();
    scripts\mp\maps\mp_crash2\mp_crash2_fx::main();
    scripts\mp\maps\mp_crash2\mp_crash2_lighting::main();
    scripts\mp\load::main();
    level.outofboundstriggers = getentarray( "OutOfBounds", "targetname" );
    scripts\mp\compass::setupminimap( "compass_map_mp_crash2", "codcaster_compass_map_mp_crash2" );
    setdvar( "MQPQKNPQOK", 3 );
    setdvar( "MRNRKKOPLN", 0.5 );
    setdvar( "OLSKLTPPMR", 0.5 );
    setdvar( "NKLMONNPNN", 512 );
    setdvar( "PKKMTTRQO", 3.5 );
    var_0 = scripts\mp\utility\game::getgametype();

    if ( var_0 == "sd" )
    {
        game["defenders"] = "allies";
        game["attackers"] = "axis";
    }
    else
    {
        game["attackers"] = "allies";
        game["defenders"] = "axis";
    }

    game["allies_outfit"] = "desert";
    game["axis_outfit"] = "desert";
    level thread spawnstaticvan();
    level thread _id_122CC();
    level thread isbestplayertime();
    level thread teamsplashbr();
    level thread ammorestock_disableusefortime();
}

spawnstaticvan()
{
    level waittill( "infil_setup_complete" );

    if ( !scripts\cp_mp\utility\script_utility::issharedfuncdefined( "infil", "get_all_infils" ) )
        return;

    if ( !scripts\cp_mp\utility\script_utility::issharedfuncdefined( "infil", "spawnPersistentVan" ) )
        return;

    if ( !scripts\mp\flags::gameflag( "infil_will_run" ) )
    {
        foreach ( var_1 in [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "infil", "get_all_infils" ) ]]() )
        {
            if ( var_1.script_noteworthy != "infil_van_hackney" )
                continue;

            if ( var_1.name != "alpha" )
                continue;

            game["infil"]["types"]["infil_van_hackney"]["alpha"]["vehicleOrg"] = ( 1250, -2338, 65 );
            game["infil"]["types"]["infil_van_hackney"]["alpha"]["vehicleAng"] = ( 0, 270, 0 );
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "infil", "spawnPersistentVan" ) ]]( "infil_van_hackney", "alpha" );
            var_2 = getentarrayinradius( "script_brushmodel", "classname", ( 1250, -2150, 75 ), 300 );

            if ( isdefined( var_2 ) )
                var_2[0].origin = var_2[0].origin + anglestoforward( ( 0, 90, 0 ) ) * -50;

            break;
        }
    }
}

_id_122CC()
{
    var_0 = spawn( "trigger_radius", ( -340, 655, 240 ), 0, 192, 100 );
    var_0 thread _id_12F6A( "alley" );
}

_id_12F6A( var_0 )
{
    for (;;)
    {
        self waittill( "trigger", var_1 );

        if ( !isplayer( var_1 ) )
            continue;

        if ( !isdefined( self.vehicle_collision_dvarinit ) )
            self.vehicle_collision_dvarinit = [];

        if ( scripts\engine\utility::array_contains( self.vehicle_collision_dvarinit, var_1.guid ) )
            continue;

        self.vehicle_collision_dvarinit = scripts\engine\utility::array_add( self.vehicle_collision_dvarinit, var_1.guid );

        switch ( var_0 )
        {
            case "alley":
                var_1 thread _id_12F0C( self );
                break;
        }
    }
}

_id_12F0C( var_0 )
{
    self endon( "death_or_disconnect" );
    var_1 = self.team;
    var_2 = self.guid;
    var_3 = [];
    var_4 = spawnstruct();
    var_4.origin = ( -370, -320, 100 );
    var_4.radius = 330;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -370, -700, 100 );
    var_4.radius = 330;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -370, -1000, 100 );
    var_4.radius = 330;
    var_3[var_3.size] = var_4;
    var_4 = spawnstruct();
    var_4.origin = ( -400, -1700, 60 );
    var_4.radius = 550;
    var_3[var_3.size] = var_4;
    var_5 = [];

    foreach ( var_7 in var_3 )
        var_5[var_5.size] = scripts\mp\spawnlogic::addspawndangerzone( var_7.origin, var_7.radius, 200, var_1, undefined, self, 0, self, 1 );

    while ( isdefined( self ) && self istouching( var_0 ) )
        waitframe();

    foreach ( var_10 in var_5 )
        scripts\mp\spawnlogic::removespawndangerzone( var_10 );

    var_0.vehicle_collision_dvarinit = scripts\engine\utility::array_remove( var_0.vehicle_collision_dvarinit, var_2 );
}

isbestplayertime()
{
    var_0 = getent( "clip256x256x256", "targetname" );
    var_1 = spawn( "script_model", ( -912, 2072, 520 ) );
    var_1.angles = ( 0, 0, 0 );
    var_1 clonebrushmodeltoscriptmodel( var_0 );
}

teamsplashbr()
{
    if ( !isdefined( level.outofboundstriggers ) )
        level.outofboundstriggers = [];

    var_0 = [ ( -912, 2072, 530 ) ];

    foreach ( var_2 in var_0 )
    {
        var_3 = spawn( "trigger_radius", var_2, 0, 400, 128 );
        level.outofboundstriggers[level.outofboundstriggers.size] = var_3;
    }
}

ammorestock_disableusefortime()
{
    var_0 = [];

    switch ( scripts\mp\utility\game::getgametype() )
    {
        case "tjugg":
        case "tdef":
        case "infect":
        case "grnd":
        case "grind":
        case "cranked":
        case "conf":
        case "war":
            level.modifiedspawnpoints["1184 -1832"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1232 -1808"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1896"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1896"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1960"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1960"]["mp_tdm_spawn_allies_start"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_tdm_spawn_allies_start", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            break;
        case "siege":
        case "dom":
            level.modifiedspawnpoints["1233 -1800"]["mp_dom_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1888"]["mp_dom_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1888"]["mp_dom_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1222 -1952"]["mp_dom_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1262 -1952"]["mp_dom_spawn_allies_start"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_dom_spawn_allies_start", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            break;
        case "hq":
        case "koth":
            level.modifiedspawnpoints["1232 -1800"]["mp_koth_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1888"]["mp_koth_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1888"]["mp_koth_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1952"]["mp_koth_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1952"]["mp_koth_spawn_allies_start"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_koth_spawn_allies_start", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            break;
        case "ctf":
            level.modifiedspawnpoints["1232 -1808"]["mp_ctf_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1896"]["mp_ctf_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1896"]["mp_ctf_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1960"]["mp_ctf_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1960"]["mp_ctf_spawn_allies_start"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_ctf_spawn_allies_start", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            break;
        case "rugby":
            level.modifiedspawnpoints["1232 -1800"]["mp_rugby_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1888"]["mp_rugby_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1888"]["mp_rugby_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1952"]["mp_rugby_spawn_allies_start"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1952"]["mp_rugby_spawn_allies_start"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_allies_start", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -155, 2200, 230 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -210, 2200, 230 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -265, 2200, 230 ), ( 0, 260, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -360, 2200, 240 ), ( 0, 260, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -160, 2300, 230 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -207, 2300, 230 ), ( 0, 265, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -248, 2300, 230 ), ( 0, 265, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -289, 2280, 230 ), ( 0, 265, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -383, 2235, 238 ), ( 0, 270, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_rugby_spawn_axis_start", ( -445, 2224, 243 ), ( 0, 276, 0 ) );
            break;
        case "cyber":
            level.modifiedspawnpoints["1224 -1896"]["mp_cyber_spawn_allies"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1896"]["mp_cyber_spawn_allies"]["remove"] = 1;
            level.modifiedspawnpoints["1224 -1960"]["mp_cyber_spawn_allies"]["remove"] = 1;
            level.modifiedspawnpoints["1264 -1960"]["mp_cyber_spawn_allies"]["remove"] = 1;
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1109, -1911, 80 ), ( 0, 22, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1115, -1966, 80 ), ( 0, 50, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1121, -2035, 80 ), ( 0, 70, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1349, -2069, 80 ), ( 0, 125, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1347, -2127, 80 ), ( 0, 110, 0 ) );
            var_0[var_0.size] = scripts\mp\spawnlogic::force_teleport_downedplayer( "mp_cyber_spawn_allies", ( 1347, -2185, 80 ), ( 0, 100, 0 ) );
            break;
    }

    if ( var_0.size > 0 )
        scripts\mp\spawnlogic::amped_wid( var_0 );
}
